-- ============================================================================
-- Migration: Rewrite QA scenario steps to tester-friendly Spanish
-- ============================================================================
-- Date: 2026-02-10
-- Description: Remove developer jargon (API endpoints, HTTP verbs, status codes)
--              from instruction and expectedOutcome fields in steps JSON.
--              Covers all 8 roles including docente (which has no seed file).
-- Affects: qa_scenarios.steps column ONLY
-- ============================================================================

BEGIN;

-- === ADMIN (129 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como admin.qa@fne.cl","expectedOutcome":"Se accede al dashboard del admin"},{"index":2,"instruction":"Verificar que el dashboard muestra métricas globales (todas las escuelas)","expectedOutcome":"Se muestran datos de todas las escuelas, no filtrados por escuela"},{"index":3,"instruction":"Verificar que no hay restricciones de alcance","expectedOutcome":"El alcance de reportes es global"}]'::jsonb WHERE name = 'CA-1: Admin ve el dashboard con datos globales' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Perfil","expectedOutcome":"La página de perfil carga correctamente"},{"index":2,"instruction":"Verificar que se muestran los datos del perfil","expectedOutcome":"Se muestra información personal del admin"}]'::jsonb WHERE name = 'CA-2: Admin ve su perfil' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Mi Aprendizaje","expectedOutcome":"La página Mi Aprendizaje carga correctamente"},{"index":2,"instruction":"Verificar que se muestran todos los cursos disponibles","expectedOutcome":"Se muestra la lista completa de cursos"}]'::jsonb WHERE name = 'CA-3: Admin accede a Mi Aprendizaje' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Creación de Curso","expectedOutcome":"La página de creación de curso carga correctamente"},{"index":2,"instruction":"Completar el formulario de nuevo curso con datos válidos","expectedOutcome":"El formulario acepta los datos"},{"index":3,"instruction":"Hacer clic en el botón Guardar con datos de nuevo curso","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":4,"instruction":"Verificar que el curso aparece en la lista de cursos","expectedOutcome":"El nuevo curso es visible"}]'::jsonb WHERE name = 'CA-4: Admin crea un nuevo curso' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Constructor de Curso/[courseId]/edit","expectedOutcome":"La página de edición carga correctamente"},{"index":2,"instruction":"Modificar datos del curso","expectedOutcome":"Los cambios se guardan exitosamente"},{"index":3,"instruction":"Verificar que los cambios se reflejan en el curso","expectedOutcome":"El curso muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-5: Admin edita un curso existente' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un curso para eliminar","expectedOutcome":"El curso es seleccionado"},{"index":2,"instruction":"Hacer clic en Eliminar y confirmar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que el curso ya no aparece en la lista","expectedOutcome":"El curso fue eliminado"}]'::jsonb WHERE name = 'CA-6: Admin elimina un curso' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Gestión de Usuarios","expectedOutcome":"La página de gestión de usuarios carga"},{"index":2,"instruction":"Hacer clic en crear nuevo usuario","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":4,"instruction":"Verificar que el usuario aparece en la lista","expectedOutcome":"El nuevo usuario es visible"}]'::jsonb WHERE name = 'CA-7: Admin crea un nuevo usuario' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un usuario para editar","expectedOutcome":"Se abre el formulario de edición"},{"index":2,"instruction":"Modificar datos del usuario y hacer clic en el botón Guardar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"El perfil muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-8: Admin edita el perfil de cualquier usuario' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un usuario para eliminar","expectedOutcome":"El usuario es seleccionado"},{"index":2,"instruction":"Hacer clic en Eliminar y confirmar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que el usuario ya no aparece","expectedOutcome":"El usuario fue eliminado"}]'::jsonb WHERE name = 'CA-9: Admin elimina un usuario' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un usuario para asignar rol","expectedOutcome":"El usuario es seleccionado"},{"index":2,"instruction":"Seleccionar un rol y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":3,"instruction":"Verificar que el rol fue asignado","expectedOutcome":"El usuario muestra el nuevo rol"}]'::jsonb WHERE name = 'CA-10: Admin asigna roles a usuarios' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Escuelas","expectedOutcome":"La página de escuelas carga"},{"index":2,"instruction":"Hacer clic en crear nueva escuela","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":4,"instruction":"Verificar que la escuela aparece en la lista","expectedOutcome":"La nueva escuela es visible"}]'::jsonb WHERE name = 'CA-11: Admin crea una nueva escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar una escuela para editar","expectedOutcome":"Se abre el formulario de edición"},{"index":2,"instruction":"Modificar datos y hacer clic en el botón Guardar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"La escuela muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-12: Admin edita una escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar una escuela para eliminar","expectedOutcome":"La escuela es seleccionada"},{"index":2,"instruction":"Hacer clic en Eliminar y confirmar","expectedOutcome":"Los datos se muestran correctamente o error si hay dependencias"},{"index":3,"instruction":"Verificar resultado","expectedOutcome":"Si no hay dependencias, la escuela fue eliminada"}]'::jsonb WHERE name = 'CA-13: Admin elimina una escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Gestión de Redes","expectedOutcome":"La página de redes carga"},{"index":2,"instruction":"Hacer clic en crear nueva red","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":4,"instruction":"Verificar que la red aparece en la lista","expectedOutcome":"La nueva red es visible"}]'::jsonb WHERE name = 'CA-14: Admin crea una red de colegios' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar una red","expectedOutcome":"La red es seleccionada"},{"index":2,"instruction":"Seleccionar escuelas para asignar y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":3,"instruction":"Verificar que las escuelas fueron asignadas","expectedOutcome":"Las escuelas aparecen en la red"}]'::jsonb WHERE name = 'CA-15: Admin asigna escuelas a una red' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"La página de evaluaciones carga"},{"index":2,"instruction":"Verificar que se muestran todas las plantillas","expectedOutcome":"Se ven plantillas de todas las escuelas"},{"index":3,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"Los datos se muestran correctamente con todas las plantillas"}]'::jsonb WHERE name = 'CA-16: Admin ve plantillas de evaluación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"En la página del Constructor de Evaluaciones, hacer clic en crear plantilla","expectedOutcome":"El formulario de creación se muestra"},{"index":2,"instruction":"Completar formulario y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":3,"instruction":"Verificar que la plantilla aparece en la lista","expectedOutcome":"La nueva plantilla es visible"}]'::jsonb WHERE name = 'CA-17: Admin crea plantilla de evaluación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar una plantilla para editar","expectedOutcome":"Se abre el editor de plantilla"},{"index":2,"instruction":"Modificar datos y hacer clic en el botón Guardar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"La plantilla muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-18: Admin edita plantilla de evaluación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar una plantilla para eliminar","expectedOutcome":"La plantilla es seleccionada"},{"index":2,"instruction":"Hacer clic en Eliminar y confirmar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que la plantilla ya no aparece","expectedOutcome":"La plantilla fue eliminada"}]'::jsonb WHERE name = 'CA-19: Admin elimina plantilla de evaluación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Revisión de Quizzes","expectedOutcome":"La página de revisión de quizzes carga"},{"index":2,"instruction":"Verificar que se muestran quizzes pendientes de todas las escuelas","expectedOutcome":"Se ven quizzes de todas las escuelas (alcance global)"}]'::jsonb WHERE name = 'CA-20: Admin accede a revisión de quizzes' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un quiz para calificar","expectedOutcome":"Se abre la interfaz de calificación"},{"index":2,"instruction":"Ingresar calificación y comentarios","expectedOutcome":"Los datos son aceptados"},{"index":3,"instruction":"Enviar calificación (allowedRoles incluye admin)","expectedOutcome":"La calificación se guarda exitosamente"}]'::jsonb WHERE name = 'CA-21: Admin califica un quiz abierto' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"La página de reportes carga"},{"index":2,"instruction":"Hacer clic en el botón Guardar sin filtros de escuela","expectedOutcome":"Los datos se muestran correctamente con datos de TODAS las escuelas"},{"index":3,"instruction":"Verificar que no hay filtro de escuela pre-aplicado","expectedOutcome":"El reporte muestra alcance global"}]'::jsonb WHERE name = 'CA-22: Admin ve reportes detallados con alcance global' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"Los datos se muestran correctamente"},{"index":2,"instruction":"Verificar que se retornan TODAS las escuelas sin filtro","expectedOutcome":"La lista de escuelas es completa (alcance global)"},{"index":3,"instruction":"Verificar que se retornan TODAS las generaciones y comunidades","expectedOutcome":"Las listas son completas sin restricción"}]'::jsonb WHERE name = 'CA-23: Admin ve opciones de filtro globales' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un usuario cualquiera","expectedOutcome":"El usuario es seleccionado"},{"index":2,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"Los datos se muestran correctamente con detalles completos"},{"index":3,"instruction":"Verificar que no hay restricción de acceso","expectedOutcome":"Se muestran todos los detalles del usuario"}]'::jsonb WHERE name = 'CA-24: Admin ve detalles de cualquier usuario' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Escuela/transversal-context?school_id=X (cualquier ID)","expectedOutcome":"La página carga exitosamente"},{"index":2,"instruction":"Verificar que se muestra el contexto de la escuela seleccionada","expectedOutcome":"El contexto transversal es visible"},{"index":3,"instruction":"Probar con otra escuela diferente","expectedOutcome":"Funciona sin restricción para cualquier escuela"}]'::jsonb WHERE name = 'CA-25: Admin ve Contexto Transversal de cualquier escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"En la página de Contexto Transversal de la escuela, modificar datos","expectedOutcome":"Los cambios son aceptados"},{"index":2,"instruction":"Hacer clic en el botón Guardar con school_id","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"El contexto muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-26: Admin edita Contexto Transversal de cualquier escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Escuela/migration-plan?school_id=X (cualquier ID)","expectedOutcome":"La página carga exitosamente"},{"index":2,"instruction":"Verificar que se muestra el plan de la escuela seleccionada","expectedOutcome":"El plan de migración es visible"}]'::jsonb WHERE name = 'CA-27: Admin ve Plan de Migración de cualquier escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"En la página del Plan de Migración, modificar datos del plan","expectedOutcome":"Los cambios son aceptados"},{"index":2,"instruction":"Hacer clic en el botón Guardar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"El plan muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-28: Admin edita Plan de Migración de cualquier escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Vista de Tareas","expectedOutcome":"La página de vista de tareas carga"},{"index":2,"instruction":"Verificar que se muestran tareas de todas las escuelas","expectedOutcome":"Se ven tareas grupales globalmente"}]'::jsonb WHERE name = 'CA-29: Admin ve vista de tareas grupales' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Noticias","expectedOutcome":"La página de noticias carga"},{"index":2,"instruction":"Hacer clic en crear nuevo artículo","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"},{"index":4,"instruction":"Verificar que el artículo aparece en la lista","expectedOutcome":"El nuevo artículo es visible"}]'::jsonb WHERE name = 'CA-30: Admin crea artículo de noticias' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar un artículo para editar","expectedOutcome":"Se abre el editor"},{"index":2,"instruction":"Modificar datos y hacer clic en el botón Guardar","expectedOutcome":"Los datos se muestran correctamente"},{"index":3,"instruction":"Verificar que los cambios se guardaron","expectedOutcome":"El artículo muestra los datos actualizados"}]'::jsonb WHERE name = 'CA-31: Admin edita artículo de noticias' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Eventos","expectedOutcome":"La página de eventos carga"},{"index":2,"instruction":"Hacer clic en crear nuevo evento","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y guardar","expectedOutcome":"El evento se crea exitosamente (RLS permite admin + community_manager)"}]'::jsonb WHERE name = 'CA-32: Admin crea evento' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Rutas de Aprendizaje/new","expectedOutcome":"La página de creación de ruta carga"},{"index":2,"instruction":"Completar formulario de nueva ruta","expectedOutcome":"El formulario acepta los datos"},{"index":3,"instruction":"Guardar la ruta","expectedOutcome":"La ruta se crea exitosamente"}]'::jsonb WHERE name = 'CA-33: Admin crea ruta de aprendizaje' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Rutas de Aprendizaje/[id]/assign","expectedOutcome":"La página de asignación carga"},{"index":2,"instruction":"Seleccionar usuarios y asignar la ruta","expectedOutcome":"La asignación se completa exitosamente"}]'::jsonb WHERE name = 'CA-34: Admin asigna ruta de aprendizaje' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Contratos","expectedOutcome":"La página de contratos carga"},{"index":2,"instruction":"Hacer clic en crear nuevo contrato","expectedOutcome":"El formulario de creación se muestra"},{"index":3,"instruction":"Completar formulario y guardar","expectedOutcome":"El contrato se crea exitosamente (RLS admin-only INSERT)"}]'::jsonb WHERE name = 'CA-35: Admin crea contrato' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Asignación de Consultores","expectedOutcome":"La página de asignaciones carga"},{"index":2,"instruction":"Seleccionar consultor y escuela","expectedOutcome":"La selección es aceptada"},{"index":3,"instruction":"Hacer clic en el botón Guardar","expectedOutcome":"Aparece un mensaje de éxito y el elemento se muestra en la lista"}]'::jsonb WHERE name = 'CA-36: Admin asigna consultor a escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Configuración","expectedOutcome":"La página de configuración carga (admin check en línea 82-97)"},{"index":2,"instruction":"Verificar que se muestran opciones de configuración","expectedOutcome":"Las opciones de configuración son visibles"}]'::jsonb WHERE name = 'CA-37: Admin accede a configuración del sistema' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Acceder a gestión de notificaciones","expectedOutcome":"La interfaz de gestión se muestra"},{"index":2,"instruction":"Hacer clic en el botón Guardar con datos de tipo","expectedOutcome":"Los datos se muestran correctamente"}]'::jsonb WHERE name = 'CA-38: Admin gestiona tipos de notificaciones' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Community/workspace","expectedOutcome":"El workspace carga sin restricción"},{"index":2,"instruction":"Verificar que admin bypassa requiresCommunity","expectedOutcome":"El acceso es permitido (hasCommunity=true en Sidebar línea -)"}]'::jsonb WHERE name = 'CA-39: Admin accede a Espacio Colaborativo' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Transformation/assessments","expectedOutcome":"La página de evaluaciones carga"},{"index":2,"instruction":"Verificar que se muestran evaluaciones de todas las escuelas","expectedOutcome":"Se ven evaluaciones globalmente"}]'::jsonb WHERE name = 'CA-40: Admin accede a evaluaciones de transformación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Mi Panel aparece en la barra lateral","expectedOutcome":"El elemento Mi Panel es visible (sin restricciones)"}]'::jsonb WHERE name = 'SV-1: Admin ve Mi Panel en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Mi Perfil aparece en la barra lateral","expectedOutcome":"El elemento Mi Perfil es visible (sin restricciones)"}]'::jsonb WHERE name = 'SV-2: Admin ve Mi Perfil en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Mi Aprendizaje aparece en la barra lateral","expectedOutcome":"El elemento Mi Aprendizaje es visible (sin restricciones)"}]'::jsonb WHERE name = 'SV-3: Admin ve Mi Aprendizaje (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Mi Aprendizaje","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Mis Cursos aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-4: Admin ve Mis Cursos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Mi Aprendizaje","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Mis Tareas aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-5: Admin ve Mis Tareas en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Feedback aparece en la barra lateral","expectedOutcome":"El elemento Feedback es visible (admin en restrictedRoles, Sidebar línea 720)"}]'::jsonb WHERE name = 'SV-6: Admin ve Feedback en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Revisión de Quizzes aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-7: Admin ve Revisión de Quizzes en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Cursos aparece en la barra lateral","expectedOutcome":"El elemento Cursos es visible (isAdmin=true, Sidebar línea 686)"}]'::jsonb WHERE name = 'SV-8: Admin ve Cursos (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Cursos","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Constructor de Cursos aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-9: Admin ve Constructor de Cursos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Cursos","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Próximos Cursos aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-10: Admin ve Próximos Cursos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Procesos de Cambio aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-11: Admin ve Procesos de Cambio (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Procesos de Cambio","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Constructor aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-12: Admin ve Constructor en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Procesos de Cambio","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Contexto Transversal aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-13: Admin ve Contexto Transversal en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Procesos de Cambio","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Plan de Migración aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-14: Admin ve Plan de Migración en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Noticias aparece en la barra lateral","expectedOutcome":"El elemento Noticias es visible (admin en restrictedRoles)"}]'::jsonb WHERE name = 'SV-15: Admin ve Noticias en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Eventos aparece en la barra lateral","expectedOutcome":"El elemento Eventos es visible (admin en restrictedRoles)"}]'::jsonb WHERE name = 'SV-16: Admin ve Eventos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Rutas de Aprendizaje aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-17: Admin ve Rutas de Aprendizaje en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Matriz de Asignaciones aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-18: Admin ve Matriz de Asignaciones en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Usuarios aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-19: Admin ve Usuarios en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Escuelas aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-20: Admin ve Escuelas en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Redes de Colegios aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-21: Admin ve Redes de Colegios en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Consultorías aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-22: Admin ve Consultorías (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Consultorías","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Asignación de Consultores aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-23: Admin ve Asignación de Consultores en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Consultorías","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Vista de Tareas aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-24: Admin ve Vista de Tareas en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Gestión aparece en la barra lateral","expectedOutcome":"El elemento es visible (admin en restrictedRoles)"}]'::jsonb WHERE name = 'SV-25: Admin ve Gestión (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Gestión","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Clientes aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-26: Admin ve Clientes en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Gestión","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Contratos aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-27: Admin ve Contratos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Gestión","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Propuestas Pasantías aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-28: Admin ve Propuestas Pasantías en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Gestión","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Rendición de Gastos aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-29: Admin ve Rendición de Gastos en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Gestión","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Soporte Técnico aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-30: Admin ve Soporte Técnico en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Reportes aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-31: Admin ve Reportes en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que QA Testing aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-32: Admin ve QA Testing (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Ejecutar Pruebas aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-33: Admin ve Ejecutar Pruebas en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Panel de QA aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-34: Admin ve Panel de QA en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Escenarios aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-35: Admin ve Escenarios en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Importar aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-36: Admin ve Importar en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Registro de Horas aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-37: Admin ve Registro de Horas en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú QA Testing","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Generador aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-38: Admin ve Generador en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Vías de Transformación aparece en la barra lateral","expectedOutcome":"El elemento es visible (adminOnly: true)"}]'::jsonb WHERE name = 'SV-39: Admin ve Vías de Transformación (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Vías de Transformación","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Mis Evaluaciones aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-40: Admin ve Mis Evaluaciones en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Vías de Transformación","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Contexto Transversal aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-41: Admin ve Contexto Transversal (Vías) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Vías de Transformación","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Panel de Resultados aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-42: Admin ve Panel de Resultados en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Vías de Transformación","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Todas las Evaluaciones aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-43: Admin ve Todas las Evaluaciones en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Espacio Colaborativo aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-44: Admin ve Espacio Colaborativo (parent) en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Espacio Colaborativo","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Vista General aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-45: Admin ve Vista General en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Expandir menú Espacio Colaborativo","expectedOutcome":"El menú se expande"},{"index":2,"instruction":"Verificar que Gestión Comunidades aparece","expectedOutcome":"El submenú es visible"}]'::jsonb WHERE name = 'SV-46: Admin ve Gestión Comunidades en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Configuración aparece en la barra lateral","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-47: Admin ve Configuración en sidebar' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Roles y Permisos NO aparece en sidebar","expectedOutcome":"El elemento NO es visible (superadminOnly bloquea, Sidebar línea 670-682)"},{"index":2,"instruction":"Verificar que feature flag FEATURE_SUPERADMIN_RBAC está revisado","expectedOutcome":"Solo visible si admin en superadmins Y flag enabled"}]'::jsonb WHERE name = 'SV-48: Admin NO ve Roles y Permisos si no es superadmin' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Revisar todos los items del sidebar","expectedOutcome":"24 items únicos de nivel superior: dashboard, profile, mi-aprendizaje, docente-assessments, quiz-reviews, courses, assessment-builder, news, events, learning-paths, assignment-matrix, users, schools, networks, consultants, gestion, reports, qa-testing, vias-transformacion, workspace, admin, rbac"},{"index":2,"instruction":"Verificar que no hay duplicados","expectedOutcome":"Cada item aparece exactamente una vez"}]'::jsonb WHERE name = 'SV-49: Admin sidebar NO tiene items duplicados' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear un curso nuevo","expectedOutcome":"La operación se completa correctamente RLS permite INSERT"},{"index":2,"instruction":"READ: Leer lista de cursos","expectedOutcome":"Se ven todos los cursos globalmente"},{"index":3,"instruction":"UPDATE: Editar el curso creado","expectedOutcome":"La operación se completa correctamente RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar el curso","expectedOutcome":"La operación se completa correctamente RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-1: Admin CRUD completo en cursos' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear un usuario nuevo vía API","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"READ: Leer lista de usuarios","expectedOutcome":"Se ven todos los usuarios"},{"index":3,"instruction":"UPDATE: Editar perfil del usuario","expectedOutcome":"La operación se completa correctamente RLS permite UPDATE en profiles"},{"index":4,"instruction":"DELETE: Eliminar el usuario","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CRUD-2: Admin CRUD completo en usuarios' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Asignar rol a usuario","expectedOutcome":"La operación se completa correctamente RLS permite INSERT en user_roles"},{"index":2,"instruction":"READ: Leer roles del usuario","expectedOutcome":"Se ven los roles asignados"},{"index":3,"instruction":"UPDATE: Modificar rol (cambiar is_active)","expectedOutcome":"RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar rol del usuario","expectedOutcome":"RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-3: Admin CRUD completo en user_roles' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear escuela nueva","expectedOutcome":"La operación se completa correctamente RLS permite INSERT en schools"},{"index":2,"instruction":"READ: Leer lista de escuelas","expectedOutcome":"Se ven todas las escuelas"},{"index":3,"instruction":"UPDATE: Editar datos de escuela","expectedOutcome":"La operación se completa correctamente RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar escuela sin dependencias","expectedOutcome":"La operación se completa correctamente RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-4: Admin CRUD completo en escuelas' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear red nueva","expectedOutcome":"La operación se completa correctamente RLS permite INSERT en redes_de_colegios"},{"index":2,"instruction":"READ: Leer lista de redes","expectedOutcome":"Se ven todas las redes (RLS bypass línea 72-78)"},{"index":3,"instruction":"UPDATE: Editar datos de red","expectedOutcome":"RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar red sin dependencias","expectedOutcome":"RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-5: Admin CRUD completo en redes de colegios' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Asignar escuela a red","expectedOutcome":"La operación se completa correctamente RLS permite INSERT en red_escuelas (bypass línea 49-55)"},{"index":2,"instruction":"READ: Leer asignaciones","expectedOutcome":"Se ven todas las asignaciones"},{"index":3,"instruction":"UPDATE: Modificar asignación","expectedOutcome":"RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar asignación","expectedOutcome":"RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-6: Admin CRUD completo en asignaciones red-escuela' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear plantilla nueva","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"READ: Leer plantillas","expectedOutcome":"Se ven todas las plantillas"},{"index":3,"instruction":"UPDATE: Editar plantilla","expectedOutcome":"La operación se completa correctamente (write permission)"},{"index":4,"instruction":"DELETE: Eliminar plantilla","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CRUD-7: Admin CRUD completo en plantillas de evaluación' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear artículo nuevo","expectedOutcome":"La operación se completa correctamente RLS permite INSERT"},{"index":2,"instruction":"READ: Leer artículos","expectedOutcome":"Se ven todos los artículos"},{"index":3,"instruction":"UPDATE: Editar artículo","expectedOutcome":"La operación se completa correctamente RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar artículo","expectedOutcome":"RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-8: Admin CRUD completo en artículos de noticias' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear evento nuevo","expectedOutcome":"RLS permite INSERT"},{"index":2,"instruction":"READ: Leer eventos","expectedOutcome":"Se ven todos los eventos"},{"index":3,"instruction":"UPDATE: Editar evento","expectedOutcome":"RLS permite UPDATE"},{"index":4,"instruction":"DELETE: Eliminar evento","expectedOutcome":"RLS permite DELETE"}]'::jsonb WHERE name = 'CRUD-9: Admin CRUD completo en eventos' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear contrato nuevo","expectedOutcome":"RLS permite INSERT (admin-only policy)"},{"index":2,"instruction":"READ: Leer contratos","expectedOutcome":"Se ven todos los contratos"},{"index":3,"instruction":"UPDATE: Editar contrato","expectedOutcome":"RLS permite UPDATE (admin-only)"},{"index":4,"instruction":"DELETE: Eliminar contrato","expectedOutcome":"RLS permite DELETE (admin-only)"}]'::jsonb WHERE name = 'CRUD-10: Admin CRUD completo en contratos' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear ruta nueva","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"READ: Leer rutas","expectedOutcome":"Se ven todas las rutas"},{"index":3,"instruction":"UPDATE: Editar ruta","expectedOutcome":"La operación se completa correctamente"},{"index":4,"instruction":"DELETE: Eliminar ruta","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CRUD-11: Admin CRUD completo en rutas de aprendizaje' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Asignar consultor a escuela","expectedOutcome":"La operación se completa correctamente (checkIsAdmin línea 18)"},{"index":2,"instruction":"READ: Leer asignaciones","expectedOutcome":"Se ven todas las asignaciones"},{"index":3,"instruction":"UPDATE: Modificar asignación","expectedOutcome":"La operación se completa correctamente"},{"index":4,"instruction":"DELETE: Eliminar asignación","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CRUD-12: Admin CRUD completo en asignaciones de consultores' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear generación nueva en una escuela","expectedOutcome":"La generación se crea exitosamente"},{"index":2,"instruction":"READ: Leer generaciones","expectedOutcome":"Se ven todas las generaciones"},{"index":3,"instruction":"UPDATE: Editar generación","expectedOutcome":"Los cambios se guardan"},{"index":4,"instruction":"DELETE: Eliminar generación","expectedOutcome":"La generación se elimina"}]'::jsonb WHERE name = 'CRUD-13: Admin CRUD completo en generaciones' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear comunidad nueva","expectedOutcome":"La comunidad se crea exitosamente"},{"index":2,"instruction":"READ: Leer comunidades","expectedOutcome":"Se ven todas las comunidades"},{"index":3,"instruction":"UPDATE: Editar comunidad","expectedOutcome":"Los cambios se guardan"},{"index":4,"instruction":"DELETE: Eliminar comunidad","expectedOutcome":"La comunidad se elimina"}]'::jsonb WHERE name = 'CRUD-14: Admin CRUD completo en comunidades de crecimiento' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CREATE: Crear tipo de notificación nuevo","expectedOutcome":"La operación se completa correctamente (metadataHasRole admin línea 64-71)"},{"index":2,"instruction":"READ: Leer tipos de notificaciones","expectedOutcome":"Se ven todos los tipos"},{"index":3,"instruction":"UPDATE: Editar tipo","expectedOutcome":"La operación se completa correctamente"},{"index":4,"instruction":"DELETE: Eliminar tipo","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CRUD-15: Admin CRUD completo en tipos de notificaciones' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Hacer clic en el botón Guardar sin filtro de escuela","expectedOutcome":"La operación se completa correctamente (admin en allowedRoles línea 68)"},{"index":2,"instruction":"Verificar que getReportableUsers retorna TODOS los usuarios","expectedOutcome":"No hay filtro de escuela aplicado (alcance global)"},{"index":3,"instruction":"Verificar que reporting_scope = global en ROLE_HIERARCHY","expectedOutcome":"Confirmado en types/roles.ts línea 159"}]'::jsonb WHERE name = 'GS-1: Admin ve reportes con alcance global (todas las escuelas)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"La operación se completa correctamente (admin check línea 57)"},{"index":2,"instruction":"Verificar que retorna TODAS las escuelas sin filtro","expectedOutcome":"Lista completa de escuelas (líneas 57-159)"},{"index":3,"instruction":"Verificar que retorna TODAS las generaciones y comunidades","expectedOutcome":"Listas completas sin restricción"}]'::jsonb WHERE name = 'GS-2: Admin ve opciones de filtro globales sin restricción' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"La operación se completa correctamente (admin en allowedRoles línea 48)"},{"index":2,"instruction":"Verificar que admin scope logic retorna datos globales","expectedOutcome":"Scope global verificado (línea 159 de unified.ts)"},{"index":3,"instruction":"Verificar que no hay filtro de escuela pre-aplicado","expectedOutcome":"Dashboard muestra alcance global"}]'::jsonb WHERE name = 'GS-3: Admin ve dashboard con datos globales' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que la información se carga correctamente (cualquier ID)","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"Verificar admin bypass en línea 137: if (highestRole === admin) return true","expectedOutcome":"Admin bypassa checkUserAccessModern"},{"index":3,"instruction":"Verificar que se retornan detalles completos del usuario","expectedOutcome":"No hay restricción de acceso"}]'::jsonb WHERE name = 'GS-4: Admin accede a detalles de cualquier usuario sin restricción' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"Verificar que NO hay filtro de school_id en query","expectedOutcome":"Plantillas globales retornadas"},{"index":3,"instruction":"Verificar que hasAssessmentReadPermission incluye admin","expectedOutcome":"Admin puede leer todas las plantillas (línea 19)"}]'::jsonb WHERE name = 'GS-5: Admin ve todas las plantillas de evaluación globalmente' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Revisión de Quizzes","expectedOutcome":"Página carga"},{"index":2,"instruction":"Verificar que allowedRoles incluye admin","expectedOutcome":"Admin tiene acceso"},{"index":3,"instruction":"Verificar que se muestran quizzes de TODAS las escuelas","expectedOutcome":"No hay filtro de escuela (alcance global)"}]'::jsonb WHERE name = 'GS-6: Admin ve quizzes pendientes de todas las escuelas' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Transformation/assessments","expectedOutcome":"Página carga (admin-only)"},{"index":2,"instruction":"Verificar que se muestran evaluaciones de TODAS las escuelas","expectedOutcome":"Alcance global verificado"}]'::jsonb WHERE name = 'GS-7: Admin ve evaluaciones de transformación de todas las escuelas' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Assignment Matrix","expectedOutcome":"Página carga (admin-only)"},{"index":2,"instruction":"Verificar que se muestran asignaciones de TODOS los usuarios","expectedOutcome":"Datos globales sin restricción"}]'::jsonb WHERE name = 'GS-8: Admin ve matriz de asignaciones global' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer migración 20260208160000 líneas 49-55","expectedOutcome":"Existe cláusula admin bypass: EXISTS (SELECT 1 FROM user_roles WHERE role_type = admin AND is_active = true)"},{"index":2,"instruction":"Verificar SELECT en red_escuelas","expectedOutcome":"Admin ve TODOS los registros sin restricción"}]'::jsonb WHERE name = 'RG-1: Admin RLS bypass en red_escuelas (migración supervisor)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer migración 20260208160000 líneas 72-78","expectedOutcome":"Existe cláusula admin bypass: EXISTS (SELECT 1 FROM user_roles WHERE role_type = admin AND is_active = true)"},{"index":2,"instruction":"Verificar SELECT en redes_de_colegios","expectedOutcome":"Admin ve TODAS las redes sin restricción"}]'::jsonb WHERE name = 'RG-2: Admin RLS bypass en redes_de_colegios (migración supervisor)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar policy admin-only INSERT en assessment_templates","expectedOutcome":"RLS permite INSERT para admin"},{"index":2,"instruction":"Verificar hasAssessmentWritePermission línea 33","expectedOutcome":"Retorna true para admin ONLY"},{"index":3,"instruction":"Intentar INSERT directo vía Supabase REST API","expectedOutcome":"aparece un mensaje de éxito (admin allowed)"}]'::jsonb WHERE name = 'RG-3: Admin INSERT en assessment_templates (migración consultor fix)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar policy FOR ALL admin + community_manager","expectedOutcome":"RLS permite INSERT/UPDATE/DELETE para admin"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Admin está en allowed roles"},{"index":3,"instruction":"Intentar INSERT directo vía Supabase REST API","expectedOutcome":"aparece un mensaje de éxito (admin allowed)"}]'::jsonb WHERE name = 'RG-4: Admin INSERT en news_articles (migración consultor fix)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar policy admin-only INSERT en contratos","expectedOutcome":"RLS permite INSERT para admin solamente"},{"index":2,"instruction":"Intentar INSERT directo vía Supabase REST API","expectedOutcome":"aparece un mensaje de éxito (admin allowed)"}]'::jsonb WHERE name = 'RG-5: Admin INSERT en contratos (migración consultor fix)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer pages línea 68","expectedOutcome":"allowedRoles = [admin, consultor, equipo_directivo, lider_generacion, lider_comunidad, supervisor_de_red]"},{"index":2,"instruction":"Hacer clic en el botón Guardar","expectedOutcome":"La operación se completa correctamente (admin en array)"}]'::jsonb WHERE name = 'RG-6: Admin en allowedRoles de reports/detailed.ts' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer pages línea 45","expectedOutcome":"allowedRoles incluye admin"},{"index":2,"instruction":"Hacer clic en el botón Guardar","expectedOutcome":"La operación se completa correctamente (admin en array)"}]'::jsonb WHERE name = 'RG-7: Admin en allowedRoles de reports/overview.ts' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer pages línea 57","expectedOutcome":"if (highestRole === admin) → retorna listas sin filtro"},{"index":2,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"El sistema listas completas (alcance global)"}]'::jsonb WHERE name = 'RG-8: Admin obtiene alcance global en filter-options.ts' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer pages línea 137","expectedOutcome":"if (highestRole === admin) return true;"},{"index":2,"instruction":"Verificar que supervisorCanAccessUser NO aplica a admin","expectedOutcome":"Admin bypassa función supervisor-specific (línea 10)"},{"index":3,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"La operación se completa correctamente para cualquier userId"}]'::jsonb WHERE name = 'RG-9: Admin bypass existe en user-details.ts' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Leer pages línea 48","expectedOutcome":"allowedRoles incluye admin"},{"index":2,"instruction":"Leer línea 159 (admin scope logic)","expectedOutcome":"Admin obtiene alcance global"},{"index":3,"instruction":"Verificar que la información se carga correctamente","expectedOutcome":"La operación se completa correctamente con datos globales"}]'::jsonb WHERE name = 'RG-10: Admin en allowedRoles + alcance global en dashboard/unified.ts' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que profile.school_id es NULL","expectedOutcome":"Admin no tiene school_id asignado"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Dashboard carga exitosamente (no requiere school)"},{"index":3,"instruction":"Verificar que no hay error por falta de school_id","expectedOutcome":"Funciona correctamente (alcance global no requiere school)"}]'::jsonb WHERE name = 'EC-1: Admin sin school_id ve dashboard correctamente' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Escuelas","expectedOutcome":"Página carga exitosamente"},{"index":2,"instruction":"Verificar que se muestran TODAS las escuelas","expectedOutcome":"Lista completa visible (no filtrada por school_id del admin)"},{"index":3,"instruction":"Intentar crear/editar una escuela","expectedOutcome":"Operación exitosa (can_manage_schools: true)"}]'::jsonb WHERE name = 'EC-2: Admin sin school_id puede gestionar escuelas' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que getUserPrimaryRole retorna admin","expectedOutcome":"Admin tiene prioridad más alta en ROLE_HIERARCHY"},{"index":2,"instruction":"Verificar que todos los permisos admin aplican","expectedOutcome":"can_create_courses, can_manage_schools, etc. todos true"},{"index":3,"instruction":"Verificar que ambos roles funcionan independientemente","expectedOutcome":"roles.some() checks trabajan correctamente para multi-rol"}]'::jsonb WHERE name = 'EC-3: Admin con múltiples roles (admin + docente) funciona correctamente' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Estar en la página del Constructor de Curso cuando la sesión expira","expectedOutcome":"Página detecta sesión expirada"},{"index":2,"instruction":"Verificar que redirige a la página de inicio de sesión","expectedOutcome":"Redirección automática a login"},{"index":3,"instruction":"Verificar que no quedan datos visibles después de que la sesión expira","expectedOutcome":"No hay datos visibles después de que la sesión expira"}]'::jsonb WHERE name = 'EC-4: Admin con sesión expirada en course builder redirige a login' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Enviar request directo a realizar la acción correspondiente (bypass UI)","expectedOutcome":"Server-side auth funciona, admin en allowedRoles, La operación se completa correctamente"},{"index":2,"instruction":"Enviar request directo a realizar la acción correspondiente","expectedOutcome":"Auth independiente funciona, admin bypassa checks"},{"index":3,"instruction":"Verificar que TODOS los 65 admin API routes tienen auth server-side","expectedOutcome":"Ningún endpoint depende solo de UI sidebar para auth"}]'::jsonb WHERE name = 'EC-5: Admin accede a endpoints API directamente (bypass sidebar)' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que getUserRoles filtra por is_active=true","expectedOutcome":"Rol admin inactivo no es retornado"},{"index":2,"instruction":"Si no hay otros roles activos, verificar redirección","expectedOutcome":"Redirige a pending approval (no active roles)"},{"index":3,"instruction":"Verificar que privilegios admin se pierden","expectedOutcome":"No puede acceder a rutas adminOnly"}]'::jsonb WHERE name = 'EC-6: Admin con rol inactivo (is_active: false) pierde privilegios' AND role_required = 'admin';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Seleccionar escuela con dependencias (usuarios, cursos, etc)","expectedOutcome":"Escuela seleccionada"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"El sistema error por foreign key constraints (PostgreSQL)"},{"index":3,"instruction":"Verificar que error es manejado gracefully","expectedOutcome":"Mensaje de error claro: No se puede eliminar escuela con dependencias. Admin puede retry después de eliminar dependencias"}]'::jsonb WHERE name = 'EC-7: Admin intenta eliminar escuela con dependencias falla gracefully' AND role_required = 'admin';

-- === COMMUNITY_MANAGER (74 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar al Panel Principal y verificar la barra lateral","expectedOutcome":"El menú \"Cursos\" NO debe aparecer en el sidebar"},{"index":2,"instruction":"Intentar acceder directamente a la página de Creación de Curso","expectedOutcome":"El usuario es redirigido al Panel Principal o recibe un mensaje de error"},{"index":3,"instruction":"Intentar realizar la acción con datos de curso","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"}]'::jsonb WHERE name = 'CM no puede crear cursos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar la barra lateral en el Panel Principal","expectedOutcome":"El menú \"Usuarios\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Redirigido o"},{"index":3,"instruction":"Intentar realizar la acción con datos de usuario","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CM no puede crear usuarios' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Obtener ID de otro usuario del sistema","expectedOutcome":"ID obtenido correctamente"},{"index":2,"instruction":"Intentar realizar la acción con cambios","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"}]'::jsonb WHERE name = 'CM no puede editar perfiles ajenos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Obtener ID de usuario sin rol","expectedOutcome":"ID obtenido"},{"index":2,"instruction":"Intentar asignar el rol de docente a un usuario desde la interfaz","expectedOutcome":"El sistema muestra un mensaje de error indicando que no tiene permisos"}]'::jsonb WHERE name = 'CM no puede asignar roles' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"El menú \"Escuelas\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede gestionar escuelas' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Redes de Colegios\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Redes","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede gestionar redes' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Intentar realizar la acción con datos de plantilla","expectedOutcome":"La operación se completa correctamente"}]'::jsonb WHERE name = 'CM no puede crear plantillas evaluación' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Revisión de Quizzes\" NO aparece (consultantOnly: true)"},{"index":2,"instruction":"Intentar acceder a la página de Revisión de Quizzes","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede revisar quizzes' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Procesos de Cambio\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Constructor de Evaluaciones","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Procesos Cambio' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que el menú Contexto Transversal NO aparece en sidebar","expectedOutcome":"No visible (child de Procesos de Cambio)"},{"index":2,"instruction":"Intentar acceder a la página de Escuela/transversal-context","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Contexto Transversal' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Plan de Migración NO aparece en sidebar","expectedOutcome":"No visible"},{"index":2,"instruction":"Intentar acceder a la página de Escuela/migration-plan","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Plan Migración' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"Menú \"Consultorías\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Consultorías' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Reportes\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Reportes Detallados","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Reportes' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Vías de Transformación\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Vias Transformacion","expectedOutcome":"Redirigido al Panel Principal (ALLOWED_ROLES check)"}]'::jsonb WHERE name = 'CM no puede acceder Vías Transformación' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Rutas de Aprendizaje\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Rutas de Aprendizaje","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede gestionar Rutas Aprendizaje' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Matriz de Asignaciones\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Assignment Matrix","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Matriz Asignaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"QA Testing\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Qa","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder QA Testing' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Roles y Permisos\" NO aparece"},{"index":2,"instruction":"Intentar acceder a la página de Role Management","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede acceder Roles y Permisos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que Asignación de Consultores NO aparece en sidebar","expectedOutcome":"No visible (adminOnly child)"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Redirigido o"}]'::jsonb WHERE name = 'CM no puede asignar consultores' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Dashboard carga correctamente sin errores"},{"index":2,"instruction":"Verificar que el sidebar muestra Mi Panel","expectedOutcome":"Mi Panel visible y activo"}]'::jsonb WHERE name = 'CM puede ver su dashboard' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Perfil","expectedOutcome":"Página de perfil carga correctamente"},{"index":2,"instruction":"Verificar que se muestra información personal del usuario","expectedOutcome":"Nombre, email, avatar visibles"}]'::jsonb WHERE name = 'CM puede ver su perfil' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Mi Aprendizaje","expectedOutcome":"Página carga con cursos enrollados"},{"index":2,"instruction":"Verificar que el sidebar muestra Mi Aprendizaje","expectedOutcome":"Visible con children (Mis Cursos, Mis Tareas)"}]'::jsonb WHERE name = 'CM puede ver Mi Aprendizaje' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Noticias\" aparece en el sidebar"},{"index":2,"instruction":"Click en Noticias en sidebar","expectedOutcome":"Navega a la página de Noticias exitosamente"},{"index":3,"instruction":"Verificar que la página carga","expectedOutcome":"Lista de noticias visible con botón Nueva Noticia"}]'::jsonb WHERE name = 'CM puede acceder a Noticias' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Click en botón Nueva Noticia","expectedOutcome":"Modal de creación aparece"},{"index":2,"instruction":"Llenar título, contenido, fecha","expectedOutcome":"Formulario válido"},{"index":3,"instruction":"Click en Publicar","expectedOutcome":"Aparece un mensaje de éxito y el artículo se muestra en la lista"},{"index":4,"instruction":"Verificar que el artículo aparece en la lista","expectedOutcome":"Artículo visible"}]'::jsonb WHERE name = 'CM puede crear noticias' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Noticias","expectedOutcome":"Lista de noticias visible"},{"index":2,"instruction":"Click en Editar en un artículo","expectedOutcome":"Modal de edición aparece con datos"},{"index":3,"instruction":"Modificar título o contenido","expectedOutcome":"Cambios reflejados en formulario"},{"index":4,"instruction":"Click en Guardar","expectedOutcome":"Aparece un mensaje de éxito y los cambios se reflejan en la lista"}]'::jsonb WHERE name = 'CM puede editar noticias' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Noticias","expectedOutcome":"Lista visible"},{"index":2,"instruction":"Click en Eliminar en un artículo","expectedOutcome":"Modal de confirmación aparece"},{"index":3,"instruction":"Confirmar eliminación","expectedOutcome":"El artículo se elimina y desaparece de la lista"},{"index":4,"instruction":"Verificar que el artículo ya no aparece","expectedOutcome":"Artículo removido de lista"}]'::jsonb WHERE name = 'CM puede eliminar noticias' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Eventos\" aparece en el sidebar"},{"index":2,"instruction":"Click en Eventos","expectedOutcome":"Navega a la página de Eventos exitosamente"},{"index":3,"instruction":"Verificar que la página carga","expectedOutcome":"Lista de eventos visible"}]'::jsonb WHERE name = 'CM puede acceder a Eventos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Click en Nuevo Evento","expectedOutcome":"Modal de creación aparece"},{"index":2,"instruction":"Llenar título, ubicación, fecha_inicio","expectedOutcome":"Formulario válido"},{"index":3,"instruction":"Click en Guardar","expectedOutcome":"Evento creado en tabla events vía client"},{"index":4,"instruction":"Verificar que el evento aparece en la lista","expectedOutcome":"Evento visible"}]'::jsonb WHERE name = 'CM puede crear eventos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > Propuestas Pasantías","expectedOutcome":"Visible SI CM tiene permission view_internship_proposals_*"},{"index":2,"instruction":"Navegar a la página de Quotes","expectedOutcome":"Página carga exitosamente"},{"index":3,"instruction":"Verificar que realizar la acción correspondiente retorna datos","expectedOutcome":"Lista de cotizaciones visible (todas, sin filtro de school)"}]'::jsonb WHERE name = 'CM puede listar cotizaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Click en Nueva Cotización","expectedOutcome":"Navega a la página de Nueva Cotización"},{"index":2,"instruction":"Llenar formulario de cotización","expectedOutcome":"Formulario válido"},{"index":3,"instruction":"Click en Crear","expectedOutcome":"Aparece un mensaje de éxito y la cotización se muestra en la lista"},{"index":4,"instruction":"Verificar que la cotización aparece en lista","expectedOutcome":"Cotización creada visible"}]'::jsonb WHERE name = 'CM puede crear cotizaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Quotes","expectedOutcome":"Lista visible"},{"index":2,"instruction":"Click en Editar en una cotización","expectedOutcome":"Navega a la página de Edición de Cotización"},{"index":3,"instruction":"Modificar datos","expectedOutcome":"Formulario actualizado"},{"index":4,"instruction":"Click en Guardar","expectedOutcome":"Aparece un mensaje de éxito y los cambios se guardan correctamente"}]'::jsonb WHERE name = 'CM puede editar cotizaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Quotes","expectedOutcome":"Lista visible"},{"index":2,"instruction":"Click en Eliminar en una cotización","expectedOutcome":"Modal de confirmación aparece"},{"index":3,"instruction":"Confirmar eliminación","expectedOutcome":"La cotización se elimina y desaparece de la lista"},{"index":4,"instruction":"Verificar que la cotización ya no aparece","expectedOutcome":"Cotización removida"}]'::jsonb WHERE name = 'CM puede eliminar cotizaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > Rendición de Gastos","expectedOutcome":"Visible SI CM tiene permission view_expense_reports_*"},{"index":2,"instruction":"Click en Rendición de Gastos","expectedOutcome":"Navega a /expense-reports"},{"index":3,"instruction":"Verificar que la página carga con reportes","expectedOutcome":"Página carga. CM ve solo reportes en expense_report_access table"}]'::jsonb WHERE name = 'CM puede acceder rendiciones de gasto' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Noticias","expectedOutcome":"Página carga"},{"index":2,"instruction":"Verificar lista de noticias","expectedOutcome":"CM ve TODAS las noticias, independiente de school_id"},{"index":3,"instruction":"Verificar que no hay filtro de escuela activo","expectedOutcome":"No hay selector de escuela en UI"}]'::jsonb WHERE name = 'CM ve todas las noticias (sin filtro)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Click en Nueva Noticia","expectedOutcome":"Modal aparece"},{"index":2,"instruction":"Llenar formulario con school_id arbitrario (o ninguno)","expectedOutcome":"Formulario acepta cualquier valor"},{"index":3,"instruction":"Crear noticia","expectedOutcome":"Noticia creada exitosamente sin restricción de school"}]'::jsonb WHERE name = 'CM crea noticias sin restricción de escuela' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Eventos","expectedOutcome":"Página carga"},{"index":2,"instruction":"Verificar lista de eventos","expectedOutcome":"CM ve TODOS los eventos sin filtro"},{"index":3,"instruction":"Verificar que no hay filtro organizacional","expectedOutcome":"No hay selector de escuela/generación"}]'::jsonb WHERE name = 'CM ve todos los eventos (sin filtro)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Click en Nuevo Evento","expectedOutcome":"Modal aparece"},{"index":2,"instruction":"Llenar formulario sin contexto organizacional","expectedOutcome":"Formulario acepta datos"},{"index":3,"instruction":"Crear evento","expectedOutcome":"Evento creado globalmente"}]'::jsonb WHERE name = 'CM crea eventos sin contexto organizacional' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Quotes","expectedOutcome":"Página carga"},{"index":2,"instruction":"Verificar lista de cotizaciones","expectedOutcome":"CM ve TODAS las cotizaciones sin filtro"},{"index":3,"instruction":"Verificar que no hay filtro de escuela","expectedOutcome":"Visibilidad global"}]'::jsonb WHERE name = 'CM ve todas las cotizaciones (sin filtro)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Expense Reports","expectedOutcome":"Página carga"},{"index":2,"instruction":"Verificar lista de rendiciones","expectedOutcome":"CM ve solo reportes donde: user_id = CM.id OR existe en expense_report_access"},{"index":3,"instruction":"Intentar ver reporte de otro usuario sin acceso concedido","expectedOutcome":"No aparece en lista (access table model)"}]'::jsonb WHERE name = 'CM ve rendiciones: propias o con acceso' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar sidebar","expectedOutcome":"\"Mi Panel\" visible y activo"}]'::jsonb WHERE name = 'CM ve Mi Panel en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Mi Perfil\" visible"}]'::jsonb WHERE name = 'CM ve Mi Perfil en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Mi Aprendizaje\" visible con children (Mis Cursos, Mis Tareas)"}]'::jsonb WHERE name = 'CM ve Mi Aprendizaje en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Noticias\" visible (restrictedRoles incluye CM)"}]'::jsonb WHERE name = 'CM ve Noticias en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Eventos\" visible"}]'::jsonb WHERE name = 'CM ve Eventos en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Gestión\" visible como parent"}]'::jsonb WHERE name = 'CM ve Gestión en sidebar' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > children","expectedOutcome":"\"Propuestas Pasantías\" visible SI permission presente"}]'::jsonb WHERE name = 'CM ve Propuestas Pasantías (condicional)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > children","expectedOutcome":"\"Rendición de Gastos\" visible SI permission presente"}]'::jsonb WHERE name = 'CM ve Rendición de Gastos (condicional)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Feedback\" NO VISIBLE per code (CM no en restrictedRoles). PM spec discrepancy noted."}]'::jsonb WHERE name = 'CM Feedback (verificar visibilidad)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Cursos\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Cursos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Revisión de Quizzes\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Revisión de Quizzes' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Procesos de Cambio\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Procesos de Cambio' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Rutas de Aprendizaje\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Rutas de Aprendizaje' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Matriz de Asignaciones\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Matriz de Asignaciones' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Usuarios\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Usuarios' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Escuelas\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Escuelas' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Redes de Colegios\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Redes de Colegios' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Consultorías\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Consultorías' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Reportes\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Reportes' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"QA Testing\" NO visible"}]'::jsonb WHERE name = 'CM NO ve QA Testing' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Vías de Transformación\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Vías de Transformación' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Configuración\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Configuración' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar","expectedOutcome":"\"Roles y Permisos\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Roles y Permisos' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > children","expectedOutcome":"\"Clientes\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Clientes (child)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > children","expectedOutcome":"\"Contratos\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Contratos (child)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Gestión > children","expectedOutcome":"\"Soporte Técnico\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Soporte Técnico (child)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar sidebar: Consultorías > children (si parent visible)","expectedOutcome":"\"Asignación de Consultores\" NO visible"}]'::jsonb WHERE name = 'CM NO ve Asignación Consultores (child)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar user_roles.community_id para CM","expectedOutcome":"Anotar si es NULL o tiene valor"},{"index":2,"instruction":"Verificar sidebar","expectedOutcome":"\"Espacio Colaborativo\" visible SOLO si community_id presente"},{"index":3,"instruction":"Si NO visible, asignar community_id y re-verificar","expectedOutcome":"Ahora visible"}]'::jsonb WHERE name = 'CM ve Espacio Colaborativo (condicional)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Intentar login con usuario sin user_roles","expectedOutcome":"Login exitoso pero sin rol"},{"index":2,"instruction":"Intentar acceder a la página de Panel Principal","expectedOutcome":"Redirigido a la página de inicio de sesión o se muestra un mensaje de error"},{"index":3,"instruction":"Verificar que auth checks fallan","expectedOutcome":"Páginas protegidas inaccesibles"}]'::jsonb WHERE name = 'CM sin user_roles no puede acceder' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar user_roles table para usuario","expectedOutcome":"CM y docente ambos is_active: true"},{"index":2,"instruction":"Verificar primary role via getUserPrimaryRole()","expectedOutcome":"community_manager es primary (priority 7 > docente priority 8)"},{"index":3,"instruction":"Verificar sidebar","expectedOutcome":"Sidebar muestra unión de permisos de ambos roles"}]'::jsonb WHERE name = 'CM con múltiples roles (prioridad)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Abrir modal de edición de noticia","expectedOutcome":"Modal abierto"},{"index":2,"instruction":"Simular expiración de sesión (borrar cookies o esperar timeout)","expectedOutcome":"Sesión expirada"},{"index":3,"instruction":"Intentar guardar cambios","expectedOutcome":"La operación se completa correctamente"},{"index":4,"instruction":"Verificar redirect","expectedOutcome":"Usuario redirigido a la página de inicio de sesión"}]'::jsonb WHERE name = 'CM sesión expira durante edición' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Intentar realizar la acción directamente (curl o Postman)","expectedOutcome":"La operación se completa correctamente"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":""},{"index":3,"instruction":"Verificar que role checks funcionan","expectedOutcome":"Todos los endpoints admin-only niegan acceso"}]'::jsonb WHERE name = 'CM accede API directamente (URL)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Navegar directamente a la página de QA Testing","expectedOutcome":"Redirigido al Panel Principal o se muestra un error de permisos"},{"index":2,"instruction":"Intentar acceder a la página de Escenarios QA","expectedOutcome":"Redirigido al Panel Principal o se muestra un error de permisos"},{"index":3,"instruction":"Verificar que adminOnly checks funcionan","expectedOutcome":"Todas las subpages QA inaccesibles"}]'::jsonb WHERE name = 'CM intenta acceder a QA Testing vía URL' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"CM1 abre artículo en edición","expectedOutcome":"Modal abierto con datos"},{"index":2,"instruction":"CM2 abre el mismo artículo en edición","expectedOutcome":"Modal abierto con mismos datos"},{"index":3,"instruction":"CM1 modifica título y guarda","expectedOutcome":"Guardado exitoso"},{"index":4,"instruction":"CM2 modifica contenido y guarda","expectedOutcome":"Guardado exitoso. Cambios de CM1 sobrescritos (last-write-wins)"},{"index":5,"instruction":"Verificar que no hay conflicto/error","expectedOutcome":"Última escritura prevalece. Toast de éxito para ambos."}]'::jsonb WHERE name = 'Dos CMs editan misma noticia (last-write-wins)' AND role_required = 'community_manager';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar user_roles.school_id para CM","expectedOutcome":"school_id presente aunque requiresSchool: false"},{"index":2,"instruction":"Navegar a la página de Noticias","expectedOutcome":"CM ve TODAS las noticias (no filtrado por school_id)"},{"index":3,"instruction":"Navegar a la página de Eventos","expectedOutcome":"CM ve TODOS los eventos (no filtrado)"},{"index":4,"instruction":"Documentar comportamiento","expectedOutcome":"school_id presente pero no afecta funcionalidad actual. Arquitectural debt."}]'::jsonb WHERE name = 'CM asignado con school_id (inconsistencia)' AND role_required = 'community_manager';

-- === CONSULTOR (61 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard del consultor"},{"index":2,"instruction":"Intentar acceder a la página de Creación de Curso","expectedOutcome":"Se muestra página de acceso denegado o se redirige al dashboard"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo curso","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Cursos NO aparece en la barra lateral","expectedOutcome":"El elemento Cursos no es visible en el sidebar"}]'::jsonb WHERE name = 'PB-1: Consultor intenta crear un nuevo curso' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo usuario","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Usuarios NO aparece en la barra lateral","expectedOutcome":"El elemento Usuarios no es visible"}]'::jsonb WHERE name = 'PB-2: Consultor intenta crear un usuario' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos modificados","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay formulario de edición de usuario disponible","expectedOutcome":"El formulario no está accesible"}]'::jsonb WHERE name = 'PB-3: Consultor intenta editar el perfil de otro usuario' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de asignación de rol","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay opción de asignar roles en la UI","expectedOutcome":"La opción no es accesible"}]'::jsonb WHERE name = 'PB-4: Consultor intenta asignar roles a usuarios' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Escuelas NO aparece en la barra lateral","expectedOutcome":"El elemento Escuelas no es visible"}]'::jsonb WHERE name = 'PB-5: Consultor intenta gestionar colegios' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Redes","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Redes de Colegios NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-6: Consultor intenta gestionar red de colegios' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de nueva plantilla","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que los botones Crear/Editar NO aparecen en el constructor de evaluaciones","expectedOutcome":"Los botones no son visibles"}]'::jsonb WHERE name = 'PB-7: Consultor intenta crear una plantilla de evaluación' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Noticias","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Noticias NO aparece en la barra lateral","expectedOutcome":"El elemento Noticias no es visible (solo para community_manager)"}]'::jsonb WHERE name = 'PB-8: Consultor intenta crear o editar noticias' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Eventos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Eventos NO aparece en la barra lateral","expectedOutcome":"El elemento Eventos no es visible"}]'::jsonb WHERE name = 'PB-9: Consultor intenta crear o editar eventos' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Contratos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Gestión NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-10: Consultor intenta gestionar contratos' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Configuración","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Configuración NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (requiere manage_system_settings)"}]'::jsonb WHERE name = 'PB-11: Consultor intenta acceder a configuración del sistema' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que el menú Asignación de Consultores NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (adminOnly: true)"}]'::jsonb WHERE name = 'PB-12: Consultor intenta asignar otros consultores' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard correctamente"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"La página carga correctamente con datos del colegio asignado"},{"index":3,"instruction":"Verificar que se muestran estadísticas de la escuela asignada","expectedOutcome":"Los datos mostrados corresponden solo a la escuela asignada"}]'::jsonb WHERE name = 'CA-1: Consultor visualiza su panel de control' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Perfil","expectedOutcome":"La página de perfil carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del consultor autenticado","expectedOutcome":"El perfil muestra información correcta"}]'::jsonb WHERE name = 'CA-2: Consultor visualiza su perfil' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Mi Aprendizaje o hacer clic en menú Mi Aprendizaje","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los cursos inscritos","expectedOutcome":"Se listan los cursos disponibles para el consultor"}]'::jsonb WHERE name = 'CA-3: Consultor visualiza Mi Aprendizaje' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestra la lista de plantillas","expectedOutcome":"Se listan las plantillas disponibles"},{"index":4,"instruction":"Verificar que no hay botones Crear/Editar/Eliminar","expectedOutcome":"Solo aparecen opciones de lectura (Ver, Descargar)"}]'::jsonb WHERE name = 'CA-4: Consultor visualiza plantillas de evaluación (solo lectura)' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Revisión de Quizzes o hacer clic en menú Revisión de Quizzes","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran quizzes pendientes de la escuela asignada","expectedOutcome":"Se listan los quizzes con estado pendiente"}]'::jsonb WHERE name = 'CA-5: Consultor accede a página de revisión de quizzes' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Revisión de Quizzes","expectedOutcome":"Se muestra lista de quizzes pendientes"},{"index":3,"instruction":"Seleccionar un quiz y abrir una pregunta abierta","expectedOutcome":"Se muestra el formulario de calificación"},{"index":4,"instruction":"Ingresar una calificación y guardar","expectedOutcome":"La calificación se guarda exitosamente"}]'::jsonb WHERE name = 'CA-6: Consultor califica una pregunta de quiz abierta' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados o hacer clic en menú Reportes","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran reportes filtrados por escuela asignada","expectedOutcome":"Los datos mostrados corresponden solo a la escuela asignada"}]'::jsonb WHERE name = 'CA-7: Consultor visualiza reportes detallados' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Escuela/transversal-context o acceder desde menú Procesos de Cambio","expectedOutcome":"La página carga en modo solo lectura"},{"index":3,"instruction":"Verificar que se muestran los datos de contexto","expectedOutcome":"La página muestra contenido sin opciones de edición"}]'::jsonb WHERE name = 'CA-8: Consultor visualiza Contexto Transversal' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Escuela/migration-plan o acceder desde menú Procesos de Cambio","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del plan","expectedOutcome":"Se visualiza la información del plan"}]'::jsonb WHERE name = 'CA-9: Consultor visualiza Plan de Migración' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Vista de Tareas o acceder desde menú Consultorías","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran las asignaciones de grupo","expectedOutcome":"Se visualiza el monitor de asignaciones"}]'::jsonb WHERE name = 'CA-10: Consultor visualiza Vista de Tareas' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Community/workspace o hacer clic en menú Espacio Colaborativo","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran las comunidades del consultor","expectedOutcome":"Se visualizan los espacios colaborativos disponibles"}]'::jsonb WHERE name = 'CA-11: Consultor accede a Espacio Colaborativo' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Docente/assessments o hacer clic en menú Feedback","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran datos filtrados por escuela asignada","expectedOutcome":"Se visualiza feedback solo de la escuela del consultor"}]'::jsonb WHERE name = 'CA-12: Consultor visualiza página de Feedback' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a pantalla de asignación de cursos","expectedOutcome":"Se muestra la interfaz de asignación"},{"index":3,"instruction":"Seleccionar un curso y asignarlo a estudiantes","expectedOutcome":"La asignación se realiza exitosamente"},{"index":4,"instruction":"Verificar que la acción funciona correctamente","expectedOutcome":"Los datos se muestran correctamente"}]'::jsonb WHERE name = 'CA-13: Consultor asigna un curso a estudiantes' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página de reportes"},{"index":3,"instruction":"Observar que el filtro de escuela está preestablecido a la escuela asignada","expectedOutcome":"El filtro no se puede cambiar a otra escuela"},{"index":4,"instruction":"Verificar que no hay datos de otras escuelas visibles","expectedOutcome":"Solo se muestran datos de la escuela asignada"}]'::jsonb WHERE name = 'SS-1: Consultor visualiza reportes solo de escuela asignada' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Reportes Detallados","expectedOutcome":"La página se carga pero no muestra datos"},{"index":3,"instruction":"Verificar la respuesta de la API para la otra escuela","expectedOutcome":"La operación se completa correctamente o datos vacíos (validación server-side)"}]'::jsonb WHERE name = 'SS-2: Consultor intenta ver reportes de otra escuela (manipulación de URL)' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuela/transversal-context?school_id=OTRA_ESCUELA","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que solo los datos de la escuela asignada son accesibles","expectedOutcome":"Solo la escuela asignada es visible"}]'::jsonb WHERE name = 'SS-3: Consultor intenta ver Contexto Transversal de otra escuela' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra la página"},{"index":3,"instruction":"Verificar que se muestran TODAS las plantillas publicadas","expectedOutcome":"Las plantillas no están filtradas por escuela asignada"},{"index":4,"instruction":"Confirmar que este es el comportamiento esperado (plantillas globales)","expectedOutcome":"Se entiende que las plantillas son recursos compartidos a nivel de sistema"}]'::jsonb WHERE name = 'SS-4: Consultor visualiza plantillas de evaluación (no son limitadas por escuela)' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral izquierda","expectedOutcome":"El elemento Mi Panel es visible"}]'::jsonb WHERE name = 'SV-1: Consultor ve Mi Panel en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Perfil es visible"}]'::jsonb WHERE name = 'SV-2: Consultor ve Mi Perfil en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Aprendizaje es visible"}]'::jsonb WHERE name = 'SV-3: Consultor ve Mi Aprendizaje en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Revisión de Quizzes es visible"}]'::jsonb WHERE name = 'SV-4: Consultor ve Revisión de Quizzes en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Procesos de Cambio es visible"},{"index":3,"instruction":"Expandir o verificar submenu Procesos de Cambio","expectedOutcome":"Se muestran subelementos: Constructor de Evaluaciones, Contexto Transversal, Plan de Migración"}]'::jsonb WHERE name = 'SV-5: Consultor ve submenu Procesos de Cambio en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"Se visualiza menú Consultorías"},{"index":3,"instruction":"Expandir menú Consultorías","expectedOutcome":"Vista de Tareas es visible como elemento hijo"}]'::jsonb WHERE name = 'SV-6: Consultor ve Vista de Tareas en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Reportes es visible"}]'::jsonb WHERE name = 'SV-7: Consultor ve Reportes en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Feedback es visible"}]'::jsonb WHERE name = 'SV-8: Consultor ve Feedback en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Espacio Colaborativo es visible"}]'::jsonb WHERE name = 'SV-9: Consultor ve Espacio Colaborativo en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Consultorías es visible"},{"index":3,"instruction":"Verificar que contiene subelementos como Vista de Tareas","expectedOutcome":"Consultorías actúa como menú padre con opciones hijo"}]'::jsonb WHERE name = 'SV-10: Consultor ve menú padre Consultorías en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Cursos NO es visible"}]'::jsonb WHERE name = 'SV-11: Consultor NO ve Cursos en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Usuarios NO es visible"}]'::jsonb WHERE name = 'SV-12: Consultor NO ve Usuarios en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Escuelas NO es visible"}]'::jsonb WHERE name = 'SV-13: Consultor NO ve Escuelas en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Redes de Colegios NO es visible"}]'::jsonb WHERE name = 'SV-14: Consultor NO ve Redes de Colegios en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Noticias NO es visible"}]'::jsonb WHERE name = 'SV-15: Consultor NO ve Noticias en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Eventos NO es visible"}]'::jsonb WHERE name = 'SV-16: Consultor NO ve Eventos en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Gestión NO es visible"}]'::jsonb WHERE name = 'SV-17: Consultor NO ve Gestión en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Configuración NO es visible"}]'::jsonb WHERE name = 'SV-18: Consultor NO ve Configuración en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Expandir menú Consultorías","expectedOutcome":"El elemento Asignación de Consultores NO es visible en el submenu"}]'::jsonb WHERE name = 'SV-19: Consultor NO ve Asignación de Consultores en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Rutas de Aprendizaje NO es visible"}]'::jsonb WHERE name = 'SV-20: Consultor NO ve Rutas de Aprendizaje en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Matriz de Asignaciones NO es visible"}]'::jsonb WHERE name = 'SV-21: Consultor NO ve Matriz de Asignaciones en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento QA Testing NO es visible"}]'::jsonb WHERE name = 'SV-22: Consultor NO ve QA Testing en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Vías de Transformación NO es visible"}]'::jsonb WHERE name = 'SV-23: Consultor NO ve Vías de Transformación en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Roles y Permisos NO es visible"}]'::jsonb WHERE name = 'SV-24: Consultor NO ve Roles y Permisos en la barra lateral' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"Se ve la estructura del menú"},{"index":3,"instruction":"Contar cada elemento de menú visible","expectedOutcome":"Cada elemento aparece exactamente una vez (sin duplicados)"}]'::jsonb WHERE name = 'SV-25: Verificación de integridad: No hay elementos duplicados en el sidebar' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl sin escuela asignada","expectedOutcome":"Se accede al sistema"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Se muestra mensaje de error o estado vacío apropiado"},{"index":3,"instruction":"Verificar que el sistema maneja correctamente la ausencia de escuela","expectedOutcome":"Se muestra un estado coherente sin errores de runtime"}]'::jsonb WHERE name = 'EC-1: Consultor sin escuela asignada intenta acceder al dashboard' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra la página del constructor"},{"index":3,"instruction":"Verificar que se muestra estado vacío","expectedOutcome":"Se muestra mensaje como No hay plantillas de evaluación o similar"}]'::jsonb WHERE name = 'EC-2: Consultor ve constructor de evaluaciones sin plantillas disponibles' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como usuario con roles consultor y docente","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que las funcionalidades de consultor son accesibles","expectedOutcome":"Se muestran opciones de consultor"},{"index":3,"instruction":"Verificar que las funcionalidades de docente también son accesibles","expectedOutcome":"Se muestran opciones de docente"},{"index":4,"instruction":"Verificar que los controles de permiso validan correctamente","expectedOutcome":"Los roles se validan con roles.some() correctamente"}]'::jsonb WHERE name = 'EC-3: Consultor tiene múltiples registros de rol (consultor + docente)' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se obtiene sesión válida"},{"index":2,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Los datos se muestran correctamente"}]'::jsonb WHERE name = 'EC-4: Consultor accede a API directamente (bypass de UI)' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escenarios QA","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Intentar acceder a la página de Ejecuciones de Pruebas QA","expectedOutcome":"Se muestra página de acceso denegado"}]'::jsonb WHERE name = 'EC-5: Consultor intenta acceder a páginas administrativas de QA' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como consultor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra la página"},{"index":3,"instruction":"Esperar a que la sesión expire (o simular expiración)","expectedOutcome":"Se redirige a página de login"},{"index":4,"instruction":"Verificar que no hay datos obsoletos visibles","expectedOutcome":"No se muestra contenido antiguo de sesión anterior"}]'::jsonb WHERE name = 'EC-6: Sesión del consultor expira en página de constructor de evaluaciones' AND role_required = 'consultor';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Pestaña 1: Iniciar sesión como consultor.qa1@fne.cl (escuela A)","expectedOutcome":"Se accede al dashboard del consultor 1"},{"index":2,"instruction":"Pestaña 2: Iniciar sesión como consultor.qa2@fne.cl (escuela B)","expectedOutcome":"Se accede al dashboard del consultor 2"},{"index":3,"instruction":"Pestaña 1: Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestran plantillas globales"},{"index":4,"instruction":"Pestaña 2: Navegar a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestran las MISMAS plantillas"},{"index":5,"instruction":"Verificar que ambos ven datos idénticos","expectedOutcome":"Las plantillas son idénticas en ambas pestañas"},{"index":6,"instruction":"Verificar que ninguno puede editar","expectedOutcome":"Ambos tienen acceso solo lectura"}]'::jsonb WHERE name = 'EC-7: Dos consultores de diferentes escuelas ven la misma plantilla de evaluación' AND role_required = 'consultor';

-- === EQUIPO_DIRECTIVO (68 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard del equipo directivo"},{"index":2,"instruction":"Intentar acceder a la página de Creación de Curso","expectedOutcome":"Se muestra página de acceso denegado o se redirige al dashboard"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo curso","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Cursos NO aparece en la barra lateral","expectedOutcome":"El elemento Cursos no es visible en el sidebar"}]'::jsonb WHERE name = 'PB-1: Equipo Directivo intenta crear un nuevo curso' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo usuario","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Usuarios NO aparece en la barra lateral","expectedOutcome":"El elemento Usuarios no es visible"}]'::jsonb WHERE name = 'PB-2: Equipo Directivo intenta crear un usuario' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos modificados","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay formulario de edición de usuario disponible","expectedOutcome":"El formulario no está accesible"}]'::jsonb WHERE name = 'PB-3: Equipo Directivo intenta editar el perfil de otro usuario' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de asignación de rol","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay opción de asignar roles en la UI","expectedOutcome":"La opción no es accesible"}]'::jsonb WHERE name = 'PB-4: Equipo Directivo intenta asignar roles a usuarios' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Escuelas NO aparece en la barra lateral","expectedOutcome":"El elemento Escuelas no es visible"}]'::jsonb WHERE name = 'PB-5: Equipo Directivo intenta gestionar colegios' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Redes","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Redes de Colegios NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-6: Equipo Directivo intenta gestionar red de colegios' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de nueva plantilla","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que los botones Crear/Editar NO aparecen en el constructor de evaluaciones","expectedOutcome":"Los botones no son visibles"}]'::jsonb WHERE name = 'PB-7: Equipo Directivo intenta crear una plantilla de evaluación' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que Procesos de Cambio NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (consultantOnly: true)"}]'::jsonb WHERE name = 'PB-8: Equipo Directivo intenta ver página constructor de evaluaciones' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Noticias","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Noticias NO aparece en la barra lateral","expectedOutcome":"El elemento Noticias no es visible (solo para admin/community_manager)"}]'::jsonb WHERE name = 'PB-9: Equipo Directivo intenta crear o editar noticias' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Eventos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Eventos NO aparece en la barra lateral","expectedOutcome":"El elemento Eventos no es visible"}]'::jsonb WHERE name = 'PB-10: Equipo Directivo intenta crear o editar eventos' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Contratos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Gestión NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-11: Equipo Directivo intenta gestionar contratos' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Configuración","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Configuración NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (requiere manage_system_settings)"}]'::jsonb WHERE name = 'PB-12: Equipo Directivo intenta acceder a configuración del sistema' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que el menú Consultorías NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (consultantOnly: true)"}]'::jsonb WHERE name = 'PB-13: Equipo Directivo intenta asignar consultores' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de asignación","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción (can_assign_courses: false)"},{"index":3,"instruction":"Verificar que no hay interfaz de asignación de cursos disponible","expectedOutcome":"La funcionalidad no está accesible"}]'::jsonb WHERE name = 'PB-14: Equipo Directivo intenta asignar cursos a estudiantes' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard correctamente"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"La página carga correctamente con datos del colegio asignado"},{"index":3,"instruction":"Verificar que se muestran estadísticas de la escuela asignada","expectedOutcome":"Los datos mostrados corresponden solo a la escuela asignada"}]'::jsonb WHERE name = 'CA-1: Equipo Directivo visualiza su panel de control' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Perfil","expectedOutcome":"La página de perfil carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del usuario autenticado","expectedOutcome":"El perfil muestra información correcta"}]'::jsonb WHERE name = 'CA-2: Equipo Directivo visualiza su perfil' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Mi Aprendizaje o hacer clic en menú Mi Aprendizaje","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los cursos inscritos","expectedOutcome":"Se listan los cursos disponibles"}]'::jsonb WHERE name = 'CA-3: Equipo Directivo visualiza Mi Aprendizaje' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Revisión de Quizzes (vía URL directa)","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran quizzes pendientes de la escuela asignada","expectedOutcome":"Se listan los quizzes con estado pendiente"},{"index":4,"instruction":"Nota: El sidebar NO muestra este elemento (consultantOnly: true)","expectedOutcome":"Acceso vía URL directa funciona correctamente"}]'::jsonb WHERE name = 'CA-4: Equipo Directivo accede a página de revisión de quizzes' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Revisión de Quizzes","expectedOutcome":"Se muestra lista de quizzes pendientes"},{"index":3,"instruction":"Seleccionar un quiz y abrir una pregunta abierta","expectedOutcome":"Se muestra el formulario de calificación"},{"index":4,"instruction":"Ingresar una calificación y guardar","expectedOutcome":"La calificación se guarda exitosamente"}]'::jsonb WHERE name = 'CA-5: Equipo Directivo califica una pregunta de quiz abierta' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"La operación se completa correctamente con lista de quizzes pendientes"},{"index":3,"instruction":"Verificar que los datos están filtrados por contexto de la escuela","expectedOutcome":"Solo se muestran quizzes de la escuela asignada"}]'::jsonb WHERE name = 'CA-6: Equipo Directivo visualiza quizzes pendientes de revisión' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados (vía URL directa)","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran reportes filtrados por escuela asignada","expectedOutcome":"Los datos mostrados corresponden solo a la escuela asignada"},{"index":4,"instruction":"Nota: El sidebar NO muestra Reportes (consultantOnly: true)","expectedOutcome":"Acceso vía URL directa funciona correctamente"}]'::jsonb WHERE name = 'CA-7: Equipo Directivo visualiza reportes detallados' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"La operación se completa correctamente con datos de resumen"},{"index":3,"instruction":"Verificar que los datos están filtrados por escuela asignada","expectedOutcome":"Solo se muestran métricas de la escuela del usuario"}]'::jsonb WHERE name = 'CA-8: Equipo Directivo visualiza resumen de reportes' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Escuela/transversal-context (vía URL directa)","expectedOutcome":"La página carga para la escuela asignada"},{"index":3,"instruction":"Verificar que se muestran los datos de contexto","expectedOutcome":"La página muestra contenido de la escuela asignada"},{"index":4,"instruction":"Nota: El sidebar NO muestra Procesos de Cambio (consultantOnly: true)","expectedOutcome":"Acceso vía URL directa funciona correctamente"}]'::jsonb WHERE name = 'CA-9: Equipo Directivo visualiza Contexto Transversal' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Escuela/migration-plan (vía URL directa)","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del plan","expectedOutcome":"Se visualiza la información del plan de la escuela asignada"}]'::jsonb WHERE name = 'CA-10: Equipo Directivo visualiza Plan de Migración' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Directivo/assessments/dashboard (vía URL directa)","expectedOutcome":"Dashboard carga con datos de transformación escolar"},{"index":3,"instruction":"Verificar que se muestran resultados de la escuela asignada","expectedOutcome":"Se visualizan métricas y evaluaciones del colegio"},{"index":4,"instruction":"Nota: El sidebar NO muestra Vías de Transformación (adminOnly: true)","expectedOutcome":"Acceso vía URL directa funciona correctamente"}]'::jsonb WHERE name = 'CA-11: Equipo Directivo visualiza dashboard de resultados escolares' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"La operación se completa correctamente con resultados de la escuela"},{"index":3,"instruction":"Verificar que los datos están limitados a la escuela asignada","expectedOutcome":"Solo se muestran resultados del colegio del usuario"}]'::jsonb WHERE name = 'CA-12: Equipo Directivo obtiene resultados de evaluaciones escolares' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"La operación se completa correctamente con resultados por curso"},{"index":3,"instruction":"Verificar que los datos están filtrados por escuela asignada","expectedOutcome":"Solo se muestran cursos de la escuela del usuario"}]'::jsonb WHERE name = 'CA-13: Equipo Directivo obtiene resultados de evaluaciones por curso' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"La operación se completa correctamente con datos de auditoría"},{"index":3,"instruction":"Verificar que los datos están filtrados apropiadamente","expectedOutcome":"Se visualizan registros relevantes para el contexto del usuario"}]'::jsonb WHERE name = 'CA-14: Equipo Directivo visualiza registro de auditoría de asignaciones' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página de reportes"},{"index":3,"instruction":"Observar que el filtro de escuela está preestablecido a la escuela asignada","expectedOutcome":"El filtro no se puede cambiar a otra escuela"},{"index":4,"instruction":"Verificar que no hay datos de otras escuelas visibles","expectedOutcome":"Solo se muestran datos de la escuela asignada"}]'::jsonb WHERE name = 'SS-1: Equipo Directivo visualiza reportes solo de escuela asignada' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Reportes Detallados","expectedOutcome":"La página se carga pero no muestra datos"},{"index":3,"instruction":"Verificar la respuesta de la API para la otra escuela","expectedOutcome":"El sistema datos vacíos (validación server-side impide acceso)"}]'::jsonb WHERE name = 'SS-2: Equipo Directivo intenta ver reportes de otra escuela (manipulación de URL)' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuela/transversal-context?school_id=OTRA_ESCUELA","expectedOutcome":"Se muestra página de acceso denegado o error"},{"index":3,"instruction":"Verificar que solo los datos de la escuela asignada son accesibles","expectedOutcome":"Solo la escuela asignada es visible"}]'::jsonb WHERE name = 'SS-3: Equipo Directivo intenta ver Contexto Transversal de otra escuela' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema opciones de filtro"},{"index":3,"instruction":"Verificar que solo aparece la escuela asignada","expectedOutcome":"Solo se muestra la escuela del directivo y sus generaciones/comunidades relacionadas"},{"index":4,"instruction":"Confirmar que no hay opción de seleccionar otras escuelas","expectedOutcome":"Las opciones están limitadas a la escuela asignada"}]'::jsonb WHERE name = 'SS-4: Equipo Directivo ve opciones de filtro solo de su escuela' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"El sistema resultados solo de la escuela asignada"},{"index":3,"instruction":"Verificar que el parámetro school_id es ignorado","expectedOutcome":"La El sistema school_id de user_roles, no de query params"}]'::jsonb WHERE name = 'SS-5: Equipo Directivo intenta ver resultados de otra escuela (manipulación de parámetros)' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Revisión de Quizzes","expectedOutcome":"Se muestra lista de quizzes pendientes"},{"index":3,"instruction":"Verificar que solo se muestran quizzes de estudiantes de la escuela asignada","expectedOutcome":"No hay quizzes de otras escuelas visibles"},{"index":4,"instruction":"Nota: Comentario en código indica return all for now — verificar comportamiento real","expectedOutcome":"Confirmar que el filtrado funciona correctamente en runtime"}]'::jsonb WHERE name = 'SS-6: Equipo Directivo ve revisiones de quizzes limitadas a su contexto' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral izquierda","expectedOutcome":"El elemento Mi Panel es visible"}]'::jsonb WHERE name = 'SV-1: Equipo Directivo ve Mi Panel en la barra lateral' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Perfil es visible"}]'::jsonb WHERE name = 'SV-2: Equipo Directivo ve Mi Perfil en la barra lateral' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Aprendizaje es visible"}]'::jsonb WHERE name = 'SV-3: Equipo Directivo ve Mi Aprendizaje en la barra lateral' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl con community_id","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Espacio Colaborativo es visible"},{"index":3,"instruction":"Nota: requiresCommunity: true — equipo_directivo NO está exento","expectedOutcome":"Solo visible si hay community_id"}]'::jsonb WHERE name = 'SV-4: Equipo Directivo ve Espacio Colaborativo en la barra lateral (si tiene comunidad)' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl sin community_id","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Espacio Colaborativo NO es visible"}]'::jsonb WHERE name = 'SV-5: Equipo Directivo NO ve Espacio Colaborativo sin comunidad' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Feedback NO es visible"}]'::jsonb WHERE name = 'SV-6: Equipo Directivo NO ve Feedback en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Revisión de Quizzes NO es visible (aunque la página permite acceso por URL directo)"}]'::jsonb WHERE name = 'SV-7: Equipo Directivo NO ve Revisión de Quizzes en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Cursos NO es visible"}]'::jsonb WHERE name = 'SV-8: Equipo Directivo NO ve Cursos en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Procesos de Cambio NO es visible"}]'::jsonb WHERE name = 'SV-9: Equipo Directivo NO ve Procesos de Cambio en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Noticias NO es visible"}]'::jsonb WHERE name = 'SV-10: Equipo Directivo NO ve Noticias en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Eventos NO es visible"}]'::jsonb WHERE name = 'SV-11: Equipo Directivo NO ve Eventos en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Rutas de Aprendizaje NO es visible"}]'::jsonb WHERE name = 'SV-12: Equipo Directivo NO ve Rutas de Aprendizaje en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Matriz de Asignaciones NO es visible"}]'::jsonb WHERE name = 'SV-13: Equipo Directivo NO ve Matriz de Asignaciones en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Usuarios NO es visible"}]'::jsonb WHERE name = 'SV-14: Equipo Directivo NO ve Usuarios en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Escuelas NO es visible"}]'::jsonb WHERE name = 'SV-15: Equipo Directivo NO ve Escuelas en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Redes de Colegios NO es visible"}]'::jsonb WHERE name = 'SV-16: Equipo Directivo NO ve Redes de Colegios en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Consultorías NO es visible"}]'::jsonb WHERE name = 'SV-17: Equipo Directivo NO ve Consultorías en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Gestión NO es visible"}]'::jsonb WHERE name = 'SV-18: Equipo Directivo NO ve Gestión en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Reportes NO es visible (aunque las páginas sí permiten acceso)"}]'::jsonb WHERE name = 'SV-19: Equipo Directivo NO ve Reportes en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento QA Testing NO es visible"}]'::jsonb WHERE name = 'SV-20: Equipo Directivo NO ve QA Testing en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Vías de Transformación NO es visible (aunque la página del Dashboard de Evaluaciones sí permite acceso)"}]'::jsonb WHERE name = 'SV-21: Equipo Directivo NO ve Vías de Transformación en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Configuración NO es visible"}]'::jsonb WHERE name = 'SV-22: Equipo Directivo NO ve Configuración en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Roles y Permisos NO es visible"}]'::jsonb WHERE name = 'SV-23: Equipo Directivo NO ve Roles y Permisos en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Asignación de Consultores NO es visible"}]'::jsonb WHERE name = 'SV-24: Equipo Directivo NO ve Asignación de Consultores en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Contar todos los elementos de la barra lateral","expectedOutcome":"Cada elemento aparece exactamente una vez, sin duplicados"}]'::jsonb WHERE name = 'SV-25: No hay elementos duplicados en sidebar para Equipo Directivo' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar directamente a la página de Revisión de Quizzes","expectedOutcome":"La página carga correctamente aunque la barra lateral no muestra el enlace"},{"index":3,"instruction":"Navegar directamente a la página de Reportes Detallados","expectedOutcome":"La página carga correctamente aunque la barra lateral no muestra Reportes"},{"index":4,"instruction":"Navegar directamente a la página de Rutas de Aprendizaje","expectedOutcome":"La página carga correctamente aunque la barra lateral no muestra Rutas de Aprendizaje"},{"index":5,"instruction":"Navegar directamente a la página de Contexto Transversal","expectedOutcome":"La página carga correctamente aunque la barra lateral no muestra Procesos de Cambio"},{"index":6,"instruction":"Navegar directamente a la página del Dashboard de Evaluaciones","expectedOutcome":"La página carga correctamente aunque la barra lateral no muestra Vías de Transformación"},{"index":7,"instruction":"Documentar este comportamiento como hallazgo informativo, no como error","expectedOutcome":"Se requiere una decisión del administrador del proyecto sobre esta funcionalidad"}]'::jsonb WHERE name = 'SV-26: Equipo Directivo puede acceder a páginas por URL directa sin link en sidebar' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl sin school_id","expectedOutcome":"Se accede al sistema"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra estado vacío apropiado"},{"index":3,"instruction":"Verificar que el sistema maneja correctamente la ausencia de escuela","expectedOutcome":"Se muestra un estado coherente sin errores"}]'::jsonb WHERE name = 'EC-1: Equipo Directivo sin escuela asignada intenta acceder a reportes' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl sin school_id","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuela/transversal-context","expectedOutcome":"La operación se completa correctamente No se encontró escuela asociada al usuario"},{"index":3,"instruction":"Verificar que el error es manejado gracefully","expectedOutcome":"Se muestra mensaje de error apropiado al usuario"}]'::jsonb WHERE name = 'EC-2: Equipo Directivo sin escuela intenta acceder a contexto transversal' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como usuario con roles equipo_directivo y docente","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que las funcionalidades de equipo_directivo son accesibles","expectedOutcome":"Se muestran opciones de equipo directivo"},{"index":3,"instruction":"Verificar que las funcionalidades de docente también son accesibles","expectedOutcome":"Se muestran opciones de docente"},{"index":4,"instruction":"Verificar que getUserPrimaryRole devuelve equipo_directivo (prioridad #3)","expectedOutcome":"Los roles se priorizan correctamente"}]'::jsonb WHERE name = 'EC-3: Equipo Directivo tiene múltiples registros de rol' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se obtiene sesión válida"},{"index":2,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción (permiso denegado)"},{"index":3,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Los datos se muestran correctamente"},{"index":4,"instruction":"Verificar que todos los endpoints tienen auth independiente","expectedOutcome":"Cada El sistema roles server-side"}]'::jsonb WHERE name = 'EC-4: Equipo Directivo accede a API directamente (bypass de UI)' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escenarios QA","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que se renderiza mensaje: Solo administradores pueden acceder al panel de QA","expectedOutcome":"Mensaje de error apropiado es visible"}]'::jsonb WHERE name = 'EC-5: Equipo Directivo intenta acceder a páginas administrativas de QA' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página"},{"index":3,"instruction":"Esperar a que la sesión expire (o simular expiración)","expectedOutcome":"Se redirige a página de login"},{"index":4,"instruction":"Verificar que no hay datos obsoletos visibles","expectedOutcome":"No se muestra contenido antiguo de sesión anterior"}]'::jsonb WHERE name = 'EC-6: Sesión del Equipo Directivo expira en página de reportes' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl con community_id","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Community/workspace","expectedOutcome":"Workspace carga correctamente"},{"index":3,"instruction":"Verificar que getUserWorkspaceAccess retorna community_member accessType","expectedOutcome":"El usuario tiene acceso apropiado al workspace"}]'::jsonb WHERE name = 'EC-7: Equipo Directivo con community_id accede a Espacio Colaborativo' AND role_required = 'equipo_directivo';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como directivo.qa@fne.cl sin community_id","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Community/workspace","expectedOutcome":"Se muestra página de acceso denegado o error"},{"index":3,"instruction":"Verificar que requiresCommunity filter funciona correctamente","expectedOutcome":"Acceso denegado sin community_id"}]'::jsonb WHERE name = 'EC-8: Equipo Directivo sin community_id intenta acceder a workspace' AND role_required = 'equipo_directivo';

-- === LIDER_COMUNIDAD (59 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard del líder de comunidad"},{"index":2,"instruction":"Intentar acceder a la página de Creación de Curso","expectedOutcome":"Se muestra página de acceso denegado o se redirige al dashboard"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo curso","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Cursos NO aparece en la barra lateral","expectedOutcome":"El elemento Cursos no es visible en el sidebar"}]'::jsonb WHERE name = 'PB-1: Lider de Comunidad intenta crear un nuevo curso' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo usuario","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Usuarios NO aparece en la barra lateral","expectedOutcome":"El elemento Usuarios no es visible"}]'::jsonb WHERE name = 'PB-2: Lider de Comunidad intenta crear un usuario' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos modificados","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay formulario de edición de usuario disponible","expectedOutcome":"El formulario no está accesible"}]'::jsonb WHERE name = 'PB-3: Lider de Comunidad intenta editar el perfil de otro usuario' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de asignación de rol","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay opción de asignar roles en la UI","expectedOutcome":"La opción no es accesible"}]'::jsonb WHERE name = 'PB-4: Lider de Comunidad intenta asignar roles a usuarios' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Escuelas NO aparece en la barra lateral","expectedOutcome":"El elemento Escuelas no es visible"}]'::jsonb WHERE name = 'PB-5: Lider de Comunidad intenta gestionar colegios' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Redes","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Redes de Colegios NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-6: Lider de Comunidad intenta gestionar redes de colegios' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Intentar realizar la acción con datos de nueva plantilla","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Procesos de Cambio NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-7: Lider de Comunidad intenta crear una plantilla de evaluación' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Constructor de Evaluaciones","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Intentar realizar la acción","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"}]'::jsonb WHERE name = 'PB-8: Lider de Comunidad intenta ver plantillas de evaluación' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Revisión de Quizzes","expectedOutcome":"Se muestra página de acceso denegado o redirige"},{"index":3,"instruction":"Intentar realizar la acción","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Revisión de Quizzes NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-9: Lider de Comunidad intenta acceder a revisión de quizzes' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Noticias","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Intentar realizar la acción con datos de nueva noticia","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Noticias NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-10: Lider de Comunidad intenta crear/editar noticias' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Eventos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Eventos NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-11: Lider de Comunidad intenta crear/editar eventos' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Contratos","expectedOutcome":"Se muestra página de acceso denegado o redirige"},{"index":3,"instruction":"Verificar que el menú Gestión NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-12: Lider de Comunidad intenta gestionar contratos' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Configuración","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Configuración NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-13: Lider de Comunidad intenta acceder a configuración del sistema' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Qa","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú QA Testing NO aparece en el sidebar","expectedOutcome":"El elemento no es visible"}]'::jsonb WHERE name = 'PB-14: Lider de Comunidad intenta acceder a páginas de QA Testing' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que el dashboard carga correctamente","expectedOutcome":"Se muestran KPIs y datos de la comunidad"},{"index":3,"instruction":"Verificar que los datos mostrados corresponden a su comunidad asignada","expectedOutcome":"Solo se muestran datos de la comunidad del usuario"}]'::jsonb WHERE name = 'CA-1: Lider de Comunidad visualiza su panel de control' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Perfil","expectedOutcome":"La página de perfil carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del usuario","expectedOutcome":"Se muestra información del perfil"}]'::jsonb WHERE name = 'CA-2: Lider de Comunidad visualiza su perfil' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Mi Aprendizaje","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los cursos inscritos","expectedOutcome":"Se muestra lista de cursos"}]'::jsonb WHERE name = 'CA-3: Lider de Comunidad visualiza Mi Aprendizaje' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Community/workspace","expectedOutcome":"El workspace carga correctamente"},{"index":3,"instruction":"Verificar que solo se muestra contenido de su comunidad","expectedOutcome":"Solo se muestra contenido de la comunidad asignada"}]'::jsonb WHERE name = 'CA-4: Lider de Comunidad accede a Espacio Colaborativo' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema lista de miembros de su comunidad"},{"index":3,"instruction":"Verificar que solo se retornan miembros de su comunidad","expectedOutcome":"Todos los miembros tienen el mismo community_id"}]'::jsonb WHERE name = 'CA-5: Lider de Comunidad visualiza miembros de su comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Assignments","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran tareas pendientes como estudiante","expectedOutcome":"Se muestra vista de tareas"}]'::jsonb WHERE name = 'CA-6: Lider de Comunidad accede a página de tareas' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"La página de reportes carga correctamente"},{"index":3,"instruction":"Verificar que solo se muestran datos de su comunidad","expectedOutcome":"Todos los datos están filtrados por community_id"}]'::jsonb WHERE name = 'CA-7: Lider de Comunidad visualiza reportes detallados' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente con token de autenticación","expectedOutcome":"El sistema datos del dashboard"},{"index":3,"instruction":"Verificar que los datos están filtrados por community_id","expectedOutcome":"Solo se retornan datos de la comunidad del usuario"}]'::jsonb WHERE name = 'CA-8: Lider de Comunidad accede al dashboard unificado' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema datos de reporte"},{"index":3,"instruction":"Verificar que los datos corresponden a su comunidad","expectedOutcome":"Datos filtrados por community_id"}]'::jsonb WHERE name = 'CA-9: Lider de Comunidad visualiza reportes de comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema opciones de filtro disponibles"},{"index":3,"instruction":"Verificar que las opciones están filtradas por su comunidad","expectedOutcome":"Solo opciones relevantes a su comunidad"}]'::jsonb WHERE name = 'CA-10: Lider de Comunidad visualiza opciones de filtro de reportes' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema datos"},{"index":3,"instruction":"Verificar que todos los usuarios retornados pertenecen a la comunidad del líder","expectedOutcome":"Ningún dato de otras comunidades"},{"index":4,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema datos"},{"index":5,"instruction":"Verificar que los datos coinciden con la comunidad asignada","expectedOutcome":"Solo datos de su comunidad"}]'::jsonb WHERE name = 'CS-1: Reportes filtrados por community_id' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"El sistema aparece un mensaje de error de permisos o datos vacíos"},{"index":3,"instruction":"Verificar que el filtro de comunidad es aplicado server-side","expectedOutcome":"No se pueden obtener datos de otras comunidades"}]'::jsonb WHERE name = 'CS-2: Intento de manipulación de URL con otro community_id' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente con su community_id","expectedOutcome":"El sistema miembros"},{"index":3,"instruction":"Verificar que todos tienen el mismo community_id que el líder","expectedOutcome":"Todos los miembros pertenecen a la misma comunidad"}]'::jsonb WHERE name = 'CS-3: Miembros solo de su propia comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Community/workspace","expectedOutcome":"Workspace carga"},{"index":3,"instruction":"Verificar que solo se muestra contenido de su comunidad","expectedOutcome":"No hay contenido de otras comunidades visible"}]'::jsonb WHERE name = 'CS-4: Workspace solo de su comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema KPIs"},{"index":3,"instruction":"Verificar que los KPIs reflejan solo datos de su comunidad","expectedOutcome":"Solo datos de la comunidad asignada"},{"index":4,"instruction":"Verificar que no se usa placeholder user-community-id","expectedOutcome":"Se resuelve community_id real desde user_roles"}]'::jsonb WHERE name = 'CS-5: Dashboard unificado filtrado por comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema lista de usuarios"},{"index":3,"instruction":"Realizar realizar la acción correspondiente","expectedOutcome":"El sistema lista de usuarios"},{"index":4,"instruction":"Verificar que ambas listas contienen los mismos user IDs","expectedOutcome":"Ambos endpoints usan user_roles.community_id, datos consistentes"}]'::jsonb WHERE name = 'CS-6: Consistencia entre reportes overview y detailed' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Mi Panel aparece en el sidebar","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-1: Lider de Comunidad ve Mi Panel en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Mi Perfil aparece en el sidebar","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-2: Lider de Comunidad ve Mi Perfil en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Mi Aprendizaje aparece en el sidebar","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-3: Lider de Comunidad ve Mi Aprendizaje en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Espacio Colaborativo aparece en el sidebar","expectedOutcome":"El elemento es visible"}]'::jsonb WHERE name = 'SV-4: Lider de Comunidad ve Espacio Colaborativo en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Feedback NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-5: Lider de Comunidad NO ve Feedback en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Revisión de Quizzes NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-6: Lider de Comunidad NO ve Revisión de Quizzes en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Cursos NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-7: Lider de Comunidad NO ve Cursos en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Procesos de Cambio NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-8: Lider de Comunidad NO ve Procesos de Cambio en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Noticias NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-9: Lider de Comunidad NO ve Noticias en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Eventos NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-10: Lider de Comunidad NO ve Eventos en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Rutas de Aprendizaje NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-11: Lider de Comunidad NO ve Rutas de Aprendizaje en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Matriz de Asignaciones NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-12: Lider de Comunidad NO ve Matriz de Asignaciones en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Usuarios NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-13: Lider de Comunidad NO ve Usuarios en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Escuelas NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-14: Lider de Comunidad NO ve Escuelas en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Redes de Colegios NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-15: Lider de Comunidad NO ve Redes de Colegios en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Consultorías NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-16: Lider de Comunidad NO ve Consultorías en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Gestión NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-17: Lider de Comunidad NO ve Gestión en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Reportes NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-18: Lider de Comunidad NO ve Reportes en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que QA Testing NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-19: Lider de Comunidad NO ve QA Testing en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Vías de Transformación NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-20: Lider de Comunidad NO ve Vías de Transformación en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Configuración NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-21: Lider de Comunidad NO ve Configuración en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que Roles y Permisos NO aparece en el sidebar","expectedOutcome":"El elemento NO es visible"}]'::jsonb WHERE name = 'SV-22: Lider de Comunidad NO ve Roles y Permisos en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Inspeccionar el sidebar con herramientas de desarrollador","expectedOutcome":"Cada elemento tiene un ID único"},{"index":3,"instruction":"Verificar que no hay elementos duplicados visualmente","expectedOutcome":"No hay duplicados"}]'::jsonb WHERE name = 'SV-23: No hay elementos duplicados en la barra lateral' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Configurar usuario con rol lider_comunidad pero sin community_id","expectedOutcome":"Usuario puede iniciar sesión"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Dashboard carga sin errores"},{"index":3,"instruction":"Intentar realizar la acción","expectedOutcome":"El sistema error apropiado o datos vacíos"},{"index":4,"instruction":"Verificar que no hay crash ni información sensible expuesta","expectedOutcome":"Manejo de error apropiado"}]'::jsonb WHERE name = 'EC-1: Lider de Comunidad sin community_id asignado' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Community/workspace","expectedOutcome":"Workspace carga sin errores"},{"index":3,"instruction":"Verificar que se muestra estado vacío apropiado","expectedOutcome":"Mensaje de estado vacío, sin crash"}]'::jsonb WHERE name = 'EC-2: Comunidad vacía sin miembros' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Configurar usuario con roles lider_comunidad y docente","expectedOutcome":"Usuario tiene ambos roles en user_roles"},{"index":2,"instruction":"Iniciar sesión","expectedOutcome":"Se accede al dashboard"},{"index":3,"instruction":"Verificar que getHighestRole retorna lider_comunidad","expectedOutcome":"Rol principal es lider_comunidad"},{"index":4,"instruction":"Verificar que ambos roles tienen permisos funcionales","expectedOutcome":"Permisos de ambos roles se aplican"}]'::jsonb WHERE name = 'EC-3: Usuario con múltiples roles incluyendo lider_comunidad' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl y obtener token","expectedOutcome":"Token obtenido"},{"index":2,"instruction":"Realizar peticiones API directamente con curl o Postman","expectedOutcome":"Todas las peticiones tienen auth checks"},{"index":3,"instruction":"Intentar acceder a endpoint restringido (e.g., )","expectedOutcome":"El sistema independientemente de sidebar"}]'::jsonb WHERE name = 'EC-4: Acceso directo a API sin pasar por sidebar' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a varias páginas","expectedOutcome":"Páginas cargan correctamente"},{"index":3,"instruction":"Esperar a que la sesión expire (o simular expiración)","expectedOutcome":"Se redirige a página de login"},{"index":4,"instruction":"Verificar que no hay datos obsoletos visibles","expectedOutcome":"No se muestra contenido antiguo"}]'::jsonb WHERE name = 'EC-5: Sesión expira mientras navega' AND role_required = 'lider_comunidad';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con user_id de otra comunidad","expectedOutcome":"El sistema o datos vacíos"},{"index":3,"instruction":"Verificar que checkUserAccessModern compara community_id","expectedOutcome":"Acceso denegado si community_id no coincide"}]'::jsonb WHERE name = 'EC-6: Intenta ver detalles de usuario de otra comunidad' AND role_required = 'lider_comunidad';

-- === LIDER_GENERACION (62 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Creación de Curso","expectedOutcome":"Se muestra acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que el menú Cursos NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (adminOnly: true)"}]'::jsonb WHERE name = 'PB-1: Lider Generacion intenta crear un nuevo curso' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Acceso denegado"},{"index":3,"instruction":"Verificar que Usuarios NO aparece en sidebar","expectedOutcome":"No visible (adminOnly)"}]'::jsonb WHERE name = 'PB-2: Lider Generacion intenta crear un usuario' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar realizar la acción con datos modificados","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"}]'::jsonb WHERE name = 'PB-3: Lider Generacion intenta editar perfil de otro usuario' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"aparece un mensaje de error de permisos"}]'::jsonb WHERE name = 'PB-4: Lider Generacion intenta asignar roles a usuarios' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Acceso denegado"},{"index":3,"instruction":"Verificar que Escuelas NO aparece en sidebar","expectedOutcome":"No visible (adminOnly)"}]'::jsonb WHERE name = 'PB-5: Lider Generacion intenta gestionar colegios' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar que Redes NO aparece en sidebar","expectedOutcome":"No visible (adminOnly)"}]'::jsonb WHERE name = 'PB-6: Lider Generacion intenta gestionar redes de colegios' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"aparece un mensaje de error de permisos"}]'::jsonb WHERE name = 'PB-7: Lider Generacion intenta crear plantilla de evaluación' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"aparece un mensaje de error de permisos (lider_generacion excluido)"}]'::jsonb WHERE name = 'PB-8: Lider Generacion intenta VER plantillas de evaluación' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar acceder a la página de Revisión de Quizzes","expectedOutcome":"Acceso denegado"},{"index":3,"instruction":"Intentar realizar la acción","expectedOutcome":"aparece un mensaje de error de permisos"}]'::jsonb WHERE name = 'PB-9: Lider Generacion intenta acceder a revisión de quizzes' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar que Noticias NO aparece en sidebar","expectedOutcome":"No visible"}]'::jsonb WHERE name = 'PB-10: Lider Generacion intenta crear/editar noticias' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar que Eventos NO aparece en sidebar","expectedOutcome":"No visible"}]'::jsonb WHERE name = 'PB-11: Lider Generacion intenta crear/editar eventos' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar que Gestión NO aparece en sidebar","expectedOutcome":"No visible"}]'::jsonb WHERE name = 'PB-12: Lider Generacion intenta gestionar contratos' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar que Configuración NO aparece en sidebar","expectedOutcome":"No visible"}]'::jsonb WHERE name = 'PB-13: Lider Generacion intenta acceder a configuración del sistema' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Acceso denegado"}]'::jsonb WHERE name = 'PB-14: Lider Generacion intenta asignar consultores' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar acceder a la página de Escenarios QA","expectedOutcome":"Acceso denegado"}]'::jsonb WHERE name = 'PB-15: Lider Generacion intenta acceder a páginas de QA' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar realizar la acción","expectedOutcome":"aparece un mensaje de error de permisos"}]'::jsonb WHERE name = 'PB-16: Lider Generacion intenta asignar cursos masivamente' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga correctamente"},{"index":2,"instruction":"Verificar que se muestran datos de la generación asignada","expectedOutcome":"Datos visibles corresponden solo a su generación"}]'::jsonb WHERE name = 'CA-1: Lider Generacion visualiza su panel de control' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Perfil","expectedOutcome":"Perfil carga correctamente"}]'::jsonb WHERE name = 'CA-2: Lider Generacion visualiza su perfil' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Mi Aprendizaje","expectedOutcome":"Página carga con cursos"}]'::jsonb WHERE name = 'CA-3: Lider Generacion visualiza Mi Aprendizaje' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Reportes cargan con datos de generación"},{"index":3,"instruction":"Verificar que solo se muestran datos de la generación asignada","expectedOutcome":"Datos filtrados por generation_id"}]'::jsonb WHERE name = 'CA-4: Lider Generacion visualiza reportes detallados' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con datos de generación"}]'::jsonb WHERE name = 'CA-5: Lider Generacion visualiza resumen de reportes' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con opciones"}]'::jsonb WHERE name = 'CA-6: Lider Generacion visualiza opciones de filtro de reportes' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con solo datos propios"}]'::jsonb WHERE name = 'CA-7: Lider Generacion visualiza estadísticas de dashboard unificado' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Assignments","expectedOutcome":"Página carga con vista de teacher"}]'::jsonb WHERE name = 'CA-8: Lider Generacion accede a página de tareas como docente' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Assignments/[id]/submissions","expectedOutcome":"Página carga con entregas"}]'::jsonb WHERE name = 'CA-9: Lider Generacion visualiza entregas de tareas' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Docente/assessments","expectedOutcome":"Página carga con assessments"}]'::jsonb WHERE name = 'CA-10: Lider Generacion accede a página de Feedback' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con detalles"},{"index":3,"instruction":"realizar la acción correspondiente","expectedOutcome":"o vacío"}]'::jsonb WHERE name = 'CA-11: Lider Generacion visualiza detalles de usuario de su generación' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Reportes cargan"},{"index":3,"instruction":"Verificar que solo se muestran datos de la generación asignada","expectedOutcome":"Sin datos de otras generaciones"}]'::jsonb WHERE name = 'GS-1: Reportes solo muestran datos de generación asignada' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente con filters.generation_id=OTRA_GEN","expectedOutcome":"El sistema no muestra datos o muestra un mensaje de error de permisos"}]'::jsonb WHERE name = 'GS-2: Manipulación de URL con diferente generation_id rechazada' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"Datos de generation_id via user_roles"},{"index":3,"instruction":"realizar la acción correspondiente","expectedOutcome":"Datos de generation_id via profiles"},{"index":4,"instruction":"Verificar consistencia de datos","expectedOutcome":"Datos deben coincidir si ambos tienen generation_id"}]'::jsonb WHERE name = 'GS-3: Consistencia de fuente de datos (detailed vs overview)' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con opciones"},{"index":3,"instruction":"Simular falta de generation_id en profiles","expectedOutcome":"Opciones vacías"}]'::jsonb WHERE name = 'GS-4: filter-options requiere school_id Y generation_id' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"la operación se completa correctamente con solo datos propios"},{"index":3,"instruction":"Verificar que NO se muestran datos de otros usuarios de la generación","expectedOutcome":"Solo userId propio en respuesta"}]'::jsonb WHERE name = 'GS-5: Dashboard unificado NO es generation-scoped' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Mi Panel visible"}]'::jsonb WHERE name = 'SV-1: Lider Generacion ve Mi Panel en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Mi Perfil visible"}]'::jsonb WHERE name = 'SV-2: Lider Generacion ve Mi Perfil en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Mi Aprendizaje visible"}]'::jsonb WHERE name = 'SV-3: Lider Generacion ve Mi Aprendizaje en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl con community_id","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Espacio Colaborativo visible"}]'::jsonb WHERE name = 'SV-4: Lider Generacion ve Espacio Colaborativo SI tiene community_id' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Cursos NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-5: Cursos NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Usuarios NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-6: Usuarios NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Escuelas NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-7: Escuelas NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Redes de Colegios NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-8: Redes de Colegios NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Revisión de Quizzes NO visible (consultantOnly)"}]'::jsonb WHERE name = 'SV-9: Revisión de Quizzes NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Procesos de Cambio NO visible (consultantOnly)"}]'::jsonb WHERE name = 'SV-10: Procesos de Cambio NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Reportes NO visible (consultantOnly)"}]'::jsonb WHERE name = 'SV-11: Reportes NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Consultorías NO visible (consultantOnly)"}]'::jsonb WHERE name = 'SV-12: Consultorías NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Feedback NO visible (restrictedRoles)"}]'::jsonb WHERE name = 'SV-13: Feedback NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Noticias NO visible (restrictedRoles)"}]'::jsonb WHERE name = 'SV-14: Noticias NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Eventos NO visible (restrictedRoles)"}]'::jsonb WHERE name = 'SV-15: Eventos NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Gestión NO visible (restrictedRoles)"}]'::jsonb WHERE name = 'SV-16: Gestión NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Configuración NO visible (permission check)"}]'::jsonb WHERE name = 'SV-17: Configuración NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Rutas de Aprendizaje NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-18: Rutas de Aprendizaje NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Matriz de Asignaciones NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-19: Matriz de Asignaciones NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"QA Testing NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-20: QA Testing NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Vías de Transformación NO visible (adminOnly)"}]'::jsonb WHERE name = 'SV-21: Vías de Transformación NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Observar sidebar","expectedOutcome":"Roles y Permisos NO visible (superadminOnly)"}]'::jsonb WHERE name = 'SV-22: Roles y Permisos NO visible en sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Contar cada elemento visible","expectedOutcome":"Cada elemento aparece exactamente una vez"}]'::jsonb WHERE name = 'SV-23: Verificación de integridad - No hay elementos duplicados' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl sin generation_id","expectedOutcome":"Dashboard carga normalmente"},{"index":2,"instruction":"Intentar acceder a reportes","expectedOutcome":"Reportes devuelven vacío"}]'::jsonb WHERE name = 'EC-1: Lider sin generation_id intenta acceder al dashboard' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión con generation_id en user_roles","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"realizar la acción correspondiente","expectedOutcome":"Funciona"},{"index":3,"instruction":"realizar la acción correspondiente","expectedOutcome":"Vacío"}]'::jsonb WHERE name = 'EC-2: generation_id en user_roles pero NO en profiles' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión con ambos roles","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Verificar funcionalidades de ambos roles","expectedOutcome":"Ambos roles funcionan"}]'::jsonb WHERE name = 'EC-3: Lider con múltiples roles (lider_generacion + docente)' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar directamente a /detailed-reports","expectedOutcome":"Reportes cargan (Gap #1: visible via URL)"}]'::jsonb WHERE name = 'EC-4: Acceso directo a API bypass de sidebar' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Intentar acceder a la página de Escenarios QA","expectedOutcome":"Acceso denegado"}]'::jsonb WHERE name = 'EC-5: Intento de acceso a páginas de QA' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como lider-gen.qa@fne.cl","expectedOutcome":"Dashboard carga"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Reportes cargan"},{"index":3,"instruction":"Esperar expiración de sesión","expectedOutcome":"Redirige a login"}]'::jsonb WHERE name = 'EC-6: Expiración de sesión en página de reportes' AND role_required = 'lider_generacion';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Revisar types/roles.ts line 326","expectedOutcome":"requiresGeneration: false"},{"index":2,"instruction":"Revisar description line 328","expectedOutcome":"Dice que requiere generation"},{"index":3,"instruction":"Documentar inconsistencia","expectedOutcome":"Gap de validación confirmado"}]'::jsonb WHERE name = 'EC-7: requiresGeneration validation gap' AND role_required = 'lider_generacion';

-- === SUPERVISOR_DE_RED (60 scenarios) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard del supervisor"},{"index":2,"instruction":"Intentar acceder a la página de Creación de Curso","expectedOutcome":"Se muestra página de acceso denegado o se redirige al dashboard"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo curso","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Cursos NO aparece en la barra lateral","expectedOutcome":"El elemento Cursos no es visible en el sidebar"}]'::jsonb WHERE name = 'PB-1: Supervisor intenta crear un nuevo curso' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Usuarios","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Intentar realizar la acción con datos de nuevo usuario","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":4,"instruction":"Verificar que el menú Usuarios NO aparece en la barra lateral","expectedOutcome":"El elemento Usuarios no es visible"}]'::jsonb WHERE name = 'PB-2: Supervisor intenta crear un usuario' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos modificados","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay formulario de edición de usuario disponible","expectedOutcome":"El formulario no está accesible"}]'::jsonb WHERE name = 'PB-3: Supervisor intenta editar el perfil de otro usuario' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de asignación de rol","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que no hay opción de asignar roles en la UI","expectedOutcome":"La opción no es accesible"}]'::jsonb WHERE name = 'PB-4: Supervisor intenta asignar roles a usuarios' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Escuelas NO aparece en la barra lateral","expectedOutcome":"El elemento Escuelas no es visible"}]'::jsonb WHERE name = 'PB-5: Supervisor intenta gestionar colegios' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Gestión de Redes","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Redes de Colegios NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (gestión es admin-only)"}]'::jsonb WHERE name = 'PB-6: Supervisor intenta gestionar red de colegios (página admin)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con datos de nueva plantilla","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que supervisor NO está en la lista de roles con permiso de escritura","expectedOutcome":"Solo admin tiene permiso de escritura en assessment-permissions.ts"}]'::jsonb WHERE name = 'PB-7: Supervisor intenta crear una plantilla de evaluación' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Revisión de Quizzes","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que supervisor NO está en allowedRoles","expectedOutcome":"Solo admin, consultor, equipo_directivo permitidos (quiz-reviews.tsx:28, pending.ts:56)"}]'::jsonb WHERE name = 'PB-8: Supervisor intenta acceder a página de revisión de quizzes' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar realizar la acción con calificación","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que supervisor NO está en allowedRoles del endpoint","expectedOutcome":"Solo admin, consultor, equipo_directivo permitidos"}]'::jsonb WHERE name = 'PB-9: Supervisor intenta calificar una revisión de quiz' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Asignación de Consultores","expectedOutcome":"Se muestra página de acceso denegado o se redirige"},{"index":3,"instruction":"Verificar que el menú Asignación de Consultores NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (adminOnly: true)"}]'::jsonb WHERE name = 'PB-10: Supervisor intenta asignar consultores a colegios' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Configuración","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Configuración NO aparece en la barra lateral","expectedOutcome":"El elemento no es visible (requiere manage_system_settings)"}]'::jsonb WHERE name = 'PB-11: Supervisor intenta acceder a configuración del sistema' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Noticias","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Noticias NO aparece en la barra lateral","expectedOutcome":"El elemento Noticias no es visible (solo para admin/community_manager)"}]'::jsonb WHERE name = 'PB-12: Supervisor intenta crear o editar noticias' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a la página de Eventos","expectedOutcome":"Se muestra página de acceso denegado"},{"index":3,"instruction":"Verificar que el menú Eventos NO aparece en la barra lateral","expectedOutcome":"El elemento Eventos no es visible (solo para admin/community_manager)"}]'::jsonb WHERE name = 'PB-13: Supervisor intenta crear o editar eventos' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard correctamente"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"La página carga correctamente con datos de la red asignada"},{"index":3,"instruction":"Verificar que se muestran estadísticas solo de colegios de la red","expectedOutcome":"Los datos mostrados corresponden solo a los colegios de la red asignada"}]'::jsonb WHERE name = 'CA-1: Supervisor visualiza su panel de control' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Perfil","expectedOutcome":"La página de perfil carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los datos del supervisor autenticado","expectedOutcome":"El perfil muestra información correcta"}]'::jsonb WHERE name = 'CA-2: Supervisor visualiza su perfil' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Mi Aprendizaje o hacer clic en menú Mi Aprendizaje","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran los cursos disponibles","expectedOutcome":"Se listan los cursos (supervisor puede inscribirse como estudiante per role description)"}]'::jsonb WHERE name = 'CA-3: Supervisor visualiza Mi Aprendizaje (comportamiento dual)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados o hacer clic en menú Reportes","expectedOutcome":"La página carga correctamente"},{"index":3,"instruction":"Verificar que se muestran reportes filtrados por red asignada","expectedOutcome":"Los datos mostrados corresponden solo a colegios de la red (detailed.ts:694-722 usa 3-step pattern)"}]'::jsonb WHERE name = 'CA-4: Supervisor visualiza reportes detallados' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Los datos se muestran correctamente con datos de la red"},{"index":3,"instruction":"Verificar que solo se retornan usuarios de colegios de la red","expectedOutcome":"overview.ts:- usa 3-step pattern para filtrar por red"}]'::jsonb WHERE name = 'CA-5: Supervisor visualiza resumen de reportes' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Los datos se muestran correctamente con opciones de filtro"},{"index":3,"instruction":"Verificar que solo se listan colegios de la red","expectedOutcome":"filter-options.ts:166-194 filtra por red_id del supervisor"}]'::jsonb WHERE name = 'CA-6: Supervisor visualiza opciones de filtro de reportes' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a realizar la acción correspondiente","expectedOutcome":"Los datos se muestran correctamente pero data vacía (supervisor en allowedRoles pero getAccessibleSchools no lo maneja)"},{"index":3,"instruction":"Documentar como functionality gap, no como bug de seguridad","expectedOutcome":"Feature incompleta, no data leak"}]'::jsonb WHERE name = 'CA-7: Supervisor visualiza reportes a nivel de colegio' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a realizar la acción correspondiente","expectedOutcome":"Los datos se muestran correctamente pero data vacía"},{"index":3,"instruction":"Documentar como functionality gap","expectedOutcome":"Feature incompleta"}]'::jsonb WHERE name = 'CA-8: Supervisor visualiza reportes de comunidad' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar acceder a realizar la acción correspondiente","expectedOutcome":"Los datos se muestran correctamente pero data vacía"},{"index":3,"instruction":"Documentar como functionality gap","expectedOutcome":"Feature incompleta"}]'::jsonb WHERE name = 'CA-9: Supervisor visualiza analíticas de cursos' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Los datos se muestran correctamente con datos agregados"},{"index":3,"instruction":"Verificar que solo se retornan datos de colegios de la red","expectedOutcome":"unified.ts:166-193 usa 3-step pattern para filtrar usuarios"}]'::jsonb WHERE name = 'CA-10: Supervisor visualiza dashboard unificado' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página de reportes"},{"index":3,"instruction":"Observar que solo se muestran datos de colegios de la red asignada","expectedOutcome":"Sin datos de otras redes (verified by red_id filtering in El sistema)"},{"index":4,"instruction":"Verificar que no hay datos de colegios fuera de la red","expectedOutcome":"Solo datos de la red asignada"}]'::jsonb WHERE name = 'NS-1: Reportes solo muestran colegios de la red asignada' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor con red_id NULL","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página sin datos"},{"index":3,"instruction":"Verificar que APIs retornan arrays vacíos (no errores)","expectedOutcome":"Todas las APIs tienen early return: if (!supervisorRole?.red_id) return []"}]'::jsonb WHERE name = 'NS-2: Supervisor sin asignación de red (red_id es null)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Intentar manipular parámetros de URL o payload para acceder a otra red","expectedOutcome":"El sistema server-side por user_roles.red_id del supervisor"},{"index":3,"instruction":"Verificar que red_id del supervisor se usa en TODOS los queries","expectedOutcome":"Sin acceso cross-network (RLS policies también enforzan)"}]'::jsonb WHERE name = 'NS-3: Supervisor intenta ver datos de otra red (manipulación de URL)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Los datos se muestran correctamente con detalles completos del usuario"},{"index":3,"instruction":"Verificar que supervisor_can_access_user() retorna true","expectedOutcome":"DB function verifica que school del usuario está en red del supervisor"}]'::jsonb WHERE name = 'NS-4: Supervisor visualiza detalles de usuario DENTRO de su red' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que la funcionalidad opera correctamente","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Verificar que supervisor_can_access_user() retorna false","expectedOutcome":"DB function verifica que school del usuario NO está en red del supervisor"}]'::jsonb WHERE name = 'NS-5: Supervisor intenta ver detalles de usuario FUERA de su red' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor con red vacía","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página sin datos"},{"index":3,"instruction":"Verificar que queries retornan arrays vacíos","expectedOutcome":"if (networkSchools && networkSchools.length > 0) {} no ejecuta"}]'::jsonb WHERE name = 'NS-6: Red con cero colegios asignados' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Sesión 1: Iniciar sesión como supervisor.qa1@fne.cl (red A)","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Sesión 2: Iniciar sesión como supervisor.qa2@fne.cl (red B)","expectedOutcome":"Se accede al dashboard"},{"index":3,"instruction":"Ambas sesiones: Verificar que la funcionalidad opera correctamente","expectedOutcome":"Cada supervisor ve solo sus propios datos de red"},{"index":4,"instruction":"Verificar que red_id filtering es per-user via session.user.id","expectedOutcome":"Sin shared state, sin cross-network leakage"}]'::jsonb WHERE name = 'NS-7: Dos supervisores de diferentes redes ven el mismo endpoint' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Abrir componente AdvancedFilters","expectedOutcome":"Dropdown de colegios muestra TODOS los colegios del sistema"},{"index":3,"instruction":"Verificar que supervisor puede VER nombres pero NO puede acceder a datos","expectedOutcome":"API-level data scoping enforza red_id (sin data leak, solo name leak)"}]'::jsonb WHERE name = 'NS-8: Filtros avanzados cargan TODOS los colegios (info disclosure bajo)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral izquierda","expectedOutcome":"El elemento Mi Panel es visible"}]'::jsonb WHERE name = 'SV-1: Supervisor ve Mi Panel en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Perfil es visible"}]'::jsonb WHERE name = 'SV-2: Supervisor ve Mi Perfil en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Mi Aprendizaje es visible"}]'::jsonb WHERE name = 'SV-3: Supervisor ve Mi Aprendizaje en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"Verificar si Reportes es visible"},{"index":3,"instruction":"Si visible: verificar permission en DB","expectedOutcome":"RBAC permission system otorgó acceso"},{"index":4,"instruction":"Si no visible: confirmar que supervisor no tiene permission","expectedOutcome":"Sin permission grant en DB"}]'::jsonb WHERE name = 'SV-4: Supervisor ve Reportes en la barra lateral (condicional - RBAC)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"Verificar si Feedback es visible"},{"index":3,"instruction":"Revisar Sidebar.tsx para restrictedRoles de docente-assessments","expectedOutcome":"Si supervisor en lista, visible; si no, oculto"}]'::jsonb WHERE name = 'SV-5: Supervisor ve Feedback en la barra lateral (condicional - restrictedRoles)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"Verificar si Espacio Colaborativo es visible"},{"index":3,"instruction":"Si visible: confirmar que supervisor es miembro de comunidad","expectedOutcome":"Membership verificado"},{"index":4,"instruction":"Si no visible: confirmar que supervisor NO es miembro de comunidad","expectedOutcome":"No membership"}]'::jsonb WHERE name = 'SV-6: Supervisor ve Espacio Colaborativo en la barra lateral (condicional - comunidad)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que se muestran tarjetas: schoolsOverview, communityHealth, performanceMetrics","expectedOutcome":"Tarjetas visibles con datos de red"}]'::jsonb WHERE name = 'SV-7: Supervisor ve tarjetas de dashboard (condicional - datos poblados)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral completa","expectedOutcome":"El elemento Cursos NO es visible"}]'::jsonb WHERE name = 'SV-8: Supervisor NO ve Cursos en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Usuarios NO es visible"}]'::jsonb WHERE name = 'SV-9: Supervisor NO ve Usuarios en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Escuelas NO es visible"}]'::jsonb WHERE name = 'SV-10: Supervisor NO ve Escuelas en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Redes de Colegios NO es visible"}]'::jsonb WHERE name = 'SV-11: Supervisor NO ve Redes de Colegios en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Revisión de Quizzes NO es visible"}]'::jsonb WHERE name = 'SV-12: Supervisor NO ve Revisión de Quizzes en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Procesos de Cambio NO es visible"}]'::jsonb WHERE name = 'SV-13: Supervisor NO ve Procesos de Cambio en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Noticias NO es visible"}]'::jsonb WHERE name = 'SV-14: Supervisor NO ve Noticias en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Eventos NO es visible"}]'::jsonb WHERE name = 'SV-15: Supervisor NO ve Eventos en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Gestión NO es visible"}]'::jsonb WHERE name = 'SV-16: Supervisor NO ve Gestión en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Configuración NO es visible"}]'::jsonb WHERE name = 'SV-17: Supervisor NO ve Configuración en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Expandir menú Consultorías si existe","expectedOutcome":"El elemento Asignación de Consultores NO es visible en el submenu"}]'::jsonb WHERE name = 'SV-18: Supervisor NO ve Asignación de Consultores en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Rutas de Aprendizaje NO es visible"}]'::jsonb WHERE name = 'SV-19: Supervisor NO ve Rutas de Aprendizaje en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Matriz de Asignaciones NO es visible"}]'::jsonb WHERE name = 'SV-20: Supervisor NO ve Matriz de Asignaciones en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento QA Testing NO es visible"}]'::jsonb WHERE name = 'SV-21: Supervisor NO ve QA Testing en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Observar la barra lateral","expectedOutcome":"El elemento Vías de Transformación NO es visible"}]'::jsonb WHERE name = 'SV-22: Supervisor NO ve Vías de Transformación en la barra lateral' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor con red_id NULL","expectedOutcome":"Se accede al sistema"},{"index":2,"instruction":"Navegar a la página de Panel Principal","expectedOutcome":"Se muestra dashboard con estado vacío"},{"index":3,"instruction":"Verificar que el sistema maneja correctamente la ausencia de red","expectedOutcome":"APIs retornan arrays vacíos, sin errores de runtime"}]'::jsonb WHERE name = 'EC-1: Supervisor sin asignación de red (red_id es null) intenta acceder' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como usuario con roles supervisor_de_red y docente","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Verificar que las funcionalidades de supervisor son accesibles","expectedOutcome":"Se muestran opciones de supervisor"},{"index":3,"instruction":"Verificar que las funcionalidades de docente también son accesibles","expectedOutcome":"Se muestran opciones de docente"},{"index":4,"instruction":"Verificar que los controles de permiso validan correctamente","expectedOutcome":"Los roles se validan con roles.some() correctamente"}]'::jsonb WHERE name = 'EC-2: Supervisor tiene múltiples registros de rol (supervisor_de_red + docente)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor con red vacía","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página sin datos"},{"index":3,"instruction":"Verificar que no hay errores de runtime","expectedOutcome":"APIs retornan arrays vacíos gracefully"}]'::jsonb WHERE name = 'EC-3: Red con cero colegios asignados' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se obtiene sesión válida"},{"index":2,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos para realizar esta acción"},{"index":3,"instruction":"Intentar realizar la acción directamente","expectedOutcome":"Los datos se muestran correctamente con datos filtrados por red"}]'::jsonb WHERE name = 'EC-4: Supervisor accede a API directamente (bypass de UI)' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Iniciar sesión como supervisor.qa@fne.cl","expectedOutcome":"Se accede al dashboard"},{"index":2,"instruction":"Navegar a la página de Reportes Detallados","expectedOutcome":"Se muestra la página"},{"index":3,"instruction":"Esperar a que la sesión expire (o simular expiración)","expectedOutcome":"Se redirige a página de login"},{"index":4,"instruction":"Verificar que no hay datos obsoletos visibles","expectedOutcome":"No se muestra contenido antiguo de sesión anterior"}]'::jsonb WHERE name = 'EC-5: Sesión del supervisor expira en página de reportes' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Pestaña 1: Iniciar sesión como supervisor.qa1@fne.cl (red A)","expectedOutcome":"Se accede al dashboard del supervisor 1"},{"index":2,"instruction":"Pestaña 2: Iniciar sesión como supervisor.qa2@fne.cl (red B)","expectedOutcome":"Se accede al dashboard del supervisor 2"},{"index":3,"instruction":"Ambas pestañas: Ver dashboard","expectedOutcome":"Cada supervisor ve solo sus propios datos de red"},{"index":4,"instruction":"Verificar que red_id filtering es per-user","expectedOutcome":"Sin shared state, sin cross-network leakage"}]'::jsonb WHERE name = 'EC-6: Dos supervisores de diferentes redes ven el mismo dashboard' AND role_required = 'supervisor_de_red';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Como admin: asignar supervisor_de_red con school_id poblado en user_roles","expectedOutcome":"Registro se crea sin errores"},{"index":2,"instruction":"Iniciar sesión como supervisor con school_id Y red_id poblados","expectedOutcome":"Se accede al dashboard"},{"index":3,"instruction":"Verificar que red_id es usado para filtrado (no school_id)","expectedOutcome":"APIs usan red_id, no school_id (migration comments clarify)"},{"index":4,"instruction":"Documentar como edge case conceptual","expectedOutcome":"No causa runtime error pero conceptualmente inconsistente con role definition"}]'::jsonb WHERE name = 'EC-7: Admin asigna supervisor a colegio específico (edge case conceptual)' AND role_required = 'supervisor_de_red';

-- === DOCENTE (6 scenarios needing rewrite — no seed file) ===

UPDATE qa_scenarios SET steps = '[{"index":1,"route":"/admin/user-management","instruction":"Intentar acceder a la página de Gestión de Usuarios","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Se muestra un mensaje de acceso denegado o se redirige al Panel Principal"},{"index":2,"instruction":"Verificar que \"Usuarios\" no aparece en el sidebar","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"\"Usuarios\" NO es visible en la barra lateral"}]'::jsonb WHERE name = 'PB-02: Docente intenta crear un usuario' AND role_required = 'docente';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que no existe un formulario de edición de perfil de otros usuarios accesible desde la interfaz","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"No hay opción visible para editar perfiles de otros usuarios"},{"index":2,"instruction":"Verificar que el sistema no permite modificar datos de otros usuarios","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Aparece un mensaje de error indicando que no tiene permisos"}]'::jsonb WHERE name = 'PB-03: Docente intenta editar perfil de otro usuario' AND role_required = 'docente';
UPDATE qa_scenarios SET steps = '[{"index":1,"route":"/admin/schools","instruction":"Intentar acceder a la página de Escuelas","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Se muestra un mensaje de acceso denegado o se redirige al Panel Principal"},{"index":2,"instruction":"Verificar que \"Escuelas\" no aparece en el sidebar","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"\"Escuelas\" NO es visible en la barra lateral"}]'::jsonb WHERE name = 'PB-05: Docente intenta gestionar escuelas' AND role_required = 'docente';
UPDATE qa_scenarios SET steps = '[{"index":1,"route":"/admin/network-management","instruction":"Intentar acceder a la página de Gestión de Redes","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Se muestra un mensaje de acceso denegado o se redirige al Panel Principal"},{"index":2,"instruction":"Verificar que \"Redes de Colegios\" no aparece en el sidebar","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"\"Redes de Colegios\" NO es visible en la barra lateral"}]'::jsonb WHERE name = 'PB-06: Docente intenta gestionar redes de colegios' AND role_required = 'docente';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Verificar que no hay botón de \"Asignar curso\" en la vista de cursos","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Ningún botón de asignación visible"},{"index":2,"instruction":"Verificar que el sistema no permite asignar cursos a otros usuarios","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"El sistema muestra un mensaje de error de permisos o no ofrece la funcionalidad"}]'::jsonb WHERE name = 'PB-11: Docente intenta asignar cursos a otros' AND role_required = 'docente';
UPDATE qa_scenarios SET steps = '[{"index":1,"instruction":"Intentar acceder directamente a páginas de administración escribiendo la URL en el navegador","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"El sistema redirige al Panel Principal o muestra un mensaje de acceso denegado"},{"index":2,"instruction":"Intentar acceder a la página de Escuelas escribiendo la URL directamente","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"El sistema redirige al Panel Principal o muestra un mensaje de acceso denegado"},{"index":3,"instruction":"Verificar que ninguna página de administración es accesible directamente","captureOnFail":true,"captureOnPass":false,"expectedOutcome":"Todas las páginas restringidas muestran mensaje de acceso denegado o redirigen"}]'::jsonb WHERE name = 'EC-06: Docente accede a endpoints API directamente (bypass sidebar)' AND role_required = 'docente';

COMMIT;
